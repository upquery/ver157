var arrGerarCustom=[],uploadFile="",draft="",chartAnimation=!0,chartRenderer="canvas",sticky="N",ace_editor,timer_rel="",mousedown=!1,v_shift=!1,vision="in",touchdrag=1,touchdragY=0,respostaAjax="",tela="DEFAULT",telaAnterior="DEFAULT",textTalk="",dscript="",error="false",time="",msgtime="",cursorx="",cursory="",colunas="",timeout=0,tr="",auto_refresh="",notify=new Object,lasturl="",alpha="",dashlocation="",dashorder="",projecoes="",selectedb="",telasup="",telacustom="";const PACKAGES=["UPLOAD","FCL","BRO","FUN","UPQUERY","IMP","GBL","OBJ","UP_REL","AUX","COM","CORE"],FILES=["JS","CSS"];var pell,xmlhttp;xmlhttp=new XMLHttpRequest;var completo=new Array,down,up,cliq;function eventos(e){if(e.classList.contains("relatorio")){clearInterval(timer_rel);var t=e.id.replace("trl","");-1!=document.getElementById(t+"_button").innerHTML.indexOf("EXECUTANDO")&&(timer_rel=setInterval(function(){call("lista_rel","prm_objeto="+t+"&prm_screen="+tela+"&prm_cod=&prm_lista=check","up_rel").then(function(e){document.getElementById(t+"_button").innerHTML=e,-1==e.indexOf("EXEC")&&(clearInterval(timer_rel),setTimeout(function(){document.getElementById(t+"_button").classList.remove("loading"),alerta("feed-fixo",e),-1==e.indexOf("EXCEDEU")&&call("lista_rel","prm_objeto="+t+"&prm_screen="+tela+"&prm_cod="+t+"&prm_lista=file","up_rel").then(function(e){document.getElementById(t+"_lista").innerHTML=e})},1e3))})},1e3))}if(e.querySelector(".wd_move")){var a=e.querySelector(".wd_move");-1!=e.id.indexOf("trl")||-1!=e.id.indexOf("temp")?(a.addEventListener("mousedown",function(){e.style.setProperty("opacity","0.7")}),a.addEventListener("mouseup",function(){e.style.setProperty("opacity","1")}),a.addEventListener("touchstart",function(){e.style.setProperty("opacity","0.7")}),a.addEventListener("touchend",function(){e.style.setProperty("opacity","1")})):(a.addEventListener("mousedown",function(){invisible_touch(this.parentNode.id,"start")}),a.addEventListener("mouseup",function(){invisible_touch(this.parentNode.id,"stop")}),a.addEventListener("touchstart",function(){invisible_touch(this.parentNode.id,"start")}),a.addEventListener("touchend",function(){invisible_touch(this.parentNode.id,"stop")})),a.addEventListener("dblclick",function(){curtain(""),scale(this.id.replace("_ds",""))})}if(e.classList.contains("front")&&0!=get(e.id+"c")){var n=get(e.id+"c").querySelector("tbody").children[0].querySelectorAll(".fix:not(.print)").length-2;if(get(e.id+"c").querySelector(".geral")){var r=get(e.id+"c").querySelector(".geral").querySelectorAll("td.inv"),o=r.length;for(let e=n;e<o;e++)r[e]&&r[e].remove()}}}function appendar(e,t,a){loading("x");var n="";call("show_objeto",e,"obj").then(function(r){MAIN;0!=dashlocation.length&&-1==e.indexOf("prm_drill=Y")&&(document.getElementById(dashlocation),dashlocation="");var o=document.createElement("div");if(o.innerHTML=r,r.toLowerCase().startsWith("<script>")){n=o.children[1].id;var l=o.children[1]}else{n=o.children[0].id;l=o.children[0]}var i=MAIN;-1!=e.toLowerCase().indexOf("prm_drill=c")?(i=document.getElementById("ARTICLE_CUSTOMIZACAO")).innerHTML="":t?i=document.getElementById(t):a.length>0?i=document.getElementById(a):document.querySelector(".movingarticle")&&-1==e.indexOf("prm_drill=Y")&&(i=document.querySelector(".movingarticle")),i.appendChild(l)}).then(function(){LAYER&&LAYER.classList.contains("ativo")&&loading(),alerta("feed-fixo",TR_OC),dashorder="";let e=get(n);(e.classList.contains("front")||e.classList.contains("file"))&&ajustar(n),(e.classList.contains("grafico")||e.classList.contains("medidor")||e.classList.contains("dados"))&&renderChart(n)}).then(function(){let e=get(n);(e.classList.contains("front")||e.classList.contains("full"))&&topDistance(n),eventos(e)})}function ajustar(e){if(void 0!==e&&document.getElementById(e+"c")){if(document.getElementById(e+"c").classList.add("sticky"),document.getElementById(e+"_ds")){var t=document.getElementById(e+"_ds"),a=t.innerHTML;t.innerHTML="_",t.innerHTML=a,document.getElementById(e+"c").addEventListener("click",click_evento),document.getElementById(e+"c").addEventListener("dblclick",dbl_click_evento),document.getElementById(e+"c").addEventListener("mouseenter",function(){imgurlOver(e+"c")});var n=document.getElementById(e+"c").querySelectorAll(".print");for(let e=0;e<n.length;e++)n[e].parentNode.setAttribute("style",n[e].innerHTML),"TD"==n[e].tagName.toUpperCase()&&n[e].parentNode.classList.add("destaqueLinha")}delete window.obj}}function imgurlOver(e){var t=document.getElementById(e).querySelectorAll("[data-url]:not([data-imglinked]");for(let e=0;e<t.length;e++)t[e].addEventListener("mouseenter",over_evento),t[e].addEventListener("mouseleave",out_evento),t[e].setAttribute("data-imglinked","true")}function ajustaIframe(e){document.getElementById(e+"header")||(startTimer=setInterval(function(){if(null!=document.getElementById(e+"c")){var t=document.getElementById(e+"c").cloneNode(!0);t.id="";var a=document.getElementById(e+"c").getElementsByTagName("thead");if(a[0]){for(let e=0;e<a.length;e++)a[e].style.visibility="collapse";document.getElementById(e+"header").appendChild(t)}if(document.getElementById(e+"ds")){var n=document.getElementById(e+"_ds"),r=n.innerHTML;n.innerHTML="_",n.innerHTML=r}clearInterval(startTimer),document.getElementById(e+"c").addEventListener("click",click_evento),document.getElementById(e+"c").addEventListener("dblclick",dbl_click_evento),smartScroll(e)}},10))}function smartScroll(e){if(document.getElementById(e+"dv2")){var t=new Array;t[0]=document.getElementById(e+"dv2"),t[1]=document.getElementById(e+"fixed"),t[2]=document.getElementById(e+"c"),t[3]=document.getElementById(e+"header"),t[4]=document.getElementById(e);var a=t[0].getAttribute("data-maxwidth"),n=t[1].children.length,r=t[0].getAttribute("data-maxheight"),o=t[0].clientHeight+t[3].clientHeight,l=o-19+"px",i=o-3+"px";if(n>0){var d=t[1].querySelectorAll("ul"),s=d.length;t[0].addEventListener("scroll",function(){for(let e=0;e<s;e++)d[e].style.marginTop="-"+t[0].scrollTop+"px"})}t[1].addEventListener("scroll",function(){t[0].style.setProperty("margin-top","-"+this.scrollTop+"px")}),(t[2].clientWidth>a||t[2].clientWidth>t[0].clientWidth)&&(t[0].addEventListener("scroll",function(){t[3].scrollLeft=t[0].scrollLeft,this.scrollLeft>"210"&&-1==t[0].parentNode.className.indexOf("scaled")?t[1].getAttribute("data-width")>t[3].clientWidth?t[1].style.setProperty("width",t[3].clientWidth+"px"):t[1].style.setProperty("width",parseInt(t[1].getAttribute("data-width"))+1+"px"):t[1].style.setProperty("width","0")}),t[2].addEventListener("mouseenter",function(){t[0].classList.add("flow"),r<t[2].clientHeight&&-1==t[4].className.indexOf("expand")&&t[1].style.setProperty("max-height",l)}),t[4].addEventListener("mouseleave",function(){t[0].classList.remove("flow"),r<t[2].clientHeight&&-1==this.className.indexOf("expand")&&t[1].style.setProperty("max-height",i)})),r<t[2].clientHeight&&(t[2].addEventListener("mouseenter",function(){t[0].style.setProperty("overflow-y","auto"),-1==PRINCP.className.indexOf("mac")&&-1==PRINCP.className.indexOf("mobile")?(t[2].clientWidth&&r<t[2].clientHeight&&t[2].clientWidth>a&&t[0].classList.add("padding"),document.getElementById(e+"dv2").getAttribute("data-maxheight")<t[2].clientHeight&&t[2].clientWidth<a&&t[3].classList.add("margin")):-1==navigator.userAgent.indexOf("Chrome")?t[2].clientWidth<parseInt(t[0].style.maxWidth)&&t[0].classList.remove("padding"):(t[2].clientWidth>a&&t[0].classList.add("padding"),t[2].clientWidth<a&&t[3].classList.add("margin"))}),t[4].addEventListener("mouseleave",function(){t[0].style.setProperty("overflow-y","hidden"),t[0].classList.remove("padding"),t[2].clientWidth<a&&t[3].classList.remove("margin")}))}}function apscreen(e,t){var a,n=new XMLHttpRequest;n.open("get",e,"false"),a="in"==t?"in":t,n.onreadystatechange=function(){if(4==n.readyState){if(-1!=n.responseText.indexOf("LOGOUT"))return void logout();MAIN.innerHTML=n.responseText,icarrega("dwu.fcl.ajscreen?prm_screen="+a),MAIN.children[0]&&"data_list"==MAIN.children[0].id&&ajustar(MAIN.children[0].className)}},n.send(null)}function apOthers(e,t){var a=new XMLHttpRequest;a.open("get",e,"true"),a.onreadystatechange=function(){switch(t){case"space":document.getElementById("space")?document.getElementById("space").innerHTML=a.responseText:(document.getElementById("space-options").innerHTML=a.responseText,0==a.responseText.length?document.getElementById("space-options").parentNode.style.setProperty("display","none"):document.getElementById("space-options").parentNode.style.setProperty("display","inline"));break;case"float":-1!=a.responseText.indexOf("div")&&(document.getElementById("float-icon").className="visible")}},a.send(null)}function mac(){-1!=navigator.userAgent.toString().toLowerCase().indexOf("mac")&&PRINCP.setAttribute("class","mac"),(-1!=navigator.userAgent.toString().toLowerCase().indexOf("iphone")||-1!=navigator.userAgent.toString().toLowerCase().indexOf("ipod")||-1!=navigator.userAgent.toString().toLowerCase().indexOf("android"))&&PRINCP.setAttribute("class","mobile")}function callnotify(e,t,a){notify.obj.body=t,new Notification(e,notify.obj)}function toggleFullScreen(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.body.mozRequestFullScreen.call(document.body):document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}document.getElementById("princp")&&("mobile"==document.getElementById("princp").className?(down="touchstart",up="touchend",cliq="touchend"):(down="mousedown",up="mouseup",cliq="click")),document.addEventListener(cliq,clickStart),Notification.requestPermission(function(){notify.obj={body:"",icon:"dwu.fcl.download?arquivo=ipad.png"},notify.permission=Notification.permission});var orient="";function toexcel(e){var t=document.createElement("a");t.id="excel",MAIN.appendChild(t);var a="data:application/vnd.ms-excel;base64,",n='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>\x3c!--[if gte mso 9]><xml "encoding=utf-8"><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><div id="main"><table id="'+e+'c">{table}</table></main></body></html>',r=function(e,t){return e.replace(/{(\w+)}/g,function(e,a){return t[a]})},o=document.getElementById(e+"dv2");if(!o)return!1;var l=document.createElement("table");l.innerHTML=o.innerHTML;var i=l.querySelectorAll(".invisible"),d=i.length;for(let e=0;e<d;e++)i[e].parentNode.removeChild(i[e]);if(document.getElementById(e)){var s=document.getElementById(e).getElementsByTagName("style"),c=s.length,m="";for(let e=0;e<c;e++)s[e]&&-1!=s[e].innerHTML.indexOf("display: none;")&&(m+=s[e].innerHTML);var u=l.getElementsByTagName("tr"),p=u.length;for(let e=0;e<p;e++)u[e]&&((!u[e].children[0].hasAttribute("style")||u[e].children[0].getAttribute("colspan")>1||0!=u[e].className.indexOf("nivel"))&&(u[e].children[0].hasAttribute("data-ordem")||(u[e].children[0].getAttribute("colspan")<2?u[e].children[0].remove():u[e].children[0].setAttribute("colspan",parseInt(u[e].children[0].getAttribute("colspan"))-1))),u[e].classList.contains("total")?(-1!=m.indexOf("li.total { display: none; }")||-1!=m.indexOf("tr.total { display: none; }")||u[e].classList.contains("st-S"))&&(u[e].className="remove"):u[e].classList.contains("total normal")&&(-1==m.indexOf("li.total.normal { display: none; }")&&-1==m.indexOf("tr.total.normal { display: none; }")||(u[e].className="remove")))}var g=l.querySelectorAll(".remove"),f=g.length;for(let e=0;e<f;e++)g[e].remove();var v=l.getElementsByTagName("th");for(let t=v.length-1;t>=0;--t)if(v[t]){let a;a=document.getElementById(e+"c").getElementsByTagName("th")[t+1],"none"==window.getComputedStyle(a).display&&v[t].remove()}for(let t=(b=(h=l.getElementsByTagName("td")).length)-1;t>=0;--t)if(h[t]){let a;a=document.getElementById(e+"c").getElementsByTagName("td")[t],"none"==window.getComputedStyle(a).display&&h[t].remove()}for(let t=0;t<b-1;t++)h[t]&&(!(h[t].title.length>h[t].innerHTML.length)||h[t].classList.contains("setadown")&&h[t].classList.contains("seta")||(h[t].innerHTML=h[t].title),-1!=h[t].innerHTML.indexOf("background")&&(h[t].innerHTML=""),"S"!=get("excel_mask_"+e).value&&(h[t].innerHTML=h[t].innerHTML.replace(/\./g,"")),h[t].setAttribute("onclick",""),h[t].removeAttribute("data-i"),h[t].removeAttribute("data-p"),h[t].removeAttribute("data-subquery"),h[t].removeAttribute("data-ordem"),h[t].removeAttribute("data-valor"),-1!=h[t].innerHTML.indexOf("!important")&&h[t].parentNode.removeChild(h[t]));for(let e=0;e<b-1;e++)h[e]&&(h[e].classList.contains("setadown")||h[e].classList.contains("seta"))&&h[e].remove();let y="HTML",_=document.getElementById("dados_"+e);if(_&&(y=_.getAttribute("data-formato_excel").toUpperCase()),"XLSX"==y.toUpperCase()){var h,b;for(let e=(b=(h=l.getElementsByTagName("td")).length)-1;e>=0;--e)h[e]&&(h[e].innerHTML=h[e].innerHTML.replace(/\./g,"").replace(/\,/g,".").replace(/\%/g,""));try{var E=XLSX.utils.book_new(),I=XLSX.utils.table_to_sheet(l)}catch(e){alerta("feed-fixo","N&atilde;o foi poss&iacute;vel localizar a fun&ccedil;&atilde;o de exporta&ccedil;&atilde;o de planilhas, entre em contato com o administrador do sistema")}XLSX.utils.book_append_sheet(E,I,"Planilha1"),XLSX.writeFile(E,e.substr(0,e.length-1)+".xlsx"),setTimeout(function(){MAIN.removeChild(t)},1e3)}else{var x={worksheet:"Consulta",table:l.innerHTML};if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([r(n,x)],{type:a}),e.substr(0,e.length-1)+".xls");document.getElementById("excel").href=a+window.btoa(unescape(encodeURIComponent(r(n,x).replace(/&amp;/g,"E").replace(/&/g,"E").replace(/onclick="" class="dir" data-p=""/g,"").replace(/´/g," ").replace(/onclick=""/g,"").replace(/class="setadown" data-subquery=""/g,"")))),document.getElementById("excel").download=e.substr(0,e.length-1)+".xls",document.getElementById("excel").click(),setTimeout(function(){MAIN.removeChild(t)},1e3)}}function browserToExcel(e){var t=document.createElement("a");t.id="excel",main.appendChild(t);var a="data:application/vnd.ms-excel;base64,",n='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>\x3c!--[if gte mso 9]><xml "encoding=utf-8"><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><table>{table}</table></body></html>',r=function(e,t){return e.replace(/{(\w+)}/g,function(e,a){return t[a]})},o=document.getElementById(e+"dv2"),l=document.createElement("table");l.innerHTML=o.innerHTML;var i=l.querySelectorAll(".invisible"),d=i.length;for(let e=0;e<d;e++)i[e].parentNode.removeChild(i[e]);if(document.getElementById(e)){document.getElementById(e+"_ds").innerText;var s=document.getElementById(e).getElementsByTagName("style"),c=s.length,m="";for(let e=0;e<c;e++)s[e]&&-1!=s[e].innerHTML.indexOf("display: none;")&&(m+=s[e].innerHTML);var u=l.getElementsByTagName("tr"),p=u.length;for(let e=0;e<p;e++)u[e]&&((!u[e].children[0].hasAttribute("style")||u[e].children[0].getAttribute("colspan")>1||0!=u[e].className.indexOf("nivel"))&&(u[e].children[0].hasAttribute("data-ordem")||(u[e].children[0].getAttribute("colspan")<2?u[e].children[0].remove():u[e].children[0].setAttribute("colspan",parseInt(u[e].children[0].getAttribute("colspan"))-1))),u[e].classList.contains("total")?(-1!=m.indexOf("li.total { display: none; }")||-1!=m.indexOf("tr.total { display: none; }")||u[e].classList.contains("st-S"))&&(u[e].className="remove"):u[e].classList.contains("total normal")&&(-1==m.indexOf("li.total.normal { display: none; }")&&-1==m.indexOf("tr.total.normal { display: none; }")||(u[e].className="remove")))}var g=l.querySelectorAll(".remove, .inv"),f=g.length;for(let e=0;e<f;e++)g[e].remove();var v=l.getElementsByTagName("td"),y=v.length;for(let e=0;e<y-1;e++)v[e]&&(!(v[e].title.length>v[e].innerHTML.length)||v[e].classList.contains("setadown")&&v[e].classList.contains("seta")||(v[e].innerHTML=v[e].title),-1!=v[e].innerHTML.indexOf("background")&&(v[e].innerHTML=""),-1==v[e].innerHTML.indexOf("-")&&-1==v[e].innerHTML.indexOf(".")||v[e].setAttribute("style","mso-number-format:\\@"),v[e].setAttribute("onclick",""),v[e].removeAttribute("data-i"),v[e].removeAttribute("data-p"),v[e].removeAttribute("data-subquery"),v[e].removeAttribute("data-ordem"),v[e].removeAttribute("data-valor"),-1!=v[e].innerHTML.indexOf("!important")&&v[e].parentNode.removeChild(v[e]));for(let e=0;e<y-1;e++)v[e]&&(v[e].classList.contains("setadown")||v[e].classList.contains("seta"))&&v[e].remove();var _={worksheet:"Consulta",table:l.innerHTML};if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([r(n,_)],{type:a}),e.substr(0,e.length-1)+".xls");document.getElementById("excel").href=a+window.btoa(unescape(encodeURIComponent(r(n,_).replace(/&amp;/g,"E").replace(/&/g,"E").replace(/onclick="" class="dir" data-p=""/g,"").replace(/´/g," ").replace(/onclick=""/g,"").replace(/class="setadown" data-subquery=""/g,"")))),document.getElementById("excel").download=e.substr(0,e.length-1)+".xls",document.getElementById("excel").click(),setTimeout(function(){main.removeChild(t)},1e3)}function scale(e,t){var a=document.getElementById(e);if(document.getElementsByTagName("ARTICLE").length>0&&"A"==ADMIN){if(-1==e.indexOf("trl"))if(MAIN.querySelector(".selected"))if(MAIN.querySelector(".selected").id!=e){if(a.parentNode.id==MAIN.querySelector(".selected").parentNode.id){var n=MAIN.querySelector(".selected"),r=n.style.getPropertyValue("order"),o=a.style.getPropertyValue("order");a.style.setProperty("order",r),n.style.setProperty("order",o);var l=a.parentNode.children;for(let e=0;e<l.length;e++)ajax("fly","salva_posicao","prm_objeto="+l[e].id+"&prm_screen="+a.parentNode.id+"&prm_posx="+l[e].style.getPropertyValue("order")+"&prm_posy=&prm_zindex=",!1);MAIN.querySelector(".selected").classList.toggle("selected")}}else a.classList.toggle("selected");else a.classList.toggle("selected")}else if(-1!=a.className.indexOf("scaled")||-1!=a.className.indexOf("img")||-1!=a.className.indexOf("icone")||-1!=a.className.indexOf("texto")||-1!=a.className.indexOf("float"))a.getAttribute("data-left")&&a.style.setProperty("left",a.getAttribute("data-left")),a.getAttribute("data-top")&&a.style.setProperty("top",a.getAttribute("data-top")),a.classList.remove("scaled"),a.style.transform="",a.style.webkitTransform="",a.style.zIndex=a.getAttribute("data-zindex"),localStorage.setItem("pos",0),"direct"==t&&(PRINCP.style.setProperty("overflow","visible"),PRINCP.style.removeProperty("height"),document.getElementById("html").style.setProperty("overflow","visible"),document.getElementById("layer3").style.setProperty("height","0"),document.getElementById("prev").style.setProperty("display","none"),document.getElementById("next").style.setProperty("display","none"));else if(-1!=a.className.indexOf("front")){for(;"STYLE"==document.getElementById(e).lastElementChild.tagName;)document.getElementById(e).lastElementChild.remove();setTimeout(function(){topDistance(e)},1e3),-1==a.className.indexOf("expand")?a.className=a.className+" expand":a.className=a.className.replace(" expand","")}else-1!=a.className.indexOf("relatorio")||a.classList.contains("drill")||(a.classList.add("scaled"),setTimeout(function(){for(let e=35;e>12;e--)if(a.offsetWidth*(e/10)+e/10*80<window.innerWidth&&a.offsetHeight*(e/10)+15<window.innerHeight){a.style.transform="scale("+e/10+")",a.style.webkitTransform="scale("+e/10+")";break}a.style.setProperty("left",window.innerWidth/2-a.offsetWidth/2+"px"),a.style.setProperty("top",window.innerHeight/2-a.offsetHeight/2+"px"),a.style.zIndex="800",curtain("only"),"direct"==t&&(PRINCP.style.setProperty("overflow","hidden"),PRINCP.style.setProperty("height","inherit"),document.getElementById("html").style.setProperty("overflow","hidden"),document.getElementById("layer3").style.setProperty("height","100%"),document.getElementById("prev").style.setProperty("display","flex"),document.getElementById("next").style.setProperty("display","flex"))},100))}function upload(e){var t=document.getElementById(e).files;for(let e=0;e<t.length;e++){var a=new Blob([t[e]]),n=new FormData;n.append("prm_arquivo",a,"123"),ajax("upload","painel",n,!1,t[e].type,t[e].size)}}function destaque(e,t,a){var n,r=document.getElementById("destaque-usuario-"+e).title,o=document.getElementById("destaque-objeto-"+e).title,l=document.getElementById("destaque-coluna-"+e).title,i=document.getElementById("destaque-condicao-"+e).title,d=encodeURIComponent(document.getElementById("destaque-conteudo-"+e).title.trim()),s=document.getElementById("destaque-tipo-"+e).getAttribute("data-default"),c=document.getElementById("destaque-icorfundo-"+e).getAttribute("data-default"),m=document.getElementById("destaque-icorfonte-"+e).getAttribute("data-default");if("DELETE"!=t){var u=document.getElementById(a);if(n=encodeURIComponent(u.value.trim()),u.setAttribute("data-default",u.value.trim()),"SELECT"==u.tagName)for(let e=0;e<u.children.length;e++)u.children[e].value.trim()==u.value.trim()?u.children[e].setAttribute("selected","selected"):u.children[e].removeAttribute("selected")}else n="";call("edit_blink","prm_usuario="+r+"&prm_objeto="+o+"&prm_coluna="+l+"&prm_condicao="+i+"&prm_conteudo="+d+"&prm_valor="+n+"&prm_tipo="+s+"&prm_corfundo="+c+"&prm_corfonte="+m+"&prm_alter="+t).then(function(a){document.getElementById("fechar_sup").setAttribute("data-reloado",o),alerta("feed-fixo",a),-1==a.indexOf("FAIL")&&"DELETE"==t&&document.getElementById("destaque-usuario-"+e).parentNode.parentNode.remove()})}function input(e,t){var a,n=e.which,r=e.keyCode;switch(t){case"rotulo":return!0;case"default":return 92!=n;case"integer":return 13==n?(e.target.blur(),!1):0==n&&37!=r&&39!=r||(0==n||8==n||-1!="0123456789".indexOf(String.fromCharCode(n)));case"hora":return 13==n?(e.target.blur(),!1):0==n&&37!=r&&39!=r||(0==n||8==n||-1!="0123456789:".indexOf(String.fromCharCode(n)));case"volume":return 0==n||8==n||46==n||44==n||-1!="0123456789".indexOf(String.fromCharCode(n));case"valor":return 0==n||8==n||44==n||-1!="0123456789".indexOf(String.fromCharCode(n));case"number":return 13==n?(e.target.blur(),!1):0==n&&37!=r&&39!=r?(e.target.blur(),!0):0==n||8==n||44==n&&-1==e.target.innerHTML.indexOf(",")||45==n||-1!="0123456789".indexOf(String.fromCharCode(n));case"nobr":return a=new RegExp("^[<*>]+"),0==n||8==n||46==n||0==a.test(String.fromCharCode(n));case"email":return a=new RegExp("^[a-zA-Z0-9-_@!&#]+"),0==n||8==n||46==n||1==a.test(String.fromCharCode(n));case"login":return a=new RegExp("^[a-zA-Z0-9]+"),0==n||8==n||46==n||1==a.test(String.fromCharCode(n));case"ID":return a=new RegExp("^[a-zA-Z0-9_]+"),0==n||8==n||46==n||1==a.test(String.fromCharCode(n))}}window.addEventListener("resize",function(){window.orientation!=orient&&(setTimeout(function(){for(var e=document.querySelectorAll(".dragme"),t=e.length,a=0;a<t;a++)document.getElementById("dados_"+e[a].id)&&renderChart(e[a].id)},10),orient=window.orientation)}),document.addEventListener("visibilitychange",function(){get("verify-post")&&("hidden"==document.visibilityState?(vision="out",clearInterval(msgtime)):(vision="in",clearInterval(msgtime),ajax("data-","check_text_post","",!0,"verify-post")))});var zindex_abs=5;function mask(e,t,a){var n=document.getElementById(e),r=String.fromCharCode(t.which),o=n.selectionEnd,l=n.selectionEnd,i=n.selectionStart,d=new RegExp("^[a-zA-Z0-9]+"),s=a.split(""),c=n.value.split(""),m=s.length,u=[];for(let e=0;e<m;e++)if(o==e){if("8"==t.which){if(","==c[e-1]||"."==c[e-1])return n.selectionEnd=n.selectionEnd-1,t.preventDefault(),!1;i=l-=1}else if("46"==t.which){if(","==c[e]||"."==c[e])return n.selectionEnd=n.selectionEnd+1,n.selectionStart=n.selectionStart+1,t.preventDefault(),!1;i=l}else"G"==s[e]&&(u[e]=".",i=l+=1,e+=1),"D"==s[e]&&(u[e]=",",i=l+=1,e+=1);d.test(r)?(u[e]=r,i=","==c[e+1]||"."==c[e+1]?l+=2:l+=1):(u[e]=c[e],u[e-1]=c[e-1])}else u[e]=c[e];n.value=u.join(""),(t.which<36||t.which>41)&&(n.selectionEnd=l,n.selectionStart=i)}function mascara(e,t,a,n,r,o,l,i){i&&(38!=i.which&&40!=i.which||i.preventDefault());n=n||"999",o=o||"999999999999",l=l||"999999999999",r=r||"2",t=t||"R$",a=a||",";var d=e.value.replace(a,"").replace(t,"").trim(),s=e.selectionEnd;if(d.length<parseInt(r)+1)d.length<=1?e.value=(t+" 0"+a+"0"+d).trim():e.value=(t+" 0"+a+d).trim();else{var c=d.slice(0,e.value.replace(t,"").trim().length-(parseInt(r)+1)),m=d.slice(d.length-parseInt(r));"00"!=c&&""!=c||(c="0"),c.length>parseInt(n)&&(c=d.slice(1,c.length)),i&&(38==i.which&&(e.selectionEnd>e.value.indexOf(a)&&(m=("000000000"+(parseInt(m)+1)).substr(-r)),e.selectionEnd<=e.value.indexOf(a)&&(c=parseInt(c)+1)),40==i.which&&(e.selectionEnd>e.value.indexOf(a)&&parseInt(m)>0&&(m=("000000000"+(parseInt(m)-1)).substr(-r)),e.selectionEnd<=e.value.indexOf(a)&&parseInt(c)>0&&(c=parseInt(c)-1))),parseInt(c)>parseInt(o)&&(c=o),parseInt(m)>parseInt(l)&&(m=l),e.value=(t+" "+[parseInt(c),a,m].join("")).trim()}t.trim().length>0?s<t.length+1?(e.selectionEnd=t.length+1,e.selectionStart=t.length+1):d.length<1?e.selectionEnd=e.value.length:e.selectionEnd=s:e.selectionEnd=s}function titulo(e,t){document.getElementById("titulo").innerHTML=e.title,e.parentNode.parentNode.id&&"prefdrop"!=e.parentNode.parentNode.id&&(document.getElementById("info").innerHTML=e.parentNode.parentNode.id),"c"==t&&(document.getElementById("painel").innerHTML="")}function enc(e){return encodeURIComponent(e.replace(/\\/g,"").replace(/"/g,""))}function carrega(e){if(document.getElementById("content").innerHTML="",0!=e.length){loader("content");var t="dwu.fcl."+e;document.getElementById("frame").src=t}}function carregaPainel(e,t){document.getElementById("painel");call("menu","prm_menu="+e+"&prm_default="+(t=t||"")).then(function(e){document.getElementById("painel").innerHTML=e})}function carregaPainel_frame(e,t){var a=document.createElement("iframe");a.id="newframe",a.src=e,t.trim().length>1&&(a.className=t),a.style.setProperty("width","800px"),a.style.setProperty("height","26px"),document.getElementById("painel").innerHTML="",document.getElementById("painel").appendChild(a)}function icarrega(){var e,t="",a=document.querySelectorAll(".dragme.front"),n=a.length;for(e=0;e<n;e++){if(a[e].classList.contains("front")&&0!=get(a[e].id+"c")&&null!=get(a[e].id+"c").querySelector(".geral")){var r=get(a[e].id+"c").querySelector("tbody").children[1].querySelectorAll(".fix").length-2,o=get(a[e].id+"c").querySelector(".geral").querySelectorAll("td.inv"),l=o.length;for(let e=r;e<l;e++)o[e]&&o[e].remove()}if(t=a[e].id,document.getElementById(t)){if(document.getElementById(t+"c")){var i=(p=document.getElementById(t+"c").querySelectorAll(".print")).length;for(let e=0;e<i;e++)p[e].parentNode.setAttribute("style",p[e].innerHTML),"TD"==p[e].tagName.toUpperCase()&&p[e].parentNode.classList.add("destaqueLinha")}if(document.getElementById(t+"c")){var d=document.getElementById(t+"c");d.addEventListener("click",click_evento),d.addEventListener("dblclick",dbl_click_evento),d.addEventListener("mouseenter",function(){imgurlOver(this.id)})}}if(topDistance(t),document.getElementById(t+"_ds")){var s=document.getElementById(t+"_ds"),c=s.innerHTML;s.innerHTML="_",s.innerHTML=c}if("undefined"!=typeof ajuste&&ajuste.children[3]){var m=ajuste.children[3].getElementsByTagName("td"),u=m.length;for(let e=0;e<u;e++)m[e].removeAttribute("id"),m[e].removeAttribute("data-valor");if(document.getElementById(t+"c")&&(document.getElementById(t+"c").addEventListener("click",click_evento),document.getElementById(t+"c").addEventListener("dblclick",dbl_click_evento),document.getElementById(t+"c").addEventListener("mouseleave",out_evento),document.getElementById(t+"c").addEventListener("dblclick",dbl_click_evento)),smartScroll(t),document.getElementById(t+"c")){var p,g=(p=document.getElementById(t+"c").querySelectorAll(".print")).length;for(let e=0;e<g;e++)p[e].parentNode.setAttribute("style",p[e].innerHTML),"TD"==p[e].tagName.toUpperCase()&&p[e].parentNode.classList.add("destaqueLinha")}document.getElementById(t).getAttribute("data-left"),document.getElementById(t).getAttribute("data-top")}}document.querySelector(".full")?setTimeout(fullscreen,100):(dashAjuste(),renderizaGraficos());var f=document.getElementsByClassName("dragme geomapa");for(let e=0;e<f.length;e++)initMap(f[e].id);try{LAYER&&"ativo"==LAYER.className&&loading("x")}catch(e){console.log("nolayer")}}function renderizaGraficos(){var e=document.querySelectorAll(".dragme.grafico, .dragme.dados, .dragme.medidor"),t=e.length;for(let a=0;a<t;a++)renderChart(e[a].id)}function curtain(e){var t=document.getElementById("layer2");"enabled"==e?(document.getElementById("msg").style.opacity=0,t.classList.add("ativo"),telasup.style.setProperty("overflow","visible"),telasup.style.setProperty("transform","scale(1)")):"only"==e?t.className="ativo":(t.classList.remove("ativo"),telasup.style.setProperty("overflow","hidden"),telasup.style.setProperty("transform","scale(0)"),document.getElementById("content").innerHTML="",document.getElementById("painel").innerHTML="")}const ABOUT="Sistema desenvolvido por, Upquery do Brasil - Luiz Fabiano dos Santos(back-end), João Henrique Rocha Machado(front-end)";function dashAjuste(e){var t;if(e)(t=document.getElementById(e)).addEventListener("mousedown",dashSectionDown),t.addEventListener("mouseenter",dashSectionEnter),t.addEventListener("mouseleave",dashSectionLeave),articleAjuste(e);else{var a=(t=document.getElementsByTagName("SECTION")).length;if(a>0)for(let e=0;e<a;e++)"A"==ADMIN&&(t[e].addEventListener("mousedown",dashSectionDown),t[e].addEventListener("mouseenter",dashSectionEnter),t[e].addEventListener("mouseleave",dashSectionLeave)),articleAjuste(t[e].id)}}function articleAjuste(e){var t=document.getElementById(e).getElementsByTagName("ARTICLE"),a=t.length;for(let e=0;e<a;e++){var n=t[e];"A"==ADMIN&&(n.addEventListener("mousedown",dashArticleDown),n.addEventListener("mouseenter",dashArticleEnter),n.addEventListener("mouseleave",dashArticleLeave))}}var objatual="";function chart(e){var t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e);if(get("prm_clear")&&(chartAnimation=!1),document.getElementById(e+"_ERR"))document.getElementById("ctnr_"+e).innerHTML=document.getElementById(e+"_ERR").innerHTML;else if(document.getElementById("dados_"+e)&&document.getElementById("gxml_"+e)){var n,r="bar";"BARRAS"==a.getAttribute("data-tipoobj")?n="bar":"COLUNAS"==a.getAttribute("data-tipoobj")?n="column":(r="line",n="line");var o=document.getElementById("atributos_"+e),l="",i="";o.getAttribute("data-stacked")&&(l=o.getAttribute("data-stacked"),o.getAttribute("data-stacked_total")&&(i=o.getAttribute("data-stacked_total")));var d=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer,height:document.getElementById("ctnr_"+e).clientHeight,width:document.getElementById("ctnr_"+e).clientWidth});if(t.children[0]&&!t.children[0].classList.contains("err")){var s=t.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," ");s=s.substr(0,s.trim().length-1);try{var c=JSON.parse("{"+s+"}")}catch(e){return void alerta("feed-fixo",TR_QR_IN)}var m=[],u=[],p=[],g=[];for(let e in c)m.push(c[e].valores),u.push(c[e].colunas),p.push(c[e].cod),c[e].cod!=c[e].colunas?g.push(c[e].cod+"-"+c[e].colunas):g.push(c[e].colunas);o.getAttribute("data-inverte_ordem")&&"S"==o.getAttribute("data-inverte_ordem")&&(m=m.reverse(),u=u.reverse(),p=p.reverse());var f=JSON.parse("{"+t.children[1].innerHTML.replace(/(\r\n|\n|\r)/gm,"")+"}"),v=a.getAttribute("data-coluna").replace("(BR)"," ").replace("<BR>"," "),y=a.getAttribute("data-agrupadores").replace("<BR>"," ").indexOf("|"),_=a.getAttribute("data-sec").replace("<BR>"," "),h=o.getAttribute("data-rotacao"),b=o.getAttribute("data-decimal"),E=o.getAttribute("data-abreviacao"),I=o.getAttribute("data-cursor"),x=o.getAttribute("data-xpos"),A=o.getAttribute("data-cor-coluna").split("|"),B=a.getAttribute("data-ccoluna-hex").split("|"),L=(o.getAttribute("data-nodesc"),o.getAttribute("data-posicao")),N=o.getAttribute("data-cor"),T=o.getAttribute("data-mark-max"),S=o.getAttribute("data-mark-min"),C=o.getAttribute("data-mark-media"),w=o.getAttribute("data-um"),k=o.getAttribute("data-label_conteudo"),j=o.getAttribute("data-zoom");j="S"==j;var R="";o.getAttribute("data-espacamento")&&o.getAttribute("data-espacamento").replace("|||","").length>0&&(R=o.getAttribute("data-espacamento"));var M,O,P=o.getAttribute("data-hidden");for("line"==r&&(M=-1==y?o.getAttribute("data-cor_linha")||"#000000":o.getAttribute("data-cor_linha")||"#87CEFA"),O=o.getAttribute("data-cores").length<1?["#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B"]:o.getAttribute("data-cores").split("|");O.length<100;)O.push(O[O.length-1]);var q=(a.getAttribute("data-agrupadores").replace(/(\r\n|\n|\r)/g," ")+"|"+a.getAttribute("data-sec").replace(/(\r\n|\n|\r)/g," ")).replace("<BR>"," ").split("|"),H=a.getAttribute("data-agrupadoresreal").replace("<BR>"," ").split("|");q=q.filter(e=>e);-1==y&&0==_.length&&a.getAttribute("data-agrupadores").replace("<BR>"," ");var D=[],F=[],U=[],z=[],W=[],X=[],V=[],Y=[],G=[],Z=[],K=[],J=[],$=[],Q=[],ee=[],te=[],ae=[],ne=[],re=[],oe=[],le=[],ie=[],de=[],se=[];o.getAttribute("data-graf_axis_show_n")&&o.getAttribute("data-graf_axis_show")&&(D=o.getAttribute("data-graf_axis_show_n").split("|"),F=o.getAttribute("data-graf_axis_show").split("|")),o.getAttribute("data-graf_axis_position_n")&&o.getAttribute("data-graf_axis_position")&&(z=o.getAttribute("data-graf_axis_position_n").split("|"),W=o.getAttribute("data-graf_axis_position").split("|")),o.getAttribute("data-graf_axis_max_n")&&o.getAttribute("data-graf_axis_max")&&(V=o.getAttribute("data-graf_axis_max_n").split("|"),Y=o.getAttribute("data-graf_axis_max").split("|")),o.getAttribute("data-graf_axis_intervalo_n")&&o.getAttribute("data-graf_axis_intervalo")&&(K=o.getAttribute("data-graf_axis_intervalo_n").split("|"),Z=o.getAttribute("data-graf_axis_intervalo").split("|")),o.getAttribute("data-graf_axis_offset_n")&&o.getAttribute("data-graf_axis_offset")&&($=o.getAttribute("data-graf_axis_offset_n").split("|"),Q=o.getAttribute("data-graf_axis_offset").split("|")),o.getAttribute("data-graf_series_type_n")&&o.getAttribute("data-graf_series_type")&&(te=o.getAttribute("data-graf_series_type_n").split("|"),ae=o.getAttribute("data-graf_series_type").split("|")),o.getAttribute("data-graf_series_label_pos_n")&&o.getAttribute("data-graf_series_label_pos")&&(re=o.getAttribute("data-graf_series_label_pos_n").split("|"),oe=o.getAttribute("data-graf_series_label_pos").split("|")),o.getAttribute("data-graf_axis_nro_n")&&o.getAttribute("data-graf_axis_nro")&&(ie=o.getAttribute("data-graf_axis_nro_n").split("|"),de=o.getAttribute("data-graf_axis_nro").split("|"));for(let e=0;e<H.length;e++){var ce=D.findIndex(t=>t==H[e]),me=z.findIndex(t=>t==H[e]),ue=V.findIndex(t=>t==H[e]),pe=K.findIndex(t=>t==H[e]),ge=$.findIndex(t=>t==H[e]),fe=te.findIndex(t=>t==H[e]),ve=re.findIndex(t=>t==H[e]),ye=ie.findIndex(t=>t==H[e]);-1!=ce&&(U[e]=F[ce]),-1!=me&&(X[e]=W[me]),-1!=ue&&(G[e]=Y[ue]),-1!=pe&&(J[e]=Z[pe]),-1!=ge&&(ee[e]=Q[ge]),-1!=fe&&(ne[e]=ae[fe]),-1!=ve&&(le[e]=oe[ve]),-1!=ye&&(se[e]=de[ye])}var _e=new Array;for(let e=0;e<q.length;e++){var he=new Object;U[e]&&U[e].length>0&&("true"==U[e]?0==e?he.axisLine={show:!0}:(he.axisLine={show:!0,lineStyle:{color:O[e]}},he.name=q[e],_e[0].name=q[0],"bar"==r&&"bar"==n&&(_e[0].nameLocation=x,_e[0].nameGap="end"==x?20:30)):he.axisLine={show:!1}),X[e]&&0!=X[e].length&&(he.position=X[e]),G[e]&&0!=parseInt(G[e])&&(he.max=G[e]),J[e]&&0!=parseInt(J[e])&&(he.interval=parseInt(J[e])),ee[e]&&0!=parseInt(ee[e])&&(he.offset=parseInt(ee[e])),_e.push(he)}1==q.length&&(_e[0].name=q[0],"bar"==r&&"bar"==n&&(_e[0].nameLocation=x,_e[0].nameGap="end"==x?20:30));var be,Ee,Ie=new Array,xe=new Array,Ae=new Object,Be=new Object;o.getAttribute("data-ymin").trim().length>0&&(Ae.min=o.getAttribute("data-ymin")),be=k&&""!=k&&"D"!=k?"C"==k?p:g:u,"bar"==r&&"bar"==n?(Ae.type="category",Ae.name=v,Ae.nameLocation="end",Ae.nameGap=20,Ae.axisLabel={interval:0,rotate:h,textStyle:{fontSize:10}},Ae.data=be,Ie.push(Ae),xe=_e):(Be.type="category",Be.name=v,Be.nameLocation=x,Be.nameGap="end"==x?20:35,Be.axisLabel={interval:0,rotate:h,textStyle:{fontSize:10}},Be.data=be,xe.push(Be),Ie=_e),Ee=parseInt(h)>80?[30,80,120,80]:parseInt(h)>40?[30,80,80,80]:[30,80,40,80];var Le=R.split("|");if(R.length>0&&Le.length<5)for(let e=0;e<Le.length;e++)Ee[e]=2==e&&1==j?parseInt(Le[e])+50:Le[e];var Ne=new Array;for(let e=0;e<q.length;e++){var Te=new Object;ne[e]&&0!=ne[e].length?Te.type=ne[e]:(Te.type=n,"column"==n&&(Te.type="bar")),e>0&&U[e]&&"true"==U[e]?Te.AxisIndex=e:se[e]&&parseInt(se[e])>0&&parseInt(se[e])<=q.length&&(Te.AxisIndex=parseInt(se[e]-1)),le[e]&&0!=le[e].length&&(Te.label={position:le[e]}),Ne.push(Te)}var Se=[l,P,n,b,O,B,_,o.getAttribute("data-cascata"),f,M,E,L,"","",T,S,C,N,w,Ne,k],Ce={dataZoom:{show:j,bottom:"6px",handleIcon:"path://M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z"},grid:{y:Ee[0],x2:Ee[1],y2:Ee[2],x:Ee[3]},color:O,tooltip:{trigger:"axis",formatter:function(e){var t=[],a=0;if(e.length>1){t.push(e[0].name);for(let n=0;n<e.length;n++)t.push(e[n].seriesName+": "+Number(e[n].data).toLocaleString(void 0,{minimumFractionDigits:parseInt(b)})),a+=parseFloat(e[n].value);i.length>0&&t.push(i+": "+Number(a).toLocaleString(void 0,{minimumFractionDigits:parseInt(b)}))}else e[0]&&t.push(e[0].name+": "+Number(e[0].data).toLocaleString(void 0,{minimumFractionDigits:parseInt(b)}));return t.join("<br>")},axisPointer:{type:I}},legend:{data:q},noDataLoadingOption:{text:"inválido",effect:7},xAxis:xe,yAxis:Ie,bottom:10,series:stackLista(m,y,q,n,p,A,v,be,Se)};if(d.setOption(Ce,{notMerge:!0}),d.on("click",clicker),document.getElementById(e+"more")){var we=document.createElement("a");we.classList.add("download_button"),document.getElementById(e.replace("trl","")+"_ds")?we.setAttribute("download",document.getElementById(e.replace("trl","")+"_ds").innerText.replace(/ /g,"_").toLowerCase()):we.setAttribute("download",document.getElementById(e+"_ds").innerText.replace(/ /g,"_").toLowerCase()),setTimeout(function(){we.href=d.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#fff"})},5e3),document.getElementById(e+"more")&&document.getElementById(e+"more").querySelector(".page_png").appendChild(we)}}document.getElementById("ctnr_"+e).style.setProperty("max-width","100%")}}function clicker(e){isNaN(e.value)||setTimeout(function(){var t,a=document.getElementById("dados_"+objatual),n=document.getElementById("gxml_"+objatual),r=document.getElementById("atributos_"+objatual);if(e.data.sigla)t=e.data.sigla;else{var o=n.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," ");o=o.substr(0,o.trim().length-1);var l=JSON.parse("{"+o+"}"),i=[];for(let e in l)i.push(l[e].cod);r.getAttribute("data-inverte_ordem")&&"S"==r.getAttribute("data-inverte_ordem")&&i.reverse(),t=i[e.dataIndex]}var d=a.getAttribute("data-colunareal")+"|"+t+"|"+a.getAttribute("data-filtro");d=d.replace("||","|");var s=a.getAttribute("data-drill");if(-1!=d.indexOf("ACUMULADO")){let e=[],t=JSON.parse("{"+document.getElementById("gxml_"+objatual).children[0].innerText.substr(0,document.getElementById("gxml_"+objatual).children[0].innerText.trim().length-1)+"}");for(let a in t)"ACUMULADO"!=t[a].cod&&e.push(t[a].cod);var c=[];let n=a.getAttribute("data-colunareal");e.forEach(function(e){c.push(n+"|$[DIFERENTE]"+e)}),d=c.join("|")}-1==s.indexOf("MULTI")?s>0&&(get("drill_go").value=d,drillfix(e,objatual,d)):s.length>0&&(remover(s+"trl"),loading(),ajax("append","show_objeto","prm_drill=Y&prm_objeto="+s+"&prm_posx="+cursorx+"px&prm_zindex="+zindex_abs+"&prm_posy="+cursory+"px&prm_parametros="+encodeURIComponent(d.replace(/%2D/g,"-").replace(/%2B/g,"+"))+"&prm_screen="+tela+"&prm_track="+s+"&prm_objeton=",!0,"main","",s.replace("trl","")+"trl","obj"))},100)}function efeitoCondicoes(e,t,a,n,r,o,l,i){for(let n in e){let d=e[n].coluna.replace(/(\r\n|\n|\r)/gm,"").replace(/ /g,""),s=t.join("||").replace(/(\r\n|\n|\r)/gm,"").replace(/ /g,"").split("||"),c=o.replace(/(\r\n|\n|\r)/gm,"");if(-1!=s.indexOf(d)){let t;switch(t=isNaN(parseInt(e[n].valor,1))?e[n].valor:parseFloat(e[n].valor),e[n].condicao){case"IGUAL":if(t==a||-1!=r.indexOf(t))return e[n].cor;break;case"MAIOR":if(a>t)return e[n].cor;break;case"MENOR":if(a<t)return e[n].cor;break;case"DIFERENTE":if(a!=t)return e[n].cor;break;case"MAIOROUIGUAL":if(a>=t)return e[n].cor;break;case"MENOROUIGUAL":if(a<=t)return e[n].cor;break;case"COLUNA":return e[n].cor}}if(-1!=c.indexOf(d)||-1!=i.indexOf(d)){let t;t=isNaN(parseInt(e[n].valor,1))?e[n].valor:parseFloat(e[n].valor);let a=l;switch(e[n].condicao){case"IGUAL":if(t==a||-1!=r.indexOf(t))return e[n].cor;break;case"MAIOR":if(a>t)return e[n].cor;break;case"MENOR":if(a<t)return e[n].cor;break;case"DIFERENTE":if(a!=t)return e[n].cor;break;case"MAIOROUIGUAL":if(a>=t)return e[n].cor;break;case"MENOROUIGUAL":if(a<=t)return e[n].cor;break;case"COLUNA":return e[n].cor}}}return n}function stackLista(e,t,a,n,r,o,l,i,d){var s,c=d[0],m=d[1],u=(n=d[2],d[3]),p=d[4],g=(d[5],d[6]),f=d[7],v=d[8],y=d[9],_=d[10],h=d[11];meta=d[12],meta_cor=d[13],markMax=d[14],markMin=d[15],markMedia=d[16],cor=d[17],um=d[18],arr_serie_prop=d[19],label_conteudo=d[20],m=m.replace(/(\r\n|\n|\r)/g," ")+"|",s="line"==n?"top":"column"!=n?h||"inside":"S"==c?"inside":h||"top",arr_serie_prop[0].label&&arr_serie_prop[0].label.position&&0!=arr_serie_prop[0].label.position.length&&(s=arr_serie_prop[0].label.position);var b=function(e,t,n,o,d,s){let c={label:{}};return"line"!=o&&(-1==d&&0==s.length?c.color=function(e){var t=p[e.dataIndex];let n=parseFloat(e.data),o=[];o.push(e.name),o.push(r[e.dataIndex]);let d=[];return d.push(...a),d.push(l),t=efeitoCondicoes(v,d,n,t,o,l,i[e.dataIndex],r)}:c.color=function(e){let t=p[e.dataIndex],a=[e.seriesName],n=parseFloat(e.data),o=e.name;return t=efeitoCondicoes(v,a,n,p[e.seriesIndex],o,l,i[e.dataIndex],r)}),c.barBorderColor="#333",c.barBorderWidth=1,c.label.formatter=function(e){return labelTooltip(e.name,e,u,n,"N",0,"N",um)},c.label.show=e,c.label.position=t,c.label.textStyle={color:cor,fontWeight:"bold"},c},E=function(e,t){let a={label:{}};return a.label.show=e,a.label.position=t,a.label.textStyle={color:cor,fontWeight:"bold"},a};if(-1==t&&0==g.length){var I=[];(C=new Object).type=arr_serie_prop[0].type,k=e;for(let e=0;e<k.length;e++)k[e]=parseFloat(k[e]).toFixed(u);C.data=k,"S"==f&&(C.areaStyle="{}"),C.dataZoom={},C.dataZoom.type="slider";var x="";get("menup")&&(x=window.getComputedStyle(get("menup")).getPropertyValue("background-color"));var A=[],B={};"S"==markMax&&(B.type="max",B.label={formatter:"MAX",color:"#FFF"},A.push(B));var L={};"S"==markMin&&(L.type="min",L.label={formatter:"MIN",color:"#FFF"},A.push(L));var N={};"S"==markMedia&&(N.type="average",N.symbol="none",N.emphasis={label:{show:!0}},N.label={show:!1,position:"insideStartTop",formatter:function(e){return"MED: "+e.data.value}});let r=!1;return m&&(r=-1==m.indexOf(a+"|")&&-1==m.indexOf("TODOS")),C.markPoint={itemStyle:{color:x},data:A},"S"==markMedia&&(C.markLine={lineStyle:{type:"dashed"},itemStyle:{color:x},symbol:"none",data:[N]}),"line"!=n?C.itemStyle={normal:b(r,s,_,n,t,g),emphasis:E(r,s)}:(-1==t&&(C.lineStyle={normal:{color:y}}),"S"==f&&(C.areaStyle={normal:{color:y,opacity:"0.2"}}),C.itemStyle={normal:b(r,s,_,n,t,g),emphasis:E(r,s)}),C.animation=chartAnimation,I.push(C),I}var T="first",S=1;I=[];for(let r=0;r<a.length;r++){var C=new Object,w=[],k=e.flat();for(let e=0;e<k.length;e++)k[e].grupo==a[r]&&w.push(parseFloat(k[e].valor).toFixed(u));C.dataZoom={},C.name=a[r].replace("[","").replace("]","");let o=!1;m&&(o=-1==m.indexOf(C.name+"|")&&-1==m.indexOf("TODOS")),-1!=g.replace(/(\r\n|\n|\r)/g," ").split("|").indexOf(a[r].replace(/(\r\n|\n|\r)/g," "))?"bar"==n||"column"==n?(s="top",C.type="line"):C.type="bar":C.type=arr_serie_prop[r].type,r>0&&arr_serie_prop[r].AxisIndex&&("column"==n||"line"==n?C.yAxisIndex=arr_serie_prop[r].AxisIndex:"bar"==n&&(C.xAxisIndex=arr_serie_prop[r].AxisIndex)),arr_serie_prop[r].label&&arr_serie_prop[r].label.position&&0!=arr_serie_prop[r].label.position.length&&(s=arr_serie_prop[r].label.position),"bar"==n&&(C.barMinHeight="1"),"bar"!=n&&"column"!=n||("S"==c?(T!=C.type&&"first"!=T&&(S+=S),C.stack="GROUP_"+S):C.stack=a[r].replace("[","").replace("]","")),T=C.type,C.data=w,"line"!=n?C.itemStyle={normal:b(o,s,_,n,t,g),emphasis:E(o,s)}:("S"==f&&(C.areaStyle={normal:{opacity:"0.2"}}),-1==t&&(C.lineStyle={normal:{color:y}}),C.itemStyle={normal:b(o,s,_,n,t,g),emphasis:E(o,s)}),C.animation=chartAnimation,I.push(C)}return I}function labelTooltip(e,t,a,n,r,o,l,i){if(t){i=i||"";var d=abreviacaoNumerica(t,n),s=(e=e.replace("&amp;","&"),"");return"S"==l&&(s=e+": "),"A"==r?0==a?s+d+" - "+parseFloat(Number(t.value/(o/100))).toFixed(a)+"%":s+d+","+t.value.replace(/-/g,"").split(".")[1]+" - "+parseFloat(Number(t.value/(o/100))).toFixed(a)+"%":"S"==r?e+": "+parseFloat(Number(t.value/(o/100))).toFixed(a)+"%":-1!=i.indexOf(">")?(i=i.replace(">",""),0==a?s+d+i:s+d+","+t.value.replace(/-/g,"").split(".")[1]+i):(i=i.replace("<",""),0!=a&&t.value?s+i+d+","+t.value.replace(/-/g,"").split(".")[1]:s+i+d)}return e}function abreviacaoNumerica(e,t){var a="";if(!e.value)return"";-1!=(n=e.value.toString()).indexOf("-")&&(a="-");var n,r=(n=Number(n).toLocaleString().replace(/-/g,"").split(",")[0]).replace(/\./g,"").length;return"S"==t&&(n=-1!=n.indexOf(".")?parseFloat(n.substr(0,n.indexOf(".")+2))+"":parseFloat(n)+"",r>12?n+="T":r>9?n+="B":r>6?n+="M":r>3&&(n+="K")),a+n}function chartSlice(e,t){var a=document.getElementById("gxml_"+e),n=document.getElementById("dados_"+e);call("charout","prm_parametros="+a.getAttribute("data-parametros")+"&prm_micro_visao="+n.getAttribute("data-visao")+"&prm_objeto="+e.replace("trl","")+"&prm_screen="+tela).then(function(e){a.innerHTML=e}).then(function(){if(document.getElementById(e+"_ERR"))document.getElementById("ctnr_"+e).innerHTML=document.getElementById(e+"_ERR").innerHTML;else if(n&&document.getElementById("gxml_"+e)){var t=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer}),a=document.getElementById("gxml_"+e),r=document.getElementById("atributos_"+e);if(a.children[0]){var o=JSON.parse("{"+a.children[1].innerHTML.replace(/(\r\n|\n|\r)/gm,"")+"}"),l=a.children[0].innerHTML;l=l.substr(0,l.trim().length-1);var i=JSON.parse("{"+l+"}"),d=[],s=[],c=[];for(let e in i)d.push(i[e].valores),s.push(i[e].colunas),c.push(i[e].cod);var m=n.getAttribute("data-coluna"),u=n.getAttribute("data-agrupadores"),p=document.getElementById("ctnr_"+e).clientWidth,g=document.getElementById("ctnr_"+e).clientHeight,f=r.getAttribute("data-cor-coluna").split("|");let U=n.getAttribute("data-ccoluna-hex").split("|");r.getAttribute("data-nodesc");var v=r.getAttribute("data-abreviacao"),y=r.getAttribute("data-cor"),_=r.getAttribute("data-tipo"),h=n.getAttribute("data-funil-sort"),b=r.getAttribute("data-label_conteudo"),E="",I=r.getAttribute("data-um"),x=n.getAttribute("data-agrupadoresreal").replace("<BR>"," ").split("|");n.getAttribute("data-labelspace")&&(E=n.getAttribute("data-labelspace"));var A,B=r.getAttribute("data-decimal");r.getAttribute("data-hidden")&&(A=-1==r.getAttribute("data-hidden").indexOf("S"));var L="N";r.getAttribute("data-fracao")&&(L=r.getAttribute("data-fracao"));var N,T=[],S=0;switch(N="donut"==_?"pie":_,_){case"funnel":for(let e=1;e<d.length+1;e++){var C=new Object;""==b||"D"==b||s[e-1]==c[e-1]?C.name=s[e-1]:C.name="C"==b?c[e-1]:c[e-1]+"-"+s[e-1],C.value=parseFloat(d[e-1]).toFixed(B),C.order=5*e,T.push(C),"S"!=L&&"A"!=L||(S=parseFloat(d[e-1])+parseFloat(S))}T.sort(function(e,t){return e.order>t.order?1:-1});break;default:for(let e=0;e<d.length;e++){let t=new Object;""==b||"D"==b||s[e]==c[e]?t.name=s[e]:t.name="C"==b?c[e]:c[e]+"-"+s[e],t.value=parseFloat(d[e]).toFixed(B),T.push(t),"S"!=L&&"A"!=L||(S=parseFloat(d[e])+parseFloat(S))}}var w,k=function(e){return labelTooltip(e.name,e,B,v,L,S,"S",I)},j=[30,80,50,80],R=E.split("|");if(E.length>0&&R.length<5)for(let e=0;e<R.length;e++)j[e]=R[e];w=r.getAttribute("data-cores").length<1?["#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#6055DD","#81CE55","#A9532B","#5BC114","#CFCE19","#E23C85","#42227B","#EE7443","#9B9113","#F1D890","#53A49B"]:r.getAttribute("data-cores").split("|");for(let e=0;e<c.length;e++)for(let t=0;t<f.length;t++)c[e]==f[t]&&(w[e]=U[t]);var M=[],O=[],P=[];r.getAttribute("data-graf_series_label_pos_n")&&r.getAttribute("data-graf_series_label_pos")&&(M=r.getAttribute("data-graf_series_label_pos_n").split("|"),O=r.getAttribute("data-graf_series_label_pos").split("|")),P[0]="outside";for(let e=0;e<x.length;e++){var q=M.findIndex(t=>t==x[e]);-1!=q&&(P[e]=O[q])}var H=[];for(let e=0;e<T.length;e++){let t=[];t.push(m),t.push(u);let a=efeitoCondicoes(o,t,T[e].value,w[e],T[e].name,c[e],c[e],m);H.push(a)}var D={itemStyle:{}};D.itemStyle.normal={},D.itemStyle.emphasis={},D.itemStyle.normal.borderWidth=2,D.itemStyle.normal.label={},D.itemStyle.normal.label.textStyle={},D.itemStyle.normal.label.textStyle.color="#333",D.itemStyle.normal.label.show=A,D.itemStyle.normal.label.formatter=k,D.itemStyle.normal.label.position=P[0],D.itemStyle.normal.labelLine={},D.itemStyle.normal.labelLine.show=A,D.itemStyle.emphasis.itemStyle={},D.itemStyle.emphasis.itemStyle.shadowBlur=5,D.itemStyle.emphasis.itemStyle.shadowOffsetX=0,D.itemStyle.emphasis.itemStyle.shadowColor="rgba(0, 0, 0, 0.5)",D.data=T,D.type=N,[].push(D);var F={legendHoverLink:!0,grid:{y:j[0],x2:j[1],y2:j[2],x:j[3]},tooltip:{show:!0,confine:!0,trigger:"item",formatter:function(e){if(e)return labelTooltip(e.name,e,B,v,L,S,"S",I)}},noDataLoadingOption:{text:"inválido",effect:7},color:H,series:[{type:N,data:T,itemStyle:{normal:{label:{textStyle:{color:y},show:A,formatter:k,position:P[0]},labelLine:{show:A}},emphasis:{label:{textStyle:{borderColor:"#333"}}}}}]};switch(_){case"funnel":F.series[0].width="50%",F.series[0].left="25%",F.series[0].sort=h;case"donut":F.series[0].radius=["30%",(p+g)/10.56+"px"],F.series[0].itemStyle.borderRadius=20,F.series[0].itemStyle.borderColor="#FFF",F.series[0].itemStyle.borderWidth=4;break;default:F.series[0].radius=(p+g)/10.56+"px"}t.setOption(F),t.on("click",clicker),setTimeout(function(){if(document.getElementById(e+"more")){var a=document.createElement("a");a.classList.add("download_button"),a.setAttribute("download",document.getElementById(e+"_ds").innerText.replace(/ /g,"_").toLowerCase()),a.href=t.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#FFF"}),document.getElementById(e+"more")&&document.getElementById(e+"more").querySelector(".page_png").appendChild(a)}},5e3)}}})}function chartDonut(e){var t=document.getElementById("dados_"+e),a=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer}),n=document.getElementById("gxml_"+e),r=n.children[0].innerHTML.replace("|","").split("|"),o=n.children[1].innerHTML.replace("|","").split("|");parseInt(t.getAttribute("data-meta")),t.getAttribute("data-coluna");if(atributos.getAttribute("data-hidden"))if(-1!=atributos.getAttribute("data-hidden").indexOf("S"));else;var l=[];for(let e=0;e<r.length;e++){var i=new Object;i.name=o[e],i.value=parseFloat(r[e]).toFixed(2),l.push(i)}var d={tooltip:{show:!0,confine:!0,trigger:"item"},noDataLoadingOption:{text:"inválido",effect:7},color:["#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#F3A82F","#4A95C6","#9F9F9f","#3984A5","#CC9900","#115599","#81CE55","#A9532B","#5BC114","#CFCE19","#E23C85","#42227B","#EE7443","#9B9113","#F1D890","#53A49B"],series:[{type:"pie",radius:["50%","70%"],data:l,itemStyle:{}}]};a.setOption(d),a.on("click",clicker)}function chartMap(e){var t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e);call("charout","prm_parametros="+t.getAttribute("data-parametros")+"&prm_micro_visao="+a.getAttribute("data-visao")+"&prm_objeto="+e.replace("trl","")+"&prm_screen="+tela).then(function(e){t.innerHTML=e}).then(function(){if(document.getElementById(e+"_ERR"))document.getElementById("ctnr_"+e).innerHTML=document.getElementById(e+"_ERR").innerHTML;else{var n=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer});if(t.children[0]&&!t.children[1].classList.contains("err")){var r=t.children[0].innerHTML;r=r.substr(0,r.trim().length-1);var o=JSON.parse("{"+r+"}"),l=[],i=[],d=[];for(let e in o)l.push(o[e].valores),i.push(o[e].colunas),d.push(o[e].cod);var s=0,c=document.getElementById("atributos_"+e);if("S"==c.getAttribute("data-max"))var m=0;else m=parseInt(a.getAttribute("data-maximo"));var u,p,g,f=a.getAttribute("data-agrupadores"),v=(a.getAttribute("data-formato"),a.getAttribute("data-heatmap"),c.getAttribute("data-decimal")),y=[],_=[],h=!0,b=c.getAttribute("data-abreviacao");c.getAttribute("data-hidden")&&-1!=c.getAttribute("data-hidden").indexOf("S")&&(h=!1),get(e).querySelector(".lista_cidades")?(u=get(e).querySelector(".lista_cidades").children,p="cidade",g=!1):(u=get(e).querySelector(".lista_estados").children,p="estado",g=h);for(let e=0;e<u.length;e++){var E=new Object;isNaN(d[0])&&"cidade"==p?y.push(u[e].innerHTML.trim().replace("name","cod").replace("nome","name")):y.push(u[e].innerHTML.trim());var I=u[e].getAttribute("data-sigla"),x=u[e].getAttribute("data-sigla2"),A=u[e].getAttribute("data-nome");isNaN(d[0])&&"cidade"==p?(E.name=x,-1!=d.indexOf(x)&&(E.value=parseFloat(l[d.indexOf(x)]).toFixed(2)),E.sigla=x):(E.name=I,E.value=parseFloat(l[d.indexOf(I)]).toFixed(2),E.sigla=I),E.nome=A,"S"==c.getAttribute("data-max")&&parseInt(l[d.indexOf(I)])>m&&(m=parseInt(l[d.indexOf(I)])),parseInt(l[d.indexOf(I)])<s&&(s=parseInt(l[d.indexOf(I)])),_.push(E)}s>0&&(s=0);var B='{ "type": "FeatureCollection", "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } }, "features": ['+y.join(",").replace(/[\n\t]+/g,"")+'], "UTF8Encoding":false }';echarts.registerMap("mapa",B);var L=c.getAttribute("data-cores").split("|"),N=L.length;N<2&&(N=(L="#87CEFA|#B5C334|#FF6347|#C1232B".split("|")).length);var T={tooltip:{show:!0,trigger:"item",formatter:function(e){if(e)return e.data.nome?labelTooltip(e.data.nome,e.data,v,b,"N",0,"S"):labelTooltip(e.name,e,v,b,"N",0,"S")}},noDataLoadingOption:{text:"inválido",effect:7},dataRange:{left:"left",top:"bottom",min:s,max:m,splitNumber:N,inRange:{color:L},text:[f,""],calculable:!0},visualMap:{min:s,max:m,splitNumber:N,inRange:{color:L},text:[f,""],calculable:!0,formatter:function(e){return e.toLocaleString()}},series:[{name:f,type:"map",map:"mapa",roam:!0,label:{normal:{show:g,formatter:function(e){return e.data.sigla}},emphasis:{show:g,formatter:function(e){return"estado"==p?e.data.sigla?e.data.sigla:e.data.nome:""}}},data:_}]};if(n.setOption(T),n.on("click",clicker),n.dispatchAction({type:"dataZoom"}),document.getElementById(e+"more")){var S=document.createElement("a");S.style.setProperty("width","18px"),S.style.setProperty("height","18px"),S.style.setProperty("float","left"),S.style.setProperty("margin","4px 0 0 4px"),S.setAttribute("download",document.getElementById(e+"_ds").innerText.replace(/ /g,"_").toLowerCase()),S.href=n.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#fff"}),document.getElementById(e+"more")&&document.getElementById(e+"more").querySelector(".page_png").appendChild(S)}}}})}function chartMapMultiplo(e){var t=document.getElementById("dados_"+e),a=echarts.init(document.getElementById("ctnr_"+e)),n=document.getElementById("gxml_"+e);if(n.children[1]){var r=n.children[0].innerHTML.replace("|",""),o=n.children[1].innerHTML.replace("|","").split("|"),l=parseInt(t.getAttribute("data-maximo")),i=t.getAttribute("data-json"),d=n.children[2].innerHTML.replace("|","").split("|"),s=t.getAttribute("data-agrupadores").replace("<BR>"," ").indexOf("|");if(atributos.getAttribute("data-hidden"))if(-1!=atributos.getAttribute("data-hidden").indexOf("S"));else;if(-1!=s){s=r.match(/\[[a-zA-Z0-9$_ ().\%\\\/\u00C0-\u017F]+\]/g);var c=[],m=0;for(let e=0;e<s.length;e++)-1==c.indexOf(s[e].replace("[","").replace("]",""))&&(c[m]=s[e].replace("[","").replace("]","").replace("(BR)"," ").replace("<BR>"," "),m+=1)}ajax("return","download","arquivo="+i+".json",!1),echarts.registerMap("mapa",respostaAjax);var u=[];for(let e=0;e<c.length;e++){var p=[];for(let t=0;t<r.length;t++){var g=new Object;g.agrupador=c[e],g.name=o[t],g.value=parseFloat(r[t]).toFixed(2),p.push(g)}u.push(p)}var f={tooltip:{show:!0,confine:!0,trigger:"item",formatter:function(e){if(e)return"NaN"!=Number(e.value).toLocaleString()?e.name+": "+Number(e.value).toLocaleString():e.name}},noDataLoadingOption:{text:"inválido",effect:7},dataRange:{left:"left",top:"bottom",min:0,max:l,calculable:!0},series:[{name:c,type:"map",map:"mapa",roam:!1,label:{normal:{show:!0,formatter:function(e){return d[e.dataIndex]?d[e.dataIndex]:" "}},emphasis:{show:!0}},data:p}]};a.setOption(f),a.on("click",clicker)}}function chartPercent(e){if(document.getElementById("valores_"+e).getAttribute("data-meta").length>0){var t=document.getElementById("valores_"+e),a=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer}),n=(document.getElementById(e+"_vl"),parseInt(t.getAttribute("data-meta").replace(/\'/g,"")));0==n&&(n=1);var r=t.getAttribute("data-color"),o=document.getElementById(e+"_mt").style.getPropertyValue("color"),l=parseInt(t.getAttribute("data-valor")),i=[];0==o.trim().length&&(o=r);var d={normal:{color:"#dedede",borderColor:"#777",borderWidth:1,label:{textStyle:{color:o,fontWeight:"bold",fontSize:1,baseline:"top"},show:!1,position:"top"},labelLine:{show:!1}},emphasis:{color:"#cdcdcd"}},s={normal:{color:o,borderColor:"#777",borderWidth:1,label:{show:!0,position:"center",formatter:"{c}%",textStyle:{color:o,fontWeight:"bold",fontSize:15,baseline:"top"}},labelLine:{show:!1}}},c={normal:{color:o,label:{formatter:function(e){return parseFloat(e.value).toFixed(2)+"%"},textStyle:{baseline:"top"}}}},m=new Object;m.name="outro",m.value=l<n?100-parseFloat(l/n*100).toFixed(2):0,m.itemStyle=d,i.push(m);var u=new Object;u.name="",u.value=parseFloat(l/n*100).toFixed(2),u.itemStyle=s,i.push(u);var p={noDataLoadingOption:{text:"inválido",effect:7},series:[{type:"pie",radius:["50%","70%"],data:i,itemStyle:c}]};a.setOption(p)}}function chartGauge(e){var t=document.getElementById("ctnr_"+e),a=echarts.init(t,null,{renderer:chartRenderer}),n=document.getElementById("atributos_"+e),r=parseFloat(document.getElementById("valor_"+e).title),o=parseInt(n.getAttribute("data-raio")),l=parseFloat(n.getAttribute("data-min")),i=parseFloat(n.getAttribute("data-max")),d=n.getAttribute("data-valores").split("|"),s=n.getAttribute("data-cores").split("|"),c=["#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#6055DD"],m=!0;"S"==n.getAttribute("data-hidden")&&(m=!1);var u=5;d.length>0&&(u=d.length);var p,g,f,v=[],y=[];if(0==n.getAttribute("data-valores").length)y=[.25,c[0]],v.push(y),y=[.5,c[1]],v.push(y),y=[.75,c[2]],v.push(y),y=[1,c[3]],v.push(y);else{let e=100/(d[u-1]-l);var _=0;for(let t=0;t<u;t++)_+=p=0==t?parseFloat(d[t]-l)*e:parseFloat(d[t]-d[t-1])*e,y=s[t]?[_/100,s[t]]:[_/100,c[t]],v.push(y)}p<1&&(y=[1,"#999"],v.push(y)),o<190?(g=t.clientWidth/3,f="70%"):(g=t.clientWidth/4,f="50%");var h={series:[{splitNumber:u,type:"gauge",startAngle:o,endAngle:0,center:["50%",f],radius:g,min:l,max:i,axisLine:{lineStyle:{width:50,color:v}},axisTick:{distance:-30,length:8,lineStyle:{color:"#EEE",width:2,opacity:"0.5"},show:!1},splitLine:{distance:-30,length:40,lineStyle:{color:"#EEE",width:4,opacity:"0.2"},show:!1},axisLabel:{color:"auto",distance:46,fontSize:12,formatter:function(e){return Number(parseFloat(e)).toLocaleString()},show:m},pointer:{icon:"triangle",itemStyle:{color:"#333"},length:"80%",width:14,offsetCenter:[0,"0%"]},anchor:{show:!0,showAbove:!0,size:16,itemStyle:{borderWidth:7,color:"#333",borderColor:"#333"}},detail:{show:!1},data:[{value:r,name:""}]}]};a.setOption(h)}var resizerDelay=0;function renderChart(e){if(document.getElementById(e)&&document.getElementById("dados_"+e))switch(document.getElementById("dados_"+e).getAttribute("data-tipo")){case"ORGANOGRAMA":chartGauge(e),activeorga(e,"","");break;case"PONTEIRO":chartGauge(e);break;case"BARRAS":case"COLUNAS":case"LINHAS":chart(e);break;case"PIZZA":chartSlice(e);break;case"ROSCA":chartDonut(e);break;case"VALOR":chartPercent(e);break;case"MAPA":chartMap(e)}}function renderChartDirect(e){if(document.getElementById(e)&&document.getElementById("dados_"+e)){var t,a,n=document.getElementById("dados_"+e).getAttribute("data-tipo"),r=" ";switch(ordem="",document.getElementById("dados_"+e)&&(a=document.getElementById("dados_"+e)).getAttribute("data-agrupador_troca")&&0!=a.getAttribute("data-agrupador_troca").length&&"null"!=a.getAttribute("data-agrupador_troca")&&"N/A"!=a.getAttribute("data-agrupador_troca")&&(ordem=" 1 ASC",document.getElementById(e).querySelector(".ordem")&&"N/A"!=document.getElementById(e).querySelector(".ordem").value&&(ordem=document.getElementById(e).querySelector(".ordem").value),r="&prm_agrupador_troca="+a.getAttribute("data-agrupador_troca")+"&prm_ordem_troca="+ordem),n){case"ORGANOGRAMA":chartGauge(e),activeorga(e,"","");break;case"PONTEIRO":chartGauge(e);break;case"BARRAS":case"COLUNAS":case"LINHAS":t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e),call("charout","prm_parametros="+t.getAttribute("data-parametros")+"&prm_micro_visao="+a.getAttribute("data-visao")+"&prm_objeto="+e.replace("trl","")+"&prm_screen="+tela+r).then(function(e){t.innerHTML=e}).then(function(){chart(e)});break;case"PIZZA":chartSlice(e);break;case"ROSCA":chartDonut(e);break;case"VALOR":chartPercent(e);break;case"MAPA":chartMap(e)}}}function heatmap(e){if(document.getElementById(e)){var t={};t.objeto=document.getElementById(e),t.valores=document.getElementById("gxml_"+e).children[0].innerHTML.replace("|","").split("|"),t.zoom=3,t.coluna=t.objeto.getAttribute("data-colunavalor"),t.colunadesc=t.objeto.getAttribute("data-colunadesc"),t.tipo="HEATMAP",t.centro="-28.680601666666668,-49.365805",t.coor=[],t.lastx="",t.lasty="";var a="",n="";if(-1==t.tipo.indexOf("MARCADOR")){for(let e=0;e<t.valores.length;e++)a=t.valores[e].split(",")[1],n=t.valores[e].split(",")[0],a.length>0&&n.length>0&&t.coor.push(new google.maps.LatLng(n,a)),t.lastx=parseFloat(a),t.lasty=parseFloat(n);t.coor}0==t.centro.length?t.centro=new google.maps.LatLng(t.lastx,t.lasty):t.centro=new google.maps.LatLng(t.centro.split(",")[0],t.centro.split(",")[1]),(map=new google.maps.Map(t.objeto.children[t.objeto.children.length-1],{center:t.centro,zoom:t.zoom,mapTypeId:"terrain",panControl:!1,streetViewControl:!1,zoomControl:!1})).addListener("zoom_changed",function(){setTimeout(function(){t.zoom=map.getZoom(),t.objeto.setAttribute("data-zoom",t.zoom)},2e3)}),map.addListener("center_changed",function(){setTimeout(function(){t.centro=(""+map.getCenter()).replace(/[\)\(]/g,""),t.objeto.setAttribute("data-center",t.centro)},2e3)}),new google.maps.visualization.HeatmapLayer({data:t.coor}).setMap(map)}}function removeTrash(){var e=document.querySelectorAll("._SmartLabel_Container"),t=e.length;for(let a=0;a<t;a++)e[a].parentNode.removeChild(e[a])}function dashboard(e,t,a,n){switch(t){case"insert":call("inserir_objeto","prm_objeto=ARTICLE&prm_screen="+a+"&prm_screen_ant="+document.getElementById(a).getElementsByTagName("article").length).then(function(e){var t=document.createElement("div");t.innerHTML=e,document.getElementById(a).appendChild(t.children[0])}).then(function(){document.querySelector(".moving")&&(document.querySelector(".moving").className="")}).then(function(){dashAjuste(a)});break;case"insertnv2":ajax("main","inserir_objeto","prm_objeto=ARTICLENV2&prm_screen="+a+"&prm_screen_ant="+document.getElementById(a).getElementsByTagName("article").length,!1,a),shscr(tela),document.querySelector(".moving")&&(document.querySelector(".moving").className=""),setTimeout(function(){dashAjuste()},100);break;case"rowcolumn":ajax("fly","salva_posicao","prm_objeto="+a+"&prm_screen="+e+"&prm_posx=&prm_posy=&prm_zindex="+n,!1),document.getElementById(a).style.setProperty("-webkit-flex-direction",n),document.getElementById(a).style.setProperty("flex-direction",n),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"porcentagem":document.getElementById(a).style.setProperty("-webkit-flex-basis","calc("+n+" - 6px)"),document.getElementById(a).style.setProperty("flex-basis","calc("+n+" - 6px)"),ajax("fly","salva_posicao","prm_objeto="+a+"&prm_screen="+e+"&prm_posx=&prm_posy=&prm_zindex="+encodeURIComponent(n)+"&prm_tipo=porcentagem",!0),"false"==error&&alerta("feed-fixo",TR_AL),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"ordem":document.getElementById(a).style.setProperty("order",n),ajax("fly","salva_posicao","prm_objeto="+a+"&prm_screen="+e+"&prm_posx="+encodeURIComponent(n)+"&prm_posy=&prm_zindex=&prm_tipo=ordem",!0),"false"==error&&alerta("feed-fixo",TR_AL),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"newsection":call("inserir_objeto","prm_objeto=SECTION&prm_screen="+e+"&prm_screen_ant="+document.getElementsByTagName("section").length).then(function(e){var t=document.createElement("div");t.innerHTML=e,MAIN.appendChild(t.children[0])}).then(function(){dashAjuste(MAIN.lastElementChild.id)});break;case"align":ajax("fly","salva_posicao","prm_objeto="+a+"&prm_screen="+e+"&prm_posx=&prm_posy="+n+"&prm_zindex=",!1),document.getElementById(a).style.setProperty("justify-content",n),document.getElementById(a).style.setProperty("align-items",n),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"background_article":ajax("fly","alter_attrib","prm_objeto="+a+"&prm_prop=BGCOLOR_ARTICLE&prm_value="+n+"&prm_usuario=DWU",!0),"false"==error&&alerta("feed-fixo",TR_AL),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"background_section":ajax("fly","alter_attrib","prm_objeto="+a+"&prm_prop=BGCOLOR_SECTION&prm_value="+n+"&prm_usuario=DWU",!0),"false"==error&&alerta("feed-fixo",TR_AL),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle")}}function dashSectionDown(e){if(3!=e.which&&"noline"!=this.className)if("moving"!=this.className)if("hoverchange"==this.className){var t=this.style.getPropertyValue("order"),a=document.querySelector(".moving"),n=a.style.getPropertyValue("order");a.style.setProperty("order",t),a.style["-webkit-order"]=t,this.style.setProperty("order",n),this.style["-webkit-order"]=n,ajax("fly","dashboardmove","prm_objeto="+a.id+"&prm_target="+this.id+"&prm_last="+tela,!1),a.className="",this.className=""}else document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle"),this.className="moving";else this.className=""}function dashSectionEnter(){"moving"!=this.className&&"noline"!=this.className&&(document.querySelector(".selectedcolumn")&&(this.className="hover"),document.querySelector(".moving")&&(this.className="hoverchange"))}function dashSectionLeave(){"moving"!=this.className&&"noline"!=this.className&&(this.className="")}function dashArticleDown(e){if(e.stopPropagation(),3!=e.which&&"noline"!=this.parentNode.className)if("movingarticle"!=this.className)if(MAIN.querySelector(".selected")){var t,a=MAIN.querySelector(".selected");t="main"==a.parentNode.id?tela:a.parentNode.id;var n=a.id,r=a.parentNode,o=e.target;if(r.id==o.id){var l=o.children,i=1;for(let e=1;e<l.length;e++)parseInt(window.getComputedStyle(l[e]).getPropertyValue("order"))>i&&(i=parseInt(window.getComputedStyle(l[e]).getPropertyValue("order"))+1),l[e].style.getPropertyValue("order")&&(i=parseInt(l[e].style.getPropertyValue("order"))+1);a.style.setProperty("order",i+1),ajax("fly","salva_posicao","prm_objeto="+n+"&prm_screen="+o.id+"&prm_posx="+(i+1)+"&prm_posy=&prm_zindex=",!0),MAIN.querySelector(".selected").classList.remove("selected")}else a.remove(),ajax("fly","dashboardmove","prm_objeto="+n+"&prm_target="+o.id+"&prm_last="+t,!0),call("show_objeto","prm_objeto="+n+"&PRM_ZINDEX=&prm_posx=99&prm_posy=&prm_screen="+tela+"&prm_dashboard=true","obj").then(function(e){var t=document.createElement("div");t.innerHTML=e,o.appendChild(t.children[0]),"N"==sticky?document.getElementById("dados_"+n)?renderChart(n):ajustar(n):document.getElementById(n+"c").classList.add("sticky")}).then(function(){eventos(document.getElementById(n))}).then(function(){var e=o.children,t=1;for(let a=1;a<e.length;a++)e[a].id!=n?(parseInt(e[a].style.getPropertyValue("order"))<t&&(t=parseInt(e[a].style.getPropertyValue("order"))),ajax("fly","salva_posicao","prm_objeto="+e[a].id+"&prm_screen="+o.id+"&prm_posx="+t+"&prm_posy=&prm_zindex=",!0)):ajax("fly","salva_posicao","prm_objeto="+e[a].id+"&prm_screen="+o.id+"&prm_posx="+e.length+"1&prm_posy=&prm_zindex=",!0),t+=1})}else if("hoverchangearticle"==this.className){var d=this.style.getPropertyValue("order"),s=document.querySelector(".movingarticle"),c=document.querySelector(".movingarticle").style.getPropertyValue("order");document.querySelector(".movingarticle").style.setProperty("order",d),document.querySelector(".movingarticle").style["-webkit-order"]=d,document.getElementById(document.querySelector(".movingarticle").id+"ordem").value=d,this.style.setProperty("order",c),document.getElementById(this.id+"ordem").value=c,"mac"==PRINCP.className&&(this.style["-webkit-order"]=c),ajax("fly","dashboardmove","prm_objeto="+s.id+"&prm_target="+this.id+"&prm_last="+this.parentNode.id,!1),s.className="",this.className=""}else document.querySelector(".moving")&&document.querySelector(".moving").classList.remove("moving"),this.className="movingarticle";else this.className=""}function dashArticleEnter(e){"movingarticle"!=this.className&&"noline"!=this.parentNode.className&&document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").parentNode.id==this.parentNode.id&&(this.className="hoverchangearticle"),e.stopPropagation(e)}function dashArticleLeave(e){"movingarticle"!=this.className&&"noline"!=this.parentNode.className&&(this.className=""),e.stopPropagation()}function debug(e){if("13"==e){var t=document.getElementById("debug").firstElementChild.value.toLowerCase();if(-1!=t.indexOf("query")){let e=document.getElementsByClassName("faketitle");if(e[0])if("inline"==e[0].style.display)for(let t=0;t<e.length;t++)e[t].style.display="none";else for(let t=0;t<e.length;t++)e[t].style.display="inline"}if(-1!=t.indexOf("json"))if(document.querySelector(".fakedados")){var a=document.querySelectorAll(".fakedados");for(let e=0;e<a.length;e++)a[e].remove()}else{let e=document.createElement("textarea");e.classList.add("fakedados");var n=document.querySelectorAll(".json");for(let t=0;t<n.length;t++){let a=e.cloneNode(!0),r=n[t].innerHTML.trim();a.value="{"+r.substring(0,r.length-1)+"}",n[t].parentNode.parentNode.appendChild(a)}}if(-1!=t.indexOf("rearrange")){var r=MAIN.children;for(let e=0;e<r.length;e++)"DIV"==r[e].tagName?(r[e].style.left="100px",r[e].style.top="100px"):"SPAN"==r[e].tagName&&(r[e].firstElementChild.style.left="100px",r[e].firstElementChild.style.top="100px")}if(-1!=t.indexOf("clearlog"))ajax("fly","clearlog","prm_programa="+t.split(".")[1],!1);if(-1!=t.indexOf("screen")&&("inline"==document.getElementById("screenres").style.display?document.getElementById("screenres").style.display="none":document.getElementById("screenres").style.display="inline"),-1!=t.indexOf("lang")&&(curtain("enabled"),carrega("lang_table"),document.getElementById("debug").setAttribute("class","")),-1!=t.indexOf("padrao")&&(call_save(""),document.getElementById("titulo").innerHTML="OBJECT PADRAO",curtain("enabled"),carregaPainel(""),carrega("object_padrao"),document.getElementById("debug").setAttribute("class","")),-1!=t.indexOf("upload")&&(document.getElementById("titulo").innerHTML="UPLOAD",call_save(""),curtain("enabled"),carregaPainel("upload"),carrega("uploaded"),document.getElementById("debug").setAttribute("class","")),-1!=t.indexOf("help")&&alert("[query]: mostra ou esconde a query de cada consulta \n[export]: exporta dados das tabelas do tables_to_export, (pipe) seguido da letra do tipo(U usuario, O objeto) para especificar a exportação  \n[rearrange]: realoca todos os objetos pra posição 100/100 \n[clearlog.X]: Limpa log_eventos de dados de X(JS para javascript, EL para error line e PAR para parametro de usu&aacute;rio) \n[screen]: mostra as resoluções de tela \n[rule]: mostra a posição do cursor com reguas \n[grid(px)]: tela dividida em pixels \n[fun.lang]: lista as traduções \n[sandbox]: Libera uso da screen sandbox para testes \n[exec=]: executa comandos \n[dashboard]: Esconde/mostra as linhas do dashboard para o dwu \n[padrao]: Abre a tela de padroes do sistema \n[upload]: Abre a tela de upload \n[admin]: Tela com as permissões de usuários"),-1!=t.indexOf("rule")){var o=document.getElementById("rule");"visible"==o.className?(o.className="invisible",document.removeEventListener("mousemove",rulemove,!1)):(o.className="visible",document.addEventListener("mousemove",rulemove,!1))}if(-1!=t.indexOf("find"))ajax("list","screen_list","prm_objeto="+t.replace("find(","").replace(")",""),!0,"floatops");if(-1!=t.indexOf("painel")&&(call_save(""),curtain("enabled"),carrega("painel")),-1!=t.indexOf("admin")&&(call_save(""),document.getElementById("titulo").innerHTML="OPÇÕES DE ADMINISTRAÇÃO",curtain("enabled"),carrega("admin_options"),document.getElementById("debug").setAttribute("class","")),-1!=t.indexOf("dashboard")){var l=document.getElementsByTagName("SECTION");if("noline"==l[0].className)for(let e=0;e<l.length;e++)l[e].className="";else for(let e=0;e<l.length;e++)l[e].className="noline"}if(-1!=t.indexOf("grid")){var i=document.querySelectorAll(".rlinha");for(let e=0;e<i.length;e++)i[e].parentNode.removeChild(i[e]);var d=t.replace("grid(","");if(d=d.replace(")",""),"number"==typeof(d=parseInt(d))&&0!=(d=Math.abs(parseInt(d)))){altura=document.getElementById("html").clientHeight,largura=document.getElementById("html").clientWidth,line=document.createElement("div");for(let e=d;e<largura;){let t=line.cloneNode("true");t.style.setProperty("left",e+"px"),t.className="rlinha horizontal",document.body.appendChild(t),e+=d}for(let e=d;e<altura;){let t=line.cloneNode("true");t.style.setProperty("top",e+"px"),t.className="rlinha vertical",document.body.appendChild(t),e+=d}}}if(-1!=t.indexOf("sandbox")){var s=document.getElementById("floatops").lastElementChild;"none"==s.style.getPropertyValue("display")?s.style.setProperty("display","inline"):s.style.setProperty("display","none")}if(-1!=t.indexOf("exec="))if(confirm(TR_CM))ajax("fly","executar","prm_acao="+t.replace("exec=",""),!1);-1!=t.indexOf("prefixo")&&(call_save(""),document.getElementById("titulo").innerHTML="PREFIXO DE COLUNA",curtain("enabled"),carregaPainel("prefixo"),carrega("prefixo_lista"),document.getElementById("debug").setAttribute("class","")),document.getElementById("debug").firstElementChild.value=""}}function fakeValue(e,t){document.getElementById(e).innerHTML=t.innerHTML;var a=t.getAttribute("title");document.getElementById(e).setAttribute("title",a)}function nova_customizada(e){ajax("quick_custom","quick_create","prm_nome=&prm_tipo=OBJETO&prm_parametros=&prm_visao=&prm_coluna=&prm_grupo=&prm_obj_ant=&prm_filtro=&prm_screen="+tela,!1)}function exclui_customizada(e){let t=document.getElementById("lista-custom-fav").getAttribute("title"),a=document.getElementById("lista-custom-fav").querySelector(".input").innerHTML.replace(/\r?\n|\r/g,"");a||(a=""),0==t.length?alerta("msg","Nenhuma consulta selecionada"):confirm("Confirma a exclusão da consulta: "+a+" ?")&&call("excluiCustomizado","prm_objeto="+t+"&prm_tela="+tela).then(function(e){-1==e.indexOf("OK")?alerta("msg",e):(document.getElementById("lista-custom-fav").setAttribute("title",""),document.getElementById("lista-custom-fav").children[0].innerHTML=document.getElementById("lista-custom-fav").children[0].getAttribute("data-placeholder"),document.getElementById("ARTICLE_CUSTOMIZACAO").innerHTML="",alerta("msg",TR_EX))})}function remover(e,t){var a;if(a=document.getElementById(e+"trl")?document.getElementById(e+"trl"):document.getElementById(e),"excluir"==t&&void 0!==t){var n=a.parentNode.id;"main"!=a.parentNode.id&&"space-options"!=a.parentNode.id||(n=tela),call("dl_obj","prm_cod="+e+"&prm_tela="+n).then(function(e){-1!=e.indexOf("OK")&&alerta("msg",TR_EX)})}a&&(document.getElementById("filterlist").title==a.id+"-filterlist"&&(document.getElementById("filterlist").className="filtro hidden"),void 0===t||"excluir"==t?(a.style.setProperty("opacity","0"),setTimeout(function(){a.parentNode&&(a.style.setProperty("display","none"),a.remove())},200)):a.parentNode&&a.remove())}function loading(e,t){var a=LAYER.children[1],n=LAYER.children[0];""==LAYER.className?(document.querySelector(".slide-N")&&MAIN.style.setProperty("filter","blur(14px)"),LAYER.classList.add("ativo"),setTimeout(function(){n.classList.add("open")},100),document.querySelector(".slide-S")||setTimeout(function(){LAYER.children[1].classList.add("visivel"),LAYER.children[2].classList.add("visivel"),LAYER.children[3].classList.add("visivel"),LAYER.children[4].classList.add("visivel"),LAYER.children[5].classList.add("visivel")},100),get("jumpdrill")&&get("jumpdrill").remove()):(a.classList.remove("open"),document.querySelector(".slide-N")&&MAIN.style.setProperty("filter","blur(14px)"),setTimeout(function(){MAIN.style.removeProperty("filter")},300),void 0!==e?setTimeout(function(){a.classList.remove("visivel"),n.classList.remove("open"),LAYER.classList.remove("ativo")},500):LAYER.classList.remove("ativo"),get("jumpdrill")&&get("jumpdrill").remove())}function loadAttrib(e,t,a){var n=a||"FCL";document.getElementById("attriblist").classList.remove("horizontal"),document.getElementById(e)&&document.getElementById("attriblist").classList.remove("open"),setTimeout(function(){document.getElementById("attriblist").innerHTML=""},200),setTimeout(function(){document.getElementById(e)?(document.getElementById("attriblist").classList.toggle("open"),document.getElementById("attriblist").classList.toggle("vertical")):(document.getElementById("attriblist").classList.add("open"),document.getElementById("attriblist").classList.add("vertical")),loader("attriblist"),ajax("list",e,t,!0,"attriblist","","",n),document.querySelector(".destacada")&&document.querySelector(".destacada").classList.remove("destacada")},400)}function alerta(e,t,a){var n;if(t)if("granted"==notify.permission&&"out"==vision){n=t.split("!");for(let e=0;e<n.length;e++)callnotify("ATENÇÃO",n[e])}else if("alert"==e)alert(t);else{n=t.split("!");for(let e=0;e<n.length;e++)if(n[e].trim().length>0){var r=document.getElementById("alerta-template").children[0].cloneNode(!0);r.children[0].innerHTML=n[e]+"!",a&&(r.children[2].style.setProperty("display","initial"),r.children[3].innerHTML=a),document.getElementById("feed-fixo").appendChild(r),function(e){setTimeout(function(){e.classList.add("show")},100),setTimeout(function(){e&&e.classList.remove("show")},4700),setTimeout(function(){e&&e.parentNode&&e.remove()},5e3)}(r)}}}function invisible_touch(e,t){var a,n,r=document.getElementById(e);if(0==MAIN.getElementsByTagName("section").length&&-1==r.className.indexOf("scaled"))if("start"==t)var o=setTimeout(function(){r.classList.add("dragging")},200);else{clearTimeout(o),setTimeout(function(){r.classList.remove("dragging")},200);var l=r.style.top,i=r.style.left;l==r.getAttribute("data-top")&&i==r.getAttribute("data-left")||(parseInt(i)%5!=0?(a=parseInt(i)/10,a=Math.round(a),a*=10):a=parseInt(i),parseInt(l)%5!=0?(n=parseInt(l)/10,n=Math.round(n),n*=10):n=parseInt(l),ajax("pos","salva_posicao","prm_objeto="+e+"&prm_screen="+tela+"&prm_posx="+a+"px&prm_posy="+n+"px&prm_zindex=",!0),r.setAttribute("data-top",l),r.setAttribute("data-left",i))}}function fakeClickScript(){document.querySelector(".fakelistbox.open")&&0==document.querySelector(".fakelistbox.open").previousElementSibling.contentEditable&&document.querySelector(".fakelistbox.open").click()}function logout(e){e?(ajax("fly","xlogout","prm_sessao="+e,!0),alerta("x",TR_SE)):(ajax("fly","xlogout","",!0),alerta("x",TR_SE),setTimeout(function(){window.location.reload(!0)},2e4))}window.addEventListener("resize",function(){if((resizerDelay+=1)>10){for(var e=document.querySelectorAll(".dragme"),t=e.length,a=0;a<t;a++)document.getElementById("dados_"+e[a].id)&&renderChart(e[a].id),document.getElementById(e[a].id).classList.contains("front")&&topDistance(e[a].id);resizerDelay=0}}),rulemove=function(e){rule.style.setProperty("left",cursorx-10+"px"),rule.style.setProperty("top",cursory-10+"px"),rule.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;X = "+cursorx+"px Y = "+cursory+"px"},call("refresh_session","");var msgs=0;if(get("verify-post")){call("countCheckPost","").then(e=>{msgs=parseInt(e)});const e=setInterval(function(){checkTextPost()},15e3)}const LOGGED=setInterval(function(){if(!get("login-menu")){if(0==document.cookie.length&&"N"==get("xe").value)return logout(),!1;call("valida_session","").then(function(e){if(-1!=e.indexOf("0"))return logout(),!1;-1!=e.indexOf("1")&&window.location.reload(!0)})}},6e4);function checkTextPost(){get("login-menu")||get("verify-post")&&call("countCheckPost","").then(function(e){if(get("verify-post").setAttribute("data-ajax",e.trim()),parseInt(e)>0&&get("text-talk").classList.contains("open")&&parseInt(e)!=msgs){let e=get("text-talk").querySelector(".selected");call("listContainer","").then(function(e){document.querySelector(".list_container").innerHTML=e}).then(function(){e.click()})}})}function call(e,t,a,n){n=n||"POST";return fakeClickScript(),new Promise(function(r,o){var l=new XMLHttpRequest;if("PROCEDURE"==a)l.open(n,"dwu."+e,!0);else{var i=a||"fcl";"POST"==n?l.open(n,"dwu."+i+"."+e,!0):l.open(n,"dwu."+i+"."+e+"?"+t,!0)}"POST"==n?l.send(t):l.send(null),l.onload=function(){200==l.status?(r(l.responseText.trim()),document.getElementById("content")&&document.getElementById("content").classList.remove("loading")):(document.getElementById("content").classList.remove("loading"),o(alerta("feed-fixo",TR_XC)))},l.onerror=function(){document.getElementById("content").classList.remove("loading"),0==navigator.onLine&&alerta("msg",TR_OFF)}})}var slice=[];function ajax(e,t,a,n,r,o,l,i){i=i||"fcl";var d=l,s=new XMLHttpRequest;s.onerror=ajaxError,s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status)switch(e){case"return":respostaAjax=s.responseText.trim();break;case"data-":"LOGOFF"!=s.responseText.trim()&&document.getElementById(r)&&document.getElementById(r).setAttribute("data-ajax",s.responseText.trim());break;case"append":if(-1==s.responseText.indexOf("#alert")){var t;t=document.createElement("div");var a=s.responseText;t.innerHTML=a,(x=t.children[0]).style.setProperty("order",document.getElementById(r).children.length+1),new Promise(function(e,t){e(a)}).then(function(){d&&x.style.setProperty("opacity","0")}).then(function(){document.getElementById(r).appendChild(x)}).then(function(){eventos(x),setTimeout(function(){d&&document.getElementById(d)&&document.getElementById(d).style.setProperty("opacity",""),LAYER.classList.contains("ativo")&&loading(),topDistance(d)},100),d&&(centerDrill(d),ajustar(d),renderChart(d))})}break;case"input":document.getElementById(r).className=s.responseText.trim();break;case"value":document.getElementById(r).value=s.responseText.trim();break;case"list":document.getElementById(r).innerHTML=s.responseText,lasturl.length<3&&I&&(lasturl=I);break;case"inject":if(s.responseText.length>0){var n=document.createElement("tbody");n.innerHTML=s.responseText;var i=n.children[1].children.length,c=0;for(let e=0;e<document.getElementById(r).querySelectorAll("td:not(.print)").length;e++)document.getElementById(r).children[e].hasAttribute("colspan")?c+=parseInt(document.getElementById(r).children[e].getAttribute("colspan")):c++;if(i<c)for(let e=1;e<n.children.length;e++){n.children[e].children[1].setAttribute("colspan",c-i+1);for(let e=0;e<c-i;e++);}var m=n.children.length;for(let e=0;e<m;e++)document.getElementById(r).parentNode.insertBefore(n.lastElementChild,document.getElementById(r).nextElementSibling)}else alerta("feed-fixo",TR_NR);loading();break;case"script":(dscript=document.createElement("script")).innerHTML=s.responseText,document.head.appendChild(dscript);break;case"lang":tr=s.responseText;break;case"time":countdown=s.responseText;break;case"double":document.getElementById(r+"2").innerHTML=s.responseText,document.getElementById(r).innerHTML=s.responseText,document.getElementById("count-result")&&(document.getElementById("count").innerHTML=document.getElementById("count-result").children[0].innerHTML);break;case"slice":s.responseText.length>1&&(slice[o]=s.responseText),20==o&&ace_editor.setValue(slice.join());break;case"order":if(null==(u=document.getElementById(r))){var u;document.getElementById(r+"trl").parentNode.setAttribute("name",""),(u=document.getElementById(r+"trl")).style.getPropertyValue("order")&&(dashorder="&prm_dashboard=true",dashlocation=u.parentNode.id);var p=u.offsetLeft,g=u.offsetTop;u.parentNode.removeChild(u),appendar("prm_drill=N&prm_objeto="+r+"&PRM_ZINDEX=&prm_posx="+p+"px&prm_posy="+g+"px&prm_parametros="+l+"&prm_zindex="+o+"&prm_screen="+tela+dashorder)}else u.style.getPropertyValue("order")&&(dashorder="&prm_dashboard=true",dashlocation=u.parentNode.id),u.parentNode.getAttribute("data-parent")?shscr(tela):(u.parentNode.setAttribute("name",""),p=u.getAttribute("data-left"),g=u.getAttribute("data-top"),u&&u.parentNode.removeChild(u),document.getElementById("drill_obj").setAttribute("value",r),appendar("prm_drill=N&prm_objeto="+r+"&PRM_ZINDEX=&prm_posx="+p+"&prm_posy="+g+"&prm_screen="+tela+dashorder),remover(r+"trl"));break;case"query":document.getElementById(r)?(document.getElementById(r).parentNode.innerHTML=s.responseText,ajustar(r)):(x=document.getElementById(r+"trl")).parentNode.removeChild(x),LAYER.setAttribute("class","");break;case"main":if(-1==s.responseText.indexOf("#alert")&&document.getElementById(r)){var f=document.getElementById(r);f.innerHTML=f.innerHTML+s.responseText}break;case"quick":if("NONE"!=(x=s.responseText.trim())){if(document.querySelector(".movingarticle")){var v=document.querySelector(".movingarticle").id,y=document.querySelector(".movingarticle").querySelectorAll(".dragme"),_=3;for(let e=0;e<y.length;e++)parseInt(y[e].style.getPropertyValue("ordem"))>=_&&(_=parseInt(y[e].style.getPropertyValue("ordem"))+1);var h="&prm_dashboard=true"}else v=tela,_=cursorx+"px",h="&prm_dashboard=false";if(ajax("fly","inserir_objeto","prm_objeto="+x+"&prm_screen="+v,!1),appendar("prm_objeto="+x+"&prm_zindex=999&prm_posx="+_+"&prm_posy="+cursory+"px&prm_screen="+tela+h,"",""),document.getElementById(x)&&-1!=document.getElementById(x).className.indexOf("texto")){var b=document.getElementById(x),E=window.innerWidth/2-b.clientWidth-60+"px",I=window.innerHeight/2-b.clientHeight-60+"px";b.style.setProperty("left",E),b.style.setProperty("top",I)}carrega("ajobjeto?prm_objeto="+x);document.getElementById(x+"_ds");get("jumpdrill")&&(get("jumpdrill").innerHTML="",get("jumpdrill").style.removeProperty("opacity"))}break;case"quick_custom":var x;ajax("fly","inserir_objeto","prm_objeto="+(x=s.responseText.trim())+"&prm_screen="+tela,!1),appendar("prm_drill=C&prm_objeto="+x+"&prm_zindex=999&prm_posx=&prm_posy=&prm_screen="+tela,"",""),document.getElementById("lista-custom-fav").setAttribute("title",x),document.getElementById("lista-custom-fav").children[0].innerHTML="NOVA CONSULTA",loadAttrib("ed_gadg","ws_par_sumary="+x+"&prm_tipo=consulta")}else telasup&&(0==navigator.onLine?alerta("msg",TR_OFF):0!=parseInt(telasup.style.getPropertyValue("height"))?(alerta("msg",TR_FC_NF),document.querySelector(".load")&&setTimeout(function(){document.querySelector(".load").innerHTML=TR_XC},500)):alerta("feed-fixo",TR_FC_NF))},s.open("POST","dwu."+i+"."+t,n),s.send(a);var c=s.responseText;-1!=c.indexOf("!alert")?(alerta("feed-fixo",c.substr(c.indexOf("!alert")+6,100)),error="true"):-1!=c.indexOf("#alert")?(alerta("msg",c.substr(c.indexOf("#alert")+6,100)),error="true"):error="false"}function ajaxExt(x){call("load_external","prm_screen="+x).then(function(url){var ajaxRequestExt;url.trim().length>0&&(ajaxRequestExt=new XMLHttpRequest,ajaxRequestExt.onreadystatechange=function(){4==ajaxRequestExt.readyState&&200==ajaxRequestExt.status&&(document.getElementById("main-ext").innerHTML=ajaxRequestExt.responseText,eval(document.getElementById("main-ext").getElementsByTagName("DIV")[0].getAttribute("data-scriptload")))},ajaxRequestExt.open("GET","dwu."+url,!1),ajaxRequestExt.send(null))})}function ajaxError(e){console.log("ERRO: "+e+"!!!")}function noerror(e,t,a){"false"==error&&(e&&(e.parentNode.parentNode.setAttribute("class","removing"),setTimeout(function(){e.parentNode.parentNode.style.display="none",e.parentNode.parentNode.id="",e.parentNode.id=""},200)),alerta(a,t))}function agrupadorChange(e,t,a){if(remover("jumpmed"),"N/A"!=a){var n,r,o,l,i,d;document.getElementById("drill_obj").value=e,document.getElementById(e)?(n=document.getElementById(e).parentNode.id,r=document.getElementById("par_"+e).value,o=document.getElementById("agp_"+e).value,d="N"):(n=document.getElementById(e+"trl").parentNode.id,r=document.getElementById("par_"+e+"trl").value,o=document.getElementById("agp_"+e+"trl").value,d="Y"),"main"==n?(l="&prm_dashboard=false",i=""):(dashlocation=n,l="&prm_dashboard=true",i=document.getElementById(e).style.getPropertyValue("order"));var s=o.replace(t,a);remover(e),appendar("prm_drill="+d+"&prm_objeto="+e+"&prm_zindex=&prm_parametros="+r+"&prm_posx="+i+"&prm_posy=&prm_screen="+tela+"&prm_track="+e+"&prm_objeton="+e+"&prm_alt_med="+s+l,n,e),setTimeout(function(){centerDrill(e)},100)}}function fixCol(e){if(document.getElementById(e+"fixed")&&document.getElementById(e+"c").children.length>1){document.getElementById(e+"fixed").innerHTML="";var t="",a=1,n=1,r=0,o=0,l=0,i=0,d=new Array,s="",c=0,m="";if(document.getElementById(e)){if(document.getElementById(e+"c").children[0])s=document.getElementById(e+"c").children[0];else{if("TBODY"!=document.getElementById(e+"c").children[1].tagName)return;s=document.getElementById(e+"c").children[1],c=1}var u=s.getElementsByTagName("th"),p=u.length;if(parseInt(document.getElementById(e+"fixed").getAttribute("data-number"))>0){r=parseInt(document.getElementById(e+"fixed").getAttribute("data-number"))<=document.getElementById(e+"c").children[0].children[0].childElementCount?parseInt(document.getElementById(e+"fixed").getAttribute("data-number")):document.getElementById(e+"c").children[1].children[0].childElementCount,1==c&&(r=2,minus=0);for(let t=0;t<r-1;t++)o+=1,m=document.getElementById(e+"c").children[0].children[0].children[t+1],n=parseInt(m.colSpan)+parseInt(n),d[t]=document.createElement("span"),d[t].className="fixed",d[t].innerHTML=m.innerHTML,d[t].style.color=m.parentNode.style.color,d[t].style.width=0==t?m.clientWidth+13+"px":m.clientWidth-5+"px",1==c?(d[t].style.padding="0 4px",d[t].style.lineHeight=m.clientHeight+"px",d[t].style.setProperty("min-height",m.clientHeight-8+"px"),d[t].style.textAlign="left"):(d[t].style.backgroundColor=m.parentNode.style.backgroundColor,d[t].style.height=m.clientHeight-8+"px",d[t].style.lineHeight=m.clientHeight-8+"px"),parseInt(m.clientWidth)+parseInt(l)<document.getElementById(e+"dv2").clientWidth&&(l=parseInt(m.clientWidth)+parseInt(l)),o=o+parseInt(m.colSpan)-1,document.getElementById(e+"fixed").innerHTML=document.getElementById(e+"fixed").innerHTML+d[t].outerHTML;-1==navigator.userAgent.indexOf("Trident")?document.getElementById(e+"fixed").setAttribute("data-width",l-1):document.getElementById(e+"fixed").setAttribute("data-width",l+1),document.getElementById(e+"fixed").style.setProperty("white-space","nowrap");for(var g=a;g<n;g++){for(var f=0;f<p;f++)if(i>1&&1==c||0==c){if(("total duplicado"!=u[f].className||"total geral"!=v.className)&&u[f].cellIndex==g){var v=document.createElement("li");v.innerHTML=u[f].outerHTML,u[f].parentNode.style.background.length>2?v.style.background=u[f].parentNode.style.background:document.getElementById(e+"fixed").style.background=document.getElementById(e+"dv2").style.background,"seta"!=u[f].className?v.className=u[f].parentNode.className:v.className=u[f].className+" "+u[f].parentNode.className,"total duplicado"!=v.className&&"total geral"!=v.className||(v.innerHTML=""),null!=u[f-1].getAttribute("data-valor")&&v.setAttribute("data-valor",u[f-1].getAttribute("data-valor")),null!=u[f-1].getAttribute("data-ordem")&&v.setAttribute("data-ordem",u[f-1].getAttribute("data-ordem")),v.style.backgroundImage=u[f].style.backgroundImage,v.style.paddingLeft=u[f].style.paddingLeft,g==a?13==parseInt(u[f].style.paddingLeft)?(v.style.width=u[g].clientWidth+2+"px",-1!=u[f-1].className.indexOf("nivel")&&v.style.setProperty("width",u[f].clientWidth+18+"px")):(v.style.width=u[g].clientWidth+10+"px",-1!=u[f-1].className.indexOf("nivel")&&v.style.setProperty("width",u[f].clientWidth+18+"px")):13==parseInt(u[f].style.paddingLeft)?(v.style.width=u[g].clientWidth-16+"px",-1!=u[f-1].className.indexOf("nivel")&&v.style.setProperty("width",u[f].clientWidth+"px")):(v.style.width=u[g].clientWidth-8+"px",-1!=u[f-1].className.indexOf("nivel")&&v.style.setProperty("width",u[f].clientWidth+"px")),u[f].parentNode.className,v.style.height=u[g].clientHeight-8+"px",v.style.paddingLeft=u[f].style.paddingLeft,null!=u[f].getAttribute("onclick")&&v.setAttribute("onclick",u[f].getAttribute("onclick")),v.setAttribute("data-linha",i),i+=1,t+=v.outerHTML}}else i+=1;var y=document.createElement("ul");y.className="fixed",y.setAttribute("data-i",g),y.style.setProperty("margin-top",0),y.innerHTML=t,document.getElementById(e+"fixed").innerHTML=document.getElementById(e+"fixed").innerHTML+y.outerHTML,t="",i=0}a=g,document.getElementById(e+"fixed").style.maxHeight=document.getElementById(e+"dv2").clientHeight+document.getElementById(e+"header").clientHeight-2+"px",document.getElementById(e+"fixed").clientWidth>document.getElementById(e+"dv2").clientWidth&&(alerta("feed-fixo",TR_LCF),document.getElementById(e+"fixed").innerHTML="")}}}}function popupmenu(e,t,a){if(document.getElementById("popupmenu")){var n=document.getElementById("popupmenu");if(n.classList.contains("visible")&&0==t.length)n.classList.remove("visible"),n.innerHTML="";else if(0==t.length)if(n.classList.add("visible"),sessionStorage.getItem("popupMenu")&&"S"!=document.getElementById("id_atualizar_menu").value){var r=document.createElement("div");r.innerHTML=sessionStorage.getItem("popupMenu"),n.innerHTML="",n.appendChild(r.children[0])}else call("popupMenu","prm_tipo="+e+"&prm_cond="+t).then(function(e){sessionStorage.setItem("popupMenu",e);var t=document.createElement("div");t.innerHTML=e,n.innerHTML="",n.appendChild(t.children[0]),document.getElementById("id_atualizar_menu").value="N"});else{var o=document.getElementById("screengroup").children[a-1].offsetTop-document.getElementById("screengroup").scrollTop;document.getElementById("screenlist")?(document.getElementById("screenlist").classList.remove("show"),setTimeout(function(){if(sessionStorage.getItem(e+"-"+t)&&"###menu_grupo_favoritos###"!=t){document.getElementById("screenlist").remove();var a=document.createElement("div");a.innerHTML=sessionStorage.getItem(e+"-"+t),n.appendChild(a.children[0]),setTimeout(function(){document.getElementById("screenlist").style.setProperty("top",o+"px"),document.getElementById("screenlist").classList.add("show")},200)}else call("popupMenu","prm_tipo="+e+"&prm_cond="+t).then(function(a){sessionStorage.setItem(e+"-"+t,a),document.getElementById("screenlist").remove();var r=document.createElement("div");r.innerHTML=a,n.appendChild(r.children[0]),setTimeout(function(){document.getElementById("screenlist").style.setProperty("top",o+"px"),document.getElementById("screenlist").classList.add("show")},200)})},100)):sessionStorage.getItem(e+"-"+t)&&"###menu_grupo_favoritos###"!=t?(n.innerHTML=n.innerHTML+sessionStorage.getItem(e+"-"+t),setTimeout(function(){document.getElementById("screenlist").style.setProperty("top",o+"px"),document.getElementById("screenlist").classList.add("show")},200)):call("popupMenu","prm_tipo="+e+"&prm_cond="+t).then(function(a){sessionStorage.setItem(e+"-"+t,a),n.innerHTML=n.innerHTML+a,setTimeout(function(){document.getElementById("screenlist").style.setProperty("top",o+"px"),document.getElementById("screenlist").classList.add("show")},200)})}}}function fakeOption(e,t,a,n,r){var o=document.getElementById("fakelist");document.getElementById("attriblist").classList.contains("open")?(o.classList.remove("noattrib"),o.classList.add("attrib")):(o.classList.remove("attrib"),o.classList.add("noattrib")),document.getElementById("fakelist").classList.toggle("visible"),o.classList.contains("visible")&&call("fakelist","prm_ident="+e+"&prm_titulo="+t+"&prm_campo="+a+"&prm_visao="+n+"&prm_ref="+r).then(function(e){var t=document.querySelector(".closer").cloneNode(!0);o.innerHTML=e,o.appendChild(t)}).then(function(){document.getElementById("filter-value")&&document.getElementById("filter-value").focus()})}sessionStorage.clear(),document.addEventListener("mousedown",function(e){mousedown=!0}),document.addEventListener("mouseup",function(e){if(mousedown=!1,e.target.parentNode&&!(e.target.classList.contains("opt")||e.target.classList.contains("search")||e.target.parentNode.classList.contains("search")||e.target.parentNode.classList.contains("custom"))){var t=this.querySelectorAll(".fakelistbox.open");for(let a=0;a<t.length;a++){let n=t[a].parentNode;if(n.id!=e.target.id&&n.id!=e.target.parentNode.id&&n.parentNode.id!=e.target.parentNode.id&&!e.target.classList.contains("opt")){n.click(),t[a].classList.remove("open"),t[a].style.removeProperty("height");let e=t[a].previousElementSibling;0==e.innerHTML.length&&(e.innerHTML=e.getAttribute("data-placeholder"),e.setAttribute("data-custom","N"))}}}});var fake_conteudo="";function fakeListBox(e,t,a,n,r,o,l,i,d){var s=document.getElementById(e),c=s.children[0].getAttribute("data-fixed").length;if(s.querySelector(".fakelistbox").classList.contains("open")){if(s.classList.remove("open"),s.title!=s.getAttribute("data-default")){if(s.getAttribute("data-children")){var m=s.getAttribute("data-children");m.length>0&&fakeReset(m.split("|"))}s.setAttribute("data-default",s.title),s.previousElementSibling&&"script"==s.previousElementSibling.className&&s.previousElementSibling.click()}if(s.querySelector(".fakelistbox").querySelector(".selected"))var u=s.querySelector(".fakelistbox").querySelector(".selected").title,p=s.querySelector(".fakelistbox").querySelector(".selected").textContent;if(s.children[0].getAttribute("contentEditable")&&"mouseleave"!=i.type||(s.querySelector(".fakelistbox").style.removeProperty("height"),s.querySelector(".fakelistbox").classList.remove("open"),0==s.children[0].innerHTML.trim().length&&"N"==n&&(0==c&&(void 0===u?s.children[0].innerHTML=s.children[0].getAttribute("data-placeholder"):(s.children[0].innerHTML=p,s.children[0].title=u,s.title=u)),s.children[0].blur())),"S"==n&&"click"==i.type&&0==c){var g=s.querySelector(".fakelistbox").querySelectorAll(".selected, .reverse"),f=[];if(g.length>0){for(let e=0;e<g.length;e++)f.push(g[e].innerHTML);s.children[0].innerHTML=f.join(", ")}else s.children[0].innerHTML=""}0!=c&&s.children[0].getAttribute("data-fixed").length>0&&(s.children[0].innerHTML=s.children[0].getAttribute("data-fixed"))}else s.classList.add("open"),s.classList.add("loading"),fakeboxevent(e,t,a,n,r,o,s,c,"",l,d)}function fakeReset(e){for(let t=0;t<e.length;t++){let a=document.getElementById(e[t]),n=a.children[0];a.title="",a.setAttribute("data-default",""),a.setAttribute("data-ant",""),n.getAttribute("data-placeholder")?n.innerText=n.getAttribute("data-placeholder"):n.innerText=""}}function fakeboxReorder(e,t,a,n,r,o,l){var i,d="",s=e.parentNode.parentNode.title.indexOf("$[NOT]"),c=e.parentNode.parentNode.title.indexOf("|"),m=(e.parentNode.parentNode.title.trim().length,e.classList.contains("reverse"));if(l)var u=e.parentNode.querySelectorAll(".opt");e.classList.contains("selected")&&-1==s?-1!=c?(d="remove",i=[]):-1!=r.indexOf("true")?(d="add",i=[]):(d="remove",i=[]):m?(d="remove",i=[]):(d="add",i=e.parentNode.parentNode.title.split("|"));if(-1!=r.indexOf("true")){if(0==e.parentNode.parentNode.title.length){if(l){var p=[];for(let e=0;e<u.length;e++)u[e].classList.add("selected"),p.push(u[e].title);return e.parentNode.parentNode.title=p.join("|"),!1}e.classList.toggle("selected")}else{if(l){for(let e=0;e<u.length;e++)u[e].classList.remove("selected"),u[e].classList.remove("reverse");return e.parentNode.parentNode.title="",!1}-1==c?e.classList.contains("selected")||e.classList.contains("reverse")?-1!=s||"mouseover"==o?(e.classList.remove("selected"),e.classList.remove("reverse")):e.classList.add("reverse"):(-1!=s&&e.classList.add("reverse"),e.classList.add("selected")):m?(e.classList.remove("selected"),e.classList.remove("reverse")):-1==s?e.classList.toggle("selected"):(e.classList.toggle("selected"),e.classList.toggle("reverse"))}m=e.classList.contains("reverse")}else if(0==e.parentNode.parentNode.title.length){if(l){p=[];for(let e=0;e<u.length;e++)u[e].classList.add("selected"),p.push(u[e].title);return e.parentNode.parentNode.title=p.join("|"),!1}e.classList.toggle("selected")}else{if(l){for(let e=0;e<u.length;e++)u[e].classList.remove("selected");return e.parentNode.parentNode.title="",!1}e.classList.toggle("selected")}var g=e.parentNode.querySelectorAll(".selected"),f=!1;if(e.getAttribute("data-ordem"))if(e.classList.contains("selected"))switch(g.length){case 10:e.setAttribute("data-ordem","A");break;case 11:e.setAttribute("data-ordem","B");break;case 12:e.setAttribute("data-ordem","C");break;case 13:e.setAttribute("data-ordem","D");break;case 14:e.setAttribute("data-ordem","E");break;case 15:e.setAttribute("data-ordem","F");break;default:e.setAttribute("data-ordem",g.length)}else a=parseInt(e.getAttribute("data-ordem")),e.setAttribute("data-ordem",0),f=!0;var v,y="",_=[],h=[],b=e.parentNode.parentNode.title.split("|");if(v=-1!=s||m?"$[NOT]":"","remove"==d)for(let t=0;t<b.length;t++)b[t].replace("$[NOT]","")!=e.title&&i.push(b[t]);else e.classList.contains("selected")&&(m?i.push(v+e.title):i.push(e.title));g=e.parentNode.querySelectorAll(".selected");for(let e=0;e<g.length;e++)1==f?g[e].getAttribute("data-ordem")>=a&&g[e].setAttribute("data-ordem",g[e].getAttribute("data-ordem")-1):g[e].getAttribute("data-ordem")&&(y=g[e].getAttribute("data-ordem")+"#"),_.push(y+g[e].textContent),h.push(y+v+g[e].title);_=_.sort(),h=h.sort(),0==n&&0==document.getElementById(t).children[0].innerHTML.length&&(document.getElementById(t).children[0].innerHTML=""),document.getElementById(t).title=i.filter(e=>e).join("|").replace(/[0-9A-Z]+#/g,"")}var holdoption="",reversingoption="";function fakeboxevent(e,t,a,n,r,o,l,i,d,s,c){l.classList.remove("errorinput"),l.classList.add("loading");var m="";r.length>0&&(m=document.getElementById(r)?document.getElementById(r).title:r),o.length>0&&document.getElementById(o)&&(document.getElementById(o).classList.contains("dragme")||(o=document.getElementById(o).title));if(t.split("$").length>1){l.querySelector(".fakelistbox").innerHTML="";var u=fakeListCustom[t.replace("$","")],p=JSON.parse(u);for(let e in p)l.querySelector(".fakelistbox").appendChild(fakeTag(p[e].value,p[e].text,p[e].type,a));fakeEvent(l,e,a,n,r,o,i,d,s),l.classList.remove("loading")}else call("fakelistoptions","prm_ident="+e+"&prm_campo="+t+"&prm_visao="+m+"&prm_ref="+encodeURIComponent(a)+"&prm_adicional="+encodeURIComponent(o)+"&prm_search="+d).then(function(e){l.querySelector(".fakelistbox").innerHTML=e}).then(function(){fakeEvent(l,e,a,n,r,o,i,d,s)}).then(function(){l.classList.remove("loading")})}function fakeTag(e,t,a,n){var r=document.createElement("li");return r.className=a,n==e&&(r.className=a+" selected"),r.title=e,r.innerHTML=t||e,r}function fakeEvent(e,t,a,n,r,o,l,i,d){if(e.querySelector(".fakelistbox").children[0]){var s=e.querySelector(".fakelistbox").children.length;s>7&&(s=7);var c=e.querySelector(".fakelistbox").children[0].clientHeight+2,m=s*c,u=e.getBoundingClientRect().top,p=e.clientHeight;if("painel"==e.parentNode.id)var g=e.parentNode.clientHeight;else g=PRINCP.clientHeight;m+u+c>g&&!document.querySelector(".mobile")?u<m?(m=u-p,e.querySelector(".fakelistbox").style.setProperty("bottom",p+"px")):e.querySelector(".fakelistbox").style.setProperty("bottom",p+"px"):e.querySelector(".fakelistbox").style.setProperty("top",p+"px"),e.querySelector(".fakelistbox").style.setProperty("height",m+"px"),e.querySelector(".search")&&i.length>0&&(e.querySelector(".search").value=i,e.querySelector(".search").focus()),e.classList.remove("loading"),e.querySelector(".fakelistbox").classList.add("open");var f=e.querySelector(".fakelistbox").querySelectorAll(".opt"),v=f.length;for(let e=0;e<v;e++){if(linhai=f[e],"S"!=n||document.querySelector(".mobile")||linhai.addEventListener("mouseover",function(e){1==mousedown&&fakeboxReorder(this,t,0,l,d,"mouseover",!1)}),document.getElementById(t).children[0].setAttribute("data-custom","N"),"S"==n){linhai.addEventListener("click",function(e){e.stopPropagation()});var y=down}else y=up;linhai.addEventListener(y,function(e){if(1==e.which&&(mousedown=!0),"S"==n){var a;if(PRINCP.classList.contains("mac"))try{a=e.metaKey}catch(t){a=e.ctrlKey}else a=e.ctrlKey;fakeboxReorder(this,t,0,l,d,y,a)}else this.parentNode.parentNode.getAttribute("data-min")>0?(this.parentNode.querySelector(".selected")&&this.parentNode.querySelector(".selected").classList.remove("selected"),this.classList.add("selected")):this.classList.contains("selected")?this.classList.remove("selected"):(this.parentNode.querySelector(".selected")&&this.parentNode.querySelector(".selected").classList.remove("selected"),this.classList.add("selected")),this.parentNode.querySelector(".selected")?(0==l&&(document.getElementById(t).children[0].innerHTML=this.parentNode.querySelector(".selected").innerHTML),document.getElementById(t).title=this.parentNode.querySelector(".selected").title):(0==l&&(document.getElementById(t).children[0].innerHTML=""),document.getElementById(t).title=""),document.getElementById(t).setAttribute("data-ant",document.getElementById(t).title),this.classList.contains("opt")&&(document.querySelector(".custom")&&(document.querySelector(".custom").children[0].value,document.querySelector(".custom").children[0].removeAttribute("value")),this.parentNode.parentNode.click())})}}else alerta("feed-fixo",TR_NR)}function loader(e){if(!document.getElementById(e).querySelector(".load")){var t=document.getElementById(e);if("TBODY"==t.tagName)(a=document.createElement("td")).setAttribute("colspan","99"),a.style.setProperty("text-align","center");else var a=document.createElement("div");t.innerHTML="",a.className="load",a.innerHTML=LAYER.children[1].innerHTML,document.getElementById(e).appendChild(a)}document.getElementById("content").classList.add("loading")}function ordem(e,t,a){t=document.getElementById("current_screen").value;document.getElementById(e)?(ajax("order","alterorder","prm_objeto="+e+"&prm_screen="+t+"&prm_valor="+a,!1,e),document.getElementById(e).style.zindex=""):(parametro=document.getElementById(e+"trl").value,ajax("order","alterorder","prm_objeto="+e+"&prm_screen="+t+"&prm_valor="+a,!1,e,document.getElementById(e+"trl").style.zIndex,parametro),document.getElementById(e+"trl").style.zindex="")}function menuLink(e,t){if("FILE"!=this.parentNode.className){e=this.parentNode.id.replace("menu","");t=this.innerHTML,remover(e+"trl"),-1==e.indexOf("ORG")?(document.getElementById(e)&&-1!=document.getElementById(e).className.indexOf("relatorio")&&document.getElementById(e).remove(),document.getElementById("drill_obj").value=e,cleardrill(),appendar("prm_drill=Y&prm_objeto="+e+"&PRM_POSX=200PX&PRM_POSY=100PX&PRM_ZINDEX=2&prm_screen="+tela+"&prm_track="+e+"&prm_objeton="+t,"",""),centerDrill(e),carrega("ajobjeto?prm_objeto="+e+"trl")):(appendar("prm_drill=Y&prm_objeto="+e+"&PRM_POSX="+cursorx+"PX&PRM_POSY="+cursory+"PX&PRM_ZINDEX=2&prm_screen="+tela+"&prm_track="+e+"&prm_objeton="+t,"",""),setTimeout(function(){carrega("ajobjeto?prm_objeto="+e)},6e3))}}function donut(e){if("slide-S"!=PRINCP.className&&"SCR_CUSTOMIZACAO"!=tela){e.stopPropagation();e.target;var t=document.getElementById("donut");t.classList.contains("open")?t.classList.remove("open"):(e.clientY+t.clientHeight>window.innerHeight?e.clientY<t.clientHeight?t.style.setProperty("top","1px"):t.style.setProperty("top",e.clientY-t.clientHeight+"px"):t.style.setProperty("top",e.clientY+"px"),t.style.setProperty("left",e.clientX+10+"px"),t.classList.add("open"))}}function cycle(e,t){var a=new Array,n=MAIN.querySelectorAll(".dragme.dados, .dragme.grafico, .dragme.medidor"),r=n.length;for(let e=0;e<r;e++)a[e]=n[e].id;scale(e,"indirect"),setTimeout(function(){var r=a.indexOf(e);r="next"==t?parseInt(r)+1<n.length?parseInt(r)+1:0:parseInt(r)-1>-1?parseInt(r)-1:n.length-1,scale(n[parseInt(r)].id,"indirect")},100)}function savepwd(){document.getElementById("salvar").setAttribute("class",""),document.getElementById("salvar").setAttribute("onclick","var senha1 = document.getElementById('senha1').value;  ajax('fly', 'save_pwd', 'prm_senha='+encodeURIComponent(senha1)+'&prm_email='+document.getElementById('email').value+'&prm_number='+document.getElementById('number').value+'&prm_nome='+document.getElementById('completo').value); curtain(); setTimeout(function(){ window.location.reload(true); },4000); ")}function send_textPost(e,t){var a="",n=get("campo");document.getElementById("par_"+e)&&(a=document.getElementById("par_"+e).value),document.getElementById("par_"+e+"trl")&&(a=document.getElementById("par_"+e+"trl").value);var r="";if(document.getElementById("mvs_"+e)&&(r=document.getElementById("mvs_"+e).value),document.getElementById("mvs_"+e+"trl")&&(r=document.getElementById("mvs_"+e+"trl").value),(o=document.getElementById("fieldmsg").value.replace(/<.*?>/g,"")).length>1){var o=encodeURIComponent(o);document.getElementById("sendmail").classList.contains("selected")?email="S":email="N",document.getElementById("sendsms").classList.contains("selected")?sms="S":sms="N";var l=document.querySelector(".list_container").querySelector(".selected").title;call("insert_post","prm_objeto="+e+"&prm_screen="+tela+"&prm_visao="+r+"&prm_usuario="+l+"&prm_msg="+o+"&prm_time="+document.getElementById("tempo-msg").title+"&prm_line="+t+"&prm_email="+email+"&prm_sms="+sms+"&prm_filtro="+a).then(function(e){-1==e.indexOf("FAIL")?call("text_post","prm_objeto=&prm_line=&prm_group="+l).then(function(e){n.innerHTML=e,n.scrollTop=n.scrollHeight}):alerta("msg",TR_ER_MS)}),document.getElementById("fieldmsg").value=""}}function selectTextPost(e){e.parentNode.querySelector(".selected")&&e.parentNode.querySelector(".selected").classList.remove("selected"),e.classList.add("selected"),e.classList.remove("msgs"),call("text_post","prm_objeto=&prm_line=&prm_group="+e.title).then(function(e){let t=get("campo");t.innerHTML=e,t.scrollTop=t.scrollHeight})}function fakeLang(e,t,a){var n=document.getElementById("fakelist");if(""==n.className){"open"==document.getElementById("attriblist").className&&n.style.setProperty("left","330px"),attReopen(function(){ajax("list","fakelist","prm_ident="+e+"&prm_titulo="+a+"&prm_campo=lang&prm_visao="+t,!1,"attriblist")},"attriblist")}n.classList.toggle("visible")}var fallback="";"undefined"!=typeof ADMIN&&("A"==ADMIN&&("undefined"==typeof ace&&(fallback+='<script src="dwu.fcl.download?arquivo=ace.js"><\/script>'),fallback+='<script src="dwu.fcl.download?arquivo=mode-sql.js"><\/script>'),document.write(fallback)),paste="";var clickGlobal=new Object;function start(){if(window.addEventListener("scroll",function(){get("jumpdrill")&&get("jumpdrill").remove(),get("jumpmed")&&get("jumpmed").remove(),get("selecteddata")&&(get("selecteddata").id=""),document.querySelector(".optionbox.obsbox.open")&&(document.querySelector(".optionbox").classList.remove("open"),setTimeout(function(){document.querySelector(".optionbox").remove()},200))}),document.addEventListener("mousedown",selectmouse),document.addEventListener("touchstart",selectmouse),document.addEventListener("mouseup",function(){isdrag=!1,xdrag=0,ydrag=0}),document.addEventListener("touchend",function(){isdrag=!1,xdrag=0,ydrag=0}),document.addEventListener("mousemove",movemouse),document.addEventListener("touchmove",movemouse),document.getElementById("show_comandos")&&(document.getElementById("show_comandos").addEventListener("click",function(e){if("backward"==e.target.className||"backward"==e.target.parentNode.className||"backward"==e.target.parentNode.parentNode.className){clearInterval(sobbar),clearTimeout(activeshow),document.getElementById("show_only_bar").style.setProperty("width",0);var t=document.getElementById("active-show").previousElementSibling;"show_only"==t.className?(document.getElementById("active-show").id="",t.id="active-show",removeTrash(),shscr(t.value)):(document.getElementById("active-show").id="",projecoes[projecoes.length-1].id="active-show",removeTrash(),shscr(projecoes[projecoes.length].value))}if("forward"==e.target.className||"forward"==e.target.parentNode.className||"forward"==e.target.parentNode.parentNode.className){clearInterval(sobbar),clearTimeout(activeshow),document.getElementById("show_only_bar").style.setProperty("width",0);var a=document.getElementById("active-show").nextElementSibling;"show_only"==a.className?(document.getElementById("active-show").id="",a.id="active-show",removeTrash(),shscr(a.value)):(document.getElementById("active-show").id="",projecoes[0].id="active-show",removeTrash(),shscr(projecoes[0].value))}e.target.className}),document.addEventListener("keyup",function(e){if(!LAYER.classList.contains("ativo")){var t,a=e.keyCode;if("39"==a)if(document.getElementById("show_only_bar"))clearInterval(sobbar),clearTimeout(activeshow),document.getElementById("show_only_bar").style.setProperty("width",0),"show_only"==(t=document.getElementById("active-show").nextElementSibling).className?(document.getElementById("active-show").id="",t.id="active-show",removeTrash(),shscr(t.value)):(document.getElementById("active-show").id="",projecoes[0].id="active-show",removeTrash(),shscr(projecoes[0].value));if("37"==a)if(document.getElementById("show_only_bar"))clearInterval(sobbar),clearTimeout(activeshow),document.getElementById("show_only_bar").style.setProperty("width",0),"show_only"==(t=document.getElementById("active-show").previousElementSibling).className?(document.getElementById("active-show").id="",t.id="active-show",removeTrash(),shscr(t.value)):(document.getElementById("active-show").id="",projecoes[projecoes.length].id="active-show",removeTrash(),shscr(projecoes[projecoes.length].value))}})),document.removeEventListener(up,clickGlobal),clickGlobal=function(e){var t=e.target;if(t.classList.contains("options")&&"touchend"==up&&(e.stopPropagation,t.classList.toggle("hover")),t.classList.contains("fechar")&&(t.parentNode.remove(),document.querySelector("."+t.parentNode.id+"_jump")&&document.querySelector("."+t.parentNode.id+"_jump").remove()),t.classList.contains("removeobj")&&confirm("Excluir objeto da tela?")&&remover(t.parentNode.parentNode.id,"excluir"),t.classList.contains("preferencias")&&(closeSideBar("saveap"),(t.parentNode.parentNode.classList.contains("front")||t.parentNode.parentNode.classList.contains("grafico")||t.parentNode.parentNode.classList.contains("dados")||t.parentNode.parentNode.classList.contains("marquee")||t.parentNode.parentNode.classList.contains("texto")||t.parentNode.parentNode.classList.contains("medidor")||t.parentNode.parentNode.classList.contains("file")||t.parentNode.parentNode.classList.contains("relatorio")||t.parentNode.parentNode.classList.contains("generico"))&&loadAttrib("ed_gadg","ws_par_sumary="+t.parentNode.parentNode.id.replace("trl","")),t.parentNode.parentNode.parentNode.classList.contains("icone")&&loadAttrib("ed_gadg","ws_par_sumary="+t.parentNode.parentNode.parentNode.id.replace("trl","")),t.parentNode.parentNode.classList.contains("pro6")&&loadAttrib("ed_call","prm_object="+t.parentNode.parentNode.id.replace("trl","")+"&prm_screen="+tela)),t.classList.contains("filtros")&&(closeSideBar("saveap"),openFilter(t.parentNode.parentNode.id+"-filterlist")),t.classList.contains("destaques")&&(closeSideBar("saveap"),openDestaque(t.parentNode.parentNode.id+"-destaquelist")),t.classList.contains("talk")){var a=document.getElementById("text-talk");if(a.classList.contains("open"))a.classList.remove("open");else{var n=document.getElementById("drill_go").value;a.classList.remove("open"),a.setAttribute("data-line",n),a.setAttribute("data-objeto",t.parentNode.parentNode.id),ajax("list","text_post","prm_objeto="+t.parentNode.parentNode.id+"&prm_line="+n,!1,"campo"),a.classList.add("open"),document.getElementById("campo").scrollTo(0,1e5),textTalkint=setInterval(function(){document.getElementById("campo")?ajax("list","text_post","prm_objeto="+t.parentNode.parentNode.id.replace("trl","")+"&prm_line="+n,!0,"campo"):clearInterval(textTalkint),document.getElementById("campo").scrollTo(0,1e5)},5e3),get("jumpdrill")&&(get("jumpdrill").style.setProperty("opacity","0"),setTimeout(function(){get("jumpdrill").innerHTML=""},100))}}if(t.classList.contains("excel")&&toexcel(t.parentNode.parentNode.id),t.classList.contains("data_table")&&"A"==ADMIN){let e=t.parentNode.id.replace("more",""),a=get("dados_"+e).getAttribute("data-visao");document.getElementById("titulo").innerHTML=t.title,call_save("consulta"),carregaPainel("data_table",a+"|"+e.replace("trl","")),carrega("consulta?prm_objeto="+e.replace("trl","")+"&prm_visao="+a),curtain("enabled")}if(t.classList.contains("lightbulb")){closeSideBar("saveap");let e=t.parentNode.id.replace("more","");t.parentNode.parentNode.classList.contains("pro6")?(telaSup("objeto",e.replace("trl","")),titulo(t,"c"),curtain("enabled"),carregaPainel("list_call",t.parentNode.parentNode.id),"A"==ADMIN?carrega("list_call?prm_objeto="+e.replace("trl","")+"&prm_screen="+tela):carrega("list_call_end?prm_objeto="+e.replace("trl","")+"&prm_screen="+tela),get("attriblist").querySelector(".closer").click(),call_save("")):(titulo(t,"c"),call_save(""),telaSup("objeto",e.replace("trl","")),carregaPainel("list_go",e.replace("trl","")),carrega("list_go?prm_objeto="+e.replace("trl","")),curtain("enabled"))}if(t.classList.contains("filter")){closeSideBar("saveap");let e=t.parentNode.id.replace("more",""),a=get("dados_"+e).getAttribute("data-visao");titulo(t,"c"),call_save(""),telaSup("objeto",e.replace("trl","")),telaSup("visao",a),carregaPainel("list_ofiltro",e.replace("trl","")+"|"+a),carrega("list_ofiltro?ws_par_sumary="+e.replace("trl","")+"&prm_visao="+a),curtain("enabled")}if(t.classList.contains("sigma")){closeSideBar("saveap");let e=t.parentNode.id.replace("more",""),a=get("dados_"+e).getAttribute("data-visao");carregaPainel("calculada",e.replace("trl","")),document.getElementById("titulo").innerHTML=t.title,call_save(""),carrega("list_calculada?prm_objeto="+e.replace("trl","")+"&prm_visao="+a),curtain("enabled")}if(t.classList.contains("star")){closeSideBar("saveap");let e=t.parentNode.id.replace("more",""),a=get("dados_"+e).getAttribute("data-visao");titulo(t,"c"),call_save(""),telaSup("visao",a),telaSup("objeto",e.replace("trl","")),carregaPainel("blink",e.replace("trl","")+"|"+a),carrega("blink?prm_objeto="+e.replace("trl","")+"&prm_visao="+a),curtain("enabled")}if(t.classList.contains("conf")){loading();let e=t.parentNode.parentNode.id;ajax("fly","favoritar","prm_objeto="+e+"&prm_nome="+document.getElementById(e+"_ds").innerHTML+"&prm_url=&prm_screen="+tela+"&prm_parametros="+encodeURIComponent(document.getElementById("par_"+e).value)+"&prm_dimensao="+encodeURIComponent(document.getElementById("col_"+e).value)+"&prm_medida="+encodeURIComponent(document.getElementById("agp_"+e).value)+"&prm_pivot="+encodeURIComponent(document.getElementById("cup_"+e).value)+"&prm_acao=incluir",!1),loading()}if(t.classList.contains("arrowturn")){loading();var r=t.parentNode.parentNode.id.replace("trl","");if(t.parentNode.parentNode.classList.contains("cross"))var o="N";else o="S";if(document.getElementById("par_"+t.parentNode.parentNode.id))var l=document.getElementById("par_"+t.parentNode.parentNode.id).value;else l="";if("mac"==PRINCP.className||"mobile"==PRINCP.className)var i="-webkit-order";else i="order";if(t.parentNode.parentNode.parentNode.style.getPropertyValue(i)&&!t.parentNode.parentNode.parentNode.classList.contains("drill")){var d=t.parentNode.parentNode.parentNode.style.getPropertyValue(i),s="&prm_dashboard=true";dashlocation=t.parentNode.parentNode.parentNode.id}else{d=t.parentNode.parentNode.offsetLeft;var c=t.parentNode.parentNode.offsetTop;s="&prm_dashboard=false"}document.getElementById("drill_obj").value=r,document.getElementById(r)?document.getElementById(r).remove():document.getElementById(r+"trl").remove();let e="N";t.parentNode.parentNode.classList.contains("drill")&&(e="Y"),appendar("prm_drill="+e+"&prm_objeto="+r+"&prm_parametros="+l+"&PRM_POSX="+d+"&PRM_POSY="+c+"&PRM_ZINDEX=2&prm_screen="+tela+"&prm_track="+r+"&prm_objeton=&prm_cross="+o+s,dashlocation,!1)}if(t.classList.contains("size")){closeSideBar("saveap"),attReopen(function(){t.parentNode.parentNode.parentNode.id;call("av_prop","ws_par_sumary="+t.parentNode.id.replace("more","").replace("trl","")+"&prm_screen="+tela).then(function(e){document.getElementById("attriblist").innerHTML=e}).then(function(){t.parentNode.classList.remove("hover")})},"attriblist")}if(t.classList.contains("aduser")){document.querySelector(".optionbox")&&document.querySelector(".optionbox").remove();let e=t.title;attReopen(function(){call("advancedUsers","prm_user="+e).then(function(e){get("attriblist").innerHTML=e})},"attriblist")}"custom"==t.id&&lmenuLink(t)},document.addEventListener(up,clickGlobal),document.getElementById("call-menu")){var e=document.getElementById("call-menu");call("obj_screen_count","prm_screen=DEFAULT&prm_tipo=CALL_LIST").then(function(t){parseInt(t)>0?e.classList.remove("invisible"):e.classList.add("invisible")})}if(document.getElementById("show_only_screen")&&document.getElementById("float-filter")){var t=document.getElementById("float-filter");call("obj_screen_count","prm_screen=DEFAULT&prm_tipo=FLOAT").then(function(e){parseInt(e)>0?t.classList.remove("invisible"):t.classList.add("invisible")})}if(document.getElementById("fechar_sup").addEventListener("click",fecharSup),document.getElementById("prefdrop")){var a=document.getElementById("prefdrop").children;for(o=0;o<a.length;o++)"noscript"!=a[o].className&&(a[o].firstElementChild.addEventListener("mousedown",function(){document.getElementById("prefdrop").clientWidth>60&&lmenuLink(this)}),a[o].firstElementChild.addEventListener("touchend",function(e){e.cancelBubble(),e.preventDefault(),document.getElementById("prefdrop").clientWidth>60&&lmenuLink(this)}))}"A"==ADMIN&&(document.addEventListener("keypress",function(e){var t=e.which,a=document.getElementById("debug-key");switch(t){case 100:case 68:startTimer=setTimeout(function(){a.value=0},1e4),a.value=e.which;break;case 101:case 69:"100"==a.value||"68"==a.value?a.value=e.which:a.value=0;break;case 98:case 66:"101"==a.value||"69"==a.value?a.value=e.which:a.value=0;break;case 117:case 85:"98"==a.value||"66"==a.value?a.value=e.which:a.value=0;break;case 103:case 71:"117"==a.value||"85"==a.value?(a.value=0,""==document.getElementById("debug").className?(document.getElementById("debug").setAttribute("class","active"),setTimeout(function(){document.getElementById("debug").firstElementChild.focus()},100)):document.getElementById("debug").setAttribute("class","")):a.value=0;break;default:a.value=0}}),document.addEventListener("keydown",function(e){e.ctrlKey&&"Enter"==e.key&&(e.preventDefault(),document.getElementById("data_list_menu")&&document.getElementById("data_list_menu").classList.contains("open")&&(document.getElementById("data-valor").focus(),document.getElementById("data-valor").blur(),document.querySelector(".link.ac1").click()))})),document.addEventListener("mousemove",function(e){cursorx=e.pageX-12,cursory=e.pageY-12}),document.addEventListener("touchstart",function(e){cursorx=e.touches[0].pageX-12,cursory=e.touches[0].pageY-12}),document.getElementById("princp").addEventListener("touchstart",function(e){"princp"==e.target.id&&"open"==document.getElementById("attriblist").className&&(document.getElementById("attriblist").className="")}),window.addEventListener("orientationchange",function(){0==window.orientation?(PRINCP.classList.add("retrato"),PRINCP.classList.remove("paisagem")):(PRINCP.classList.remove("retrato"),PRINCP.classList.add("paisagem"))}),window.addEventListener("touchstart",function(e){var t=e.touches;if(t.length>1){var a=document.getElementById("donut");a.style.left=t[1].clientX+15+"px",a.style.top=t[1].clientY+45+"px",a.classList.toggle("open")}}),window.addEventListener("touchmove",function(e){clearTimeout(time)}),window.addEventListener("touchend",function(){clearTimeout(time)}),apscreen("DWU.fcl.show_screen?prm_screen=DEFAULT","DEFAULT");var n=document.getElementById("loading-bar").children[0].children[0],r="";if(setTimeout(function(){r=setInterval(function(){n.style.setProperty("width",parseInt(n.style.getPropertyValue("width"))+1+"%")},40)},200),setTimeout(function(){clearInterval(r),n.style.setProperty("width","60%")},300),setTimeout(function(){n.style.setProperty("width","100%")},1e3),setTimeout(function(){remover("starting"),mac(),donutEvent(),telasup=document.getElementById("telasup"),telacustom=document.getElementById("telacustom")},1300),(projecoes=document.querySelectorAll(".show_only")).length>0){var o=0;projecoes[0].id="active-show",setTimeout(function(){shscr(projecoes[0].value)},3100)}if("DEFAULT"==document.getElementById("current_screen").value)var l=0,i=setInterval(function(){if(null==document.getElementById("loading-bar")||0==l){clearInterval(i),l=1;var e=document.querySelectorAll(".dragme"),t=e.length;for(let a=0;a<t;a++){if(document.getElementById(e[a].id+"more"))document.getElementById(e[a].id+"more").addEventListener("touchend",function(){this.classList.add("hover");setTimeout(function(e){e.classList.remove("hover")},5e3)})}}},2e3);fakeListCustom.tpGroup='{ "1": { "value": "", "text": "'+TR_TP_MT+'", "type": "group" }, "2": { "value": "ROLL", "text": "'+TR_TP_SI+'", "type": "opt" }, "3": { "value": "GROUP", "text": "'+TR_TP_NA+'", "type": "opt" } }',fakeListCustom.amostra='{ "1": { "value": "", "text": "'+TR_AM_LL+'", "type": "group" }, "2": { "value": "50", "text": "50", "type": "opt" }, "3": { "value": "100", "text": "100", "type": "opt" }, "4": { "value": "200", "text": "200", "type": "opt" } }',fakeListCustom.condicoesSimples='{ "1": { "value": "", "text": "'+TR_CS_CD+'", "type": "group" }, "2": { "value": "IGUAL", "text": "'+TR_CS_IA+'", "type": "opt" }, "3": { "value": "DIFERENTE", "text": "'+TR_CS_DD+'", "type": "opt" }, "4": { "value": "MAIOR", "text": "'+TR_CS_MA+'", "type": "opt" }, "5": { "value": "MENOR", "text": "'+TR_CS_ME+'", "type": "opt" }, "6": { "value": "MAIOROUIGUAL", "text": "'+TR_CS_AI+'", "type": "opt" }, "7": { "value": "MENOROUIGUAL", "text": "'+TR_CS_EI+'", "type": "opt" }, "8": { "value": "LIKE", "text": "'+TR_CS_SE+'", "type": "opt" }, "9": { "value": "NOTLIKE", "text": "'+TR_CS_NS+'", "type": "opt" } }',fakeListCustom.tpRegra='{ "1": { "value": "", "text": "Tipo de Regra", "type": "group" }, "2": { "value": "I", "text": "BLOQUEADO", "type": "opt" }, "3": { "value": "S", "text": "LIBERADO", "type": "opt" } }',fakeListCustom.agrupado='{ "1": { "value": "", "text": "Agrupado", "type": "group" }, "2": { "value": "S", "text": "Sim", "type": "opt" }, "3": { "value": "N", "text": "Não", "type": "opt" } }'}function openFilter(e){if(document.getElementById(e)){var t=document.getElementById("filterlist");t.className="filtro hidden",t.getAttribute("data-desc")!=e&&setTimeout(function(){t.innerHTML=document.getElementById(e).innerHTML,t.className="filtro show",t.setAttribute("data-desc",e)},400),t.setAttribute("data-desc","")}}function openDestaque(e){if(document.getElementById(e)){var t=document.getElementById("destaquelist");t.className="filtro hidden",t.getAttribute("data-desc")!=e&&setTimeout(function(){t.innerHTML=document.getElementById(e).innerHTML,t.className="filtro show",t.setAttribute("data-desc",e)},400),t.setAttribute("data-desc","")}}function blurView(e,t){e.value!=e.getAttribute("data-default")&&call("save_view","prm_view="+t+"&prm_valor="+encodeURIComponent(e.value)+"&prm_tipo=desc").then(function(t){-1==t.indexOf("#alert")&&(e.setAttribute("data-default",e.value),alerta("msg",TR_AL))})}function viewDetalhes(e){document.getElementById("content").innerHTML="",carregaPainel("list_crocks",e),call("load_crocks","prm_visao="+e).then(function(e){document.getElementById("painel-colunas").innerHTML=e}),telaSup("visao",e)}function saveView(e,t,a){call("save_view","prm_view="+t+"&prm_valor="+(e.nextElementSibling?e.nextElementSibling.title:e.value)+"&prm_tipo="+a).then(function(e){-1==e.indexOf("FAIL")?alerta("feed-fixo",TR_AL):alerta("feed-fixo",TR_ER)})}function telaSup(e,t,a){if(void 0!==a)return telasup.getAttribute("data-"+e);telasup.setAttribute("data-"+e,t)}var ie=document.all,nn6=document.getElementById&&!document.all,isdrag=!1,xdrag,ydrag,dobj;function movemouse(e){if(isdrag){if(e)var t=e.type;else t="nomove";if("touchmove"==t){var a=nn6?e.touches.item(0):event.touches.item(0);if((o=parseInt(tx+a.clientX-xdrag))%5!=0)var n=10*Math.round(o/10);else n=o;if((l=parseInt(ty+a.clientY-ydrag))%5!=0)var r=10*Math.round(l/10);else r=l;return dobj.style.setProperty("left",n+"px"),dobj.style.setProperty("top",r+"px"),!1}var o,l;if((o=parseInt(tx+e.clientX-xdrag))%5!=0)n=10*Math.round(o/10);else n=o;if((l=parseInt(ty+e.clientY-ydrag))%5!=0)r=10*Math.round(l/10);else r=l;return dobj.style.setProperty("left",n+"px"),dobj.style.setProperty("top",r+"px"),!1}}function selectmouse(e){var t=nn6?e.target:event.srcElement,a=nn6?"HTML":"BODY";if(t.classList.contains("wd_move"))for(;t.tagName!=a&&"dragme"!=t.className&&"dragme front top"!=t.className&&"dragme front"!=t.className&&"dragme front cross"!=t.className&&"dragme dados"!=t.className&&"dragme medidor"!=t.className&&"dragme medidor drill"!=t.className&&"dragme grafico"!=t.className&&"dragme float-par"!=t.className&&"dragme file"!=t.className&&"dragme file drill"!=t.className&&"dragme texto"!=t.className&&"dragme grid"!=t.className&&"dragme img"!=t.className&&"dragme icone"!=t.className&&"dragme ponteiro drill"!=t.className&&"dragme grafico drill"!=t.className&&"dragme front drill"!=t.className&&"dragme front drill cross"!=t.className&&"dragme marquee"!=t.className&&"dragme relatorio"!=t.className&&"dragme heatmap"!=t.className&&"dragme grafico mapa"!=t.className&&"dragme grafico drill mapa"!=t.className&&"dragme generico"!=t.className;)t=nn6?t.parentNode:t.parentElement;if(t.classList.contains("dragme")&&("main"==t.parentNode.parentNode.parentNode.id||"main"==t.parentNode.parentNode.id||"main"==t.parentNode.parentNode.parentNode.parentNode.id||"main"==t.parentNode.id)&&"yes"==document.getElementById("movimento").value){if(e.preventDefault(),isdrag=!0,dobj=t,tx=parseInt(window.getComputedStyle(dobj).getPropertyValue("left")),ty=parseInt(window.getComputedStyle(dobj).getPropertyValue("top")),e)var n=e.type;else n="nomove";if("touchstart"==n){var r=nn6?e.touches.item(0):event.touches.item(0);xdrag=r.clientX,ydrag=r.clientY}else xdrag=nn6?e.clientX:event.clientX,ydrag=nn6?e.clientY:event.clientY;return!1}}function syncForm(e,t,a){var n=new Blob([document.getElementById(e).innerHTML],{type:a}),r=new FormData;r.set("arquivo",n,t),ajax("fly","upload",r,!1,"","","","upload")}var dataid="";function drillfix(e,t,a){var n=get(t),r=get("dados_"+t).getAttribute("data-track"),o="consulta";if(n.classList.contains("grafico")&&(o="grafico",get("dados_"+t).getAttribute("data-tipo")),(n.classList.contains("medidor")||n.classList.contains("dados"))&&(o="valor"),"consulta"!=o&&0==parseInt(get("dados_"+t).getAttribute("data-drill")))return!1;get("jumpdrill")&&get("jumpdrill").remove();var l=160;"mobile"==PRINCP.className&&(l=90);var i,d,s,c=get("dados_"+t).getAttribute("data-visao"),m="normal",u="complete";if("grafico"==o)l=100,i=a.split("|").filter((e,t)=>t%2).join("|"),d=cursorx-l+5,s="top: "+(cursory-get("html").scrollTop+40)+"px",u="short";else if("consulta"==o){var p=get("selecteddata");get("selectedline").children[0].getAttribute("data-valor"),i=get("col_"+t).value;var g=p.getBoundingClientRect();s="top: "+(g.top+(p.clientHeight+4))+"px;";var f=0;(d=g.left+p.clientWidth/2-l)+320>MAIN.clientWidth&&(d=MAIN.clientWidth-320),g.top+(p.clientHeight+8)+l>PRINCP.clientHeight&&(s="bottom: "+(PRINCP.getBoundingClientRect().height-get("selecteddata").getBoundingClientRect().top+4)+"px;",m="reverse"),get(t+"c").children[0].children.length>1&&(f=get(t+"c").children[0].children[0].querySelectorAll(".fix").length);var v,y=p.cellIndex-f;get(t+"c").children[0].lastElementChild.querySelectorAll("th:not(.inv)")[y]&&(v=get(t+"c").children[0].lastElementChild.querySelectorAll("th:not(.inv)")[y].getAttribute("data-valor"))}else{l=100,get("gxml_"+t)&&(i=get("gxml_"+t).getAttribute("data-parametros")),get("valores_"+t)&&(i=get("valores_"+t).getAttribute("data-colunareal")),y=get("valor_"+t)?get("valor_"+t).getBoundingClientRect():get(t+"_vl").getBoundingClientRect(),d=y.x+y.width/2-l,s="top: "+(y.y+y.height+10)+"px",u="short"}d<0&&(d=0),call("jumpdrill","prm_objeto="+t+"&prm_colunas="+i+"&prm_visao="+c+"&prm_objeto_ant="+r).then(function(e){let a=document.createElement("div");a.innerHTML=e,a.children[0].setAttribute("style","left: "+d+"px; "+s);let n=[];n.push(get("par_"+t).value),n.push(get("drill_go").value);let r=[...new Set(n.sort())];a.children[0].title=r.filter(e=>e).join("|"),a.children[0].title=a.children[0].title.replace("||","|"),MAIN.appendChild(a.children[0])}).then(function(){var e=get("jumpdrill");e.classList.add(m),e.classList.add(u),e.classList.add(t+"_jump"),setTimeout(function(){e.querySelector(".fechartab").addEventListener("click",function(){this.parentNode.remove(),get("selecteddata")&&(get("selecteddata").id="")}),e.classList.add("open");let a=e.querySelectorAll(".icons");for(let e=0;e<a.length;e++)a[e].addEventListener("click",function(){quickPa(this)});get(t+"dv2")&&(get(t+"dv2").removeEventListener("scroll",noScroll),get(t+"dv2").addEventListener("scroll",noScroll))},10),get("confirm-tag").addEventListener("click",function(){let a=e.querySelector(".ch").getAttribute("data-tipo");var n;if("string"==typeof v)if("VALOR"!=a&&get("quick-coluna").value.length>1||"VALOR"==a){"A"==ADMIN?n=(n=(n=v)+"@"+e.title).replace("|||","|").replace("||","|"):(document.getElementById(USUARIO.replace(".","_")+"_temp")&&remover(USUARIO.replace(".","_")+"_temp","excluir"),ajax("fly","ex_obj","prm_objeto="+USUARIO.replace(".","_")+"_temp",!1),n=(n=(n=v)+"@"+e.title).replace("|||","|").replace("||","|"));var r="";let o=get("quick-obj"),l=o.children[0].value,i=o.children[1].value;if(l.trim().length>1)"A"!=ADMIN&&(l+="_temp"),call("quick_create","prm_nome="+encodeURIComponent(l)+"&prm_tipo="+a+"&prm_parametros="+n+"&prm_visao="+e.getAttribute("data-visao")+"&prm_coluna="+i+"&prm_grupo=&prm_obj_ant="+t+"&prm_filtro="+encodeURIComponent(e.getAttribute("data-filtro")+"&prm_screen="+tela)).then(function(e){-1==(r=e).indexOf("duplicado")?("A"==ADMIN&&ajax("fly","inserir_objeto","prm_objeto="+r+"&prm_screen="+tela,!1),appendar("prm_objeto="+r+"&PRM_ZINDEX=2&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_screen="+tela,!1,"")):alerta("feed-fixo","Objeto duplicado!")}).then(function(){-1==r.indexOf("duplicado")&&(get("dados_"+r)?renderChart(r):ajustar(r),centerDrill(r),get("selecteddata").id="",loading())});else alerta("feed-fixo",TR_NM_LE)}else alerta("feed-fixo",TR_CO_SL);else alerta("feed-fixo",TR_VL_NL)})})}function noScroll(){get("jumpdrill")&&get("jumpdrill").remove(),get("jumpmed")&&get("jumpmed").remove()}function cleardrill(){var e=document.querySelectorAll(".drill");for(let t=0;t<e.length;t++)e[t].remove()}function maxCall(){var e=document.getElementById("space").children,t=0;for(let a=0;a<e.length;a++)e[a].clientWidth>t&&(t=e[a].clientWidth+25);if(0!=t)return t+"px";alerta("feed-fixo",TR_OB_NO)}function ctnrs(){var e=document.getElementsByTagName("*"),t=e.length,a=0;for(let n=0;n<t;n++)e[n]&&"ctnr"==e[n].id.substring(0,4)&&(a=e[n].id);return a}function quickPa(e){document.querySelector(".ch")&&document.querySelector(".ch").classList.remove("ch"),e.classList.add("ch");var t=get("quick-obj"),a=e.getAttribute("data-tipo");document.getElementById("quick-coluna").disabled="VALOR"==a&&"true",t.classList.add("open")}function quickerPa(e,t,a,n,r,o){if(loading(),document.getElementById(e+"_temp")&&remover(e+"_temp","excluir"),ajax("fly","ex_obj","prm_objeto="+e+"_temp",!1),document.getElementById("drill_go").value.replace("|","").length>0)var l=document.getElementById("drill_go").value;else l="";setTimeout(function(){ajax("fly","quick_create","prm_nome="+e+"_temp&prm_tipo="+r+"&prm_parametros="+document.getElementById("jumpdrill").className+"@"+l+"&prm_visao="+a+"&prm_coluna="+o+"&prm_grupo="+n+"&prm_obj_ant="+t+"&prm_filtro=&prm_screen="+tela,!1),noerror("",TR_CR,"feed-fixo"),appendar("prm_objeto="+e+"_temp&PRM_ZINDEX=&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_screen="+tela,"false"),carrega("ajobjeto?prm_objeto="+e+"_temp"),centerDrill(e+"_temp")},1e3)}function drillChange(e,t,a,n){var r,o=get("drill_go").value,l=[],i=t.getAttribute("data-parametros");i=i.substring(0,i.length-1),l.push(i),l.push(t.title),0==o.slice(-1).indexOf("|")&&(o=o.substring(0,o.length-1)),o=encodeURIComponent(o);var d=e.split("###");document.getElementById("drill_x").value,document.getElementById("drill_y").value;if(get("selecteddata")&&(get("selecteddata").id=""),-1!=e.indexOf("SCR")||-1!=e.indexOf("SRC"))shscr(d[0],tela,o);else{var s=e;remover(s+"trl",!1),loading("x");var c="";if(c=l.filter(e=>e).join("|"),o.trim().length>0){let e=[];e.push(o),e.push(encodeURIComponent(c)),r=[...new Set(e.sort())].filter(e=>e).join("##")}else r=encodeURIComponent(c.replace("||","|"));ajax("append","show_objeto","prm_drill=Y&prm_objeto="+s+"&prm_posx="+cursorx+"px&prm_zindex="+zindex_abs+"&prm_posy="+cursory+"px&prm_parametros="+r+"&prm_screen="+tela+"&prm_track="+a+"|"+s+"&prm_objeton="+n+"  >  ",!0,"main","",s.replace("trl","")+"trl","obj"),setTimeout(function(){remover("script-load")},1e4)}}function centerDrill(e){var t,a="";a=setInterval(function(){if(document.getElementById(e)||document.getElementById(e+"trl")){t=document.getElementById(e+"trl")?document.getElementById(e+"trl"):document.getElementById(e);var n=window.innerWidth/2,r=window.innerHeight/2,o=t.clientWidth/2,l=t.clientHeight/2;if(parseInt(l)>parseInt(r)&&(l=parseInt(r)/2),void 0!==window.scrollX)var i=window.scrollX+n-o+"px",d=window.scrollY+r-l+"px";else i=n-o+"px",d=r-l+"px";t.style.setProperty("left",i),parseInt(d)<10&&(d="40px"),t.style.setProperty("top",d),clearInterval(a)}},100)}function fitScreen(e){document.getElementById(e+"fixed")&&(document.getElementById(e+"fixed").innerHTML="",document.getElementById(e+"fixed").style.setProperty("width","0"),document.getElementById(e+"fixed").style.setProperty("max-height","auto")),toggleClass(e,"front","front expand","r"),setTimeout(function(){fixCol(e),smartScroll(e)},500)}function lmenuLink(e){if(closeSideBar("prefdrop"),clicked=e,clearInterval(auto_refresh),curtain("enabled"),e.getAttribute("data-carrega").length>0){titulo(e,"c"),loader("content");var t="";e.getAttribute("data-package")&&(t=e.getAttribute("data-package")),"_"!=e.getAttribute("data-carrega")?call(e.getAttribute("data-carrega"),e.getAttribute("data-url"),t).then(function(e){document.getElementById("content").innerHTML=e}).then(function(){if(e.getAttribute("data-ace")&&e.getAttribute("data-ace").length>1){var t=e.getAttribute("data-ace");(ace_editor=ace.edit(t)).session.setMode("ace/mode/sql")}}):document.getElementById("content").innerHTML=""}e.getAttribute("data-attrib").length>1&&(document.getElementById("attriblist").classList.toggle("open"),ajax("list",e.getAttribute("data-attrib"),"",!1,"attriblist")),call_save(""),e.getAttribute("data-menu").length>1?(document.getElementById("painel").innerHTML="",call("menu","prm_menu="+e.getAttribute("data-menu")+"&prm_default=","","GET").then(function(e){document.getElementById("painel").innerHTML=e})):carregaPainel(""),e.getAttribute("data-refresh").length>1&&(auto_refresh=setInterval(intervalFunc,5e3)),document.getElementById("prefdrop")&&document.getElementById("prefdrop").classList.remove("hover"),document.getElementById("popupmenu").innerHTML=""}function intervalFunc(){ajax("list",clicked.getAttribute("data-refresh"),"",!0,"content")}function mostrak(e){document.getElementById("sandbox").contentWindow.document.getElementById("parsecheck").setAttribute("value",e),"NOVAVIEW"==document.getElementById("view_list").value&&document.getElementById("sandbox").contentWindow.document.getElementById("nome").setAttribute("value",document.getElementById("new_query").value),"NOVAVIEW"==document.getElementById("view_list").value&&document.getElementById("new_query").value.length<1?alerta("",TR_TC):(loading("x"),setTimeout(function(){var e=ace_editor.getValue();if(0==e.trim().length)alerta("",TR_QN),loading("x");else{var t=Math.ceil(e.length/3e4);for(let n=0;n<t;n++){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name","PICADO"),a.setAttribute("value",e.substr(3e4*[n],3e4)),document.getElementById("sandbox").contentWindow.document.forms[0].appendChild(a)}document.getElementById("sandbox").contentWindow.document.zebra.submit(),setTimeout(function(){var e=document.getElementById("sandbox").contentWindow.document.body.innerHTML;-1==e.indexOf("#alert")?"NOVAVIEW"==document.getElementById("view_list").value?(alerta("msg",TR_CR),document.getElementById("new_query").value=""):alerta("msg",TR_AL):alerta("msg",e),loading("x"),sandbox(),edit_view()},1500)}},100))}function sandbox(){var e=document.getElementById("view_list").title;document.getElementById("sandbox").contentWindow.document.body.innerHTML='<form id="zebra" name="zebra" method="post" action="dwu.fcl.passagem_test"><input id="nome" type="hidden" name="nome" value="'+e+'" /><input id="parsecheck" name="parseonly" type="hidden" value="N"/></form>'}function reload(e){e?document.getElementById("fechar_sup").setAttribute("data-reloado",e):document.getElementById("fechar_sup").setAttribute("data-reloads","true")}function execute_sql(e,t){document.getElementById("sqloutput").children[0].innerHTML="",document.getElementById("sqloutput").children[1].innerHTML="",document.getElementById("sqloutput").children[2].innerHTML="",loader("queryresult"),setTimeout(function(){var a,n=ace_editor.getValue();n.trim().length>1&&(a=ace_editor.getSelectedText().length>1?ace_editor.getSelectedText():n,ajax("S"==e?"list":"double","exec_query","11"==t?"p_query="+encodeURIComponent(a)+"&p_parse="+e:"p_query="+encodeURIComponent(a)+"&p_parse="+e+"&p_linhas="+t,!0,"queryresult"))},20)}function arrow(e,t,a){if("click"!=a){var n=e.value.trim();n!=e.getAttribute("data-default").trim()&&(document.getElementById("user-language").value==document.getElementById("sys-language").value&&document.getElementById(t+"_rotulo").setAttribute("title",n.toUpperCase()),ajax("fly","save_column","prm_visao="+document.getElementById("telasup").getAttribute("data-visao")+"&prm_name="+t+"&prm_campo="+a+"&prm_valor="+encodeURIComponent(n),!1),noerror("",TR_AL,"msg"),e.setAttribute("data-default",n),"NM_ROTULO"==a&&(document.getElementById(t+"id").children[1].innerHTML=n.toUpperCase()))}else ajax("list","load_column","prm_visao="+document.getElementById("telasup").getAttribute("data-visao")+"&prm_name="+t,!1,"content")}function userEvent(e,t,a,n){switch(a){case"blur":e.getAttribute("data-default")!=e.value&&(ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+encodeURIComponent(e.value.replace(/<[/a-zA-Z0-9 ="-]+>/g,""))+"&prm_tipo=nome"),noerror("",TR_AL,"msg"),e.setAttribute("data-default",e.value));break;case"email":e.getAttribute("data-default")!=e.value&&(ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.value.replace(/<[/a-zA-Z0-9 ="-]+>/g,"")+"&prm_tipo=email"),noerror("",TR_AL,"msg"),e.setAttribute("data-default",e.value));break;case"grupo":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=grupo"),noerror("",TR_AL,"msg");break;case"status":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=status"),noerror("",TR_AL,"msg"),ajax("list","list_users","",!1,"content");break;case"id_expira_senha":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=id_expira_senha"),noerror("",TR_AL,"msg");break;case"expirar_senha":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=expirar_senha"),noerror("",TR_AL,"msg"),document.getElementById("usuarios_dt_validacao_senha")&&(document.getElementById("usuarios_dt_validacao_senha").value="");break;case"cd_tela_inicial":ajax("return","alter_user","prm_nome="+t+"&prm_valor="+e+"&prm_tipo=cd_tela_inicial"),"ERRO"==respostaAjax.split("|")[0]?alerta("msg",respostaAjax.split("|")[1]):(document.getElementById("cd_tela_inicial_usuario")&&(document.getElementById("cd_tela_inicial_usuario").title=respostaAjax.split("|")[2],document.getElementById("cd_tela_inicial_usuario").children[0].innerHTML=respostaAjax.split("|")[3]),alerta("msg",respostaAjax.split("|")[1]));break;case"dba":"dot"==e.className?(ajax("fly","alter_user","prm_nome="+t+"&prm_valor=unlock&prm_tipo=dba"),e.className="dot active"):(ajax("fly","alter_user","prm_nome="+t+"&prm_valor=lock&prm_tipo=dba"),e.className="dot"),noerror("",TR_AL,"msg");break;case"upload":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=upload"),noerror("",TR_AL,"msg");break;case"excel":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=excel_out"),noerror("",TR_AL,"msg");break;case"permissao":get("attriblist").querySelector(".closer").click(),"n/a"!=e.value&&("custom"==e.value?(call("menu","prm_menu=add_custom&prm_default="+t).then(function(e){document.getElementById("painel").innerHTML=e}),call("listaCustomizado","prm_usuario="+t).then(function(e){document.getElementById("content").innerHTML=e})):(document.getElementById("titulo").innerHTML=e.options[e.selectedIndex].innerHTML,document.getElementById("painel").innerHTML="",call("menu_"+e.value+"_access","prm_usuario="+t).then(function(e){document.getElementById("painel").innerHTML=e}),loader("content"),call(e.value+"_access","prm_usuario="+t+"&prm_conteudo=FULL").then(function(e){document.getElementById("content").innerHTML=e})));break;case"permissao-fake":document.getElementById("ajax").innerHTML="",call("screen_access","prm_usuario="+t+"&prm_conteudo=N&prm_grupo="+e.title).then(function(e){document.getElementById("ajax").innerHTML=e});break;case"remove":if(confirm(TR_US_EX)){var r=document.getElementById(t+"linha");r.classList.add("removing"),call("delete_user","usu_nome_d="+t).then(function(e){-1==e.indexOf("ERRO")?-1==e.indexOf("#alert")?(r.remove(),alerta("feed-fixo",TR_EX)):(r.classList.remove("removing"),alerta("feed-fixo",TR_ER)):(r.classList.remove("removing"),alerta("feed-fixo",TR_ER_EX))})}break;case"show":carregaPainel("add_show&prm_default="+t),carrega("show_only?prm_usuario="+t),document.getElementById("titulo").innerHTML=n}}function newLine(e){var t=document.getElementById(e);if("new"!=t.nextElementSibling.className){var a=document.createElement("tr");a.className="new";for(let e=0;e<t.children.length;e++){var n=document.createElement("td");a.appendChild(n)}t.parentNode.insertBefore(a,t.nextElementSibling)}}function objAction(e,t,a,n){"inserir"==n?(loading(),document.getElementById(e)?alerta("msg",TR_OB_DP):(ajax("fly","inserir_objeto","prm_objeto="+e+"&prm_screen="+tela+"&prm_screen_ant="+a),"CALL_LIST"!=document.getElementById("lisobj").value?appendar("prm_objeto="+e+"&PRM_ZINDEX=&prm_posx=150px&prm_posy=150px&prm_screen="+tela):shscr(tela),curtain(),document.getElementById(e+"dv2")?ajustar(e):carrega("ajobjeto?prm_objeto="+e))):confirm(TR_OB_EX)&&(ajax("fly","dl_object","prm_object="+e,!1),noerror(t,TR_EX,"msg"),document.getElementById(e)&&(document.getElementById(e).style.display="none"))}function checkFix(e,t,a,n,r,o,l){if("check"==e){if(1==t.checked)var i="S";else i="N";ajax("fly","linguagem_padrao","prm_update=S&prm_tabela="+a+"&prm_coluna="+n+"&prm_linguagem="+r+"&prm_default="+o+"&prm_fixa="+i,!1)}else t.previousElementSibling.value.trim().length>0?(ajax("fly","update_language","prm_valor="+t.previousElementSibling.value+"&prm_tabela="+a+"&prm_coluna="+n+"&prm_linguagem="+r+"&prm_default="+o+"&prm_tipo="+l,!1),noerror("",TR_AL,"msg"),noerror("",TR_AL,"msg")):alerta("msg",TR_BL)}function auto(e,t,a){var n=e.selectionEnd-1,r=e.selectionEnd-2,o=e.value.split(""),l=document.getElementById("auto-complete-formula");"8"==t.which&&n<e.getAttribute("data-lastkey")&&(l.classList.add("off"),e.setAttribute("data-search","N")),"["==o[n]&&"$"==o[r]&&(l.classList.remove("off"),e.setAttribute("data-search","S"),e.setAttribute("data-lastkey",n+1)),"]"==o[n]&&(l.classList.add("off"),e.setAttribute("data-search","N")),"S"==e.getAttribute("data-search")&&ajax("list","auto_complete","prm_visao="+a+"&prm_letters="+o.slice(e.getAttribute("data-lastkey")).join(""),!0,"auto-complete-formula")}function autoClick(e){e.parentNode.classList.add("off");var t=document.getElementById("formula-coluna"),a=e.innerHTML;t.value=t.value.split("").slice(0,t.getAttribute("data-lastkey")).join("")+a+"]",t.setAttribute("data-search","N"),t.setAttribute("data-lastkey",""),call("save_column","prm_visao="+document.getElementById("micro-visao").title+"&prm_name="+document.getElementById("ajax-lista").querySelector(".selected").title+"&prm_campo=FORMULA&prm_valor="+encodeURIComponent(t.value)).then(function(e){-1==e.indexOf("#alert")?(alerta("feed-fixo",e),t.setAttribute("data-default",t.value)):alerta("feed-fixo",TR_ER),t.focus()})}function swapColumn(e){var t=e.parentNode.getAttribute("data-tipo");if(e.lastElementChild.removeEventListener("click",removeColumn),e.lastElementChild.addEventListener("click",removeColumn),e.id=="selected"+t)-1!=e.classList.contains("template")&&fakeOption(e.title,document.getElementById("prm_objeto").value,"template",document.getElementById("prm_visao").value),e.id="";else if(document.getElementById("selected"+t)){var a=document.getElementById("selected"+t).outerHTML,n=e.outerHTML;document.getElementById("selected"+t).outerHTML=n,e.outerHTML=a,document.getElementById("selected"+t).id="",save("consulta")}else e.id="selected"+t}function removeColumn(e,t){if(e.stopPropagation(),t)var a=t.parentNode;else a=this.parentNode;var n=a.nextElementSibling;n.parentNode.removeChild(n),a.parentNode.removeChild(a),save("consulta")}function swapSquare(e){var t=e.parentNode.getAttribute("data-tipo");if(document.getElementById("selected"+t)){var a=document.getElementById("selected"+t),n=a.nextElementSibling;e.previousElementSibling.id!="selected"+t&&e.nextElementSibling.id!="selected"+t&&(n.parentNode.removeChild(n),a.id="",e.outerHTML='<li onclick="swapSquare(this);" class="square"></li>'+a.outerHTML+'<li onclick="swapSquare(this);" class="square"></li>',a.parentNode.removeChild(a)),save("consulta")}}function saveTpt(e,t,a){var n=e.querySelectorAll(".linha"),r="";for(let e=0;e<n.length;e++)n[e].title.length>0&&(r=0==e?n[e].title:r+"|"+n[e].title);r!=e.getAttribute("data-default")&&(ajax("fly","save_column","prm_visao="+t+"&prm_name="+a+"&prm_campo=FORMULA&prm_valor="+r),e.setAttribute("data-default",r))}function fastInclude(e,t){if(document.getElementById(e))alerta("feed-fixo",TR_OB_DP);else{if(document.querySelector(".movingarticle"))var a=document.querySelector(".movingarticle"),n=a.id;if(a?ajax("fly","inserir_objeto","CALL_LIST"!=t&&"FLOAT_PAR"!=t&&"FLOAT_FILTER"!=t&&"BROWSER"!=t?"prm_objeto="+e+"&prm_screen="+n:"prm_objeto="+e+"&prm_screen="+tela):call("inserir_objeto","prm_objeto="+e+"&prm_screen="+tela).then(function(){"FLOAT_PAR"!=t&&"FLOAT_FILTER"==t||(document.getElementById("float-filter").className="visible"),"CALL_LIST"==t&&(document.getElementById("call-menu").className="visible")}),"CALL_LIST"!=t&&"FLOAT_PAR"!=t&&"FLOAT_FILTER"!=t&&"BROWSER"!=t){loading();new Promise(function(t,r){t(a?ajax("append","show_objeto","prm_objeto="+e+"&PRM_ZINDEX=99&prm_posx=300px&prm_posy="+(a.children.length+1)+"px&prm_screen="+tela+"&prm_dashboard=true",!0,n,"",e,"obj"):ajax("append","show_objeto","prm_objeto="+e+"&PRM_ZINDEX=&prm_posx=300px&prm_posy=200px&prm_screen="+tela,!0,"main","",e,"obj"))})}else"CALL_LIST"==t||"BROWSER"==t?shscr(tela):("FLOAT_PAR"!=t&&"FLOAT_FILTER"!=t||(alerta("feed-fixo",TR_AD),document.getElementById("float-icon").classList.contains("invisible")&&(document.getElementById("float-icon").className="visible")),LAYER.classList.contains("ativo")&&loading())}}function getlist(e){if(0==document.getElementById("painel").querySelectorAll(".error").length){var t=document.getElementById("consulta_visao").title,a=encodeURIComponent(document.getElementById("consulta_nome").value.replace(/\./g,"_").replace(/\#/g,"")),n=encodeURIComponent(document.getElementById("consulta_desc").value),r=document.getElementById("consulta_grupo").title,o=document.getElementById("consulta_prm").value;t.trim().length>0?a.trim().length>1?n.trim().length>1?0!=r.trim().length?"false"==error&&(carrega("consulta?prm_obj="+a+"&prm_visao="+t+"&prm_nome="+n+"&prm_grupo="+r+"&prm_agrupamento="+o),call_save("consulta")):alerta("msg",TR_ES_GR):alerta("msg",TR_DS_LE):alerta("msg",TR_NM_LE):alerta("msg",TR_ES_VW)}else alerta("msg",TR_ID)}function filter(e,t,a,n,r){var o=document.getElementById("filtro-coluna-"+a).getAttribute("data-default"),l=document.getElementById("filtro-condicao-"+a).getAttribute("data-default");if("fakeoption"!=document.getElementById("filtro-conteudo-"+a).className)var i=encodeURIComponent(document.getElementById("filtro-conteudo-"+a).getAttribute("data-default")),d=document.getElementById(r),s=encodeURIComponent(d.value);else s=i=encodeURIComponent(document.getElementById("filtro-conteudo-"+a).children[0].title);var c=document.getElementById("filtro-ligacao-"+a).getAttribute("data-default");if(document.getElementById("filtro-agrupado-"+a))var m=document.getElementById("filtro-agrupado-"+a).getAttribute("data-default");else m="N";if("fakeoption"!=document.getElementById("filtro-conteudo-"+a).className&&(d.setAttribute("data-default",d.value),"SELECT"==d.tagName))for(let e=0;e<d.children.length;e++)d.children[e].value==d.value?d.children[e].setAttribute("selected","selected"):d.children[e].removeAttribute("selected");ajax("fly","edit_filtro","prm_objeto="+e+"&prm_visao="+t+"&prm_coluna="+o+"&prm_condicao="+l+"&prm_conteudo="+i+"&prm_valor="+s+"&prm_tipo="+n+"&prm_agrupado="+m+"&prm_ligacao="+c,!0),noerror("",TR_AL,"msg"),reload(e)}function list_obj(){var e=document.getElementById("obj_serch_tp").value,t=document.getElementById("obj_serch_vw").value,a=document.getElementById("obj_serch_gp").value,n=document.getElementById("obj_serch_in").value;n.length<1&&(n="N/A"),document.getElementById("ajax_obj").innerHTML="",loader("ajax_obj"),ajax("list","list_obj","prm_tipo="+e+"&prm_view="+t+"&prm_grupo="+a+"&prm_desc="+n,!0,"ajax_obj")}function order(e,t){var a=document.getElementById(t).getAttribute("data-dir");return"notsame"==e?(document.getElementById(t).innerHTML="",loader(t),"1"==a?document.getElementById(t).setAttribute("data-dir","2"):document.getElementById(t).setAttribute("data-dir","1")):(document.getElementById("content").innerHTML="",loader("content")),a}function checkError(){if(0!=document.getElementById("painel").querySelectorAll(".error").length)throw alerta("feed-fixo",TR_II),new Error(TR_II)}function dashSpace(e){document.getElementById("id_DASH_MARGIN"+e).value=document.getElementById("DASH_MARGIN"+e+"_input1").value.replace("px","")+"px "+document.getElementById("DASH_MARGIN"+e+"_input2").value.replace("px","")+"px "+document.getElementById("DASH_MARGIN"+e+"_input3").value.replace("px","")+"px "+document.getElementById("DASH_MARGIN"+e+"_input4").value.replace("px","")+"px"}function checkPar(e,t){var a=document.getElementById(e).value;a.match(/\$\[[a-zA-Z0-9_]*\]/g)&&ajax("input","checkpar","prm_variavel="+a.match(/\$\[[a-zA-Z0-9_]*\]/g).join("|")+"&prm_visao="+t,!0,e)}var perline=18,divSet=!1,tmpf,curId,curTp,curMd,colorLevels=Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"),colorArray=Array(),ie=!1,nocolor="none";function getObj(e){return ie?document.all[e]:document.getElementById(e)}function addColor(e,t,a){addColorValue(colorLevels[e],colorLevels[t],colorLevels[a])}function addColorValue(e,t,a){colorArray[colorArray.length]="#"+e+e+t+t+a+a}function setColor(color){var link=getObj(curId),field=getObj(curId+"field"),picker=getObj("colorpicker"),modelo=getObj(curMd);field.value=color,"nomode"==curMd?field.value=color:"color"==curTp?parent.document.getElementById(curMd)&&(parent.document.getElementById(curMd).style.color=color):parent.document.getElementById(curMd)&&(parent.document.getElementById(curMd).style.backgroundColor=color),""==color?(link.style.background=nocolor,link.style.color=nocolor,color=nocolor,tmpf.value="#000000"):(link.style.background=color,link.style.color=color,tmpf.value=color),picker.style.display="none",eval(getObj(curId+"field").title),"cor_fundo"==curId&&(PRINCP.style.backgroundColor=color);var total="";if(-1!=curId.indexOf("field")){var valores=document.getElementById("fakelist").getElementsByTagName("input");for(let e=0;e<valores.length;e++)"#065182"!=valores[e].value&&(total=total+valores[e].parentNode.title+valores[e].value+"|");ajax("fly","alter_attrib","prm_objeto="+document.getElementById(curId).getAttribute("data-visao")+"&prm_prop=SUBQUERY-COR&prm_value="+total,!1)}if(link.previousElementSibling){var inputblink=link.previousElementSibling;inputblink.id&&-1!=inputblink.id.indexOf("destaque-")&&destaque(inputblink.getAttribute("data-counter"),inputblink.getAttribute("data-tipo"),inputblink.id)}}function setDiv(){if(document.createElement){var e=document.createElement("div");"string"==typeof e.innerHTML&&(genColors(),e.id="colorpicker",e.style.display="none",e.innerHTML='<span style="font-family:Verdana; font-size:11px;"> '+getColorTable()+"</span>","open"==document.getElementById("attriblist").className?(document.getElementById("fakelist").appendChild(e),document.getElementById("fakelist").className="visible",document.getElementById("fakelist").style.setProperty("left","300px")):document.body.appendChild(e),divSet=!0)}}function pickColor(e,t,a,n,r){divSet||setDiv();var o=getObj("colorpicker");if(e!=curId||"block"!=o.style.display){tmpf=getObj(n),curId=e,curTp=a,curMd=t;getObj(e);o.style.top=cursory+"px",o.style.left=cursorx+"px",o.style.setProperty("opacity","0"),o.style.setProperty("transition","all 0.1s linear"),o.style.setProperty("-webkit-transition","all 0.2s linear"),setTimeout(function(){o.style.setProperty("opacity","1")},100),o.setAttribute("class","font"),o.style.display="block"}else o.style.display="none"}function genColors(){addColorValue("0","0","0"),addColorValue("3","3","3"),addColorValue("6","6","6"),addColorValue("9","9","9"),addColorValue("C","C","C"),addColorValue("F","F","F");for(let e=1;e<colorLevels.length;e++)addColor(0,0,e);for(let e=1;e<colorLevels.length-1;e++)addColor(e,e,5);for(let e=1;e<colorLevels.length;e++)addColor(0,e,0);for(let e=1;e<colorLevels.length-1;e++)addColor(e,5,e);for(let e=1;e<colorLevels.length;e++)addColor(e,0,0);for(let e=1;e<colorLevels.length-1;e++)addColor(5,e,e);for(let e=1;e<colorLevels.length;e++)addColor(e,e,0);for(let e=1;e<colorLevels.length-1;e++)addColor(5,5,e);for(let e=1;e<colorLevels.length;e++)addColor(0,e,e);for(let e=1;e<colorLevels.length-1;e++)addColor(e,5,5);for(let e=1;e<colorLevels.length;e++)addColor(e,0,e);for(let e=1;e<colorLevels.length-1;e++)addColor(5,e,5);return colorArray}function getColorTable(){colorArray[colorArray.length]="#8DB6CD",colorArray[colorArray.length]="#B0E2FF",colorArray[colorArray.length]="#6495ED";var e=colorArray,t="";t+='<table border="0" cellspacing="1" cellpadding="1">';for(let a=0;a<e.length;a++)a%perline==0&&(t+="<tr>"),t+='<td bgcolor="#000000"><a style="outline: 1px solid #000000; color: '+e[a]+"; background: "+e[a]+';font-size: 10px;" title="'+e[a]+'" href="javascript:setColor(\''+e[a]+"');\">&nbsp;&nbsp;&nbsp;</a></td>",a%perline==perline-1&&(t+="</tr>");return t+='<td bgcolor="#000"><a href="javascript:setColor(\'transparent\');" title="" style="padding: 0 2px; text-decoration: none; font-weight: bold; outline: 1px solid #000000; color: #CC0000; background: #FFF; font-size: 10px;">X</a></td>',i%perline!=0&&(t+="</tr>"),t+="</table>"}function relateColor(id,color){var link=getObj(id);""==color?(link.style.background=nocolor,link.style.color=nocolor,color=nocolor):(link.style.background=color,link.style.color=color),eval(getObj(id+"field").title)}function getAbsoluteOffsetTop(e){for(var t=e.offsetTop,a=e.offsetParent;a!=document.body;)t+=a.offsetTop,a=a.offsetParent;return t}function getAbsoluteOffsetLeft(e){for(var t=e.offsetLeft,a=e.offsetParent;a!=document.body;)t+=a.offsetLeft,a=a.offsetParent;return t}document.all&&(ie=!0,nocolor="");var checkscreen="",loopscreen="";function fullscreen(){var e=document.querySelector(".full").id;clearInterval(checkscreen),clearInterval(loopscreen);var t=document.getElementById("dados_"+e).getAttribute("data-full");if(parseInt(t)>0&&document.getElementById(e+"c")){var a=document.getElementById(e+"m").getElementsByTagName("tbody")[0],n=a.scrollHeight,r=0,o=document.getElementById(e+"m").clientHeight,l=document.getElementById(e+"m").clientHeight/12;if(!document.getElementById(e+"-estilo-full")){var i="";i="div#"+e+" tbody tr { "+(i=" height: "+l+"px;")+" }";var d=document.getElementById("active-show").getAttribute("data-time");i="div#"+e+" div#"+e+"m tbody { transition: transform "+d+"s linear; } "+i;var s=document.createElement("style");s.id=e+"-estilo-full",s.innerHTML=i,document.head.appendChild(s)}a.style.setProperty("transform","translateY(-"+(n-(document.getElementById(e+"dv2").clientHeight-2*l))+"px)");var c=(n-(document.getElementById(e+"dv2").clientHeight-2*l))/parseInt(d);o<n?checkscreen=setInterval(function(){"ativo"!=document.getElementById("layer").className&&document.getElementById(e+"m")&&(clearInterval(checkscreen),loopscreen=setInterval(function(){if(r+o<n+40)r+=parseInt(c);else{clearInterval(loopscreen);var e=document.getElementById("active-show").nextElementSibling;"show_only"==e.className?setTimeout(function(){document.getElementById("active-show").id="",e.id="active-show",removeTrash(),shscr(e.value)},5e3):setTimeout(function(){document.getElementById("active-show").id="",document.querySelector(".show_only").id="active-show",removeTrash(),shscr(document.querySelector(".show_only").value)},5e3)}},1e3))},10):setTimeout(function(){clearInterval(loopscreen);var e=document.getElementById("active-show").nextElementSibling;"show_only"==e.className?setTimeout(function(){document.getElementById("active-show").id="",e.id="active-show",removeTrash(),shscr(e.value)},1e3):setTimeout(function(){document.getElementById("active-show").id="",document.querySelector(".show_only").id="active-show",removeTrash(),shscr(document.querySelector(".show_only").value)},1e3)},4e3)}}function sucesso(e){ajax("fly","gps","prm_posicao="+(e.coords.latitude+" "+e.coords.longitude)+"|"+mobilecheck())}function erro(){return!1}function mobilecheck(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t?"mobile":"desktop"}navigator.geolocation&&navigator.geolocation.getCurrentPosition(sucesso,erro);var dbltouch=0,dbltouchX=0,dbltouchY=0,map;function dblTouch(e){var t=document.getElementById(e+"_ds");"1"==t.getAttribute("data-touch")?(t.setAttribute("data-touch","0"),touch&&clearTimeout(touch),curtain(""),scale(e)):(t.setAttribute("data-touch","1"),touch=setTimeout(function(){t.setAttribute("data-touch","0")},1e3))}function swipeStart(e,t){-1!=document.getElementById(e).className.indexOf("scaled")&&(document.getElementById(e).setAttribute("data-swipe",t.touches[0].pageX),t.stopPropagation())}function swipe(e,t){var a=document.getElementById(e);-1!=a.className.indexOf("scaled")&&(parseInt(a.getAttribute("data-swipe"))>t.touches[0].pageX+50?cycle(e,"next"):parseInt(a.getAttribute("data-swipe"))<t.touches[0].pageX-50&&cycle(e,"prev"),t.stopPropagation())}function smoothScroll2(e,t){var a=document.getElementById(e),n=document.getElementById(t).offsetTop-a.offsetTop-188,r=0,o=setInterval(function(){r>n&&clearInterval(o),r+=47,a.scrollTo(0,r)},5)}function smoothScroll(e){e=e||window.innerHeight;var t=window.scrollY,a=setInterval(function(){t>e&&clearInterval(a),t+=20,window.scrollTo(0,t)},10)}function donutEvent(){var e=document.getElementById("donut");e.addEventListener("mouseleave",function(){this.classList.remove("open")}),e.addEventListener("click",function(e){"mobile"!=PRINCP.className&&-1==e.target.innerHTML.indexOf("CENTRO")&&this.classList.remove("open")})}function over_evento(e){this.id;var t=e.target;if("TABLE"!=t.tagName&&"TBODY"!=t.tagName&&"TR"!=t.tagName&&"SVG"!=t.tagName&&"TH"!=t.tagName&&t.classList&&t.classList.contains("imgurl")){document.getElementById("img_content")&&(document.getElementById("img_content").classList.contains("scaled")||document.getElementById("img_content").remove());var a=document.createElement("div");a.id="img_content";var n=document.createElement("img");n.src=t.getAttribute("data-url");var r=document.createElement("img");r.src="dwu.fcl.download?arquivo=img_error.jpg",r.className="img_error";var o=t.getBoundingClientRect().left+36,l=t.getBoundingClientRect().top;n.addEventListener("error",function(){n.style.setProperty("display","none"),a.appendChild(r)}),a.appendChild(n),a.style.setProperty("left",o+"px"),a.style.setProperty("top",l+"px"),document.getElementById("main").appendChild(a)}}function out_evento(e){document.getElementById("img_content")&&(document.getElementById("img_content").classList.contains("scaled")||document.getElementById("img_content").remove())}function click_evento(e){var t=this.id,a=e.target,n=document.getElementById(t).parentNode.parentNode.parentNode.className,r=document.getElementById("current_screen").value;if("TABLE"!=a.tagName&&"TBODY"!=a.tagName&&a.getAttribute("colspan")<2&&!a.parentNode.classList.contains("lc")){if(t=t.substring(0,t.length-1),-1!=a.className.indexOf("seta"))var o=0;else o=parseInt(a.cellIndex);if(a.classList.contains("callmed")){var l=get("dados_"+t).getAttribute("data-visao");medDrill(a,t,l)}else if("TH"==a.tagName&&-1==n.indexOf("cross")){var i,d=a.cellIndex,s=0;i=a.parentNode.parentNode.querySelectorAll("th");var c=a.parentNode.querySelectorAll(".fix").length;a.parentNode.querySelector(".fix")||(s=a.parentNode.parentNode.querySelectorAll(".fix").length);var m=a;if(!a.className&&a.parentNode.parentNode.children.length>1&&(m=a.parentNode.parentNode.lastElementChild.children[d-c]),a.parentNode.parentNode.children.length<5){var u;u=-1==m.className.indexOf("DESC")&&-1==m.className.indexOf("ASC")?d+s+" ASC":-1!=m.className.indexOf("ASC")?d+s+" DESC":(m.previousElementSibling,""),m.className=u;var p=[];for(let e=1;e<i.length;e++)i[e]&&(p[e-1]=i[e].className.replace(" fix","").replace(" inv","").replace("cen","").replace("dir","").replace("bld","").replace("callmed","").trim());var g=encodeURIComponent(document.getElementById("par_"+t).value),f=document.getElementById(t).parentNode.id;remover("sdrill_"+t),remover("sdrill_"+t+"trl"),remover(t),remover(t+"trl");var v=document.getElementById(t).offsetTop+"px",y=document.getElementById(t).offsetLeft+"px",_="N",h="",b=window.getComputedStyle(document.getElementById(t)).getPropertyValue("order");h="main"==f?"&prm_dashboard=false":"&prm_dashboard=true",document.getElementById(t).classList.contains("drill")?_="Y":y=b,call("alterorder","prm_objeto="+t.replace("trl","")+"&prm_screen="+r+"&prm_valor="+p.filter(e=>e).join(",")).then(function(){document.getElementById(t.replace("trl","")+"sync")||document.getElementById(t)&&(document.getElementById(t).remove(),loading())}).then(function(){document.getElementById(t+"sync")?document.getElementById(t+"sync").click():appendar("prm_drill="+_+"&prm_objeto="+t.replace("trl","")+"&prm_posx="+y+"&prm_zindex=5&prm_posy="+v+"&prm_parametros="+g+"&prm_screen="+tela+h,!1,f)}).then(function(){centerDrill(t+"trl")})}else{l=get("dados_"+t).getAttribute("data-visao");medDrill(a,t,l),a.classList.toggle("tdselected")}}if(0!=o){if(a.classList.contains("imgurl")){document.getElementById("img_content")&&document.getElementById("img_content").remove();var E=document.createElement("div");E.id="img_content",E.className="scaled";var I=document.createElement("img");I.addEventListener("click",removeImage),document.getElementById("layer2").addEventListener("click",removeImage),I.style.setProperty("opacity","0"),I.src=a.getAttribute("data-url"),I.addEventListener("error",function(){I.style.setProperty("display","none")}),E.appendChild(I),document.getElementById("main").appendChild(E),setTimeout(function(){E.style.setProperty("left","calc(50% - "+I.clientWidth/2+"px)"),E.style.setProperty("top","60px"),E.style.setProperty("z-index","900")},10),setTimeout(function(){I.style.setProperty("opacity","1"),curtain("only")},50)}else if("TH"!=a.tagName){document.getElementById("selecteddata")&&(document.getElementById("selecteddata").id=""),a.id="selecteddata",document.getElementById("selectedline")&&(document.getElementById("selectedline").id=""),a.parentNode.id="selectedline",document.getElementById("drill_obj").value=t.replace("trl","");var x=a.parentNode.firstElementChild.getAttribute("data-valor"),A=a.parentNode.parentNode.firstElementChild.children[a.cellIndex],B=0;a.parentNode.parentNode.parentNode.firstElementChild.children.length>1&&(B=a.parentNode.parentNode.parentNode.firstElementChild.firstElementChild.querySelectorAll(".fix").length);var L=a.parentNode.parentNode.parentNode.firstElementChild.lastElementChild.children[a.cellIndex-B];if(A){let n,r,o;a.classList.contains("fix")||(o=get(t+"c").children[0].lastElementChild.children[a.cellIndex-B].getAttribute("data-pivot")),"string"==typeof A.getAttribute("data-p")?(n=L.getAttribute("data-valor"),r=x):a.parentNode.firstElementChild.getAttribute("data-valor")&&(L?L.getAttribute("data-valor")?(n=L.getAttribute("data-valor"),r=x):r=x:r="-1"!=document.getElementById(t).className.indexOf("cross")?x+"|"+A.innerHTML.trim():x),check_tag(e,t,n,r,o,a)}}}else-1!=a.className.indexOf("seta")&&changearrow(a)}}function removeImage(){document.getElementById("img_content").remove(),curtain(""),document.getElementById("layer2").removeEventListener("click",removeImage)}function dbl_click_evento(e){var t=this.id;t=t.substring(0,t.length-1);var a=e.target;if(-1!=a.className.indexOf("flag")){var n=document.getElementById("text-talk");n.classList.remove("open"),n.classList.add("open"),ajax("list","text_post","prm_objeto="+t.replace("trl","")+"&prm_line="+a.getAttribute("data-valor"),!1,"campo")}}function changearrow(e){var t=e.parentNode.parentNode.parentNode.id;t=-1!=t.indexOf("trlc")?t.replace("trlc","trl"):t.slice(0,-1);var a=e,n=a;if(null!=n.parentNode.nextElementSibling){if(n.parentNode.nextElementSibling)var r=n.parentNode.nextElementSibling.tagName;else r="LAST";if("STYLE"==r){var o=n.parentNode.className.replace(/[a-zA-Z ]/g,"");o=0==o.length?0:parseInt(o);try{for(;-1!=n.parentNode.nextElementSibling.className.indexOf("nivel")&&parseInt(n.parentNode.nextElementSibling.className.replace(/[a-zA-Z ]/g,""))>o||"STYLE"==n.parentNode.nextElementSibling.tagName;){var l=n.parentNode.nextElementSibling;if(l.className)l.className;l.remove()}}catch(e){console.log("ultima linha")}document.getElementById("selectedline")&&(document.getElementById("selectedline").id=""),topDistance(t),setTimeout(function(){fixCol(t)},200)}else if(-1==n.className.indexOf("down")&&-1==n.className.indexOf("checked")){if(n.getAttribute("data-subquery").length>0){document.getElementById(t+"dv2").scrollLeft=0;var i=[];document.getElementById("par_"+t).value.length>0&&i.push(encodeURIComponent(document.getElementById("par_"+t).value)),i.push(encodeURIComponent(n.getAttribute("data-valor")));var d="";n.getAttribute("data-self")&&(d=n.getAttribute("data-self")),loading(),document.getElementById("selectedline")&&(document.getElementById("selectedline").id=""),n.parentNode.id="selectedline",setTimeout(function(){ajax("inject","show_objeto","prm_objeto="+t.replace("trl","")+"&prm_posx=&prm_posy=&prm_parametros="+i.join("|")+"&prm_drill="+n.getAttribute("data-subquery")+"&prm_out=&prm_zindex=&prm_screen="+tela+"&prm_forcet="+n.nextElementSibling.innerHTML.trim()+"&prm_track=INSIDE&prm_objeton="+n.getAttribute("data-ordem")+"&prm_alt_med=&prm_cross=&prm_self="+d,!1,"selectedline",t,t,"obj");var e=document.getElementById(t+"c");if(-1==n.parentNode.className.indexOf("nivel"))e.removeEventListener("click",click_evento),e.addEventListener("click",click_evento),e.removeEventListener("dblclick",dbl_click_evento),e.addEventListener("dblclick",dbl_click_evento);else{parseInt(n.parentNode.className.replace("es nivel","").replace("cl nivel",""));e.removeEventListener("click",click_evento),e.addEventListener("click",click_evento),e.removeEventListener("dblclick",dbl_click_evento),e.addEventListener("dblclick",dbl_click_evento)}topDistance(t),setTimeout(function(){fixCol(t)},200)},100)}}else a.classList.toggle("checked")}else if(-1==n.className.indexOf("down")&&-1==n.className.indexOf("checked")){if(n.getAttribute("data-subquery").length>0){document.getElementById(t+"dv2").scrollLeft=0,loading(),document.getElementById("selectedline")&&(document.getElementById("selectedline").id=""),n.parentNode.id="selectedline";i=[];document.getElementById("par_"+t).value.length>0&&i.push(encodeURIComponent(document.getElementById("par_"+t).value)),i.push(encodeURIComponent(n.getAttribute("data-valor"))),setTimeout(function(){ajax("inject","show_objeto","prm_objeto="+t.replace("trl","")+"&prm_posx=&prm_posy=&prm_parametros="+i.join("|")+"&prm_drill="+n.getAttribute("data-subquery")+"&prm_out=&prm_zindex=&prm_screen="+tela+"&prm_forcet="+n.nextElementSibling.innerHTML.trim()+"&prm_track=INSIDE&prm_objeton="+n.getAttribute("data-ordem")+"&prm_alt_med=&prm_cross=&prm_self="+d,!1,"selectedline",t,t,"obj");var e=document.getElementById(t+"c");if(-1==n.parentNode.className.indexOf("nivel"))e.removeEventListener("click",click_evento),e.addEventListener("click",click_evento),e.removeEventListener("dblclick",dbl_click_evento),e.addEventListener("dblclick",dbl_click_evento);else{parseInt(n.parentNode.className.replace("es nivel","").replace("cl nivel",""));e.removeEventListener("click",click_evento),e.addEventListener("click",click_evento),e.removeEventListener("dblclick",dbl_click_evento),e.addEventListener("dblclick",dbl_click_evento)}topDistance(t),setTimeout(function(){fixCol(t)},200)},100)}}else document.getElementById(t).getElementsByClassName("checked").length<17?a.classList.toggle("checked"):e.className="setadown"}var geoarray=new Array;function initMap(e,t){mapa=new google.maps.Map(document.getElementById(e),{center:{lat:10,lng:0},zoom:3,minZoom:3,maxZoom:3,zoomControl:!1,scaleControl:!1,mapTypeControl:!1,streetViewControl:!1,disableDefaultUI:!0});var a=new google.maps.StyledMapType([{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"off"}]}]);mapa.mapTypes.set("myCustomMap",a),mapa.setMapTypeId("myCustomMap"),callMarkers(e)}function callMarkers(e){var t;(t=new XMLHttpRequest).onreadystatechange=function(){if(4==t.readyState){geoarray=t.responseText.split("/");for(let t=0;t<geoarray.length;t++){var e="";e.metadata={type:"point",id:"marker"+t},e=new google.maps.Marker({position:{lat:parseFloat(geoarray[t].split("|")[1]),lng:parseFloat(geoarray[t].split("|")[2])},map:mapa,label:"",title:geoarray[t].split("|")[0].trim()})}setTimeout(function(){callHints()},500)}},t.open("POST","dwu.fcl.mapmarker",!1),t.send("prm_objeto="+e)}function callHints(){var e=document.getElementsByClassName("gmnoprint");for(let a=0;a<e.length;a++)if(e[a].children[1]){e[a].children[1].children[0]&&(e[a].setAttribute("data-text",e[a].children[1].children[0].title.replace(/<BR>/g,", \n ")),e[a].style.setProperty("opacity","1"));var t=document.createElement("span");t.className="texto",t.innerHTML=e[a].children[1].children[0].title,e[a].appendChild(t)}}function lock(e,t){if("lockin"==t){if("locked"==e.className)throw"stop execution";e.setAttribute("class","locked")}else e.setAttribute("class","")}function call_save(e){document.getElementById("salvar").setAttribute("onclick",""),e.length>1?(document.getElementById("salvar").setAttribute("class",""),document.getElementById("salvar").setAttribute("onclick",'save("'+e+'")')):document.getElementById("salvar").setAttribute("class","disabled")}function save(e){switch(e){case"pontoav":document.getElementById("savepa").submit();break;case"browseredit":var t=(d=document.getElementById("browseredit").children).length,a="",n="",r="",o="",l=[],i=[];for(let e=0;e<t;e++)if("0"==d[e].getAttribute("data-chave")){if(d[e].getAttribute("data-obrigatorio")&&!(d[e].getAttribute("data-obrigatorio")&&d[e].getAttribute("data-v").length>0))return document.getElementById("data_list_menu").classList.add("shake"),d[e].classList.add("error"),alerta("feed-fixo",TR_AO),void setTimeout(function(){document.getElementById("data_list_menu").classList.remove("shake")},300);if("data"==d[e].getAttribute("data-tipo")&&d[e].getAttribute("data-v").length<10&&0!=d[e].getAttribute("data-v").length||"datatime"==d[e].getAttribute("data-tipo")&&d[e].getAttribute("data-v").length<16&&0!=d[e].getAttribute("data-v").length)return document.getElementById("data_list_menu").classList.add("shake"),d[e].classList.add("error"),alerta("feed-fixo",TR_TD_IN,TR_FL_DC),void setTimeout(function(){document.getElementById("data_list_menu").classList.remove("shake")},300);n=n+"&prm_conteudo="+encodeURIComponent(d[e].getAttribute("data-v").trim()),a=a+"&prm_nome="+d[e].getAttribute("data-c"),r=r+"&prm_ant="+encodeURIComponent(d[e].getAttribute("data-d")),o=o+"&prm_tipo="+d[e].getAttribute("data-tipo")}else"data"==d[e].getAttribute("data-tipo")?l.push("to_char("+d[e].getAttribute("data-c")+", 'DD/MM/YYYY')"):l.push(d[e].getAttribute("data-c")),i.push(d[e].getAttribute("data-v"));curtain(),loading();document.getElementById("browser-tabela").value,d[0].getAttribute("data-c"),d[0].getAttribute("data-v");ajax("fly","browserEditLine","prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela")+"&prm_chave="+encodeURIComponent(i.join("|"))+"&prm_campo="+encodeURIComponent(l.join("|"))+a+n+r+o+"&prm_obj="+document.getElementById("data_list").className,!1,"","","","bro"),"false"==error?(document.getElementById("data_list_menu").classList.remove("open"),alerta("feed-fixo",TR_AL),browserSearch("save")):(document.getElementById("data_list_menu").classList.remove("open"),loading());break;case"browseradd":t=(d=document.getElementById("browseredit").children).length,a="",o="",document.getElementById("browser-campos").value.split("|"),i=[];var d,s=!1;n="",l=[];for(let e=0;e<t;e++){if("sequence"==d[e].getAttribute("data-tipo")&&(s=!0),"1"==d[e].getAttribute("data-chave")){if(0==d[e].getAttribute("data-v").trim().length)return document.getElementById("data_list_menu").classList.add("shake"),d[e].classList.add("error"),alerta("feed-fixo",TR_AO),void setTimeout(function(){document.getElementById("data_list_menu").classList.remove("shake")},300);i.push(d[e].getAttribute("data-v")),"data"==d[e].getAttribute("data-tipo")?l.push(encodeURIComponent("to_char("+d[e].getAttribute("data-c")+", 'DD/MM/YYYY')")):l.push(d[e].getAttribute("data-c"))}if(d[e].getAttribute("data-obrigatorio")&&!(d[e].getAttribute("data-obrigatorio")&&d[e].getAttribute("data-v").length>0))return document.getElementById("data_list_menu").classList.add("shake"),d[e].classList.add("error"),alerta("feed-fixo",TR_AO),void setTimeout(function(){document.getElementById("data_list_menu").classList.remove("shake")},300);a=a+"&prm_nome="+encodeURIComponent(d[e].getAttribute("data-c")),o=o+"&prm_tipo="+d[e].getAttribute("data-tipo"),n=n+"&prm_conteudo="+encodeURIComponent(d[e].getAttribute("data-v"))}loading();document.getElementById("browser-tabela").value;call("browserNewLine","prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela")+"&prm_chave="+document.getElementById("browser-chave-valores").value+"&prm_coluna="+l.join("|")+a+n+o+"&prm_ident="+encodeURIComponent(i.join("|"))+"&prm_sequence="+s+"&prm_obj="+document.getElementById("data_list").className,"bro").then(function(e){-1==e.indexOf("#alert")?(alerta("feed-fixo",TR_AD),browserSearch("BUSCA"),browserMenu(document.getElementById("data_list_menu"),""),curtain()):(loading(),curtain(),alerta("feed-fixo",e.replace("#alert ","").replace("undefined","")))});break;case"coluna":document.getElementById("saveap").submit();break;case"saveprop":var c=document.getElementById("attriblist").getElementsByTagName("LI"),m="",u="",p=[],g=document.getElementById("obj").value,f=0;for(let e=0;e<c.length;e++)if(c[e].parentNode.classList.contains("form")&&c[e].children[1].children[0]&&"A"!=c[e].children[1].children[0].tagName&&!c[e].children[1].querySelector(".script")&&!c[e].children[2]){if(c[e].children[2]){if(-1!=c[e].children[2].className.indexOf("inc")){u=c[e].children[1].children;for(let e=0;e<u.length;e++)-1==u[e].value.indexOf("ffffff")&&-1==u[e].value.indexOf("FFFFFF")&&-1==u[e].value.indexOf("000000")&&p.push(u[e].value);m=encodeURIComponent(p.join("|"))}}else m=c[e].children[1].children[0].classList.contains("checkbox")?c[e].children[1].children[0].title:"ESPACAMENTO"==c[e].getAttribute("data-prop")||"DASH_MARGIN"==c[e].getAttribute("data-prop")?encodeURIComponent(c[e].children[1].children[0].value+"|"+c[e].children[1].children[1].value+"|"+c[e].children[1].children[2].value+"|"+c[e].children[1].children[3].value):"color"==c[e].children[1].children[0].getAttribute("type")?encodeURIComponent(c[e].children[1].children[1].value):encodeURIComponent(c[e].children[1].children[0].value);"on"==m&&(m=0==(m=c[e].children[1].children[0].checked)?"N":"S"),"off"==m&&(m="S"),m!=encodeURIComponent(c[e].getAttribute("data-default"))&&(f+=1,ajax("fly","save_prop","prm_prop="+c[e].getAttribute("data-prop")+"&prm_valor="+m+"&prm_objeto="+draft+g+"&prm_url_default=&prm_screen="+tela,"true"),c[e].setAttribute("data-default",m))}f>0&&alerta("feed-fixo",TR_AL);break;case"saveprop_chart":var v=document.getElementsByClassName("array_transf"),y=document.getElementsByClassName("array_nomes");e="";for(let t=0;t<v.length;t++)e=e+"x="+v[t].value+"&";var _="";for(let e=0;e<y.length;e++)_=_+"y="+y[e].value+"&";ajax("fly","save_prop",(_=_.slice(0,-1))+"&"+(e=e.slice(0,-1))+"&prm_objeto="+(g=document.getElementById("obj").getAttribute("value"))+"&prm_url_default=&prm_screen="+tela,"true"),curtain(),shscr(tela),alerta("feed-fixo",TR_AL);break;case"savepa":if(!document.getElementById("fakelist").classList.contains("visible")){_=new Array;var h=0,b=document.getElementById("savepa").elements;for(let e=0;e<b.length;e++)b[e].getAttribute("class")&&("on"==b[e].value&&!1===b[e].checked&&(b[e].value="off"),"off"==b[e].value&&"true"==b[e].checked&&(b[e].value="off"),_[h]=b[e],h++);for(let e=0;e<_.length;e++)if(0==e)var E=_[e].getAttribute("class")+"="+_[e].value;else E="p_nm_ponto"==_[e].className?E+"&"+_[e].getAttribute("class")+"="+encodeURIComponent(_[e].value):E+"&"+_[e].getAttribute("class")+"="+_[e].value;document.getElementsByClassName("p_cd_ponto")[0].value.length>1?document.getElementsByClassName("p_nm_ponto")[0].value.length>0?(ajax("fly","savepa",E+"&fakeoption="+document.getElementById("fake_grupo").title,!1),"false"==error&&(g=document.getElementsByClassName("p_cd_ponto")[0].getAttribute("value"),"Ponto de avaliação"==document.getElementById("titulo").innerHTML?alerta("feed-fixo",TR_CR):alerta("feed-fixo",TR_AL))):alerta("msg",TR_DS_IN):alerta("msg",TR_NM_LE)}break;case"saveap":_=new Array;var I=0;b=document.getElementById("saveap").elements;for(let e=0;e<b.length;e++)b[e].getAttribute("class")&&("on"==b[e].value&&!1===b[e].checked&&(b[e].value="off"),"off"==b[e].value&&"true"==b[e].checked&&(b[e].value="off"),_[I]=b[e],I++);for(let e=0;e<_.length;e++)E=0==e?_[e].getAttribute("class")+"="+_[e].value:"p_nm_objeto"==_[e].className||"p_atributos"==_[e].className||"p_sub_objeto"==_[e].className?E+"&"+_[e].getAttribute("class")+"="+encodeURIComponent(_[e].value):E+"&"+_[e].getAttribute("class")+"="+_[e].value;g=document.getElementsByClassName("p_cd_objeto")[0].value,a=document.getElementsByClassName("p_nm_objeto")[0].value;document.getElementById(g)&&(obj=document.getElementById(g),topo=obj.offsetTop,left=obj.offsetLeft),g.trim().length>1&&a.trim().length>1?(document.getElementById("fake_atributo")?ajax("fly","savegd",E+"&p_atributos="+document.getElementById("fake_atributo").title+"&fakeoption="+document.getElementById("fake_grupo").title,"true"):ajax("fly","savegd",E+"&fakeoption="+document.getElementById("fake_grupo").title,"true"),alerta("feed-fixo",TR_AL)):alerta("msg",TR_NM_LE);break;case"savecd":_=new Array,h=0,b=document.getElementById("savemvi").elements;for(let e=0;e<b.length;e++)b[e].getAttribute("class")&&(_[h]=b[e],h++);for(let e=0;e<_.length;e++)E=0==e?_[e].getAttribute("class")+"="+_[e].value:E+"&"+_[e].getAttribute("class")+"="+_[e].value;_[1].value.trim().length<4?alerta("msg",TR_NM_LE):(ajax("fly","savecd",E),alerta("msg",TR_AD));break;case"savecall":document.getElementById("fechar_sup").setAttribute("data-reloado","false");_=new Array,I=0,b=document.getElementById("saveap").elements;for(let e=0;e<b.length;e++)b[e].getAttribute("class")&&("on"==b[e].value&&!1===b[e].checked&&(b[e].value="off"),"off"==b[e].value&&"true"==b[e].checked&&(b[e].value="off"),_[I]=b[e],I++);for(let e=0;e<_.length;e++)E=0==e?_[e].getAttribute("class")+"="+_[e].value:"p_nm_objeto"==_[e].className?E+"&"+_[e].getAttribute("class")+"="+encodeURIComponent(_[e].value):E+"&"+_[e].getAttribute("class")+"="+_[e].value;g=document.getElementsByClassName("p_cd_objeto")[0].value,a=document.getElementsByClassName("p_nm_objeto")[0].value,g.trim().length>1&&a.trim().length>1?document.getElementById("fake_grupo")&&(ajax("fly","savecallist",E+"&fakeoption="+document.getElementById("fake_grupo").title),alerta("feed-fixo",TR_AL)):alerta("msg",TR_NM_LE);break;case"savesin":if(document.getElementById("savemvi")){_=new Array,h=0,b=document.getElementById("savemvi").elements;for(let e=0;e<b.length;e++)b[e].getAttribute("class")&&(_[h]=b[e],h++);for(let e=0;e<_.length;e++)E=0==e?_[e].getAttribute("class")+"="+_[e].value:E+"&"+_[e].getAttribute("class")+"="+_[e].value;_[1].value.trim().length<4?alerta("msg",TR_NM_LE):_[2].value.trim().length<4?alerta("msg",TR_DS_LE):(ajax("fly","savesign",E),"false"==error&&alerta("msg",TR_AL))}else alerta("msg",TR_ES);break;case"savevp":if(document.getElementById("savevp")){_=new Array,h=0,b=document.getElementById("savevp").elements;for(let e=0;e<b.length;e++)b[e].getAttribute("class")&&(_[h]=b[e],h++);for(let e=0;e<_.length;e++)E=0==e?_[e].getAttribute("class")+"="+_[e].value:E+"&"+_[e].getAttribute("class")+"="+_[e].value;_[1].value.trim().length<4?alerta("msg",TR_NM_LE):(ajax("fly","savevp",E),alerta("msg",TR_AD))}else alerta("msg",TR_ES);break;case"savescr":_=new Array,h=0,b=document.getElementById("saveap").elements;for(let e=0;e<b.length;e++)b[e].getAttribute("class")&&(_[h]=b[e],h++);for(let e=0;e<_.length;e++)0==e?E=_[e].getAttribute("class")+"="+_[e].value:_[e].classList.contains("REPEAT")||_[e].classList.contains("IMG_POS")||_[e].classList.contains("IMG_SIZE")?ajax("fly","alter_attrib","prm_objeto="+tela+"&prm_prop="+_[e].getAttribute("class")+"&prm_value="+encodeURIComponent(_[e].value),!0):E=E+"&"+_[e].className+"="+encodeURIComponent(_[e].value);PRINCP.parentNode.style.setProperty("background-color",_[6].value),PRINCP.style.setProperty("background-image","url("+_[7].value+")"),PRINCP.style.setProperty("background-position",_[8].value),PRINCP.style.setProperty("background-size",_[9].value),PRINCP.style.setProperty("background-repeat",_[10].value),_[1].value.trim().length<4?alerta("msg",TR_NM_LE):_[3].value.trim().length<4?alerta("msg",TR_DS_LE):document.getElementById("fake_grupo").title.trim().length<1?alerta("msg",TR_ES_gr):(ajax("fly","savescr",E+"&p_grupof="+document.getElementById("fake_grupo").title),"false"==error&&(curtain(),alerta("feed-fixo",TR_AL),ajax("list","screen_list","",!0,"floatops"),document.getElementById("floatops").selectedIndex=-1));break;case"savepar":v=document.getElementsByClassName("array_transf"),y=document.getElementsByClassName("array_nomes"),e="";for(let t=0;t<v.length;t++)e=e+"x="+encodeURIComponent(v[t].value)+"&";_="";for(let e=0;e<y.length;e++)_=_+"y="+y[e].value+"&";ajax("fly","save_par",(_=_.slice(0,-1))+"&"+(e=e.slice(0,-1)),"","false"),curtain(),carrega("ajscreen?prm_screen="+tela),alerta("feed-fixo",TR_AL);break;case"consulta":if(0==document.getElementById("painel").querySelectorAll(".error").length){var x=document.getElementById("prm_visao").value;a=document.getElementById("prm_objeto").value;if(document.getElementById("nome_consulta"))var A=document.getElementById("nome_consulta").value;else A="";if(document.getElementById("agrupamento_consulta"))var B=document.getElementById("agrupamento_consulta").value;else B="";if(document.getElementById("grupo_consulta"))var L=document.getElementById("grupo_consulta").value;else L="";var N="";for(let e=(colunas=document.getElementById("coluna").querySelectorAll(".linha")).length-1;e>-1;e--)N=colunas[e].title+"|"+N;var T="",S=document.getElementById("colunas").querySelectorAll(".linha");for(let e=S.length-1;e>-1;e--)T=S[e].title+"|"+T;var C="",w=document.getElementById("colunac").querySelectorAll(".linha");for(let e=w.length-1;e>-1;e--)C=w[e].title+"|"+C;N=N.substr(0,N.length-1),T=T.substr(0,T.length-1),C=C.substr(0,C.length-1),ajax("fly","save_consulta","prm_visao="+x+"&prm_nome="+encodeURIComponent(a)+"&prm_desc="+encodeURIComponent(A)+"&prm_coluna="+N+"&prm_colup="+T+"&prm_agrupador="+C+"&prm_grupo="+L+"&prm_rp="+B,!1),ajax("fly","alter_ordem_geral","prm_valor=1&prm_objeto="+a),document.getElementById("fake_grupo")?noerror("",TR_CR,"msg"):noerror("",TR_AL,"msg"),document.getElementById(a+"trl")?(remover(a+"trl"),reload(a+"trl")):reload(a)}else alerta("msg",TR_ID);break;case"browser":_=new Array,h=0,b=document.getElementById("browseredit").children;for(let e=0;e<b.length;e++)b[e].getAttribute("class")&&(_[h]=b[e],h++);for(let e=0;e<_.length;e++)E=0==e?_[e].getAttribute("class")+"="+_[e].value:E+"&"+_[e].getAttribute("class")+"="+_[e].value;_[1].value.trim().length<3?alerta("msg",TR_NM_LE):(ajax("fly","browserEditLine",E),alerta("msg",TR_AD));break;default:document.getElementById("fakelist").setAttribute("class","")}}function blocoConsulta(e,t){e.style.setProperty("display","none");t=document.getElementById(t);var a=document.createElement("li"),n=document.createElement("span");n.innerHTML="X",a.className="linha",a.title=e.title,a.innerHTML=e.innerHTML,a.appendChild(n),a.setAttribute("onclick","swapColumn(this)"),t.appendChild(a);var r=document.createElement("li");r.className="square",r.setAttribute("onclick","swapSquare(this)"),t.appendChild(r)}function resizeBrowser(e,t){var a=e.parentNode;a.clientHeight!=a.getAttribute("data-height")&&ajax("fly","alter_attrib","prm_objeto="+t+"&prm_prop=ALTURA&prm_value="+a.clientHeight+"&prm_usuario="+USUARIO,!0),a.clientWidth!=a.getAttribute("data-width")&&ajax("fly","alter_attrib","prm_objeto="+t+"&prm_prop=LARGURA&prm_value="+a.clientWidth+"&prm_usuario="+USUARIO,!0)}function showtag(e,t,a,n,r,o,l){var i;document.getElementById(t)&&(i=document.getElementById(t)).parentNode.removeChild(i);document.getElementById("jumpdrill")&&(i=document.getElementById("jumpdrill")).parentNode.removeChild(i);var d=document.createElement("div");d.setAttribute("id","jumpdrill"),d.setAttribute("name",a),d.setAttribute("class",n),d.setAttribute("data-multi",r),d.setAttribute("data-linha",o),-1!=document.querySelector(".info").innerHTML.indexOf("DWU")&&d.setAttribute("title",document.getElementById("drill_go").value);var s="";document.getElementById("par_"+t.replace("sdrill_",""))&&(s=document.getElementById("par_"+t.replace("sdrill_","")).value),d.setAttribute("data-pivot",l),d.setAttribute("data-filtro",s),MAIN.appendChild(d)}function showview(e){e=e.split("|");var t="";for(let a=0;a<e.length-6;a++)e[a+6]&&(0==a?t=check_value(e[a+6]):t+=check_value(e[a+6]));if(t=encodeURIComponent(t).replace(/\'/g,"%27"),removeTrash(),document.getElementById(e[0]+"trl"))"dragme grafico scaled"!=document.getElementById(e[3]).className&&(loading(),LAYER.className="ativo",remover(e[0]+"trl"),document.getElementById("drill_obj").value=e[0],appendar("prm_drill=Y&prm_objeto="+e[0]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros="+check_value(e[1])+check_value(e[2])+check_value(e[5])+t+"&prm_screen="+e[4]+"&prm_track="+e[0]+"&prm_objeton="+e[0],"in"),setTimeout(function(){centerDrill(e[0]);var t=setInterval(function(){document.getElementById(e[0])&&(carrega("ajobjeto?prm_objeto="+e[0]),clearInterval(t)),document.getElementById(e[0]+"trl")&&clearInterval(t)},100)},500));else{if("dragme grafico scaled"==document.getElementById(e[3]).className)return!1;loading(),document.getElementById("drill_obj").value=e[0],appendar("prm_drill=Y&prm_objeto="+e[0]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros="+e[1]+check_value(e[2])+check_value(e[5])+t+"&prm_screen="+e[4]+"&prm_track="+e[0]+"&prm_objeton="+e[0],"in"),setTimeout(function(){centerDrill(e[0]),ciclo=setInterval(function(){document.getElementById(e[0])&&(carrega("ajobjeto?prm_objeto="+e[0]),clearInterval(ciclo)),document.getElementById(e[0]+"trl")&&clearInterval(ciclo)},100)},500)}}function showview2(e){var t=(e=document.getElementById(e).getAttribute("data-valor")).split("|"),a="";for(let e=0;e<t.length-1;e++)t[e+1]&&(0==e?a=t[e+1]:a+=check_value(t[e+1]));if("|"===(a=encodeURIComponent(a).replace(/\'/g,"%27")).charAt(0)&&(a=a.substr(1)),"dragme grafico scaled"!=document.getElementById(t[0]).className){if(removeTrash(),remover(t[0]+"trl"),document.getElementById("jumpdrill")){var n=document.getElementById("jumpdrill");n.parentNode.removeChild(n)}showtag("drill_show","sdrill_"+t[0],"",a,a,a,""),ajax("list","load_drill","prm_objeto="+t[0]+"trl&prm_parametros="+encodeURIComponent(a)+"&prm_track="+a+"&prm_objeton="+a,!1,"jumpdrill"),jumpdrill.setAttribute("style","top:"+(cursory+3)+"px; left:"+cursorx+"px;"),setTimeout(function(){jumpdrill.style.setProperty("opacity","1"),jumpdrill.style.setProperty("margin-top","0")},100)}}function showview3(e){loading();var t=e.split("||")[0].split("|"),a=e.split("||")[1];t[2]?(remover(t[1]+"trl"),call("show_objeto","prm_drill=Y&prm_objeto="+t[1]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros="+encodeURIComponent(a)+"&prm_screen="+tela+"&prm_track="+t[0]+"&prm_objeton="+t[0],"obj").then(function(e){var t=document.createElement("div");t.innerHTML=e,t.children[0].style.setProperty("opacity","0"),MAIN.appendChild(t.children[0])}).then(function(){document.getElementById(t[1])&&(carrega("ajobjeto?prm_objeto="+t[1]),centerDrill(t[1]),eventos(document.getElementById(t[1])),ajustar(t[1]),setTimeout(function(){document.getElementById(t[1]).style.setProperty("opacity","1")},100)),document.getElementById(t[1]+"trl")&&(carrega("ajobjeto?prm_objeto="+t[1]+"trl"),centerDrill(t[1]+"trl"),eventos(document.getElementById(t[1]+"trl")),ajustar(t[1]+"trl"),setTimeout(function(){document.getElementById(t[1]+"trl").style.setProperty("opacity","1")},100))})):t[3]||(remover(t[1]+"trl"),call("show_objeto","prm_drill=Y&prm_objeto="+t[1]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros="+encodeURIComponent(a)+"&prm_screen="+tela+"&prm_track="+t[0]+"&prm_objeton="+t[0],"obj").then(function(e){var t=document.createElement("div");t.innerHTML=e,t.children[0].style.setProperty("opacity","0"),MAIN.appendChild(t.children[0])}).then(function(){document.getElementById(t[1])&&(carrega("ajobjeto?prm_objeto="+t[1]),centerDrill(t[1]),eventos(document.getElementById(t[1])),ajustar(t[1]),setTimeout(function(){document.getElementById(t[1]).style.setProperty("opacity","1")},100)),document.getElementById(t[1]+"trl")&&(carrega("ajobjeto?prm_objeto="+t[1]+"trl"),centerDrill(t[1]+"trl"),eventos(document.getElementById(t[1]+"trl")),ajustar(t[1]+"trl"),setTimeout(function(){document.getElementById(t[1]+"trl").style.setProperty("opacity","1")},100))})),setTimeout(function(){loading()},100)}function showview4(e){if(e.split("|").length>2){if(-1!=e.indexOf("||"))var t=e.split("||")[1],a=e.split("||")[0].split("|");else t="",a=e.split("|");if("|"===t.charAt(0)&&(t=t.substr(1)),removeTrash(),remover(a[0]+"trl"),document.getElementById("jumpdrill")){var n=document.getElementById("jumpdrill");n.parentNode.removeChild(n)}showtag("drill_show","sdrill_"+a[0],"",t,t,t,""),ajax("list","load_drill","prm_objeto="+a[0]+"trl&prm_parametros="+encodeURIComponent(t)+"&prm_track="+t+"&prm_objeton="+t,!1,"jumpdrill"),jumpdrill.setAttribute("style","top:"+(cursory+3)+"px; left:"+cursorx+"px;"),setTimeout(function(){jumpdrill.style.setProperty("opacity","1"),jumpdrill.style.setProperty("margin-top","0")},100)}}function showview_org(e){var t=e[0];if(t.getAttribute("data-goto").length>1){loading();var a=t.getAttribute("data-goto").split("|");removeTrash(),remover(a[0]+"trl"),remover(a[0]);var n="";for(let e=0;e<a.length-1;e++)a[e+1]&&(n=0==e?a[e+1]:n+"|"+a[e+1]);appendar("prm_drill=Y&prm_objeto="+a[0]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros=1|1|qb_depto|"+t.id+"|"+n+"&prm_screen="+tela+"&prm_track=qb_depto&prm_objeton=departamento","in"),ajustaIframe(a[0]+"trl"),centerDrill(a[0]),carrega("ajobjeto?prm_objeto="+a[0])}}function check_tag(e,t,a,n,r,o){if(-1==get(t).className.indexOf("scaled")){r=r||"";var l=n,i=get(t),d=[],s=i.querySelectorAll(".tdselected"),c=s.length,m=i.querySelectorAll(".checked"),u=m.length;"fixed"==o.parentNode.className?o.parentNode.getAttribute("data-i"):o.getAttribute("data-i");for(let e=0;e<c;e++)d.push(s[e].getAttribute("data-valor"));d.filter(e=>e).join("|"),d=[];for(let e=0;e<u;e++)d.push(m[e].getAttribute("data-valor"));d.length>0&&(l=d.filter(e=>e).join("|"));let a=[];a.push(l),a.push(r),document.getElementById("drill_go").value=a.filter(e=>e).join("|");var p=!0;o.parentNode.getAttribute("data-drill")&&"S"!=o.parentNode.getAttribute("data-drill")&&(p=!1),o.parentNode.classList.contains("duplicado")&&(p=!1);var g=document.getElementById("dados_"+t);if(g){let e=g.getAttribute("data-drill");e&&"C"==e&&(p=!1)}p&&drillfix(e,t)}}function check_value(e){return void 0!==e?0==e.trim.length?"":("|"+e).replace("||","|"):""}var sobbar="",checklayer="",activeshow="",conteudo="";function shscr(e,t,a,n){var r=document.querySelectorAll(".filtro.show");for(let e=0;e<r.length;e++)r[e].classList.remove("show"),r[e].classList.add("hidden"),r[e].setAttribute("data-desc","");document.getElementById("popupmenu")&&((l=document.getElementById("popupmenu")).classList.contains("visible")&&(l.classList.remove("visible"),l.innerHTML=""));get("screen-props")&&(get("screen-props").innerHTML="");var o=document.createElement("style");if(parseInt(document.getElementById("layer3").style.getPropertyValue("height"))>0&&(PRINCP.style.setProperty("overflow","visible"),PRINCP.style.removeProperty("height"),document.getElementById("html").style.setProperty("overflow","visible"),document.getElementById("layer3").style.setProperty("height","0"),document.getElementById("prev").style.setProperty("display","none"),document.getElementById("next").style.setProperty("display","none")),clearInterval(checklayer),loaded(),!LAYER.classList.contains("ativo")){var l,i=n||"UPQUERY";if(document.getElementById("atu_view"))(l=document.getElementById("atu_view")).classList.contains("invisible")&&l.classList.remove("invisible");if("UPQUERY"!=i?(document.getElementById("menup").classList.add("invisible"),MAIN.style.setProperty("padding-top","0"),LAYER.style.setProperty("top","0"),LAYER.style.setProperty("height","100%")):document.getElementById("menup")&&(document.getElementById("menup").classList.remove("invisible"),MAIN.style.setProperty("padding-top",""),LAYER.style.setProperty("top","35"),LAYER.style.setProperty("height","calc(100% - 35px)")),document.getElementById("attriblist").classList.remove("open"),document.getElementById("floatlist").classList.remove("open"),document.getElementById("donut").classList.remove("open"),curtain("x"),clearInterval(auto_refresh),document.getElementById("fakelist").classList.remove("visible"),zindex_abs=5,clearInterval(textTalk),document.getElementById("show_only_screen")&&MAIN.style.setProperty("padding-top","6px"),document.getElementById("call-menu"))(l=document.getElementById("call-menu")).classList.add("invisible"),call("obj_screen_count","prm_screen="+e+"&prm_tipo=CALL_LIST").then(function(e){parseInt(e)>0?l.classList.remove("invisible"):l.classList.add("invisible")});if(document.getElementById("float-filter")){var d=document.getElementById("float-filter");d.classList.add("invisible"),document.getElementById("show_only_screen")||call("obj_screen_count","prm_screen="+e+"&prm_tipo=FLOAT").then(function(e){parseInt(e)>0?d.classList.remove("invisible"):d.classList.add("invisible")})}clearInterval(checkscreen),clearInterval(loopscreen),document.getElementById("show_only_bar")&&(clearInterval(sobbar),document.getElementById("show_only_bar").style.setProperty("width",0)),document.getElementById("filterlist").className="filtro hidden";var s=document.getElementById("current_screen");loading("x"),document.getElementById("text-talk").className="";var c=document.getElementById("back");void 0!==t&&t.length>0?(c.className="visible",c.setAttribute("data-screen",t),ajax("list","screen_list","prm_objeto=",!0,"floatops")):c.className="invisible";var m,u=PRINCP.children[0];if("calendar-box"==u.className&&u.style.setProperty("display","none"),document.getElementById("timer")){var p=document.getElementById("timer");p.parentNode.removeChild(p)}for(removeTrash(),document.getElementById("main-ext").innerHTML="";MAIN.firstChild;)MAIN.removeChild(MAIN.firstChild);if(tela=e.replace(" ","_"),void 0!==t?call("show_screen","prm_screen="+e+"&prm_screen_ant="+t+"&prm_parametro="+a).then(function(e){-1==e.indexOf("LOGOUT")?(MAIN.innerHTML=e,icarrega(),MAIN.children[0]&&"data_list"==MAIN.children[0].id&&ajustar(MAIN.children[0].className)):logout()}):call("show_screen","prm_screen="+e+"&prm_screen_ant=&prm_parametro=").then(function(e){main.innerHTML=e,icarrega(),main.children[0]&&"data_list"==main.children[0].id&&ajustar(main.children[0].className)}),ajaxExt(e),s.value=tela,clearInterval(timeout),"DEFAULT"!=s.value&&"SANDBOX"!=s.value)call("countdown","prm_screen="+s.value).then(function(e){if(0!=(m=e)){var t=parseInt(m);timeout=setInterval(refreshTela,t)}});var g=0;checklayer=setInterval(function(){"ativo"!=layer.className&&(clearInterval(checklayer),loaded()),(g+=1)>=500&&clearInterval(checklayer)},200),document.getElementById("tela-atual")&&(document.getElementById("tela-atual").innerHTML="",call("title_screen","prm_screen="+e).then(function(e){e.trim().length>0&&(document.getElementById("tela-atual").innerHTML=e.trim())})),setTimeout(function(){-1!=MAIN.className.indexOf("usuario")?ajax("input","check_data","prm_valor="+e+"&prm_tabela=main&prm_true=usuario&prm_false=usuario row",!0,"main"):ajax("input","check_data","prm_valor="+e+"&prm_tabela=main&prm_true=&prm_false=row",!0,"main")},5)}s&&("DEFAULT"!=s.value?call("background_attrib","prm_screen="+e).then(function(e){let t=e,a=t.split("|")[0],n=t.split("|")[1];o.innerHTML="div#main { "+a+" } div#main:before { "+n+" }"}):setTimeout(function(){o.innerHTML="div#main:before { url(dwu.fcl.download?arquivo=bg.jpg); }"},1e3)),get("screen-props")&&get("screen-props").appendChild(o)}function refreshTela(){0==document.querySelectorAll(".drill").length&&(shscr(tela),curtain())}function loaded(){clearTimeout(activeshow);var e=document.querySelectorAll(".dragme"),t=e.length;for(let i=0;i<t;i++){if(document.getElementById(e[i].id+"min")){var a=document.getElementById(e[i].id+"min");a.addEventListener("mouseup",function(){this.parentNode.querySelector(".espaco").classList.toggle("min")}),a.addEventListener("touchend",function(){this.parentNode.querySelector(".espaco").classList.toggle("min")})}var n,r;if("A"==ADMIN){if(document.getElementById(e[i].id+"_ds")&&-1==document.getElementById(e[i].id).className.indexOf("float")){var o=e[i].id,l=document.getElementById(o+"_ds");"mobile"==PRINCP.className?(n="touchstart",r="touchend"):(n="mousedown",r="mouseup"),l.addEventListener(n,function(){invisible_touch(this.parentNode.id,"start")}),l.addEventListener(r,function(){invisible_touch(this.parentNode.id,"stop"),"touchend"==r&&dblTouch(this.parentNode.id)}),l.addEventListener("dblclick",function(){get("jumpdrill")&&get("jumpdrill").remove(),curtain(""),scale(this.id.replace("_ds",""),"direct")})}}else if(document.getElementById(e[i].id+"_ds")&&-1==document.getElementById(e[i].id).className.indexOf("float")){o=e[i].id;(l=document.getElementById(o+"_ds")).addEventListener("dblclick",function(){get("jumpdrill")&&get("jumpdrill").remove(),curtain(""),scale(this.id.replace("_ds",""),"direct")})}}if(projecoes.length>0&&parseInt(document.getElementById("active-show").getAttribute("data-time"))>0){var i=document.getElementById("active-show").nextElementSibling;activeshow="show_only"==i.className?setTimeout(function(){document.getElementById("active-show").id="",i.id="active-show",removeTrash(),shscr(i.value)},parseInt(document.getElementById("active-show").getAttribute("data-time")+"000")+1e3):setTimeout(function(){document.getElementById("active-show").id="",projecoes[0].id="active-show",removeTrash(),shscr(projecoes[0].value)},parseInt(document.getElementById("active-show").getAttribute("data-time")+"000")+1e3)}}function addLink(){if(document.getElementById("attriblist")){var e=document.getElementById("attriblist").getElementsByTagName("LI"),t=e.length;for(let a=0;a<t;a++)"SCRIPT"!=e[a].className&&(e[a].firstElementChild.removeEventListener("click",menuLink),e[a].firstElementChild.addEventListener("click",menuLink))}}function changeScreen(){document.getElementById("floatops").blur(),document.getElementById("donut").setAttribute("class","");var e=document.getElementById("html"),t=document.getElementById("floatops").getElementsByTagName("option")[document.getElementById("floatops").selectedIndex];document.getElementById("prefdrop")&&(document.getElementById("prefdrop").className="hidden"),"X"!=t.value?(shscr(t.value),-1==t.getAttribute("data-url").indexOf("EXT=")?setTimeout(function(){e.style.setProperty("background-color",t.getAttribute("data-bg")),MAIN.style.setProperty("background-repeat",t.getAttribute("data-repeat")),MAIN.style.setProperty("background-position",t.getAttribute("data-pos")),MAIN.style.setProperty("background-size",t.getAttribute("data-size")),MAIN.style.setProperty("background-image","url("+t.getAttribute("data-url")+")")},1e3):setTimeout(function(){e.style.setProperty("background-color",t.getAttribute("data-bg")),MAIN.style.setProperty("background-repeat",t.getAttribute("data-repeat")),MAIN.style.setProperty("background-position",t.getAttribute("data-pos")),MAIN.style.setProperty("background-size",t.getAttribute("data-size")),MAIN.style.setProperty("background-image","")},1e3)):document.getElementById("opcoes").className="closed"}function fecharSup(){var e=this;clearInterval(auto_refresh),document.getElementById("fakelist").setAttribute("data-campo",""),document.getElementById("fakelist").setAttribute("class",""),alerta("msg",""),curtain(),setTimeout(function(){var t=e.getAttribute("data-reloado");if("false"!=t){if(get(t)){var a=document.getElementById(t),n=a.offsetLeft+"px",r=a.offsetTop,o=tela;window.getComputedStyle(a).getPropertyValue("order")&&(dashorder="&prm_dashboard=true",dashlocation=a.parentNode.id,n=window.getComputedStyle(a).getPropertyValue("order"),o=a.parentNode.id),a.remove(),loading(""),appendar("prm_objeto="+t+"&PRM_ZINDEX=2&prm_posx="+n+"&prm_posy="+r+"px&prm_screen="+tela+dashorder,dashlocation,o),setTimeout(function(){carrega("ajobjeto?prm_objeto="+t)},100)}e.setAttribute("data-reloado","false")}"false"!=e.getAttribute("data-reloads")&&(shscr(tela),e.setAttribute("data-reloads","false"))},200)}function fecharCustom(){alerta("msg",""),curtain_custom()}function activemap(e,t,a){try{var n=new FusionCharts("Brazil","mapid",a,t)}catch(e){picx=0}document.getElementById("gxml_"+e).children[0]?n.setXMLData(document.getElementById("gxml_"+e).innerHTML):n.setXMLData(document.getElementById("gxml_"+e).value);try{n.render("ctmr_"+e)}catch(e){picx=0}n.setChartAttribute("stroke",null)}function browserMenu(e,t){e.classList.remove("open"),document.getElementById("editb").innerHTML="";parseInt(window.getComputedStyle(document.getElementById("data_list_menu")).height);t&&setTimeout(function(){e.classList.add("open")},100)}function browserOrder(e){e.target.getAttribute("data-coluna")&&(e.target.classList.contains("selectedbheader")?e.target.classList.contains("desc")?(e.target.classList.remove("desc"),e.target.classList.remove("selectedbheader")):e.target.classList.add("desc"):e.target.classList.add("selectedbheader"),browserSearch("BUSCA"))}var beta={};function browserSearch(e,t){if(document.querySelector(".selectedbheader")){var a,n=document.querySelectorAll(".selectedbheader"),r=[];for(let e=0;e<n.length;e++)n[e].classList.contains("desc")?r.push(n[e].getAttribute("data-ordem")+" DESC"):r.push(n[e].getAttribute("data-ordem"));a=r.join(",")}else a=1;e=e||"BUSCA",t=t||"";if(LAYER.classList.contains("ativo")||loading(),0==t.length&&ajax("fly","alter_attrib","prm_objeto="+document.getElementById("data_list").className+"&prm_prop=DIRECTION&prm_value="+a+"&prm_usuario="+USUARIO,!0),document.getElementById("browser-condicao").parentNode.classList.contains("ligacao"))o=document.getElementById("browser-condicao").nextElementSibling.title;else var o=document.getElementById("data-valor").value;var l=document.getElementById("data_list").getAttribute("data-tabela"),i=document.getElementById("browser-coluna").value,d=document.getElementById("data_list").className,s=document.getElementById("data-coluna").value,c=document.getElementById("browser-condicao").value,m=document.getElementById("linhas").value,u=document.getElementById("data-coluna").options[document.getElementById("data-coluna").selectedIndex].innerHTML;setTimeout(function(){if("semelhante"==c)var n="like";else n=c;var r="";if(document.getElementById("multi-search")){var p="$["+n.toUpperCase()+"]",g=s+"|"+p+o,f=!1;{let e=document.createElement("span");-1!=c.indexOf("nulo")?-1!=c.indexOf("nnulo")?e.innerHTML=u+" não nulo":e.innerHTML=u+" "+c.toLowerCase():(0==o.trim().length&&(f=!0),-1!=c.indexOf("diferente")?e.innerHTML=u+" "+c.toLowerCase()+" de "+o:-1!=c.indexOf("maior")?e.innerHTML=u+" "+c.toLowerCase()+" que "+o:e.innerHTML=u+" "+c.toLowerCase()+" a "+o),e.addEventListener("click",()=>{event.stopPropagation(),confirm(TR_CE)&&(e.remove(),setTimeout(function(){browserSearch("")},100))}),document.getElementById("data-valor").value="",document.getElementById("data-valor").previousElementSibling.title="",document.getElementById("data-valor").previousElementSibling.children[0].innerText="",f||(e.title=g,e.classList.add("acumulado"),document.getElementById("filtros-acumulados").appendChild(e))}let e=[];document.querySelectorAll(".acumulado").forEach(t=>{e.push(t.title)}),r=e.join("|")}"save"==e&&(e=">",t=document.getElementById("ajax").firstElementChild?parseInt(document.getElementById("ajax").firstElementChild.className)-1:0),ajax("list","dt_pagination","prm_micro_data="+l+"&prm_coluna="+i+"&prm_objid="+d+"&prm_chave="+s+"&prm_ordem="+a+"&prm_screen="+tela+"&prm_limite="+m+"&prm_origem="+t+"&prm_direcao="+e+"&prm_busca="+o+"&prm_condicao="+c+"&prm_acumulado="+r,!1,"ajax","","","bro"),loading(),document.getElementById("browser-page").innerHTML="",call("get_total","prm_microdata="+l+"&prm_objid="+d+"&prm_screen="+tela+"&prm_condicao="+c+"&prm_coluna="+i+"&prm_chave="+s+"&prm_ordem="+a+"&prm_busca="+o,"bro").then(function(e){document.getElementById("browser-page").outerHTML=e}).then(function(){var e=document.getElementById("linhas").value;if(document.getElementById("ajax").lastElementChild){var t=Math.ceil(parseInt(document.getElementById("ajax").lastElementChild.className)/e),a=Math.ceil(document.getElementById("browser-page").getAttribute("data-total")/e);document.getElementById("browser-page").setAttribute("data-pagina",t),document.getElementById("browser-page").innerHTML=t+"/"+a}})},10)}function browserPage(){var e=document.getElementById("browser-page"),t=document.getElementById("linhas").value,a=Math.ceil(parseInt(document.getElementById("ajax").lastElementChild.className)/t),n=Math.ceil(e.getAttribute("data-total")/t);a<1&&(a=1),n<1&&(n=1),e.innerHTML=a+"/"+n,e.setAttribute("data-pagina",a),e.className=n}function toggleAba(e){document.querySelector(".abas").querySelector(".green").classList.remove("green"),e.classList.add("green");var t=e.parentNode.parentNode.querySelectorAll(".form");for(let a=0;a<t.length;a++)t[a].id==e.getAttribute("data-for")?t[a].classList.remove("closed"):t[a].classList.add("closed")}function saveFloats(){var e=document.querySelector(".itens").getElementsByTagName("ul");for(let r=0;r<e.length;r++){var t=e[r].children;for(let e=0;e<t.length;e++)if(-1!=t[e].children[2].className.indexOf("float")){var a=t[e].children[2].children[0].children,n="";for(let e=0;e<a.length;e++)1==a[e].selected&&(n=n+"|"+a[e].value);ajax("fly","save_float","ws_conteudo="+encodeURIComponent(n)+"&ws_padrao="+t[e].children[1].title)}else t[e].children[2]&&ajax("fly","save_float","ws_conteudo="+encodeURIComponent(t[e].children[2].value)+"&ws_padrao="+t[e].children[1].title)}}function sos(e){var t=document.getElementById(e);t.getAttribute("data-script").length>0&&confirm(TR_CM)&&call("programa_execucao","prm_objeto="+e+"&prm_parametros="+encodeURIComponent(t.getAttribute("data-parametros"))+"&prm_screen="+tela).then(function(e){-1!=e.indexOf("WS_EXECUTANDO")?alerta("feed-fixo",TR_PR):-1!=e.indexOf("WS_NOEXEC")?alerta("feed-fixo",TR_XC):-1!=e.indexOf("OTHERS")?alerta("feed-fixo",TR_XC):alerta("feed-fixo",e.trim())});var a=t.getAttribute("data-chamada");a.length>0&&(-1!=a.indexOf("SRC_")?shscr(a):(cleardrill(),document.getElementById("drill_obj").value=a+"trl",appendar("prm_drill=Y&prm_objeto="+a+"&prm_zindex=2&prm_posx="+(cursorx-20)+"px&prm_posy="+(cursory-20)+"px&prm_screen="+tela,"",""),carrega("ajobjeto?prm_objeto="+a+"trl"),centerDrill(a)))}function browserEvent(e,t,a,n){var r=document.getElementById("data_list_menu");if("edit"==a){var o=e.target.parentNode;if(document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),selectedb!=o.id||o.classList.contains("attach")){selectedb=o.id,o.classList.add("selectedbline");var l=[];if(e.target.classList.contains("attach-div"))var i=o.parentNode.querySelectorAll(".chave");else i=o.querySelectorAll(".chave");var d=i.length;for(let e=0;e<d;e++)l.push(encodeURIComponent(i[e].getAttribute("data-d")));o.classList.contains("attach")?(curtain("only"),browserMenu(r,e),ajax("list","anexo","prm_chave="+t+"|"+l.join("|"),!1,"editb","","","bro"),ajax("list","browserButtons","prm_tipo=&prm_visao=&prm_chave=",!1,"browserbuttons","","","bro")):(curtain("only"),ajax("list","browserButtons","prm_tipo=update&prm_visao="+t+"&prm_chave=",!1,"browserbuttons","","","bro"),call("browserEdit","prm_obj="+t+"&prm_chave="+l.join("|")+"&prm_campo="+document.getElementById("browser-chave").value+"&prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela"),"bro").then(function(t){browserMenu(r,e),document.getElementById("editb").innerHTML=t}).then(function(){var e=document.getElementById("browseredit").querySelectorAll("[data-evento]"),t=e.length;for(let a=0;a<t;a++)e[a].getAttribute("data-evento").split("|").forEach(function(t){e[a].addEventListener(t,browser_tipo_valor)})}))}else o.classList.remove("selectedbline"),r.classList.remove("open"),selectedb=""}"new"==a&&(document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),curtain("only"),ajax("list","browserButtons","prm_tipo=insert&prm_visao="+t+"&prm_chave="+document.getElementById("browser-chave").value,!1,"browserbuttons","","","bro"),call("browserEdit","prm_obj="+t+"&prm_chave=&prm_campo="+document.getElementById("browser-chave").value+"&prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela"),"bro").then(function(t){browserMenu(r,e),document.getElementById("editb").innerHTML=t}).then(function(){var e=document.getElementById("browseredit").querySelectorAll("[data-evento]"),t=e.length;for(let a=0;a<t;a++)e[a].getAttribute("data-evento").split("|").forEach(function(t){e[a].addEventListener(t,browser_tipo_valor)})})),"colunas"==a&&(selectedb="",browserMenu(r,""),document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),document.getElementById("titulo").innerHTML=a,call_save(""),curtain("enabled"),call("browserConfig","prm_microdata="+t,"BRO").then(function(e){document.getElementById("content").innerHTML=e;var a=document.getElementById("data_list").getAttribute("data-tabela");carregaPainel("browser",t+"|"+a)})),"filtros"==a&&(selectedb="",browserMenu(r,""),document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),document.getElementById("titulo").innerHTML=a,call_save(""),curtain("enabled"),call("list_ofiltro","ws_par_sumary="+t+"&prm_visao="+n).then(function(e){document.getElementById("content").innerHTML=e,carregaPainel("browserfiltro",t)})),"destaques"==a&&(selectedb="",browserMenu(r,""),document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),document.getElementById("titulo").innerHTML=a,call_save(""),curtain("enabled"),call("blink","prm_objeto="+t+"&prm_visao="+n).then(function(e){document.getElementById("content").innerHTML=e,carregaPainel("blinkbrowser",t)}))}function browser_tipo_valor(){if(-1==this.parentNode.getAttribute("data-tipo").indexOf("number"))this.parentNode.setAttribute("data-v",this.value.replace(/\>/g,"").replace(/\</g,""));else{var e=this.value;(e=e.split("."))[e.length-1]=e[e.length-1].replace(",","."),e=e.join(","),this.parentNode.setAttribute("data-v",e)}}function callDrill(e,t){var a=e.value;document.getElementById("drill_obj").setAttribute("value",a+"trl"),remover("jumpdrill"),remover(a+"trl"),appendar("prm_drill=Y&prm_objeto="+a+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=2&prm_parametros="+encodeURIComponent(t)+"&prm_screen="+tela),setTimeout(function(){ajustar(a+"trl"),carrega("ajobjeto?prm_objeto="+a+"trl"),centerDrill(a)},10)}function colunasCalculo(e,t){var a=[],n=document.getElementById("fakelist").querySelectorAll(".calculos_n");for(let e=0;e<n.length;e++)a.push(encodeURIComponent(n[e].value));ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop=CALCULADA_N&prm_value="+a.join("|")+"&prm_usuario="+t,!1);a=[],n=document.getElementById("fakelist").querySelectorAll(".calculos");for(let e=0;e<n.length;e++)a.push(encodeURIComponent(n[e].value));ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop=CALCULADA&prm_value="+a.join("|")+"&prm_usuario="+t,!1);a=[],n=document.getElementById("fakelist").querySelectorAll(".calculos_m");for(let e=0;e<n.length;e++)a.push(encodeURIComponent(n[e].value));ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop=CALCULADA_M&prm_value="+a.join("|")+"&prm_usuario="+t,!1),alerta("feed-fixo",TR_AL)}function colunasPropriedades(e,t,a){var n=[],r=[],o=document.getElementById("fakelist").querySelectorAll(".prop_col_n"),l=document.getElementById("fakelist").querySelectorAll(".prop_col");for(let e=0;e<o.length;e++)""!=encodeURIComponent(o[e].value)&&"."!=encodeURIComponent(o[e].value)&&(n.find(t=>t==encodeURIComponent(o[e].value))||""!=encodeURIComponent(l[e].value)&&(n.push(encodeURIComponent(o[e].value)),r.push(encodeURIComponent(l[e].value))));ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop="+t+"_N&prm_value="+n.join("|")+"&prm_usuario="+a,!1),ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop="+t+"&prm_value="+r.join("|")+"&prm_usuario="+a,!1)}function savePrefixo(e,t){if("add"==t)var a=(d=document.getElementById("painel")).children[0],n=d.children[1],r=d.children[2],o=d.children[3],l=d.children[4],i=d.children[5];else{var d;a=(d=e.parentNode.parentNode).children[0].children[0],n=d.children[1].children[0],r=d.children[2].children[0],o=d.children[3].children[0],l=d.children[4].children[0],i=d.children[5].children[0]}call("prefixo_alter","prm_prefixo="+a.value+"&prm_lov="+n.value+"&prm_lovp="+r.value+"&prm_agrupador="+o.value+"&prm_mascara="+l.value+"&prm_alinhamento="+i.value+"&prm_prefixo_ant="+a.getAttribute("data-ant")+"&prm_lov_ant="+n.getAttribute("data-ant")+"&prm_lovp_ant="+r.getAttribute("data-ant")+"&prm_agrupador_ant="+o.getAttribute("data-ant")+"&prm_mascara_ant="+l.getAttribute("data-ant")+"&prm_alinhamento_ant="+i.getAttribute("data-ant")+"&prm_evento="+t).then(function(e){-1!=e.indexOf("ok")&&(a.setAttribute("data-ant",a.value),n.setAttribute("data-ant",n.value),r.setAttribute("data-ant",r.value),o.setAttribute("data-ant",o.value),l.setAttribute("data-ant",l.value),i.setAttribute("data-ant",i.value))}).then(function(){"add"==t&&(carrega("prefixo_lista"),alerta("feed-fixo",TR_AD)),"remove"==t&&alerta("feed-fixo",TR_EX),"edit"==t&&alerta("feed-fixo",TR_AL)})}function medDrill(e,t,a){remover("sdrill_"+t),remover("jumpmed"),setTimeout(()=>{let n=document.createElement("div");n.id="jumpmed";var r=e.getBoundingClientRect();n.style.setProperty("left",r.left-104+r.width/2+"px"),n.style.setProperty("top",r.top+r.height+"px"),document.createElement("span").classList.add("inv"),document.createElement("p").innerHTML=e.innerText;let o=document.createElement("a");o.classList.add("script"),o.addEventListener("click",()=>{agrupadorChange(t.replace("trl",""),e.getAttribute("data-valor"),o.nextElementSibling.title)});var l=document.createElement("span");call("jumpmed","prm_coluna="+e.getAttribute("data-valor")+"&prm_visao="+a+"&prm_objeto="+t.replace("trl","")).then(function(e){l.outerHTML=e});let i=document.createElement("a");i.innerHTML="x",i.addEventListener("click",function(){remover("jumpmed")}),n.appendChild(o),n.appendChild(l),n.appendChild(i),MAIN.appendChild(n),setTimeout(function(){n.classList.add("open")},100)},100)}function converteDecimal(e){var t=e,a=t.split();for(let e=0;e<a.length;e++)"."==a[e]?a[e]=",":","==a[e]&&(a[e]=".");return t=a.join()}function stripTags(e){return e.split(/\<[a-zA-Z0-9/]+\>/g).join("")}function update_prop(e,t,a){var n=a;"nome"!=t&&"subtitulo"!=t&&"descritivo"!=t&&"tamanho_tela"!=t&&"descritivo_tela"!=t||(n=encodeURIComponent(n)),call("update_prop","prm_id="+e+"&prm_prop="+t+"&prm_valor="+n+"&prm_screen="+tela).then(function(n){if(-1==n.indexOf("fail"))switch(alerta("feed-fixo",TR_AL),t){case"nome":document.getElementById(e+"_ds")&&(document.getElementById(e+"_ds").parentNode.classList.contains("texto")||(document.getElementById(e+"_ds").innerHTML=n)),e.startsWith("COBJ_")&&document.getElementById("lista-custom-fav")&&(document.getElementById("lista-custom-fav").children[0].innerHTML=n);break;case"ID":var r=document.getElementById("ident").getAttribute("data-default");if("main"==document.getElementById(r).parentNode.parentNode.id)var o="&prm_dashboard=false",l="";else{dashlocation=document.getElementById(r).parentNode.parentNode.id;o="&prm_dashboard=true",l=document.getElementById(r).parentNode.style.getPropertyValue("order")}document.getElementById(r).remove(),appendar("prm_objeto="+a+"&PRM_ZINDEX=&prm_posx="+l+"&prm_posy=&prm_screen="+tela+o,!1);break;case"subtitulo":document.getElementById(e+"_sub")&&(document.getElementById(e+"_sub").innerHTML=n);case"descritivo_tela":e==tela&&(document.getElementById("tela-atual").innerHTML=n);break;case"cor_tela":e==tela&&MAIN.style.setProperty("background-color",n)}else alerta("feed-fixo",TR_ER)})}function updatePermissao(e,t){if(!document.querySelector(".fakelistbox.open").parentNode.classList.contains("searchbar")){var a=e.className,n=e.title;"over"==t?1==mousedown&&(-1==a.indexOf("selected")?update_prop(tela,"usuarios-tela-add",n):update_prop(tela,"usuarios-tela-del",n)):-1==a.indexOf("selected")?update_prop(tela,"usuarios-tela-add",n):update_prop(tela,"usuarios-tela-del",n)}}function limpaTimer(){clearInterval(timer_rel)}function gerar_relatorio(e,t,a){document.getElementById(e+"_button").classList.contains("loading")||(document.getElementById(e+"_lista").children[0]&&document.getElementById(e+"_lista").children[0].classList.add("LOCKED"),call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=false","up_rel").then(function(n){-1!=n.indexOf("SEM CONSULTA")?alerta("feed-fixo",n):-1!=n.indexOf("gerado")?(alerta("feed-fixo",n),call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=check","up_rel").then(function(t){document.getElementById(e+"_button").innerHTML=t,-1==t.indexOf("EXEC")&&clearInterval(timer_rel)}).then(function(){timer_rel=setInterval(function(){call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=check","up_rel").then(function(n){document.getElementById(e+"_button").innerHTML=n,-1==n.indexOf("EXEC")&&(clearInterval(timer_rel),document.getElementById(e+"_button").classList.remove("loading"),alerta("feed-fixo","RELAT&Oacute;RIO GERADO"),document.getElementById(e+"_lista").children[0].classList.remove("LOCKED"),call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=file","up_rel").then(function(t){document.getElementById(e+"_lista").innerHTML=t}))})},5e3)})):n.length>10?-1!=n.indexOf("existe")?alerta("feed-fixo",TR_RG):(document.getElementById(e+"_lista").innerHTML="",document.getElementById(e+"_lista").innerHTML=n):(call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=check","up_rel"),alerta("feed-fixo",TR_GR),document.getElementById(e+"_button").classList.add("loading"),document.getElementById(e+"_button").children[0].innerHTML="EXECUTANDO",timer_rel=setInterval(function(){call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=check","up_rel").then(function(n){document.getElementById(e+"_button").innerHTML=n,-1==n.indexOf("EXEC")&&(clearInterval(timer_rel),setTimeout(function(){document.getElementById(e+"_button").classList.remove("loading"),alerta("feed-fixo",n),-1==n.indexOf("EXCEDEU")&&call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=file","up_rel").then(function(t){document.getElementById(e+"_lista").innerHTML=t})},1e3))})},5e3))}))}function createView(){var e=new RegExp("^[a-zA-Z0-9_]+$");checkError();var t=document.getElementById("visao_nome").value,a=document.getElementById("visao_tabela").title,n=document.getElementById("visao_desc").value,r=document.getElementById("fake_grupo").title;t.length>1?a.length>1?n.length>1?r.length>1?e.test(t)?call("new_view","prm_nome="+t+"&prm_tabela="+a+"&prm_desc="+encodeURIComponent(n)+"&prm_grupo="+r).then(function(e){-1!=e.indexOf("FAIL")?alerta("feed-fixo",e.replace("FAIL","")):(alerta("feed-fixo","View criada com sucesso!"),call("load_tables","").then(function(e){document.getElementById("content").innerHTML=e,carregaPainel("visoes")}))}):alerta("msg",TR_VI):alerta("msg",TR_ES_gr):alerta("msg",TR_DS_LE):alerta("msg",TR_ES_TB):alerta("msg",TR_NM_LE)}function topDistance(e){if(document.getElementById(e)&&document.getElementById(e+"dv2")){var t=document.getElementById(e);if(t.getElementsByTagName("thead")[0]){var a=t.getElementsByTagName("thead")[0].getElementsByTagName("tr"),n=a.length;if(n>1)for(let e=1;e<n;e++){var r=a[e].offsetTop;if(r>0){var o=a[e].getElementsByTagName("th"),l=o.length;for(let e=0;e<l;e++)o[e].style.setProperty("top",r+"px")}}if(!document.getElementById("show_only_screen")){for(var i=t.querySelectorAll(".fix"),d=i.length,s=0,c=0;i[c];){s+=i[c].clientWidth;try{if(!i[c].nextElementSibling.classList.contains("fix"))break}catch(e){break}c++}var m=[];"STYLE"==document.getElementById(e).lastElementChild.tagName&&document.getElementById(e).lastElementChild.remove();var u=[];for(let e=1;e<d;e++)"none"!=window.getComputedStyle(i[e],null).display&&u.push(i[e]);if(s<t.clientWidth-180){m.push("table#"+e+"c tr:not(.sub) td:nth-child(1), table#"+e+"c tr:not(.sub):nth-child(1) th:nth-child(1){ left: 1px; }");for(let t=0;t<u.length+1;t++)u[t]?(m.push("table#"+e+"c tr:not(.sub) td:nth-child("+(u[t].cellIndex+1)+"), table#"+e+"c tr:not(.sub):nth-child(1) th:nth-child("+(u[t].cellIndex+1)+"){ left: "+(u[t].offsetLeft-6)+"px; }"),u[t].nextElementSibling&&(u[t].nextElementSibling.classList.contains("fix")||(t=9999999))):t=9999999}var p=document.createElement("style"),g=[...new Set(m)];if(p.innerHTML=g.join(" "),document.getElementById(e).appendChild(p),document.getElementById(e+"c").querySelector(".sub")){var f=document.getElementById(e+"c").getElementsByClassName("fixsub");for(let e=0;e<f.length;e++)f[e].style.setProperty("left",f[e].offsetLeft-6+"px")}}}}}function calcBasis(e){var t=document.getElementById(e),a=t.children.length,n=t.children[0].children.length,r=[];for(let e=0;e<n;e++)r.push(0);var o=0;for(let e=0;e<a;e++)for(let a=0;a<n;a++)(o=t.children[e].children[a].clientWidth)>r[a]&&(r[a]=o);var l=document.createElement("style"),i="";for(let t=1;t<r.length;t++)i=i+" div#"+e+" ul li:nth-child("+(parseInt(t)+1)+"){ flex-basis: "+r[t]+"px; }";l.innerHTML=i,t.appendChild(l)}function carregaObjeto(){var e=document.querySelectorAll(".loader"),t=e.length;for(let n=0;n<t;n++){var a=e[n];call("carrega_objeto","prm_tipo="+a.getAttribute("data-tipo")+"&prm_posicao="+a.getAttribute("data-posicao")+"&prm_parametro="+a.getAttribute("data-parametro")+"&prm_visao="+a.getAttribute("data-visao")+"&prm_coluna="+a.getAttribute("data-coluna")+"&prm_agrupador="+a.getAttribute("data-agrupador")+"&prm_tip="+a.getAttribute("data-tip")+"&prm_obj="+a.getAttribute("data-objeto")+"&prm_screen="+a.getAttribute("data-screen")+"&prm_colup="+a.getAttribute("data-colup")).then(function(e){document.getElementById(a.parentNode.id).innerHTML=e})}}function carregaTela(e,t,a){shscr(e),setTimeout(function(){MAIN.style.setProperty("background-color",t),-1==a.indexOf("EXT=")&&-1==a.indexOf("N/A")?MAIN.style.setProperty("background-image","url("+a+")"):MAIN.style.setProperty("background-image","none")},500)}function addLov(){checkError();var e=document.getElementById("nome_lov").value,t=document.getElementById("lista-tabelas").title,a=document.getElementById("lista-codigo").title,n=document.getElementById("lista-descricao").title;e.length<2?alerta("msg",TR_TC):t.length>1&&a.length>1&&n.length>1?call("savecd","p_funcao=G&p_nds_tabela="+e+"&p_nds_owner=DWU&p_nds_tfisica="+t+"&p_nds_cd_empresa=&p_nds_cd_codigo="+a+"&p_nds_cd_descricao="+n).then(function(e){-1!=e.indexOf("ok")?(alerta("feed-fixo",TR_CR),ajax("list","list_cdesc","prm_order=1&prm_dir=",!1,"content"),carregaPainel("lov")):alerta("feed-fixo",e)}):alerta("feed-fixo",TR_TC)}function addDestaque(){var e=document.getElementById("destaque-usuario").title,t=document.getElementById("destaque-objeto").title,a=document.getElementById("destaque-coluna").title,n=document.getElementById("destaque-condicao").title,r=document.getElementById("destaque-valores").title,o=document.getElementById("destaque-corfundo").value,l=document.getElementById("destaque-corfonte").value,i=document.getElementById("destaque-tipo").value,d=document.getElementById("destaque-prioridade").value;""!=e&&""!=r&&""!=o&&""!=l&&""!=d&&""!=t?call("setdestaque","prm_usuario="+e+"&prm_objeto="+t+"&prm_coluna="+a+"&prm_condicao="+n+"&prm_conteudo="+encodeURIComponent(r)+"&prm_fundo="+o+"&prm_fonte="+l+"&prm_tipo="+i+"&prm_prioridade="+d).then(function(a){-1==a.indexOf("FAIL")?(alerta("feed-fixo",TR_AD),document.getElementById("destaque-objeto").getAttribute("data-default")?ajax("list","list_mblink","prm_objeto=&prm_usuario="+e+"&prm_order=1&prm_dir=",!0,"ajax"):carrega("blink?prm_objeto="+t+"&prm_visao="+document.getElementById("destaque-visao").title+"&prm_order=1&prm_dir=")):alerta("feed-fixo",TR_ER)}):alerta("feed-fixo",TR_TC)}function clickStart(e){var t=e.target;if(call("refresh_session",""),"call-menu"==t.id){document.getElementById("attriblist").innerHTML="",attReopen(function(){call("show_screen","prm_screen="+tela+"&prm_tipo=MENU").then(function(e){let t=document.createElement("div");t.classList.add("itens"),t.innerHTML=e,document.getElementById("attriblist").appendChild(t)}).then(function(){addLink(),call("closer_menu").then(function(e){let t=document.createElement("div");t.innerHTML=e,document.getElementById("attriblist").appendChild(t.children[0])})})},"attriblist")}if("favoritos"==t.id){attReopen(function(){ajax("list","favoritos","prm_screen="+tela,"false","attriblist")},"attriblist")}if("atu_view"==t.id){attReopen(function(){ajax("list","atu_view","prm_screen=","false","attriblist")},"attriblist")}if("config"==t.id){attReopen(function(){ajax("list","list_vconteudo","prm_usuario=",!1,"attriblist")},"attriblist")}if("float-filter"==t.id){if(closeSideBar("get_float"),"mobile"==PRINCP.className)var a="floatlist";else{a="floatlist";if(document.getElementById(a).classList.contains("open"))return void document.getElementById(a).querySelector(".closer").click()}attReopen(function(){ajax("list","get_float","prm_screen="+tela,!1,a)},a)}if(t.classList.contains("closer")&&(document.querySelector(".optionbox")&&document.querySelector(".optionbox").remove(),document.querySelector(".destacada")&&document.querySelector(".destacada").classList.remove("destacada"),"attriblist"==(c=t.parentNode).id&&document.getElementById("fakelist").classList.contains("visible")?(document.getElementById("fakelist").classList.remove("visible"),setTimeout(function(){document.getElementById("fakelist").innerHTML="",c.classList.remove("open")},400),setTimeout(function(){c.innerHTML=""},600)):(c.classList.remove("open"),document.getElementById("fakelist").classList.remove("visible"),setTimeout(function(){var e=c.querySelector(".closer").cloneNode(!0);c.innerHTML="",c.appendChild(e)},210)),document.querySelector(".itens")&&"T"==document.querySelector(".itens").getAttribute("data-alterado")))if(document.querySelector(".itens").getAttribute("data-obj")){var n=document.querySelector(".itens").getAttribute("data-obj");document.getElementById(n)&&(document.getElementById(n+"sync")?document.getElementById(n+"sync").click():shscr(tela))}else shscr(tela);if(t.classList.contains("reorder")){n=t.parentNode.parentNode.id.replace("sdrill_","").replace("trl","");var r=document.getElementById("selecteddata").getAttribute("data-i");document.getElementById(n+r+"h").click()}if(t.classList.contains("f_addcoluna")&&add_coluna(t.getAttribute("data-template")),!t.classList.contains("arrowline")||t.classList.contains("firstline")||t.parentNode.classList.contains("firstline")||(document.querySelector(".arrowline.selected")&&document.querySelector(".arrowline.selected").classList.remove("selected"),t.classList.add("selected")),t.parentNode.classList.contains("custom")&&t.classList.contains("search")){var o=t.parentNode.parentNode.parentNode;n=t.parentNode.parentNode.parentNode;if(o.previousElementSibling&&o.previousElementSibling.classList.contains("script")&&!t.classList.contains("noscript")&&o.previousElementSibling.click(),n.classList.contains("multi"))var l="S";else l="N";fakeboxevent(n.id,n.getAttribute("data-opcao"),n.title,l,t.parentNode.parentNode.parentNode.getAttribute("data-visao"),n.getAttribute("data-adicional"),n,n.children[0].getAttribute("data-fixed").length,t.previousElementSibling.value,n.getAttribute("data-reverse"))}if(t.classList.contains("add")){let e=t.parentNode.parentNode.parentNode,a=t.previousElementSibling.value;e.classList.contains("multi");0==e.children[0].getAttribute("data-fixed").length&&(e.children[0].innerHTML=a),e.title=a}if(t.parentNode.classList.contains("custom")&&t.previousElementSibling){o=t.parentNode.parentNode.parentNode;var i=t.previousElementSibling.value;o.setAttribute("data-ant",i),o.click()}if((t.classList.contains("fakeoption")||t.parentNode.classList.contains("fakeoption"))&&!t.classList.contains("fakelistbox")){t.parentNode.classList.contains("fakeoption")&&(t=e.target.parentNode);l="N";if(t.classList.contains("multi")&&(l="S"),!e.target.classList.contains("noprop")){if(t.children[0].setAttribute("data-custom","N"),(d=t.getAttribute("data-adicional")).length>0&&document.getElementById(d)&&!document.getElementById(d).classList.contains("dragme")&&!document.getElementById(d).classList.contains("fakeoption"))var d=document.getElementById(d).title;fakeListBox(t.id,t.getAttribute("data-opcao"),t.title,l,t.getAttribute("data-visao"),d,t.getAttribute("data-reverse"),e,t.getAttribute("data-custom"))}}if(t.classList.contains("checkbox")){var s=t.parentNode.parentNode.parentNode.parentNode.getAttribute("data-obj");document.getElementById(s)||document.getElementById(s+"trl")&&(s+="trl"),t.classList.contains("checked")?(t.classList.remove("checked"),t.title=t.getAttribute("data-negative")):(t.classList.add("checked"),t.title=t.getAttribute("data-positive")),t.previousElementSibling&&t.previousElementSibling.classList.contains("script")&&t.previousElementSibling.click()}if(t.classList.contains("sync")){var c,m=t.parentNode.id;if("main"==(c=t.parentNode.parentNode.id))var u="&prm_dashboard=false",p="";else{dashlocation=c;u="&prm_dashboard=true",p=window.getComputedStyle(t.parentNode).getPropertyValue("order")}var g="N";"article_customizacao"==c.toLowerCase()&&(g="C",u="&prm_dashboard=true",p="1"),t.parentNode.remove(),appendar("prm_drill="+g+"&prm_objeto="+m+"&PRM_ZINDEX=&prm_posx="+p+"&prm_posy=&prm_screen="+tela+u,!1,c)}if(t.classList.contains("addpurple")&&t.getAttribute("data-req")){var f=t.getAttribute("data-req"),v=t.getAttribute("data-par").split("|"),y=t.getAttribute("data-res"),_="",h=t.getAttribute("data-sup"),b="content",E=t.getAttribute("data-load"),I=t.getAttribute("data-msg")||TR_AD,x=t.getAttribute("data-pkg")||"FCL",A=[],B=[],L=0;for(let e=0;e<v.length;e++){let t=document.getElementById(v[e]),a="";a="SPAN"==t.tagName?t.title:t.value,t.getAttribute("data-min")&&a.length<parseFloat(t.getAttribute("data-min"))&&(t.classList.add("errorinput"),L+=1),"S"==t.getAttribute("data-encode")?A.push(v[e]+"="+encodeURIComponent(a)):A.push(v[e]+"="+a)}if(t.getAttribute("data-res-par")){_=t.getAttribute("data-res-par").split("|");for(let e=0;e<_.length;e++){let t=document.getElementById(_[e]),a="";a="SPAN"==t.tagName?t.title.split("|")[0]:t.value.split("|")[0],B.push(_[e]+"="+a)}}t.getAttribute("data-res-tar")&&(b=t.getAttribute("data-res-tar")),t.getAttribute("data-save")&&-1==window[t.getAttribute("data-save")].indexOf(A.join("&"))&&window[t.getAttribute("data-save")].push(A.join("&")),0==L?(E&&document.getElementById(E).classList.add("loading"),call(f,A.join("&"),x).then(function(e){if(-1==e.indexOf("FAIL")){if(alerta("feed-fixo",I),y?ajax("list",y,B.join("&"),!1,b,"","",x):document.getElementById(b).innerHTML=e,t.getAttribute("data-children")){var a=t.getAttribute("data-children");a.length>0&&fakeReset(a.split("|"))}h&&call("menu","prm_menu="+h).then(function(e){document.getElementById("painel").innerHTML=e})}else alerta("feed-fixo",TR_ER,e.replace("FAIL",""));E&&document.getElementById(E).classList.remove("loading")})):alerta("feed-fixo",TR_TC)}t.getAttribute("data-reload")&&reload(t.getAttribute("data-reload"))}function add_coluna(e){var t=document.getElementById("add_coluna").value;if(new RegExp("^[a-zA-Z0-9_]+$").test(t))if(t.trim().length>1){var a=document.getElementById("micro-visao").title;0!=a.trim().length?call("savecolumn","p_cd_coluna="+t+"&p_visao="+a+"&prm_template="+e).then(function(e){if(-1==e.indexOf("existe")&&-1==e.indexOf("Erro")){alerta("feed-fixo",TR_AD),document.getElementById("content").value="";let e=get("painel-colunas").getAttribute("data-colunas");call("load_crocks","prm_visao="+document.getElementById("telasup").getAttribute("data-visao")+"&prm_valores="+e).then(function(e){document.getElementById("painel-colunas").innerHTML=e}).then(function(){smoothScroll2("container-colunas",t.toUpperCase()+"id"),document.getElementById(t.toUpperCase()+"id").click(),document.getElementById("add_coluna").value=""})}else alerta("feed-fixo",e)}):alerta("msg",TR_ES_VW)}else alerta("msg",TR_NM_LE);else alerta("msg",TR_VI)}function edit_view(){ace_editor.setValue("");var e=document.getElementById("painel").querySelector(".fakelistbox").querySelectorAll(".opt"),t=[];for(let a=0;a<e.length;a++)t.push(e[a].title);var a,n=document.getElementById("view_list").title;if(a=-1==t.indexOf(n),document.getElementById("sandbox").contentWindow.document.body.innerHTML='<form id="zebra" name="zebra" method="post" action="dwu.fcl.passagem_test"><input id="nome" type="hidden" name="nome" value="'+n+'" /><input id="parsecheck" name="parseonly" type="hidden" value="N"/></form>',!a){document.getElementById("sandbox").contentWindow.document.getElementById("nome").value=document.getElementById("view_list").title;for(let e=0;e<21;e++)ajax("slice","load_dado","prm_nome="+n+"&prm_tipo=view&prm_time="+e,"false","slice",e)}}function openText(){document.getElementById("text-talk").setAttribute("data-objeto",""),document.getElementById("text-talk").setAttribute("data-line",""),"open"==document.getElementById("text-talk").className&&clearInterval(textTalk),document.getElementById("text-talk").classList.toggle("open"),get("campo").innerHTML="",call("listContainer","").then(function(e){document.querySelector(".list_container").innerHTML=e})}function closeSideBar(e){document.getElementById("text-talk")&&"text-talk"!=e&&document.getElementById("text-talk").classList.remove("open"),document.getElementById("get_float")&&"get_float"!=e&&document.getElementById("get_float").classList.remove("open"),document.getElementById("obs-field")&&"obs-field"!=e&&document.getElementById("obs-field").classList.remove("open"),document.getElementById("perfil")&&"perfil"!=e&&document.getElementById("perfil").classList.remove("open"),document.getElementById("popupmenu")&&"popupmenu"!=e&&(document.getElementById("popupmenu").classList.remove("visible"),document.getElementById("popupmenu").innerHTML=""),document.getElementById("prefdrop")&&"prefdrop"!=e&&document.getElementById("prefdrop").classList.remove("hover"),document.getElementById("attriblist")&&"attriblist"!=e&&(document.getElementById("attriblist").classList.remove("open"),document.getElementById("attriblist").innerHTML=""),document.getElementById("floatlist")&&"floatlist"!=e&&(document.getElementById("floatlist").classList.remove("open"),document.getElementById("floatlist").innerHTML="")}function excluirModelo(){call("excluir_modelo","prm_modelo="+document.getElementById("import-tabela-ut").value,"imp").then(function(e){-1==e.indexOf("FAIL")?(alerta("mensagem",TR_EX),call("main","prm_modelo=","imp").then(function(e){document.getElementById("content").innerHTML=e})):alerta("mensagem",e.replace("FAIL",""))})}function addVarconteudo(){var e=document.getElementById("valor").value,t=document.getElementById("filtro-usuario").title;e.trim().length<1?alerta("msg",TR_NM_LE1):t.length<3?alerta("msg",TR_EU):call("add_vconteudo","prm_variavel="+e+"&prm_usuario="+t+"&prm_lock="+document.getElementById("locked").value).then(function(e){-1!=e.indexOf("OK")?(alerta("feed-fixo",TR_AD),document.getElementById("valor").value="",call("list_vconteudo","prm_usuario="+t+"&prm_todo=N").then(function(e){document.getElementById("conf_ajax").innerHTML=e})):alerta("feed-fixo",TR_ER)})}function addObjeto(){checkError();var e=document.getElementById("nome").value.trim();if(e.length<4)alerta("msg",TR_NM_LE);else if(""!=document.getElementById("fake_grupo").title){var t=document.getElementById("tipo").title;if(t.length>0){var a="";"BROWSER"!=t&&"CONSULTA"!=t||(a=document.getElementById("lista-tabelas").title),("BROWSER"==t&&a.length>0||"BROWSER"!=t)&&call("save_obj","prm_nome="+encodeURIComponent(e)+"&prm_atributo=dwu.fcl.download?arquivo="+document.getElementById("fake_img").title+"&prm_grupo="+document.getElementById("fake_grupo").title+"&prm_tipo="+t+"&prm_visao="+a).then(function(e){-1!=e.indexOf("FAIL")?alerta("feed-fixo",TR_ER):-1!=e.indexOf("ERROCOLUNA")?alerta("feed-fixo",TR_ER):alerta("feed-fixo",TR_AD),ajax("list","list_objetos","prm_tipo="+t+"&prm_screen="+tela,!1,"ajax"),document.getElementById("tipo-objeto").value=t,carregaPainel("objetos")}),"SCREEN"==t&&ajax("list","screen_list","",!0,"floatops")}}else alerta("msg",TR_ES_GR)}function enviodecampos(e){var t=document.getElementById("boxnome").value.trim(),a=document.getElementById("boxemail").value.trim(),n=document.getElementById("boxcelular").value.trim(),r=document.getElementById("boxsenha").value.trim(),o=[],l=document.getElementById("checkcell"),i=document.getElementById("checkemail");if(l.checked&&o.push("celular"),i.checked&&o.push("email"),o=o.join("|"),"enviar"==e){if(0==t.length||0==a.length||0==n.length||0==r.length)return void alerta("feed-fixo",TR_TC);if(t.length<=3&&0!=t.length)return void alerta("feed-fixo",TR_NM_LE);if(a.length<=5&&0!=a.length)return void alerta("feed-fixo",TR_EI);if(r.length<6||!r.match(/[0-9]+/g)||!r.match(/[a-zA-Z]+/g))return void alerta("feed-fixo",TR_SE_LE);if(n.length<8&&0!=n.length)return void alerta("feed-fixo","Número de celular deve conter 8 ou mais caracteres.");call("userinfo","prm_nome="+t+"&prm_email="+a+"&prm_cell="+n+"&prm_notificacao="+o+"&prm_senha="+r).then(function(e){"OK"===e.split("|")[0]?(document.getElementById("content").innerHTML=e,alerta("feed-fixo",TR_CA),document.getElementById("boxnome").value="",document.getElementById("boxemail").value="",document.getElementById("boxcelular").value="",document.getElementById("blockpage").classList.add("invisible")):alerta("feed-fixo",e.split("|")[1])})}}function setMicroAgrupador(){document.getElementById("micro-agrupador")&&(document.getElementById("micro-agrupador").title="",document.getElementById("micro-agrupador").children[0].innerHTML=document.getElementById("micro-agrupador").children[0].getAttribute("data-placeholder"))}function ver_logs(){document.getElementById("logs_recentes");call("exec_query","p_query="+encodeURIComponent("select dt_log as DATA, vl_query as QUERY, ds_log as STATUS from BI_LOG_QUERY")+"&p_parse=N&p_linhas=9999999").then(function(e){document.getElementById("queryresult").innerHTML=e,document.getElementById("queryresult2").innerHTML=e})}function save_usuario(){var e=encodeURIComponent(document.getElementById("senha1").value),t=document.getElementById("email").value,a=document.getElementById("number").value,n=document.getElementById("completo").value,r=document.getElementById("cd_tela_inicial_usuario").title.trim();call("save_pwd","prm_user="+USUARIO+"&prm_senha="+e+"&prm_email="+t+"&prm_number="+a+"&prm_nome="+n+"&prm_tela_inicial="+r).then(function(e){-1==e.indexOf("#alert")?(curtain(),alerta("feed-fixo",TR_AL),setTimeout(function(){window.location.reload(!0)},1500)):alerta("feed-fixo",e.replace("#alert ",""))})}function attReopen(e,t){let a=document.getElementById(t);a.classList.contains("open")?(a.classList.remove("open"),setTimeout(function(){closeSideBar(t),a.innerHTML="",loader(t),setTimeout(function(){a.classList.add("open")},100),setTimeout(e,50)},100)):(loader(t),setTimeout(e,50),setTimeout(function(){a.classList.add("open")},100))}function templateMarcado(e,t,a){"green"==e.className?e.className="":e.className="green";var n=e.parentNode.querySelectorAll(".green"),r="";for(let e=0;e<n.length;e++)r=r+"|"+n[e].title;ajax("fly","template","prm_objeto="+t+"&prm_valor="+r+"&prm_view="+a,!1)}function movingArticle(e){e.stopPropagation(),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle"),document.querySelector(".hoverchangearticle")&&document.querySelector(".hoverchangearticle").classList.remove("hoverchangearticle")}function getvalue(e){return e.classList.contains("fakeoption")?e.title:e.value}function getFileName(e){e.innerHTML="CARREGANDO ARQUIVO";var t=document.getElementById("painel").querySelector("iframe").contentWindow.document.body.children[0].children[0];t.setAttribute("data-arquivo",""),t.click(),uploadFile=setInterval(function(){if(t.getAttribute("data-arquivo").length>0){e.classList.add("loading");let a=t.getAttribute("data-arquivo").split("|");e.innerHTML=a[a.length-1].toUpperCase(),t.setAttribute("data-arquivo",""),e.classList.remove("loading"),clearInterval(uploadFile)}},100)}function passChange(e,t){e.getAttribute("data-changed")||(e.value.trim().length>6&&e.value.match(/[0-9]+/g)&&e.value.match(/[a-zA-Z]+/g)?confirm(TR_CM)&&call("save_pwd","prm_senha="+encodeURIComponent(e.value)+"&prm_email=&prm_number=&prm_user="+t+"&prm_nome=").then(function(t){e.value="",t.indexOf(!1)?alerta("msg",TR_SA):alerta("msg",TR_ER_SE)}):alerta("msg",TR_SE_LE)),"S"==e.getAttribute("data-changed")&&(e.value.trim().length>6&&e.value.match(/[0-9]+/g)&&e.value.match(/[a-zA-Z]+/g)?confirm(TR_CM)&&call("save_pwd","prm_senha="+encodeURIComponent(e.value)+"&prm_email=&prm_number=&prm_user="+t+"&prm_nome=").then(function(t){e.value="",e.setAttribute("data-changed","N"),t.indexOf(!1)?alerta("msg",TR_SA):alerta("msg",TR_ER_SE)}):alerta("msg",TR_SE_LE))}function montaCustom(){var e=[],t=document.getElementById("filtropipe"),a=document.getElementById("filtroc-coluna").title,n=document.getElementById("filtroc-condicao").title,r=document.getElementById("filtroc-valores").title;if(r.length>0&&a.length>0&&n.length>0){e.push(t.title),e.push(a+"|$["+n+"]"+r);var o=e.filter(e=>e).join("||");-1==t.title.indexOf(a+"|$["+n+"]"+r)?(t.title=o,fakeReset(["filtroc-valores"]),document.getElementById("gerar-custom").click()):alerta("fix","Filtro ja existe!")}}function removeCustomFiltro(e){if(confirm(TR_CE)){var t=document.getElementById("filtropipe");t.title=t.title.split("||").filter(function(t){if(t!=e.title)return t}).join("||"),document.getElementById("gerar-custom").click()}}function requestDefault(e,t,a,n,r){return(!a.hasAttribute("data-default")||n!=a.getAttribute("data-default"))&&((!a.previousElementSibling||!a.previousElementSibling.classList.contains("default")||a.previousElementSibling.innerHTML!=n)&&void call(e,t,"COM").then(function(e){-1!=e.indexOf("ok")?(alerta("",TR_AL),a.hasAttribute("data-default")&&(a.setAttribute("data-default",n),r&&(r.innerHTML=n)),a.previousElementSibling&&a.previousElementSibling.classList.contains("default")&&(a.previousElementSibling.innerHTML=n,r&&(r.innerHTML=n))):alerta("",TR_ER)}))}function pellLaunch(e){document.getElementById("pell-editor"+e).children[0]||pell.init({element:document.getElementById("pell-editor"+e),onChange:t=>{document.getElementById("modal-output"+e).textContent=t},styleWithCSS:!0,actions:["bold",{name:"italic",result:()=>pell.exec("italic")},"underline",{name:"center",icon:"center",title:"Justify Center",result:()=>pell.exec("justifyCenter")},{name:"left",icon:"left",title:"Justify Left",result:()=>pell.exec("justifyLeft")},{name:"size",icon:"size",title:"Font Size",result:()=>{const e=window.prompt("Digite o tamanho do texto de 1-7");e&&pell.exec("fontSize",e)}},{name:"link",result:()=>{const e=window.prompt("Enter the link URL");e&&pell.exec("createLink",e)}},{name:"image",result:()=>{const e=window.prompt("Enter the image URL");e&&pell.exec("insertImage",e)}}],classes:{size:"size"}})}function autoUpdate(e,t,a,n,r,o,l){var i,d,s,c;e.innerText;e.classList.toggle("loading"),"CONTEUDO"==l?(e.innerText="Baixando ...",s="upd",i="AutoUpdate_baixa_conteudo",d="prm_sistema="+t+"&prm_versao="+a+"&prm_usuario="+n+"&prm_tipo="+r+"&prm_nome="+o+"&prm_chamada=NAVEGADOR",c=6):(e.innerText="Atualizando ...","UPD"==o?(s="sch",i="autoUpdate_atu_PACKAGE",d="prm_usuario="+n+"&prm_tipo="+r+"&prm_nome="+o+"&prm_chamada=NAVEGADOR"):"ESTADOS"==r||"CIDADES"==r?(s="upd",i="autoUpdate_CIDADES_ESTADOS",d="prm_usuario="+n+"&prm_tipo="+r+"&prm_chamada=NAVEGADOR"):(s="upd",i="AutoUpdate_atu_sistema",d="prm_usuario="+n+"&prm_tipo="+r+"&prm_nome="+o+"&prm_chamada=NAVEGADOR"),c=7),call(i,d,s).then(function(t){e.classList.toggle("loading"),t.indexOf("OK|")>=0?(e.className="green ok",e.setAttribute("onclick",""),e.parentNode.parentNode.children[c].innerHTML=t.split("|")[1],e.innerText=t.split("|")[2],alerta("feed-fixo",t.split("|")[3])):(e.className="upd error",e.innerText=t.split("|")[2],alerta("feed-fixo",t.split("|")[3]))})}function saveFloat(e,t){document.getElementById("get_float").setAttribute("data-alterado","T"),call("save_float","prm_conteudo="+encodeURIComponent(e)+"&prm_padrao="+t+"&prm_screen="+tela).then(function(e){-1==e.indexOf("FAIL")?alerta("feed-fixo",TR_AL):alerta("feed-fixo",TR_EX)})}function login(e){var t=document.getElementById("login-menu"),a=t.querySelectorAll(".login-session")[0],n=t.querySelectorAll(".login-session")[1];if(t.className="loading",0==a.value.trim().length||0==n.value.trim().length)t.className="shake",alerta("x",TR_TC),n.value="",setTimeout(function(){t.className=""},300);else{let e=new Date;e.getSeconds(),parseInt(100*Math.random(1)),e.getMinutes(),parseInt(100*Math.random(1)),e.getHours(),parseInt(100*Math.random(1)),e.getDate();var r,o,l,i=window.document.location.pathname.split("/"),d=i[i.length-2]+"/",s="http://"+(window.document.location.host+"/"+d).replace("//","/");call("login","prm_user="+encodeURIComponent(a.value)+"&prm_password="+encodeURIComponent(n.value)+"&prm_session=&prm_prazo=0.5&prm_url="+s).then(function(e){-1!=e.indexOf("erro")||-1!=e.indexOf("sem acesso")||-1!=e.indexOf("ORA")||-1!=e.indexOf("esta cadastrado")||-1!=e.indexOf("LOGINVALIDA")||-1!=e.indexOf("LOGINEXPIRA")?(t.className="shake",n.value="",setTimeout(function(){t.className=""},300),-1!==e.indexOf("erro")?alerta("x",TR_US_IN):-1!==e.indexOf("sem acesso")?alerta("x",TR_SP):-1!==e.indexOf("LOGINEXPIRA")?(o=e.split("|")[1],r=e.split("|")[2],l=e.split("|")[3],"OK"==o?alerta("alert",l=TR_LO_ES.replace(":001",r)):alerta("x",l)):-1!==e.indexOf("LOGINVALIDA")?(o=e.split("|")[1],r=e.split("|")[2],l=e.split("|")[3],"OK"==o?alerta("alert",l=TR_LO_VA.replace(":001",r)):alerta("x",l)):alerta("x","ERRO: "+e)):(-1!==e.indexOf("LOGINSENHANOVA")?alerta("alert",TR_LO_ET):alerta("x",TR_LE),t.className="logged",setTimeout(function(){window.location.reload(!0)},500))})}}function recoverPassword(e){var t=document.getElementById("login-menu"),a=t.querySelectorAll(".login-session")[0],n=(t.querySelectorAll(".login-session")[1],window.document.location.pathname.split("/")),r=n[n.length-2]+"/",o="http://"+(window.document.location.host+"/"+r).replace("//","/");a.value.length>0?call("newPassword","prm_usuario="+a.value+"&prm_url="+o).then(function(e){-1!=e.indexOf("ACL")?alerta("x","Problema no envio do email(ACL), favor contactar o administrador!"):alerta("x",e)}):alerta("x",TR_IU)}function restoreCustom(e){if(e.nextElementSibling.title.length>0){document.getElementById("SECTION_CUSTOMIZACAO").classList.add("loading"),appendar("prm_drill=C&prm_objeto="+e.nextElementSibling.title.split("||")[0]+"&prm_zindex=1&prm_posx=&prm_posy=&prm_screen="+tela+"&prm_dashboard=true","","")}}function eraseCustom(){get("custom-conteudo").innerHTML=""}function deleteCustom(){var e=get("lista-custom-fav","custom");call("deleteCustom","prm_custom="+e[0].split("||")[0]).then(function(t){-1!=t.indexOf("EXCLUIDO")?(alerta("feed","TR_EX"),e[1].click()):alerta("feed","TR_ER")})}function copyListBtn(e){document.querySelector(".optionbox")?document.querySelector(".optionbox").remove():call("copiarPermissaoBox","prm_usuario="+e).then(function(e){let t=document.createElement("div");t.classList.add("optionbox"),t.classList.add("reverse"),t.innerHTML=e,t.style.setProperty("left",cursorx+20+"px"),t.style.setProperty("top",cursory+10+"px"),MAIN.appendChild(t),setTimeout(function(){t.classList.add("open")},100)})}function copyUserBtn(e){var t=document.getElementById("regras").value;if(get("fake-copiar-permissao").title.length>0&&("manter"==t||"deletar"==t)){if("manter"==t)var a=TR_CA_US;"deletar"==t&&(a=TR_LR_US),confirm(a)&&call("copiarPermissao","prm_usuario="+e+"&prm_usuario_cop="+get("fake-copiar-permissao").title+"&prm_status="+t).then(function(e){-1==e.indexOf("ok")?alerta("feed-fixo",TR_ER):alerta("feed-fixo",TR_AL),document.querySelector(".optionbox").remove()})}else alerta("feed-fixo",TR_TC)}function blockOptions(e){update_prop(get("ident").value,"tipo",e.value),get("attriblist").children[0].setAttribute("data-alterado","T"),"PIZZA"==e.value||"MAPA"==e.value?get("coluna-sec").parentNode.parentNode.classList.add("invisible"):"PONTEIRO"==e.value?(get("micro-coluna").parentNode.parentNode.classList.add("invisible"),get("coluna-sec").parentNode.parentNode.classList.add("invisible")):(get("coluna-sec").parentNode.parentNode.classList.remove("invisible"),get("micro-coluna").parentNode.parentNode.classList.remove("invisible"))}function attribList(e){var t=get("attriblist");(event.offsetX<367&&event.offsetX>339||window.innerWidth<500&&window.matchMedia("(orientation: portrait)").matches&&event.offsetX<221&&event.offsetX>193)&&"visible"!=document.getElementById("fakelist").className&&(parseInt(get("fakelist").style.getPropertyValue("left"))>0&&(get("fakelist").style.setProperty("left","0"),document.querySelector(".itens").innerHTML=""),t.children[0].children[0]&&"T"==t.children[0].getAttribute("data-alterado")&&(t.classList.remove("open"),get(e)&&get(e+"sync")?get(e+"sync").click():shscr(tela),t.children[0].setAttribute("data-alterado","F")),t.className="",setTimeout(function(){t.innerHTML=""},500))}function createUser(){var e=get("nome").value,t=get("login").value,a=get("senha").value,n=get("email").value,r=get("email_usuario").value,o=get("usuario-grupo").title,l=get("fake-permissao").title;e.length<1?alerta("msg",TR_NM_LE1):t.trim().length<3?alerta("msg",TR_LO_LE):a.trim().length<6||!a.match(/[0-9]+/g)||!a.match(/[a-zA-Z]+/g)?alerta("msg",TR_SE_LE):(get("scroll").classList.add("saving"),new RegExp("^[a-zA-Z0-9.]+$").test(t)?n.length>0?call("save_user","prm_nome="+t+"&prm_completo="+e+"&prm_status=&prm_email="+r+"&prm_senha="+a+"&prm_permissao="+l+"&prm_grupo="+o).then(function(e){-1==e.indexOf("FAIL")?(alerta("feed-fixo",TR_CR),get("scroll").classList.remove("saving"),ajax("list","list_users","",!1,"content"),carregaPainel("usuarios")):(get("scroll").classList.remove("saving"),alerta("feed-fixo",e.replace("FAIL ","")))}):noerror("",TR_EI,"msg"):alerta("msg",TR_LO_LI))}function screenObs(){document.getElementById("obs-field").innerHTML=get("tela-atual").children[1].getAttribute("data-obs"),document.getElementById("obs-field").classList.toggle("open")}function objObs(e){if(document.querySelector(".optionbox"))document.querySelector(".optionbox").remove();else{let n=document.createElement("div");n.classList.add("optionbox"),n.classList.add("obsbox"),n.innerHTML=e;var t=cursorx+16;t+360>document.body.clientWidth&&(t=document.body.clientWidth-242);var a=parseInt(event.clientY);n.style.setProperty("left",t+"px"),n.style.setProperty("top",12+a+"px"),MAIN.appendChild(n),setTimeout(function(){n.classList.add("open"),n.addEventListener("mouseleave",function(){document.querySelector(".optionbox.obsbox.open").classList.remove("open"),setTimeout(function(){document.querySelector(".optionbox.obsbox").remove()},200)})},100)}}function importEditColumn(e,t){if(e.value!=e.getAttribute("data-default")){var a=e.parentNode.parentNode.querySelectorAll("input, select"),n=a[0].value,r=a[1].value,o=a[2].value,l=a[3].value,i=a[4].value,d=a[5].value,s=a[6].value;e.setAttribute("data-default",e.value),call("import_change","prm_modelo="+t+"&prm_numero="+r+"&prm_nome="+n+"&prm_destino=&prm_tipo="+o+"&prm_trfs="+l+"&prm_replacein="+i+"&prm_replaceout="+d+"&prm_mascara="+s+"&prm_op=UPDATE","imp").then(function(e){-1==e.indexOf("FAIL")&&(alerta("feed-fixo",TR_AL),call("main","prm_modelo="+t,"imp").then(function(e){document.getElementById("content").innerHTML=e}))})}}function importGenerateData(e){e.classList.add("loading"),e.innerHTML="IMPORTANDO DADOS",call("import_test","prm_arquivo="+document.getElementById("import-arquivo-ut").title.replace("dwu.fcl.download?arquivo=","").replace(".xlsx","")+"&prm_tabela="+document.getElementById("import-tabela-ut").value+"&prm_cabecalho="+document.getElementById("import-cabecalho-ut").value+"&prm_acao="+document.getElementById("import-acao-ut").value,"imp").then(function(t){e.classList.remove("loading"),e.innerHTML="IMPORTAR DADOS",-1==t.indexOf("FAIL")?alerta("feed-fixo","Gerado com sucesso!"):alerta("feed-fixo",t.replace("FAIL"," "))})}function importAddModel(){call("import_cabecalho","prm_modelo="+get("import-modelo").value+"&prm_arquivo="+get("import-arquivo").title.replace("dwu.fcl.download?arquivo=","").replace(".xlsx","")+"&prm_tabela="+get("visao_tabela").title+"&prm_cabecalho=0&prm_acao="+get("import-acao").value,"imp").then(function(e){-1==e.indexOf("FAIL")?(alerta("feed-fixo",TR_AD),call("main","prm_modelo="+get("import-modelo").value,"imp").then(function(e){get("content").innerHTML=e,carregaPainel("import&prm_default=")})):alerta("feed-fixo",TR_ER)})}function snackObject(e,t,a){loadAttrib("ed_gadg","ws_par_sumary="+t+"&prm_tipo="+a);var n=e.parentNode.children;for(let t=0;t<n.length;t++)n[t]!=e&&n[t].classList.add("removed");e.classList.add("single")}function get(...e){var t=[];for(let a in e)t.push(document.getElementById(e[a]));return 0!=(t=t.filter(e=>e)).length&&(t.length>1?t:t[0])}function getAttributes(e,t,a){var n=document.querySelectorAll(e),r=[];for(let e=0;e<n.length;e++)n[e].getAttribute(t)&&r.push(n[e].getAttribute(t));return a?r.join(a):r}function resizeObj(e,t,a){if("height"==a)var n=20;else n=0;var r=parseInt(e.value.replace("px",""))+n,o=document.getElementById("ctnr_"+t)||document.getElementById(t+"dv2")||document.getElementById(t+"_gr");"height"==a&&(o.parentNode.style.setProperty(a,r+"px"),o.style.setProperty(a,r+"px")),"height"==a&&o.style.setProperty("max-height",r+"px"),"width"==a&&o.style.setProperty(a,r+"px"),renderChart(t)}function browserQuickEdit(e,t,a,n,r){if(e.value!=e.getAttribute("data-d")){e.nextElementSibling.classList.add("loading"),e.classList.add("readonly");var o=document.getElementById("data_list").className,l=e.value,i=e.getAttribute("data-d");switch(r){case"number":l=l.replace(/\./g,"").replace(",","."),i=i.replace(/./g,"").replace(",",".")}call("browserEditLine","prm_tabela="+a+"&prm_chave="+getAttributes("#"+t+" .chave","data-d","|")+"&prm_campo="+getAttributes("#"+t+" .chave","data-n","|")+"&prm_nome="+n+"&prm_conteudo="+l+"&prm_ant="+i+"&prm_tipo="+r+"&prm_obj="+o,"bro").then(function(t){e.nextElementSibling.classList.remove("loading"),e.nextElementSibling.classList.add("ok"),alerta("feed-fixo",TR_AL),e.setAttribute("data-default",e.value),setTimeout(function(){e.classList.remove("readonly"),e.nextElementSibling.classList.remove("ok")},2e3)})}}beta.browser={acumulado:!1},document.addEventListener("keyup",function(e){var t=e.target;if(t.parentNode.classList.contains("search")){var a=t.parentNode.parentNode.parentNode;fakeboxevent(a.id,a.getAttribute("data-opcao"),a.title,"N",a.getAttribute("data-visao"),a.getAttribute("data-reverse"),a,a.children[0].getAttribute("data-fixed").length,t.value,"")}t.parentNode.classList.contains("custom")&&13==e.which&&t.nextElementSibling.click(),t.classList.contains("errorinput")&&(t.getAttribute("data-min")?t.value.length>=parseFloat(t.getAttribute("data-min"))&&t.classList.remove("errorinput"):t.classList.remove("errorinput"))}),document.addEventListener("change",function(e){var t=e.target;if(t.parentNode.classList.contains("columnline")&&t.classList.contains("listener")&&t.value!=t.getAttribute("data-default")){var a=document.getElementById("micro-visao").title,n=document.getElementById("ajax-lista").querySelector(".selected").title,r=t.parentNode,o=encodeURIComponent(t.value);"S"!=t.getAttribute("data-search")&&call("save_column","prm_visao="+a+"&prm_name="+n+"&prm_campo="+r.getAttribute("data-campo")+"&prm_valor="+o).then(function(e){-1==e.indexOf("#alert")?(alerta("feed-fixo",e),t.setAttribute("data-default",t.value)):alerta("feed-fixo",TR_ER)})}if(t.classList.contains("user-password")){var l=t.parentNode.parentNode.id.replace("linha","");t.value.trim().length>3?confirm(TR_CM)&&(ajax("fly","save_pwd","prm_senha="+encodeURIComponent(t.value)+"&prm_senha2="+encodeURIComponent(t.value)+"&prm_email=&prm_number=&prm_user="+l+"&prm_nome="),t.value=""):alerta("msg",TR_SE_LE)}if(t.classList.contains("vsis-input")){var i=(l=t.parentNode.parentNode).getAttribute("data-default"),d=l.getAttribute("data-usuario");t.value!=i&&call("edit_vconteudo","prm_variavel="+encodeURIComponent(l.title)+"&prm_conteudo="+encodeURIComponent(t.value)+"&prm_usuario="+d).then(function(e){-1==e.indexOf("#alert")?(alerta("","Valor alterado com sucesso!"),l.setAttribute("data-default",t.value)):alerta("",e.replace("#alert ",""))})}if(t.classList.contains("ordem")&&t.parentNode.classList.contains("grafico")){let e=t.parentNode.id,a=(document.getElementById("dados_"+e),document.getElementById(e).querySelector(".agrupador_troca"));a&&"null"!=a.value&&"N/A"!=a.value?renderChartDirect(e):call("alter_attrib","prm_objeto="+e+"&prm_prop=ORDEM&prm_value="+t.value+"&prm_usuario="+USUARIO).then(function(t){-1==t.indexOf("alert")&&renderChartDirect(e)})}if(t.classList.contains("agrupador_troca")&&t.parentNode.classList.contains("grafico")){let e=t.parentNode.id,a=document.getElementById("dados_"+e),n=a.getAttribute("data-agrupadoresreal"),r=document.getElementById(e).querySelector(".ordem");for(let e=0;e<r.length;e++){let t=r.options[e].value.substring(2,200);" "!=t.indexOf(" ")&&(t=t.substring(0,t.indexOf(" "))),-1!=n.indexOf(t)&&"N/A"!=r.options[e].value&&(r.remove(e),e-=1)}var s=document.createElement("option");s.value="r_"+t.value+" ASC",s.innerHTML=t.options[t.selectedIndex].text+" crescente",r.appendChild(s),(s=document.createElement("option")).value="r_"+t.value+" DESC",s.innerHTML=t.options[t.selectedIndex].text+" decrescente",r.appendChild(s),a.setAttribute("data-agrupador_troca",t.value),a.setAttribute("data-agrupadoresreal",t.value),a.setAttribute("data-agrupadores",t.options[t.selectedIndex].text),renderChartDirect(e)}}),document.addEventListener("change",function(e){"data-coluna"==e.target.id&&("ligacao"==e.target.options[e.target.selectedIndex].getAttribute("data-tipo")?(document.getElementById("data_list").children[1].classList.add("ligacao"),document.getElementById("browser-condicao").nextElementSibling.id=e.target.value):("nulo"!=document.getElementById("browser-condicao").value&&"nnulo"!=document.getElementById("browser-condicao").value&&document.getElementById("data_list").children[1].classList.add("ligacao"),document.getElementById("data_list").children[1].classList.remove("ligacao")))}),document.addEventListener("keypress",function(e){var t=e.which,a=e.target;return"boxemail"==a.id?-1!="abcdefghijklmnopqrstuvwxyzçABCDEFGHIJKLMNOPQRSTUVWXYZÇ@._1234567890".indexOf(String.fromCharCode(t))||(e.preventDefault(),!1):"boxcelular"==a.id?(VMasker(document.getElementById("boxcelular")).maskPattern("(99) 999999999999"),a.value.length>17?(e.preventDefault(),!1):-1!="1234567890".indexOf(String.fromCharCode(t))||(e.preventDefault(),!1)):void 0}),document.addEventListener("click",function(e){var t=e.target,a=t.parentNode.parentNode,n="";if(t.classList.contains("remove")&&a){var r=t.getAttribute("data-require"),o=t.getAttribute("data-param"),l=t.getAttribute("data-valor"),i=t.getAttribute("data-decode"),d=t.getAttribute("data-objeto"),s=t.getAttribute("data-pkg")||"FCL";if(get("attriblist").classList.contains("open")&&get("attriblist").classList.remove("open"),document.getElementById(d)){if("ARTICLE"==document.getElementById(d).parentNode.tagName)var c=document.getElementById(d).parentNode.id;else c=tela;n="prm_cod="+d+"&prm_tela="+c}else{var m=o.split("|"),u=l.split("|"),p=[];for(let e=0;e<m.length;e++)i==e?p.push(m[e]+"="+encodeURIComponent(u[e])):p.push(m[e]+"="+u[e]),n=p.join("&")}confirm(TR_CE)&&(a.classList.add("removing"),call(r,n,s).then(function(e){if(-1==e.indexOf("FAIL"))if(alerta("feed-fixo",TR_EX),"favoritar"==r.toLowerCase()&&(document.getElementById("id_atualizar_menu").value="S"),"LI"==t.parentNode.tagName)t.parentNode.remove();else if("DIV"==t.parentNode.tagName&&"content"==t.parentNode.id){var n=document.getElementById("micro-visao").title;document.getElementById("content").innerHTML="",ajax("list","load_crocks","prm_visao="+n+"&prm_completo=N","true","ajax-lista")}else if(document.getElementById("custom-conteudo")){let e=document.getElementById("lista-custom-fav");e.title="",e.children[0].innerHTML="CONSULTA ATUAL";e.previousElementSibling;restoreCustom(e.previousElementSibling)}else a.remove(),document.getElementById(d)&&document.getElementById(d).remove();else a.classList.remove("removing"),document.getElementById(d)&&document.getElementById(d).classList.remove("removing")}))}}),document.addEventListener("click",function(e){var t=e.target,a=t.parentNode.id;if(t.classList.contains("com_modal")&&call("modal","prm_id="+a,"com").then(function(e){document.getElementById("modal-box").innerHTML=e}).then(function(){setTimeout(function(){document.getElementById("modal"+a).classList.add("expanded")},200),pellLaunch(a)}),t.classList.contains("com_enviar")){if("email"!=t.title&&"usuario"!=t.title&&"tela"!=t.title||requestDefault("updateReport","prm_id="+a+"&prm_coluna="+t.title+"&prm_valor="+t.nextElementSibling.title,t,t.nextElementSibling.title),"ENVIAR"==t.title){var n=t.children[0];n.classList.add("readonly"),call("sendReport","prm_report="+a+"&prm_email="+get("prm_email_"+a).title+"&prm_cc=&prm_assunto="+get("prm_assunto_"+a).value+"&prm_url="+get("prm_tela_"+a).title+"&prm_mimic="+get("prm_usuario_"+a).title,"COM").then(function(e){-1!=e.indexOf("ok")&&alerta("feed-fixo","Enviado com sucesso!"),n.classList.remove("readonly")})}"REGRAS"==t.title&&(call("reportFilter","prm_report="+a,"COM").then(function(e){document.getElementById("content").innerHTML=e}),call("menu","prm_menu=filtror&prm_default="+a+"|"+document.getElementById("prm_usuario_"+a).title).then(function(e){document.getElementById("painel").innerHTML=e})),"AGENDAMENTO"==t.title&&(call("reportSchedule","prm_id="+a,"COM").then(function(e){document.getElementById("content").innerHTML=e}),carregaPainel("report_schedule"))}});var fakescrollm=0;function proxCampo(e,t){"Enter"==e.code&&t.parentNode.nextElementSibling.children[0].focus()}function createFakescroll(e){var t;e.querySelector(".fakescroll")?t=e.querySelector(".fakescroll"):((t=document.createElement("span")).className="fakescroll",e.appendChild(t));var a=100*e.clientHeight/e.scrollHeight;e.parentNode.clientHeight,e.clientHeight,e.clientHeight,e.parentNode.clientHeight,e.parentNode.querySelector(".fakescroll").style,e.children[0].style;t.style.setProperty("height","calc("+a+"% - 5px)"),e.addEventListener("scroll",function(){var t=e.clientHeight/e.scrollHeight+1,a=e.clientHeight/document.body.clientHeight;document.querySelector(".fakescroll").style.setProperty("margin-top",this.scrollTop*t/a+"px")}),t.addEventListener("touchstart",function(e){e.stopPropagation(),fakescrollm=1}),t.addEventListener("mousedown",function(e){e.stopPropagation(),fakescrollm=1}),t.addEventListener("mouseup",function(e){e.stopPropagation(),fakescrollm=0}),t.addEventListener("mouseleave",function(e){e.stopPropagation(),fakescrollm=0}),t.addEventListener("mousemove",function(a){1==fakescrollm&&a.clientY<=e.scrollHeight-e.parentNode.offsetHeight+20&&(a.style.setProperty("margin-top","-"+2*a.layerY+"px"),t.style.setProperty("margin-top",2*a.layerY+"px"))})}barheight="";var fakeListCustom={},menu={usuarios:function(){let e=document.getElementById("painel"),t=document.createElement("h4");t.innerHTML="USUÁRIOS";let a=document.createElement("input");a.id="login",a.setAttribute("maxlength","40"),a.setAttribute("placeholder","login"),a.style.setProperty("text-transform","uppercase"),a.setAttribute("onkeypress","return input(event, 'login')");let n=document.createElement("input");n.id="nome",n.setAttribute("maxlength","60"),n.setAttribute("placeholder","NOME");let r=document.createElement("input");r.id="email_usuario",r.type="email",r.setAttribute("maxlength","60"),r.setAttribute("placeholder","E-MAIL"),r.setAttribute("onkeypress","return input(event, 'email')");let o=document.createElement("input");o.id="senha",o.type="password",o.setAttribute("placeholder","PASSWORD");let l=document.createElement("a");l.classList.add("addpurple"),l.title="Novo usuário",l.innerHTML=TR_AU,l.setAttribute("onclick","var nome = document.getElementById('nome').value; var login = document.getElementById('login').value; var senha = document.getElementById('senha').value; var permissao = document.getElementById('fake-permissao').title; if(nome.length < 1){ alerta('msg', 'Campo nome de usuário em branco!'); } else { if(login.trim().length < 3){ alerta('msg', 'Campo login precisa ter mais de 3 caracteres!'); } else { if(senha.trim().length < 3){ alerta('msg', 'Campo senha precisa ter mais de 3 caracteres!'); } else { var regex = new RegExp('^[a-zA-Z0-9.]+$'); if(regex.test(login)){ if(document.getElementById('email_usuario').value.length > 0){ call('save_user', 'prm_nome='+login+'&prm_completo='+nome+'&prm_status=&prm_email='+document.getElementById('email_usuario').value+'&prm_senha='+senha+'&prm_permissao='+permissao).then(function(resposta){ if(resposta.indexOf('FAIL') == -1){ alerta('feed-fixo', TR_CR); ajax('list', 'list_users', '', false, 'content'); carregaPainel('usuarios'); } else { alerta('feed-fixo', resposta.replace('FAIL ', '')); } }); } else { noerror('', TR_EI, 'msg'); } } else { alerta('msg', TR_LO_LI); } }}} "),e.appendChild(t),e.appendChild(a),e.appendChild(n),e.appendChild(r),e.appendChild(o),e.appendChild(l)}};
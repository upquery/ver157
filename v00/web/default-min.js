var arrGerarCustom=[],uploadFile="",draft="",chartAnimation=!0,chartRenderer="canvas",sticky="N",ace_editor,timer_rel="",mousedown=!1,v_shift=!1,vision="in",touchdrag=1,touchdragY=0,respostaAjax="",tela="DEFAULT",telaAnterior="DEFAULT",textTalk="",dscript="",error="false",time="",msgtime="",cursorx="",cursory="",colunas="",timeout=0,tr="",notify=new Object,lasturl="",alpha="",dashlocation="",dashorder="",projecoes="",selectedb="",refresh_timer="",refresh_param=["","","","N"],telasup="",telasup_ant=[],refreshSup_ativo="",telacustom="";const PACKAGES=["UPLOAD","FCL","BRO","FUN","UPQUERY","IMP","GBL","OBJ","UP_REL","AUX","COM","CORE"],FILES=["JS","CSS"];var pell,xmlhttp;xmlhttp=new XMLHttpRequest;var completo=new Array,down,up,cliq;function eventos(e){if(e.classList.contains("relatorio")){clearInterval(timer_rel);var t=e.id.split("trl")[0];-1!=document.getElementById(t+"_button").innerHTML.indexOf("EXECUTANDO")&&(timer_rel=setInterval(function(){call("lista_rel","prm_objeto="+t+"&prm_screen="+tela+"&prm_cod=&prm_lista=check","up_rel").then(function(e){document.getElementById(t+"_button").innerHTML=e,-1==e.indexOf("EXEC")&&(clearInterval(timer_rel),setTimeout(function(){document.getElementById(t+"_button").classList.remove("loading"),alerta("feed-fixo",e),-1==e.indexOf("EXCEDEU")&&call("lista_rel","prm_objeto="+t+"&prm_screen="+tela+"&prm_cod="+t+"&prm_lista=file","up_rel").then(function(e){document.getElementById(t+"_lista").innerHTML=e})},1e3))})},1e3))}if(e.querySelector(".wd_move")){var a=e.querySelector(".wd_move");-1!=e.id.indexOf("trl")||-1!=e.id.indexOf("temp")||"Y"==e.getAttribute("data-drill-relatorio")?(a.addEventListener("mousedown",function(){e.style.setProperty("opacity","0.7")}),a.addEventListener("mouseup",function(){e.style.setProperty("opacity","1")}),a.addEventListener("touchstart",function(){e.style.setProperty("opacity","0.7")}),a.addEventListener("touchend",function(){e.style.setProperty("opacity","1")})):(a.addEventListener("mousedown",function(){invisible_touch(this.parentNode.id,"start")}),a.addEventListener("mouseup",function(){invisible_touch(this.parentNode.id,"stop")}),a.addEventListener("touchstart",function(){invisible_touch(this.parentNode.id,"start")}),a.addEventListener("touchend",function(){invisible_touch(this.parentNode.id,"stop")})),a.addEventListener("dblclick",function(){curtain(""),scale(this.id.replace("_ds",""))})}}function appendar(e,t,a){loading("x");var r="";call("show_objeto",e,"obj").then(function(n){MAIN;0!=dashlocation.length&&-1==e.indexOf("prm_drill=Y")&&(document.getElementById(dashlocation),dashlocation="");var o=document.createElement("div");if(o.innerHTML=n,n.toLowerCase().startsWith("<script>")){r=o.children[1].id;var l=o.children[1]}else{r=o.children[0].id;l=o.children[0]}var i=MAIN;-1!=e.toLowerCase().indexOf("prm_drill=c")?(i=document.getElementById("ARTICLE_CUSTOMIZACAO")).innerHTML="":t?i=document.getElementById(t):a.length>0?i=document.getElementById(a):document.querySelector(".movingarticle")&&-1==e.indexOf("prm_drill=Y")&&(i=document.querySelector(".movingarticle")),i.appendChild(l)}).then(function(){LAYER&&LAYER.classList.contains("ativo")&&loading(),alerta("feed-fixo",TR_OC),dashorder="";let e=get(r);(e.classList.contains("front")||e.classList.contains("file"))&&ajustar(r),(e.classList.contains("grafico")||e.classList.contains("medidor")||e.classList.contains("dados"))&&renderChart(r),e.classList.contains("mapageoloc")&&mapaGeoLoc(r)}).then(function(){let e=get(r);(e.classList.contains("front")||e.classList.contains("full"))&&topDistance(r),eventos(e)})}function ajustar(e){if(void 0!==e&&document.getElementById(e+"c")){if(document.getElementById(e+"c").classList.add("sticky"),document.getElementById(e+"_ds")){var t=document.getElementById(e+"_ds"),a=t.innerHTML;t.innerHTML="_",t.innerHTML=a,document.getElementById(e+"c").addEventListener("click",click_evento),document.getElementById(e+"c").addEventListener("dblclick",dbl_click_evento),document.getElementById(e+"c").addEventListener("mouseenter",function(){imgurlOver(e+"c")});var r=document.getElementById(e+"c").querySelectorAll(".print");for(let e=0;e<r.length;e++)r[e].parentNode.setAttribute("style",r[e].innerHTML),"TD"==r[e].tagName.toUpperCase()&&r[e].parentNode.classList.add("destaqueLinha")}delete window.obj}}function imgurlOver(e){var t=document.getElementById(e).querySelectorAll("[data-url]:not([data-imglinked]");for(let e=0;e<t.length;e++)t[e].addEventListener("mouseenter",over_evento),t[e].addEventListener("mouseleave",out_evento),t[e].setAttribute("data-imglinked","true")}function ajustaIframe(e){document.getElementById(e+"header")||(startTimer=setInterval(function(){if(null!=document.getElementById(e+"c")){var t=document.getElementById(e+"c").cloneNode(!0);t.id="";var a=document.getElementById(e+"c").getElementsByTagName("thead");if(a[0]){for(let e=0;e<a.length;e++)a[e].style.visibility="collapse";document.getElementById(e+"header").appendChild(t)}if(document.getElementById(e+"ds")){var r=document.getElementById(e+"_ds"),n=r.innerHTML;r.innerHTML="_",r.innerHTML=n}clearInterval(startTimer),document.getElementById(e+"c").addEventListener("click",click_evento),document.getElementById(e+"c").addEventListener("dblclick",dbl_click_evento),smartScroll(e)}},10))}function smartScroll(e){if(document.getElementById(e+"dv2")){var t=new Array;t[0]=document.getElementById(e+"dv2"),t[1]=document.getElementById(e+"fixed"),t[2]=document.getElementById(e+"c"),t[3]=document.getElementById(e+"header"),t[4]=document.getElementById(e);var a=t[0].getAttribute("data-maxwidth"),r=t[1].children.length,n=t[0].getAttribute("data-maxheight"),o=t[0].clientHeight+t[3].clientHeight,l=o-19+"px",i=o-3+"px";if(r>0){var s=t[1].querySelectorAll("ul"),d=s.length;t[0].addEventListener("scroll",function(){for(let e=0;e<d;e++)s[e].style.marginTop="-"+t[0].scrollTop+"px"})}t[1].addEventListener("scroll",function(){t[0].style.setProperty("margin-top","-"+this.scrollTop+"px")}),(t[2].clientWidth>a||t[2].clientWidth>t[0].clientWidth)&&(t[0].addEventListener("scroll",function(){t[3].scrollLeft=t[0].scrollLeft,this.scrollLeft>"210"&&-1==t[0].parentNode.className.indexOf("scaled")?t[1].getAttribute("data-width")>t[3].clientWidth?t[1].style.setProperty("width",t[3].clientWidth+"px"):t[1].style.setProperty("width",parseInt(t[1].getAttribute("data-width"))+1+"px"):t[1].style.setProperty("width","0")}),t[2].addEventListener("mouseenter",function(){t[0].classList.add("flow"),n<t[2].clientHeight&&-1==t[4].className.indexOf("expand")&&t[1].style.setProperty("max-height",l)}),t[4].addEventListener("mouseleave",function(){t[0].classList.remove("flow"),n<t[2].clientHeight&&-1==this.className.indexOf("expand")&&t[1].style.setProperty("max-height",i)})),n<t[2].clientHeight&&(t[2].addEventListener("mouseenter",function(){t[0].style.setProperty("overflow-y","auto"),-1==PRINCP.className.indexOf("mac")&&-1==PRINCP.className.indexOf("mobile")?(t[2].clientWidth&&n<t[2].clientHeight&&t[2].clientWidth>a&&t[0].classList.add("padding"),document.getElementById(e+"dv2").getAttribute("data-maxheight")<t[2].clientHeight&&t[2].clientWidth<a&&t[3].classList.add("margin")):-1==navigator.userAgent.indexOf("Chrome")?t[2].clientWidth<parseInt(t[0].style.maxWidth)&&t[0].classList.remove("padding"):(t[2].clientWidth>a&&t[0].classList.add("padding"),t[2].clientWidth<a&&t[3].classList.add("margin"))}),t[4].addEventListener("mouseleave",function(){t[0].style.setProperty("overflow-y","hidden"),t[0].classList.remove("padding"),t[2].clientWidth<a&&t[3].classList.remove("margin")}))}}function apscreen(e,t){var a,r=new XMLHttpRequest;r.open("get",e,"false"),a="in"==t?"in":t,r.onreadystatechange=function(){if(4==r.readyState){if(-1!=r.responseText.indexOf("LOGOUT"))return void logout();MAIN.innerHTML=r.responseText,icarrega(OWNER_BI+".fcl.ajscreen?prm_screen="+a),MAIN.children[0]&&"data_list"==MAIN.children[0].id&&ajustar(MAIN.children[0].className)}},r.send(null)}function apOthers(e,t){var a=new XMLHttpRequest;response="",a.open("get",e,"true"),a.onreadystatechange=function(){switch(t){case"space":document.getElementById("space")?document.getElementById("space").innerHTML=a.responseText:(document.getElementById("space-options").innerHTML=a.responseText,0==a.responseText.length?document.getElementById("space-options").parentNode.style.setProperty("display","none"):document.getElementById("space-options").parentNode.style.setProperty("display","inline"));break;case"others":response=a.responseText}},a.send(null)}if(document.getElementById("princp")&&("mobile"==document.getElementById("princp").className?(down="touchstart",up="touchend",cliq="touchend"):(down="mousedown",up="mouseup",cliq="click")),document.addEventListener(cliq,clickStart),mac(),"mobile"!=document.getElementById("princp").className&&Notification.requestPermission(function(){notify.obj={body:"",icon:OWNER_BI+".fcl.download?arquivo=ipad.png"},notify.permission=Notification.permission}),"mobile"==document.getElementById("princp").className){var element_value_array=document.getElementById("mobile-permission").value.split("|"),permissao=element_value_array[0],mensagem=element_value_array[1];"S"!=permissao&&(PRINCP.innerHTML='<div style="font-weight: bold; font-size: 16px; color: #333; font-family: Tahoma, sans-serif; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(173, 216, 230, 0.8); padding: 15px; border-radius: 8px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);" id="aviso-tela-principal">'+mensagem+"</div>",window.stop())}function mac(){-1!=navigator.userAgent.toString().toLowerCase().indexOf("mac")&&PRINCP.setAttribute("class","mac"),(-1!=navigator.userAgent.toString().toLowerCase().indexOf("iphone")||-1!=navigator.userAgent.toString().toLowerCase().indexOf("ipod")||-1!=navigator.userAgent.toString().toLowerCase().indexOf("android"))&&PRINCP.setAttribute("class","mobile")}function callnotify(e,t,a){notify.obj.body=t,new Notification(e,notify.obj)}function toggleFullScreen(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.body.mozRequestFullScreen.call(document.body):document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}var orient="";function toexcel(e){var t=document.createElement("a");t.id="excel",MAIN.appendChild(t);var a="data:application/vnd.ms-excel;base64,",r='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>\x3c!--[if gte mso 9]><xml "encoding=utf-8"><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><div id="main"><table id="'+e+'c">{table}</table></main></body></html>',n=function(e,t){return e.replace(/{(\w+)}/g,function(e,a){return t[a]})},o=document.getElementById(e+"dv2");if(!o)return!1;var l=document.createElement("table");l.innerHTML=o.innerHTML;var i=l.querySelectorAll(".invisible"),s=i.length;for(let e=0;e<s;e++)i[e].parentNode.removeChild(i[e]);var d=l.getElementsByTagName("th");for(let t=d.length-1;t>=0;--t)if(d[t]){let a;a=document.getElementById(e+"c").getElementsByTagName("th")[t],"none"==window.getComputedStyle(a).display&&d[t].remove()}for(let t=(E=(b=l.getElementsByTagName("td")).length)-1;t>=0;--t)if(b[t]){let a;a=document.getElementById(e+"c").getElementsByTagName("td")[t],"none"==window.getComputedStyle(a).display&&b[t].remove()}if(document.getElementById(e)){var c=document.getElementById(e).getElementsByTagName("style"),m=c.length,u="";for(let e=0;e<m;e++)c[e]&&-1!=c[e].innerHTML.indexOf("display: none;")&&(u+=c[e].innerHTML);var p=l.getElementsByTagName("tr"),g=p.length;for(let e=0;e<g;e++)p[e]&&((!p[e].children[0].hasAttribute("style")||p[e].children[0].getAttribute("colspan")>1||0!=p[e].className.indexOf("nivel"))&&(!p[e].children[0].hasAttribute("data-ordem")&&!p[e].children[0].hasAttribute("data-agrupador")&&""===p[e].children[0].innerHTML&&!p[e].classList.contains("total")||-1!==p[e].children[0].className.indexOf("seta")||p[e].classList.contains("total")&&"N"===p[e].children[0].getAttribute("data-drill"))&&(!(p[e].children[0].getAttribute("colspan")<2)||p[e].children[0].getAttribute("style")&&p[e].children[0].getAttribute("style").includes("!important")||p[e].children[0].remove()),p[e].classList.contains("total")?(-1!=u.indexOf("li.total { display: none; }")||-1!=u.indexOf("tr.total { display: none; }")||p[e].classList.contains("st-S"))&&(p[e].className="remove"):p[e].classList.contains("total normal")&&(-1==u.indexOf("li.total.normal { display: none; }")&&-1==u.indexOf("tr.total.normal { display: none; }")||(p[e].className="remove")))}var f=l.querySelectorAll(".remove"),_=f.length;for(let e=0;e<_;e++)f[e].remove();for(let t=0;t<E-1;t++)if(b[t]){if(!(b[t].title.length>b[t].innerHTML.length)||b[t].classList.contains("setadown")&&b[t].classList.contains("seta")||(b[t].innerHTML=b[t].title),-1!=b[t].innerHTML.indexOf("background")&&(b[t].innerHTML=""),"S"==get("excel_mask_"+e).value&&(b[t].innerHTML=b[t].innerHTML.replace(/\./g,"")),b[t].setAttribute("onclick",""),b[t].removeAttribute("data-i"),b[t].removeAttribute("data-p"),b[t].removeAttribute("data-subquery"),b[t].removeAttribute("data-ordem"),b[t].removeAttribute("data-valor"),b[t].classList.contains("colagr")){var v=(b[t].getAttribute("style")||"")+" mso-number-format: \\@;";b[t].setAttribute("style",v.trim())}-1!=b[t].innerHTML.indexOf("!important")&&b[t].parentNode.removeChild(b[t])}for(let e=0;e<E-1;e++)b[e]&&(b[e].classList.contains("setadown")||b[e].classList.contains("seta"))&&b[e].remove();let y="HTML",h=document.getElementById("dados_"+e);if(h&&(y=h.getAttribute("data-formato_excel").toUpperCase()),"XLSX"==y.toUpperCase()){var b,E;for(let e=(E=(b=l.getElementsByTagName("td")).length)-1;e>=0;--e)b[e]&&(b[e].innerHTML=b[e].innerHTML.replace(/\./g,"").replace(/\,/g,".").replace(/\%/g,""),valor=b[e].innerHTML,isNaN(b[e].innerHTML)?b[e].setAttribute("data-t","s"):b[e].setAttribute("data-t","n"));try{var I=XLSX.utils.book_new(),x=XLSX.utils.table_to_sheet(l)}catch(e){alerta("feed-fixo","N&atilde;o foi poss&iacute;vel localizar a fun&ccedil;&atilde;o de exporta&ccedil;&atilde;o de planilhas, entre em contato com o administrador do sistema")}XLSX.utils.book_append_sheet(I,x,"Planilha1"),XLSX.writeFile(I,e.substr(0,e.length-1)+".xlsx"),setTimeout(function(){MAIN.removeChild(t)},1e3)}else{var A={worksheet:"Consulta",table:l.innerHTML};if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([n(r,A)],{type:a}),e.substr(0,e.length-1)+".xls");document.getElementById("excel").href=a+window.btoa(unescape(encodeURIComponent(n(r,A).replace(/&amp;/g,"E").replace(/&/g,"E").replace(/onclick="" class="dir" data-p=""/g,"").replace(/´/g," ").replace(/onclick=""/g,"").replace(/class="setadown" data-subquery=""/g,"")))),document.getElementById("excel").download=e.substr(0,e.length-1)+".xls",document.getElementById("excel").click(),setTimeout(function(){MAIN.removeChild(t)},1e3)}}function browserToExcel(e){var t=document.createElement("a");t.id="excel",main.appendChild(t);var a="data:application/vnd.ms-excel;base64,",r='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>\x3c!--[if gte mso 9]><xml "encoding=utf-8"><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><table>{table}</table></body></html>',n=function(e,t){return e.replace(/{(\w+)}/g,function(e,a){return t[a]})},o=document.getElementById(e+"dv2"),l=document.createElement("table");l.innerHTML=o.innerHTML;var i=l.querySelectorAll(".invisible"),s=i.length;for(let e=0;e<s;e++)i[e].parentNode.removeChild(i[e]);if(document.getElementById(e)){document.getElementById(e+"_ds").innerText;var d=document.getElementById(e).getElementsByTagName("style"),c=d.length,m="";for(let e=0;e<c;e++)d[e]&&-1!=d[e].innerHTML.indexOf("display: none;")&&(m+=d[e].innerHTML);var u=l.getElementsByTagName("tr"),p=u.length;for(let e=0;e<p;e++)u[e]&&((!u[e].children[0].hasAttribute("style")||u[e].children[0].getAttribute("colspan")>1||0!=u[e].className.indexOf("nivel"))&&(u[e].children[0].hasAttribute("data-ordem")||(u[e].children[0].getAttribute("colspan")<2?u[e].children[0].remove():u[e].children[0].setAttribute("colspan",parseInt(u[e].children[0].getAttribute("colspan"))-1))),u[e].classList.contains("total")?(-1!=m.indexOf("li.total { display: none; }")||-1!=m.indexOf("tr.total { display: none; }")||u[e].classList.contains("st-S"))&&(u[e].className="remove"):u[e].classList.contains("total normal")&&(-1==m.indexOf("li.total.normal { display: none; }")&&-1==m.indexOf("tr.total.normal { display: none; }")||(u[e].className="remove")))}var g=l.getElementsByTagName("tr");for(let e=0;e<g.length;e++){var f=g[e];if("STYLE"==f.lastElementChild.tagName){var _=f.lastElementChild.innerHTML.split("{")[1].replace("}","");f.setAttribute("style","mso-number-format:\\@"),f.setAttribute("style",_)}}var v=l.querySelectorAll(".remove, .inv"),y=v.length;for(let e=0;e<y;e++)v[e].remove();var h=l.getElementsByTagName("td"),b=h.length;for(let e=0;e<b-1;e++)if(h[e]){if(h[e].children[0]&&"INPUT"==h[e].children[0].tagName){var E=h[e].children[0].value;h[e].children[0].remove(),h[e].innerHTML=E}!(h[e].title.length>h[e].innerHTML.length)||h[e].classList.contains("setadown")&&h[e].classList.contains("seta")||(h[e].innerHTML=h[e].title),-1!=h[e].innerHTML.indexOf("background")&&(h[e].innerHTML=""),-1==h[e].innerHTML.indexOf("-")&&-1==h[e].innerHTML.indexOf(".")||h[e].setAttribute("style","mso-number-format:\\@"),h[e].setAttribute("onclick",""),h[e].removeAttribute("data-i"),h[e].removeAttribute("data-p"),h[e].removeAttribute("data-subquery"),h[e].removeAttribute("data-ordem"),h[e].removeAttribute("data-valor"),-1!=h[e].innerHTML.indexOf("!important")&&h[e].parentNode.removeChild(h[e])}for(let e=0;e<b-1;e++)h[e]&&(h[e].classList.contains("setadown")||h[e].classList.contains("seta"))&&h[e].remove();var I={worksheet:"Consulta",table:l.innerHTML};if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([n(r,I)],{type:a}),e.substr(0,e.length-1)+".xls");document.getElementById("excel").href=a+window.btoa(unescape(encodeURIComponent(n(r,I).replace(/&amp;/g,"E").replace(/&/g,"E").replace(/onclick="" class="dir" data-p=""/g,"").replace(/´/g," ").replace(/onclick=""/g,"").replace(/class="setadown" data-subquery=""/g,"")))),document.getElementById("excel").download=e.substr(0,e.length-1)+".xls",document.getElementById("excel").click(),setTimeout(function(){main.removeChild(t)},1e3)}function scale(e,t){var a=document.getElementById(e);if(document.getElementsByTagName("ARTICLE").length>0&&"A"==ADMIN){if(-1==e.indexOf("trl"))if(MAIN.querySelector(".selected"))if(MAIN.querySelector(".selected").id!=e){if(a.parentNode.id==MAIN.querySelector(".selected").parentNode.id){var r=MAIN.querySelector(".selected"),n=r.style.getPropertyValue("order"),o=a.style.getPropertyValue("order");a.style.setProperty("order",n),r.style.setProperty("order",o);var l=a.parentNode.children;for(let e=0;e<l.length;e++)null!==l[e].style.getPropertyValue("order")&&""!==l[e].style.getPropertyValue("order")&&ajax("fly","salva_posicao","prm_objeto="+l[e].id+"&prm_screen="+a.parentNode.id+"&prm_posx="+l[e].style.getPropertyValue("order")+"&prm_posy=&prm_zindex=",!1);MAIN.querySelector(".selected").classList.toggle("selected")}}else a.classList.toggle("selected");else a.classList.toggle("selected")}else if(-1!=a.className.indexOf("scaled")||-1!=a.className.indexOf("img")||-1!=a.className.indexOf("icone")||-1!=a.className.indexOf("texto")||-1!=a.className.indexOf("float"))a.getAttribute("data-left")&&a.style.setProperty("left",a.getAttribute("data-left")),a.getAttribute("data-top")&&a.style.setProperty("top",a.getAttribute("data-top")),a.classList.remove("scaled"),a.style.transform="",a.style.webkitTransform="",a.style.zIndex=a.getAttribute("data-zindex"),localStorage.setItem("pos",0),"direct"==t&&(PRINCP.style.setProperty("overflow","visible"),PRINCP.style.removeProperty("height"),document.getElementById("html").style.setProperty("overflow","visible"),document.getElementById("layer3").style.setProperty("height","0"),document.getElementById("prev").style.setProperty("display","none"),document.getElementById("next").style.setProperty("display","none"));else if(-1!=a.className.indexOf("front")){for(;"STYLE"==document.getElementById(e).lastElementChild.tagName;)document.getElementById(e).lastElementChild.remove();setTimeout(function(){topDistance(e)},1e3),-1==a.className.indexOf("expand")?a.className=a.className+" expand":a.className=a.className.replace(" expand","")}else-1!=a.className.indexOf("relatorio")||a.classList.contains("drill")||(a.classList.add("scaled"),setTimeout(function(){for(let e=35;e>12;e--)if(a.offsetWidth*(e/10)+e/10*80<window.innerWidth&&a.offsetHeight*(e/10)+15<window.innerHeight){a.style.transform="scale("+e/10+")",a.style.webkitTransform="scale("+e/10+")";break}a.style.setProperty("left",window.innerWidth/2-a.offsetWidth/2+"px"),a.style.setProperty("top",window.innerHeight/2-a.offsetHeight/2+"px"),a.style.zIndex="800",curtain("only"),"direct"==t&&(PRINCP.style.setProperty("overflow","hidden"),PRINCP.style.setProperty("height","inherit"),document.getElementById("html").style.setProperty("overflow","hidden"),document.getElementById("layer3").style.setProperty("height","100%"),document.getElementById("prev").style.setProperty("display","flex"),document.getElementById("next").style.setProperty("display","flex"))},100))}function upload(e){var t=document.getElementById(e).files;for(let e=0;e<t.length;e++){var a=new Blob([t[e]]),r=new FormData;r.append("prm_arquivo",a,"123"),ajax("upload","painel",r,!1,t[e].type,t[e].size)}}function destaque(e,t,a){var r,n=document.getElementById("destaque-usuario-"+e).title,o=document.getElementById("destaque-objeto-"+e).title,l=document.getElementById("destaque-coluna-"+e).title,i=document.getElementById("destaque-condicao-"+e).title,s=encodeURIComponent(document.getElementById("destaque-conteudo-"+e).title.trim()),d=document.getElementById("destaque-tipo-"+e).getAttribute("data-default"),c=document.getElementById("destaque-icorfundo-"+e).getAttribute("data-default"),m=document.getElementById("destaque-icorfonte-"+e).getAttribute("data-default");if("DELETE"!=t){var u=document.getElementById(a);if(r=encodeURIComponent(u.value.trim()),u.setAttribute("data-default",u.value.trim()),"SELECT"==u.tagName)for(let e=0;e<u.children.length;e++)u.children[e].value.trim()==u.value.trim()?u.children[e].setAttribute("selected","selected"):u.children[e].removeAttribute("selected")}else r="";call("edit_blink","prm_usuario="+n+"&prm_objeto="+o+"&prm_coluna="+l+"&prm_condicao="+i+"&prm_conteudo="+s+"&prm_valor="+r+"&prm_tipo="+d+"&prm_corfundo="+c+"&prm_corfonte="+m+"&prm_alter="+t).then(function(a){document.getElementById("fechar_sup").setAttribute("data-reloado",o),alerta("feed-fixo",a),-1==a.indexOf("FAIL")&&"DELETE"==t&&document.getElementById("destaque-usuario-"+e).parentNode.parentNode.remove()})}function input(e,t){var a,r=e.which,n=e.keyCode;switch(t){case"rotulo":return!0;case"default":return 92!=r;case"integer":return 13==r?(e.target.blur(),!1):0==r&&37!=n&&39!=n||(0==r||8==r||-1!="0123456789".indexOf(String.fromCharCode(r)));case"hora":return 13==r?(e.target.blur(),!1):0==r&&37!=n&&39!=n||(0==r||8==r||-1!="0123456789:".indexOf(String.fromCharCode(r)));case"volume":return 0==r||8==r||46==r||44==r||-1!="0123456789".indexOf(String.fromCharCode(r));case"valor":return 0==r||8==r||44==r||-1!="0123456789".indexOf(String.fromCharCode(r));case"number":var o=e.target.innerHTML;return"INPUT"==e.target.tagName&&(o=e.target.value),13==r?(e.target.blur(),!1):0==r&&37!=n&&39!=n?(e.target.blur(),!0):0==r||8==r||44==r&&-1==o.indexOf(",")||45==r||-1!="0123456789".indexOf(String.fromCharCode(r));case"nobr":return a=new RegExp("^[<*>]+"),0==r||8==r||46==r||0==a.test(String.fromCharCode(r));case"email":return a=new RegExp("^[a-zA-Z0-9-_@!&#]+"),0==r||8==r||46==r||1==a.test(String.fromCharCode(r));case"login":return a=new RegExp("^[a-zA-Z0-9]+"),0==r||8==r||46==r||1==a.test(String.fromCharCode(r));case"ID":return a=new RegExp("^[a-zA-Z0-9_]+"),0==r||8==r||46==r||1==a.test(String.fromCharCode(r));case"nopipe":return 0==r||8==r||46==r||"|"!=String.fromCharCode(r)}}window.addEventListener("resize",function(){window.orientation!=orient&&(setTimeout(function(){for(var e=document.querySelectorAll(".dragme"),t=e.length,a=0;a<t;a++)document.getElementById("dados_"+e[a].id)&&renderChart(e[a].id)},10),orient=window.orientation)}),document.addEventListener("visibilitychange",function(){get("verify-post")&&("hidden"==document.visibilityState?(vision="out",clearInterval(msgtime)):(vision="in",clearInterval(msgtime),ajax("data-","check_text_post","",!0,"verify-post")))});var zindex_abs=5;function mask(e,t,a){var r=document.getElementById(e),n=String.fromCharCode(t.which),o=r.selectionEnd,l=r.selectionEnd,i=r.selectionStart,s=new RegExp("^[a-zA-Z0-9]+"),d=a.split(""),c=r.value.split(""),m=d.length,u=[];for(let e=0;e<m;e++)if(o==e){if("8"==t.which){if(","==c[e-1]||"."==c[e-1])return r.selectionEnd=r.selectionEnd-1,t.preventDefault(),!1;i=l-=1}else if("46"==t.which){if(","==c[e]||"."==c[e])return r.selectionEnd=r.selectionEnd+1,r.selectionStart=r.selectionStart+1,t.preventDefault(),!1;i=l}else"G"==d[e]&&(u[e]=".",i=l+=1,e+=1),"D"==d[e]&&(u[e]=",",i=l+=1,e+=1);s.test(n)?(u[e]=n,i=","==c[e+1]||"."==c[e+1]?l+=2:l+=1):(u[e]=c[e],u[e-1]=c[e-1])}else u[e]=c[e];r.value=u.join(""),(t.which<36||t.which>41)&&(r.selectionEnd=l,r.selectionStart=i)}function mascara(e,t,a,r,n,o,l,i){i&&(38!=i.which&&40!=i.which||i.preventDefault());r=r||"999",o=o||"999999999999",l=l||"999999999999",n=n||"2",t=t||"R$",a=a||",";var s=e.value.replace(a,"").replace(t,"").trim(),d=e.selectionEnd;if(s.length<parseInt(n)+1)s.length<=1?e.value=(t+" 0"+a+"0"+s).trim():e.value=(t+" 0"+a+s).trim();else{var c=s.slice(0,e.value.replace(t,"").trim().length-(parseInt(n)+1)),m=s.slice(s.length-parseInt(n));"00"!=c&&""!=c||(c="0"),c.length>parseInt(r)&&(c=s.slice(1,c.length)),i&&(38==i.which&&(e.selectionEnd>e.value.indexOf(a)&&(m=("000000000"+(parseInt(m)+1)).substr(-n)),e.selectionEnd<=e.value.indexOf(a)&&(c=parseInt(c)+1)),40==i.which&&(e.selectionEnd>e.value.indexOf(a)&&parseInt(m)>0&&(m=("000000000"+(parseInt(m)-1)).substr(-n)),e.selectionEnd<=e.value.indexOf(a)&&parseInt(c)>0&&(c=parseInt(c)-1))),parseInt(c)>parseInt(o)&&(c=o),parseInt(m)>parseInt(l)&&(m=l),e.value=(t+" "+[parseInt(c),a,m].join("")).trim()}t.trim().length>0?d<t.length+1?(e.selectionEnd=t.length+1,e.selectionStart=t.length+1):s.length<1?e.selectionEnd=e.value.length:e.selectionEnd=d:e.selectionEnd=d}function titulo(e,t){document.getElementById("titulo").innerHTML=e.title,e.parentNode.parentNode.id&&"prefdrop"!=e.parentNode.parentNode.id&&(document.getElementById("info").innerHTML=e.parentNode.parentNode.id),"c"==t&&(document.getElementById("painel").innerHTML="")}function enc(e){return encodeURIComponent(e.replace(/\\/g,"").replace(/"/g,""))}function carrega(e){if(document.getElementById("content").innerHTML="",0!=e.length){loader("content");var t=document.getElementById("frame"),a=OWNER_BI+".fcl."+e;t.src=a}}function carregaTelasup(e,t,a,r,n,o,l){clearInterval(refresh_timer),document.getElementById("fakelist").setAttribute("data-campo",""),document.getElementById("fakelist").setAttribute("class",""),alerta("msg",""),curtain(),void 0!==l&&"none"!==l&&l.length>0&&telasup_ant.push(l),void 0!==r&&""!==r&&("none"==r?document.getElementById("painel").innerHTML="":call("menu","prm_menu="+r+"&prm_default="+n,o).then(function(e){document.getElementById("painel").innerHTML=e})),void 0!==e&&""!==e&&call(e,t,a).then(function(r){if(document.getElementById("content").innerHTML=r,document.getElementById("refresh_sup")?document.getElementById("refresh_sup").style.display="block":document.getElementById("refresh_sup").style.display="none",0!==telasup_ant.length?document.getElementById("back_sup").style.display="block":document.getElementById("back_sup").style.display="none",refreshSupBtn("O"),document.getElementById("content-atributos")){let r=document.getElementById("content-atributos");r.getAttribute("data-refresh")&&r.getAttribute("data-refresh").length>1&&(refreshSupBtn("V"),refresh_param[0]=e,refresh_param[1]=t,refresh_param[2]=a,r.getAttribute("data-refresh-ativo")&&"S"==r.getAttribute("data-refresh-ativo")&&refreshSupStart())}}),curtain("enabled")}function carregaPainel(e,t,a){call("menu","prm_menu="+e+"&prm_default="+(t=t||"")).then(function(e){if(document.getElementById("painel").innerHTML=e,void 0!==a&&""!==a){var t=document.getElementById("container-colunas"),r=document.getElementById(a+"id"),n=document.getElementById("ajax-lista").getElementsByTagName("LI"),o=0;for(let e=0;e<n.length;e++)if(n[e].id==a+"id"){o=e;break}t.scrollTop=Math.trunc(t.scrollHeight*(o/n.length)),r.classList.add("used","selected"),arrow(this,a,"click")}})}function carregaPainel_frame(e,t){var a=document.createElement("iframe");a.id="newframe",a.src=e,t.trim().length>1&&(a.className=t),a.style.setProperty("width","800px"),a.style.setProperty("height","26px"),document.getElementById("painel").innerHTML="",document.getElementById("painel").appendChild(a)}function icarrega(){var e,t="",a=document.querySelectorAll(".dragme.front"),r=a.length;for(e=0;e<r;e++){if(t=a[e].id,document.getElementById(t)){if(document.getElementById(t+"c")){var n=(c=document.getElementById(t+"c").querySelectorAll(".print")).length;for(let e=0;e<n;e++)c[e].parentNode.setAttribute("style",c[e].innerHTML),"TD"==c[e].tagName.toUpperCase()&&c[e].parentNode.classList.add("destaqueLinha")}if(document.getElementById(t+"c")){var o=document.getElementById(t+"c");o.addEventListener("click",click_evento),o.addEventListener("dblclick",dbl_click_evento),o.addEventListener("mouseenter",function(){imgurlOver(this.id)})}}if(topDistance(t),document.getElementById(t+"_ds")){var l=document.getElementById(t+"_ds"),i=l.innerHTML;l.innerHTML="_",l.innerHTML=i}if("undefined"!=typeof ajuste&&ajuste.children[3]){var s=ajuste.children[3].getElementsByTagName("td"),d=s.length;for(let e=0;e<d;e++)s[e].removeAttribute("id"),s[e].removeAttribute("data-valor");if(document.getElementById(t+"c")&&(document.getElementById(t+"c").addEventListener("click",click_evento),document.getElementById(t+"c").addEventListener("dblclick",dbl_click_evento),document.getElementById(t+"c").addEventListener("mouseleave",out_evento),document.getElementById(t+"c").addEventListener("dblclick",dbl_click_evento)),smartScroll(t),document.getElementById(t+"c")){var c,m=(c=document.getElementById(t+"c").querySelectorAll(".print")).length;for(let e=0;e<m;e++)c[e].parentNode.setAttribute("style",c[e].innerHTML),"TD"==c[e].tagName.toUpperCase()&&c[e].parentNode.classList.add("destaqueLinha")}document.getElementById(t).getAttribute("data-left"),document.getElementById(t).getAttribute("data-top")}}document.querySelector(".full")?setTimeout(fullscreen,100):(dashAjuste(),renderizaGraficos());var u=document.getElementsByClassName("dragme mapageoloc");for(let e=0;e<u.length;e++)mapaGeoLoc(u[e].id);try{LAYER&&"ativo"==LAYER.className&&loading("x")}catch(e){console.log("nolayer")}}function renderizaGraficos(){var e=document.querySelectorAll(".dragme.grafico, .dragme.dados, .dragme.medidor"),t=e.length;for(let a=0;a<t;a++)renderChart(e[a].id)}function curtain(e){var t=document.getElementById("layer2");"enabled"==e?(document.getElementById("msg").style.opacity=0,t.classList.add("ativo"),telasup.style.setProperty("overflow","visible"),telasup.style.setProperty("transform","scale(1)")):"only"==e?t.className="ativo":(t.classList.remove("ativo"),telasup.style.setProperty("overflow","hidden"),telasup.style.setProperty("transform","scale(0)"),document.getElementById("content").innerHTML="",document.getElementById("painel").innerHTML="")}const ABOUT="Sistema desenvolvido por, Upquery do Brasil.";function dashAjuste(e){var t;if(e)(t=document.getElementById(e)).addEventListener("mousedown",dashSectionDown),t.addEventListener("mouseenter",dashSectionEnter),t.addEventListener("mouseleave",dashSectionLeave),articleAjuste(e);else{var a=(t=document.getElementsByTagName("SECTION")).length;if(a>0)for(let e=0;e<a;e++)"A"==ADMIN&&(t[e].addEventListener("mousedown",dashSectionDown),t[e].addEventListener("mouseenter",dashSectionEnter),t[e].addEventListener("mouseleave",dashSectionLeave)),articleAjuste(t[e].id)}}function articleAjuste(e){var t=document.getElementById(e).getElementsByTagName("ARTICLE"),a=t.length;for(let e=0;e<a;e++){var r=t[e];"A"==ADMIN&&(r.addEventListener("mousedown",dashArticleDown),r.addEventListener("mouseenter",dashArticleEnter),r.addEventListener("mouseleave",dashArticleLeave))}}var objatual="";function chart(x){var gxml=document.getElementById("gxml_"+x),dados=document.getElementById("dados_"+x),divObj=document.getElementById("ctnr_"+x),article=divObj.closest("article"),grafico_pivot=!1,arr_pivot=[];if(document.getElementById(x+"-agrupador_pivot")&&(grafico_pivot=!0,arr_pivot=get_agrupador_pivot(x)),"AUTO"==document.getElementById("atributos_"+x).getAttribute("data-altura").toUpperCase()&&null!=article){if("AUTO"==document.getElementById("atributos_"+x).getAttribute("data-altura").toUpperCase()&&article.clientHeight<500)var alturaElemento=500;else var alturaElemento=article.clientHeight;divObj.style.height=alturaElemento-40+"px"}var checkMobile=mobilecheck();if("mobile"==checkMobile&&"S"!==document.getElementById("atributos_"+x).getAttribute("data-zoom").toUpperCase()&&(divObj.style.width="100%"),get("prm_clear")&&(chartAnimation=!1),document.getElementById(x+"_ERR"))document.getElementById("ctnr_"+x).innerHTML=document.getElementById(x+"_ERR").innerHTML;else if(document.getElementById("dados_"+x)&&document.getElementById("gxml_"+x)){var tipo="bar",formato;"BARRAS"==dados.getAttribute("data-tipoobj")?formato="bar":"COLUNAS"==dados.getAttribute("data-tipoobj")?formato="column":(tipo="line",formato="line");var atributos=document.getElementById("atributos_"+x),stack="",stack_total="";atributos.getAttribute("data-stacked")&&(stack=atributos.getAttribute("data-stacked")),atributos.getAttribute("data-stacked_total")&&(stack_total=atributos.getAttribute("data-stacked_total"));var myChart=echarts.init(document.getElementById("ctnr_"+x),null,{renderer:chartRenderer,height:document.getElementById("ctnr_"+x).clientHeight,width:document.getElementById("ctnr_"+x).clientWidth});if(gxml.children[0]&&!gxml.children[0].classList.contains("err")){var jsonLista=gxml.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," ");jsonLista=jsonLista.substring(0,jsonLista.trim().length-1),jsonLista.includes(", *|*")&&(jsonLista=jsonLista.replace(/, *\*\|*\*/g,""));try{var jsonParsed=JSON.parse("{"+jsonLista+"}")}catch(e){return void alerta("feed-fixo",TR_QR_IN)}var valores=[],categorias=[],codigos=[],codi_cate=[];for(let e in jsonParsed)jsonParsed[e]&&jsonParsed[e].valores&&Array.isArray(jsonParsed[e].valores)&&jsonParsed[e].valores.map(function(t){return t.cod=jsonParsed[e].cod,t}),valores.push(jsonParsed[e].valores),categorias.push(jsonParsed[e].colunas),codigos.push(jsonParsed[e].cod),jsonParsed[e].cod!=jsonParsed[e].colunas?codi_cate.push(jsonParsed[e].cod+"-"+jsonParsed[e].colunas):codi_cate.push(jsonParsed[e].colunas);var posicoesPorSubArray=[];try{var temGruposRepetidos=valores.some(function(e){var t=e.map(function(e){return e.grupo});return t.some(function(e,a){return t.indexOf(e)!==a})})}catch(e){temGruposRepetidos=null}for(let e=0;e<valores.length;e++){let t=valores[e],a={};for(let e=0;e<t.length;e++){let r=t[e].grupo;a[r]||(a[r]=[]),a[r].push(e)}posicoesPorSubArray.push(a)}for(let e=0;e<valores.length;e++){let t=valores[e],a=posicoesPorSubArray[e],r=new Set;for(let e=0;e<t.length;e++){let n=t[e].grupo;if(t[e].posicao=a[n][e],temGruposRepetidos){for(;r.has(n);)n=n+"_"+e;r.add(n),t[e].grupo=n}}}atributos.getAttribute("data-inverte_ordem")&&"S"==atributos.getAttribute("data-inverte_ordem")&&(valores=valores.reverse(),categorias=categorias.reverse(),codigos=codigos.reverse());try{var destaque=JSON.parse("{"+gxml.children[1].innerHTML.replace(/(\r\n|\n|\r)/gm,"")+"}")}catch(e){return void alerta("feed-fixo","Sem Dados")}var coluna=dados.getAttribute("data-coluna").replace("(BR)"," ").replace("<BR>"," "),agrupadores=dados.getAttribute("data-agrupadores").replace("<BR>"," ").indexOf("|"),sec=dados.getAttribute("data-sec").replace("<BR>"," "),rotacao=atributos.getAttribute("data-rotacao"),decimal=atributos.getAttribute("data-decimal"),abreviacao=atributos.getAttribute("data-abreviacao"),cursor=atributos.getAttribute("data-cursor"),xpos=atributos.getAttribute("data-xpos"),ccoluna=atributos.getAttribute("data-cor-coluna").split("|"),ccoluna_hex=dados.getAttribute("data-ccoluna-hex").split("|"),nodesc=atributos.getAttribute("data-nodesc"),posicao=atributos.getAttribute("data-posicao"),tam_fontSize=atributos.getAttribute("data-label_size"),label_rotate=atributos.getAttribute("data-label_rotate"),label_distance=atributos.getAttribute("data-label_distance"),font_family=atributos.getAttribute("data-font_family"),font_weigth=atributos.getAttribute("data-font_weigth"),cor=atributos.getAttribute("data-cor"),meta="",meta_cor="",markMax=atributos.getAttribute("data-mark-max"),markMin=atributos.getAttribute("data-mark-min"),markMedia=atributos.getAttribute("data-mark-media"),um=atributos.getAttribute("data-um"),label_conteudo=atributos.getAttribute("data-label_conteudo"),cor_eixo_agrup=atributos.getAttribute("data-graf_axis_corAgrup"),showLineGrid=atributos.getAttribute("data-showlinegrid"),umvl=atributos.getAttribute("data-graf_axis_umvl"),corTextoLegenda=atributos.getAttribute("data-cor_texto_legenda"),agrupar_valor=atributos.getAttribute("data-agrupar-valor"),activeZoom=atributos.getAttribute("data-zoom"),vdistance,vrotate;activeZoom="S"==activeZoom,"top"!=posicao&&"bottom"!=posicao&&"right"!=posicao&&"left"!=posicao||"pie"==formato||"bar"==formato||(vdistance=label_distance),"column"==formato?("right"==posicao&&(posicao="top"),"left"==posicao&&(posicao="insideBottom"),vrotate="S"==label_rotate?90:0):vrotate=0;var labelspace="";atributos.getAttribute("data-espacamento")&&atributos.getAttribute("data-espacamento").replace("|||","").length>0&&(labelspace=atributos.getAttribute("data-espacamento"));var mostrar=atributos.getAttribute("data-hidden"),coresvar=["#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B"],corLinha,cores;"line"==tipo&&(-1==agrupadores?(corLinha=atributos.getAttribute("data-cor_linha")||"#000000",coresvar[0]="#000000"):corLinha=atributos.getAttribute("data-cor_linha")||"#87CEFA"),cores=atributos.getAttribute("data-cores").length<1?["#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8","#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8"]:atributos.getAttribute("data-cores").split("|");for(let e=0;cores.length<500;e++)cores.push(cores[e]);var gruposf=(dados.getAttribute("data-agrupadores").replace(/(\r\n|\n|\r)/g," ")+"|"+dados.getAttribute("data-sec").replace(/(\r\n|\n|\r)/g," ")).replace("<BR>"," ").split("|"),gruposr=dados.getAttribute("data-agrupadoresreal").replace("<BR>"," ").split("|"),gruposi=dados.getAttribute("data-visivel").replace("<BR>"," ").split("|");gruposf=gruposf.filter(e=>e);var temValoresRepetidos=gruposf.some(function(e,t){return gruposf.indexOf(e)!==t});if(temValoresRepetidos)for(var conjuntoNomes=new Set,i=0;i<gruposf.length;i++){for(var nome=gruposf[i];conjuntoNomes.has(nome);)nome=nome+"_"+[i];conjuntoNomes.add(nome),gruposf[i]=nome}var nome="";-1==agrupadores&&0==sec.length&&(nome=dados.getAttribute("data-agrupadores").replace("<BR>"," "));let selectedCols={},idx=-1;for(let e=0;e<gruposf.length;e++)idx=gruposi.findIndex(t=>t==gruposr[e]),selectedCols[gruposf[e]]=-1==idx;var arr_show_n=[],arr_show_v=[],arr_show=[],arr_posi_n=[],arr_posi_v=[],arr_posi=[],arr_maxi_n=[],arr_maxi_v=[],arr_maxi=[],arr_inte_v=[],arr_inte_n=[],arr_inte=[],arr_offs_n=[],arr_offs_v=[],arr_offs=[],arr_type_n=[],arr_type_v=[],arr_type=[],arr_sepo_n=[],arr_sepo_v=[],arr_sepo=[],arr_eixo_n=[],arr_eixo_v=[],arr_eixo=[],arr_sesi_n=[],arr_sesi_v=[],arr_sesi=[],arr_umvl=[],arr_umvl_n=[],arr_umvl_v=[];atributos.getAttribute("data-graf_axis_show_n")&&atributos.getAttribute("data-graf_axis_show")&&(arr_show_n=atributos.getAttribute("data-graf_axis_show_n").split("|"),arr_show_v=atributos.getAttribute("data-graf_axis_show").split("|")),atributos.getAttribute("data-graf_axis_position_n")&&atributos.getAttribute("data-graf_axis_position")&&(arr_posi_n=atributos.getAttribute("data-graf_axis_position_n").split("|"),arr_posi_v=atributos.getAttribute("data-graf_axis_position").split("|")),atributos.getAttribute("data-graf_axis_max_n")&&atributos.getAttribute("data-graf_axis_max")&&(arr_maxi_n=atributos.getAttribute("data-graf_axis_max_n").split("|"),arr_maxi_v=atributos.getAttribute("data-graf_axis_max").split("|")),atributos.getAttribute("data-graf_axis_intervalo_n")&&atributos.getAttribute("data-graf_axis_intervalo")&&(arr_inte_n=atributos.getAttribute("data-graf_axis_intervalo_n").split("|"),arr_inte_v=atributos.getAttribute("data-graf_axis_intervalo").split("|")),atributos.getAttribute("data-graf_axis_offset_n")&&atributos.getAttribute("data-graf_axis_offset")&&(arr_offs_n=atributos.getAttribute("data-graf_axis_offset_n").split("|"),arr_offs_v=atributos.getAttribute("data-graf_axis_offset").split("|")),atributos.getAttribute("data-graf_series_type_n")&&atributos.getAttribute("data-graf_series_type")&&(arr_type_n=atributos.getAttribute("data-graf_series_type_n").split("|"),arr_type_v=atributos.getAttribute("data-graf_series_type").split("|")),atributos.getAttribute("data-graf_series_label_pos_n")&&atributos.getAttribute("data-graf_series_label_pos")&&(arr_sepo_n=atributos.getAttribute("data-graf_series_label_pos_n").split("|"),arr_sepo_v=atributos.getAttribute("data-graf_series_label_pos").split("|")),atributos.getAttribute("data-graf_axis_nro_n")&&atributos.getAttribute("data-graf_axis_nro")&&(arr_eixo_n=atributos.getAttribute("data-graf_axis_nro_n").split("|"),arr_eixo_v=atributos.getAttribute("data-graf_axis_nro").split("|")),atributos.getAttribute("data-graf_series_label_size_n")&&atributos.getAttribute("data-graf_series_label_size")&&(arr_sesi_n=atributos.getAttribute("data-graf_series_label_size_n").split("|"),arr_sesi_v=atributos.getAttribute("data-graf_series_label_size").split("|")),atributos.getAttribute("data-graf_axis_umvl_n")&&atributos.getAttribute("data-graf_axis_umvl")&&(arr_umvl_n=atributos.getAttribute("data-graf_axis_umvl_n").split("|"),arr_umvl_v=atributos.getAttribute("data-graf_axis_umvl").split("|"));for(let e=0;e<gruposr.length;e++){var v_idx_show=arr_show_n.findIndex(t=>t==gruposr[e]),v_idx_posi=arr_posi_n.findIndex(t=>t==gruposr[e]),v_idx_maxi=arr_maxi_n.findIndex(t=>t==gruposr[e]),v_idx_inte=arr_inte_n.findIndex(t=>t==gruposr[e]),v_idx_offs=arr_offs_n.findIndex(t=>t==gruposr[e]),v_idx_type=arr_type_n.findIndex(t=>t==gruposr[e]),v_idx_sepo=arr_sepo_n.findIndex(t=>t==gruposr[e]),v_idx_eixo=arr_eixo_n.findIndex(t=>t==gruposr[e]),v_idx_sesi=arr_sesi_n.findIndex(t=>t==gruposr[e]),v_idx_umvl=arr_umvl_n.findIndex(t=>t==gruposr[e]);-1!=v_idx_show&&(arr_show[e]=arr_show_v[v_idx_show]),-1!=v_idx_posi&&(arr_posi[e]=arr_posi_v[v_idx_posi]),-1!=v_idx_maxi&&(arr_maxi[e]=arr_maxi_v[v_idx_maxi]),-1!=v_idx_inte&&(arr_inte[e]=arr_inte_v[v_idx_inte]),-1!=v_idx_offs&&(arr_offs[e]=arr_offs_v[v_idx_offs]),-1!=v_idx_type&&(arr_type[e]=arr_type_v[v_idx_type]),-1!=v_idx_sepo&&(arr_sepo[e]=arr_sepo_v[v_idx_sepo]),-1!=v_idx_eixo&&(arr_eixo[e]=arr_eixo_v[v_idx_eixo]),-1!=v_idx_sesi&&(arr_sesi[e]=arr_sesi_v[v_idx_sesi]),-1!=v_idx_umvl&&(arr_umvl[e]=arr_umvl_v[v_idx_umvl])}var arr_eixo_valor=new Array;for(let i=0;i<gruposf.length;i++){var veixo=new Object;if(arr_show[i]&&arr_show[i].length>0&&"true"==arr_show[i]?0==i?(veixo.axisLine={show:!0,lineStyle:{color:cor_eixo_agrup}},veixo.axisLabel={interval:0,textStyle:{fontSize:tam_fontSize}}):(veixo.axisLine={show:!0,lineStyle:{color:cores[i]}},veixo.axisLabel={interval:0,textStyle:{fontSize:tam_fontSize}},veixo.name=gruposf[i],arr_eixo_valor[0].name=gruposf[0],"bar"==tipo&&"bar"==formato&&(arr_eixo_valor[0].nameLocation=xpos,arr_eixo_valor[0].nameGap="end"==xpos?20:30)):(veixo.axisLine={lineStyle:{color:cor_eixo_agrup}},veixo.axisLabel={interval:0,textStyle:{fontSize:tam_fontSize}}),arr_posi[i]&&0!=arr_posi[i].length&&(veixo.position=arr_posi[i]),arr_maxi[i]&&0!=parseInt(arr_maxi[i])&&(veixo.max=arr_maxi[i]),arr_inte[i]&&0!=parseInt(arr_inte[i])&&(veixo.interval=parseInt(arr_inte[i])),arr_offs[i]&&0!=parseInt(arr_offs[i])&&(veixo.offset=parseInt(arr_offs[i])),veixo.splitLine="N"==showLineGrid?{show:!1}:{show:!0},atributos.getAttribute("data-ymin").trim().length>0){const reg_math=/(?:(?:^|[-+_*/])(?:\s*-?\d+(\.\d+)?(?:[eE][+-]?\d+)?\s*))+$/;var ymin_data=atributos.getAttribute("data-ymin").trim();ymin_data.startsWith("dataMin")&&reg_math.test(ymin_data.substring(7))?veixo.min=function(value){return eval(value.min+ymin_data.substring(7))}:veixo.min=atributos.getAttribute("data-ymin")}arr_eixo_valor.push(veixo)}1==gruposf.length&&(arr_eixo_valor[0].name=gruposf[0],"bar"==tipo&&"bar"==formato&&(arr_eixo_valor[0].nameLocation=xpos,arr_eixo_valor[0].nameGap="end"==xpos?20:30));var arr_yaxis=new Array,arr_xaxis=new Array,yaxis=new Object,xaxis=new Object,desc_valor,arrgrid;if(atributos.getAttribute("data-ymin").trim().length>0){const reg_math=/(?:(?:^|[-+_*/])(?:\s*-?\d+(\.\d+)?(?:[eE][+-]?\d+)?\s*))+$/;var ymin_data=atributos.getAttribute("data-ymin").trim();ymin_data.startsWith("dataMin")&&reg_math.test(ymin_data.substring(7))?yaxis.min=function(value){return eval(value.min+ymin_data.substring(7))}:yaxis.min=atributos.getAttribute("data-ymin")}desc_valor=label_conteudo&&""!=label_conteudo&&"D"!=label_conteudo?"C"==label_conteudo?codigos:codi_cate:categorias,"bar"==tipo&&"bar"==formato?(yaxis.type="category",yaxis.name=coluna,yaxis.nameLocation="end",yaxis.nameGap=20,yaxis.axisLabel={interval:0,rotate:rotacao,textStyle:{fontSize:tam_fontSize}},yaxis.axisLine={lineStyle:{color:cor_eixo_agrup}},yaxis.data=desc_valor,arr_yaxis.push(yaxis),arr_xaxis=arr_eixo_valor):(xaxis.type="category",xaxis.name=coluna,xaxis.nameLocation=xpos,xaxis.nameGap="end"==xpos?20:35,xaxis.axisLabel={interval:0,rotate:rotacao,textStyle:{fontSize:tam_fontSize}},xaxis.axisLine={lineStyle:{color:cor_eixo_agrup}},xaxis.data=desc_valor,arr_xaxis.push(xaxis),arr_yaxis=arr_eixo_valor),arrgrid=grafico_pivot?[40,80,40,60]:parseInt(rotacao)>80?[30,80,120,80]:parseInt(rotacao)>40?[30,80,80,80]:[30,80,40,80];var labelsplit=labelspace.split("|");if(labelspace.length>0&&labelsplit.length<5)for(let e=0;e<labelsplit.length;e++)arrgrid[e]=2==e&&1==activeZoom?parseInt(labelsplit[e])+50:labelsplit[e];var arr_serie_prop=new Array;for(let e=0;e<gruposf.length;e++){var vserie=new Object;arr_type[e]&&0!=arr_type[e].length?vserie.type=arr_type[e]:(vserie.type=formato,"column"==formato&&(vserie.type="bar")),e>0&&arr_show[e]&&"true"==arr_show[e]?vserie.AxisIndex=e:arr_eixo[e]&&parseInt(arr_eixo[e])>0&&parseInt(arr_eixo[e])<=gruposf.length&&(vserie.AxisIndex=parseInt(arr_eixo[e]-1)),vserie.label={position:arr_sepo[e]&&0!=arr_sepo[e].length?arr_sepo[e]:posicao,fontSize:arr_sesi[e]&&0!=arr_sesi[e].length?arr_sesi[e]:tam_fontSize,unidadeMedida:arr_umvl[e]&&0!=arr_umvl[e].length?arr_umvl[e]:""},arr_serie_prop.push(vserie)}var arr=[stack,mostrar,formato,decimal,cores,ccoluna_hex,sec,atributos.getAttribute("data-cascata"),destaque,corLinha,abreviacao,posicao,meta,meta_cor,markMax,markMin,markMedia,cor,um,arr_serie_prop,label_conteudo,tam_fontSize,arr_umvl,agrupar_valor];if(decimal.includes("|")&&(decimal=decimal.split("|")[0]),grafico_pivot)legenda=arr_pivot.map(function(e){return e.ds});else var legenda=!1;var tooltipFormatter=function(e){var t=[],a=0;if(grafico_pivot)t.push(e.name),t.push(labelTooltip(e.seriesName,{value:e.value},decimal,abreviacao,"N",0,"S",um));else if("S"==agrupar_valor){t.push(e[0].name);for(let a=0;a<valores.length;a++)for(let n=0;n<valores[a].length;n++)if(parseInt(e[0].data)==parseInt(valores[a][0].valor)){var r=labelTooltip("",{value:valores[a][n].valor},decimal,abreviacao,"N",0,"N");t.push(valores[a][n].grupo+": "+r.toLocaleString(void 0,{minimumFractionDigits:parseInt(decimal)}))}}else if(e.length>1){t.push(e[0].name);for(let r=0;r<e.length;r++)0==e[r].data||0==e[r].value?t.push(e[r].seriesName+": 0"):(t.push(e[r].seriesName+": "+labelTooltip(e[r].name,e[r],decimal,abreviacao,"N",0,"N",um)),a+=parseFloat(e[r].value));stack_total.length>0&&t.push(stack_total+": "+Number(a).toLocaleString(void 0,{minimumFractionDigits:parseInt(decimal)}))}else e[0]&&t.push(e[0].name+": "+labelTooltip(e[0].name,e[0],decimal,abreviacao,"N",0,"N",um));return t='<span style="text-align: left; display: block;">'+t.join("<br>")+"</span>"},option={dataZoom:{show:activeZoom,bottom:"6px",handleIcon:"path://M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z"},textStyle:{fontFamily:font_family,fontWeight:font_weigth},grid:{y:arrgrid[0],x2:arrgrid[1],y2:arrgrid[2],x:arrgrid[3]},color:cores,tooltip:{trigger:grafico_pivot?"item":"axis",formatter:tooltipFormatter,axisPointer:{type:cursor}},legend:{data:legenda||gruposf,selected:selectedCols,textStyle:{color:corTextoLegenda}},noDataLoadingOption:{text:"inválido",effect:7},xAxis:arr_xaxis,yAxis:arr_yaxis,bottom:10,series:stackLista(valores,agrupadores,gruposf,formato,codigos,ccoluna,coluna,desc_valor,arr,x),label:{rotate:vrotate,distance:vdistance,verticalAlign:"middle"}};if(document.getElementById(x+"more")){var a=document.createElement("a");a.classList.add("download_button"),document.getElementById(x.split("trl")[0]+"_ds")?a.setAttribute("download",document.getElementById(x.split("trl")[0]+"_ds").innerText.replace(/ /g,"_").toLowerCase()):a.setAttribute("download",document.getElementById(x+"_ds").innerText.replace(/ /g,"_").toLowerCase()),setTimeout(function(){option.title={text:document.getElementById(x+"_ds").innerText,left:"center",top:0},option.grid.y=parseInt(arrgrid[0])+25,option.legend.top=25;for(let e=0;e<option.series.length;e++)option.series[e].animation=!1;myChart.setOption(option,{notMerge:!0}),a.href=myChart.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#fff"}),option.title={},option.grid.y=arrgrid[0],option.legend.top=0,myChart.setOption(option,{notMerge:!0});for(let e=0;e<option.series.length;e++)option.series[e].animation=chartAnimation;myChart.setOption(option,{notMerge:!0})},1500),document.getElementById(x+"more")&&document.getElementById(x+"more").querySelector(".page_png").appendChild(a)}myChart.setOption(option,{notMerge:!0}),myChart.on("click",clicker),myChart.on("legendselectchanged",clickerLegend)}document.getElementById("ctnr_"+x).style.setProperty("max-width","100%")}}function get_agrupador_pivot(e){let t=[];return document.getElementById(e+"-agrupador_pivot")&&(t=document.getElementById(e+"-agrupador_pivot").innerHTML.split("|").map(function(e){let t=new Object,a=e.split("#$DIV$#");return t.cd=a[0].trim(),t.ds=a.length>=1?a[1].trim():a[0].trim(),t})),t}async function clickerLegend(e){let t="",a=0,r=this._dom.id.replace("ctnr_",""),n=document.getElementById("dados_"+r).getAttribute("data-agrupadoresreal").replace("<BR>"," ").split("|");for(const[r,o]of Object.entries(e.selected))0==o&&(t=t+"|"+n[a]),a+=1;let o=await call("alter_agrupadores","prm_objeto="+r+"&prm_agrupadores="+t+"&prm_tipo=VISIVEL&prm_screen="+tela);"OK"==o.split("|")[0]?alerta("feed-fixo","Atributo alterado com sucesso"):alerta("feed-fixo",o.split("|")[1])}function clicker(e){(!isNaN(e.value)||e.seriesType&&("scatter"==e.seriesType.toLowerCase()||"heatmap"==e.seriesType.toLowerCase())||e.seriesType&&"radar"==e.seriesType.toLowerCase())&&setTimeout(function(){var t,a=document.getElementById("dados_"+objatual),r=document.getElementById("gxml_"+objatual),n=document.getElementById("atributos_"+objatual),o="",l="";if(e.seriesType&&"radar"==e.seriesType.toLowerCase())o=a.getAttribute("data-drill"),e.data.col.length>0&&(l=e.data.col+"|"+e.data.cod);else if(e.seriesType&&"scatter"==e.seriesType.toLowerCase())o=a.getAttribute("data-drill"),l=e.data[7]+"|"+e.data[3],e.data[8].length>0&&(l=l+"|"+e.data[8]+"|"+e.data[5]);else if(e.seriesType&&"sankey"==e.seriesType.toLowerCase()){if("edge"==e.dataType.toLowerCase()){o=a.getAttribute("data-drill");var i=e.name.split(" > ")[0].trim(),s=e.name.split(" > ")[1].trim();l=i.split("|")[0]+"|"+i.split("|")[1]+"|"+s.split("|")[0]+"|"+s.split("|")[1]}}else{var d="",c=!1,m=[];if(document.getElementById(r.id.replace("gxml_","")+"-agrupador_pivot")&&(c=!0,m=get_agrupador_pivot(r.id.replace("gxml_",""))),e.data.sigla)t=e.data.sigla;else{var u=r.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," ");if(e.seriesType&&"heatmap"==e.seriesType.toLowerCase()){u=u.replace(",]","]");var p=JSON.parse(u),g=[];for(let e in p){let t=p[e].date.split("-"),a=`${t[2]}/${t[1]}/${t[0]}`;g.push(a)}}else{u=u.substring(0,u.trim().length-1);p=JSON.parse("{"+u+"}"),g=[];for(let e in p)g.push(p[e].cod);n.getAttribute("data-inverte_ordem")&&"S"==n.getAttribute("data-inverte_ordem")&&g.reverse()}if(t=g[e.dataIndex],1==g.length&&1==e.dataIndex&&(t=g[0]),c){let r=m[e.seriesIndex].cd;temparr=a.getAttribute("data-colunareal").split("|"),d=temparr[0]+"|"+t+"|"+temparr[1]+"|"+r+"|"+a.getAttribute("data-filtro")}}if(e.seriesType&&"heatmap"==e.seriesType.toLowerCase()){var[f,_,v]=t.split("/");t=`${f}-${new Date(`${_}/${f}/${v}`).toLocaleString("en-US",{month:"short"}).toUpperCase()}-${v.slice(-2)}`}if(l=(l=c?d:a.getAttribute("data-colunareal")+"|"+t+"|"+a.getAttribute("data-filtro")).replace("||","|"),o=a.getAttribute("data-drill"),-1!=l.indexOf("ACUMULADO")){let e=[],t=JSON.parse("{"+document.getElementById("gxml_"+objatual).children[0].innerText.substr(0,document.getElementById("gxml_"+objatual).children[0].innerText.trim().length-1)+"}");for(let a in t)"ACUMULADO"!=t[a].cod&&e.push(t[a].cod);var y=[];let r=a.getAttribute("data-colunareal");e.forEach(function(e){y.push(r+"|$[DIFERENTE]"+e)}),l=y.join("|")}}-1==o.indexOf("MULTI")?o>0&&(get("drill_go").value=l,drillfix(e,objatual,l)):o.length>0&&(remover(o+"trl"),loading(),ajax("append","show_objeto","prm_drill=Y&prm_objeto="+o+"&prm_posx="+cursorx+"px&prm_zindex="+zindex_abs+"&prm_posy="+cursory+"px&prm_parametros="+encodeURIComponent(l.replace(/%2D/g,"-").replace(/%2B/g,"+"))+"&prm_screen="+tela+"&prm_track="+o+"&prm_objeton=",!0,"main","",o.split("trl")[0]+"trl","obj"))},100)}function efeitoCondicoes(e,t,a,r,n,o,l,i,s,d){if(Array.isArray(i))for(let e=0;e<i.length;e++)i[e]=i[e].replace(/\s/g,"");else i=i.replace(/\s/g,"");for(let r in e){let u=d,p="";if(void 0!==u)for(let t=0;t<u.length;t++)for(let a=0;a<u[t].length;a++)u[t][a].grupo=u[t][a].grupo.replace(/\s/g,""),e[r].valor=e[r].valor.replace(/\s/g,""),u[t][a].grupo===e[r].valor.replace("AUX=","")&&t===s&&(p=u[t][a].valor.replace("AUX=",""));""!==p&&void 0!==p||(p=e[r].valor.replace("AUX=",""));let g=e[r].coluna.replace(/\s/g,""),f=t.map(e=>e.replace(/\s/g,"")),_=o.replace(/\s/g,"");if(f.includes(g)){let t;function c(e,t){let a,r=e.toString(),o=t.toString();return a=i.includes(g)?n.indexOf(o):r.indexOf(o)}let o=c(a,t=isNaN(parseInt(p,1))?p:parseFloat(p));switch(e[r].condicao){case"IGUAL":if(t==a)return e[r].cor;break;case"MAIOR":if(a>t)return e[r].cor;break;case"MENOR":if(a<t)return e[r].cor;break;case"DIFERENTE":if(a!=t)return e[r].cor;break;case"MAIOROUIGUAL":if(a>=t)return e[r].cor;break;case"MENOROUIGUAL":if(a<=t)return e[r].cor;break;case"LIKE":if(-1!=o)return e[r].cor;break;case"NOTLIKE":if(-1==o)return e[r].cor;break;case"COLUNA":return e[r].cor}}if(_.includes(g)||i.includes(g)){let t,a=l;function c(e,t){let a,r=e.toString(),o=t.toString();return a=i.includes(g)?n.indexOf(o):r.indexOf(o)}let o=c(a,t=isNaN(parseInt(p,1))?p:parseFloat(p));function m(e,t){if(void 0===t)return"NOMASC";var a="";-1!==t.indexOf("YYYY")&&t.indexOf("YYYY")<e.length?a+=e.substring(t.indexOf("YYYY"),t.indexOf("YYYY")+4):-1!==t.indexOf("YY")&&t.indexOf("YY")<e.length?a+="20"+e.substring(t.indexOf("YY"),t.indexOf("YY")+2):-1!==t.indexOf("RRRR")&&t.indexOf("RRRR")<e.length?a+=e.substring(t.indexOf("RRRR"),t.indexOf("RRRR")+4):-1!==t.indexOf("RR")&&t.indexOf("RR")<e.length&&(a+="20"+e.substring(t.indexOf("RR"),t.indexOf("RR")+2)),-1!==t.indexOf("MON")&&t.indexOf("MON")<e.length?(a.length>0&&(a+="-"),a+=e.substring(t.indexOf("MON"),t.indexOf("MON")+3)):-1!==t.indexOf("MM")&&t.indexOf("MM")<e.length&&(a.length>0&&(a+="-"),a+=e.substring(t.indexOf("MM"),t.indexOf("MM")+2)),-1!==t.indexOf("DD")&&t.indexOf("DD")<e.length&&(a.length>0&&(a+="-"),a+=e.substring(t.indexOf("DD"),t.indexOf("DD")+2));var r=0;return-1!==t.indexOf("HH24")&&t.indexOf("HH24")<e.length?(a.length>0&&(a+=" "),r=2,a+=e.substring(t.indexOf("HH24"),t.indexOf("HH24")+2)):-1!==t.indexOf("HH")&&t.indexOf("HH")<e.length&&(a.length>0&&(a+=" "),a+=e.substring(t.indexOf("HH"),t.indexOf("HH")+2)),-1!==t.indexOf("MI")&&t.indexOf("MI")-r<e.length&&(a.length>0&&(a+=":"),a+=e.substring(t.indexOf("MI")-r,t.indexOf("MI")+2-r)),-1!==t.indexOf("SS")&&t.indexOf("SS")-r<e.length&&(a.length>0&&(a+=":"),a+=e.substring(t.indexOf("SS")-r,t.indexOf("SS")+2-r)),Date.parse(a)}switch("DATE"===e[r].tipo&&(a=m(a.replace(/\s/g,""),e[r].mascara.replace(/\s/g,"")),t=m(t.replace(/\s/g,""),e[r].mascara.replace(/\s/g,""))),e[r].condicao){case"IGUAL":if(t==a)return e[r].cor;break;case"MAIOR":if(a>t)return e[r].cor;break;case"MENOR":if(a<t)return e[r].cor;break;case"DIFERENTE":if(a!=t)return e[r].cor;break;case"MAIOROUIGUAL":if(a>=t)return e[r].cor;break;case"MENOROUIGUAL":if(a<=t)return e[r].cor;break;case"LIKE":if(-1!=o)return e[r].cor;break;case"NOTLIKE":if(-1==o||-1==n.indexOf(t))return e[r].cor;break;case"COLUNA":return e[r].cor}}}return r}function stackLista(e,t,a,r,n,o,l,s,d,c){var m=d[0],u=d[1],p=(r=d[2],d[3]),g=d[4],f=(d[5],d[6]),_=d[7],v=d[8],y=d[9],h=d[10],b=d[11];meta=d[12],meta_cor=d[13],markMax=d[14],markMin=d[15],markMedia=d[16],cor=d[17],um=d[18],arr_serie_prop=d[19],label_conteudo=d[20],tam_fontSize=d[21],umvl=d[22],u=u.replace(/(\r\n|\n|\r)/g," ")+"|";var E,I,x=!1,A=[];document.getElementById(c+"-agrupador_pivot")&&(x=!0,A=get_agrupador_pivot(c));var B=[];if(p.includes("|")&&(p=p.split("|")[0]),E="line"==r?"top":"column"!=r?b||"inside":"S"==m?"inside":b||"top",I=tam_fontSize||"12",arr_serie_prop[0].label&&arr_serie_prop[0].label.position&&0!=arr_serie_prop[0].label.position.length&&(E=arr_serie_prop[0].label.position),arr_serie_prop[0].label&&arr_serie_prop[0].label.fontSize&&0!=arr_serie_prop[0].label.fontSize.length&&(I=arr_serie_prop[0].label.fontSize),arr_serie_prop[0].label.unidadeMedida.length>1)for(i=0;i<arr_serie_prop.length;i++)B.push(arr_serie_prop[i].label.unidadeMedida);var L=function(t,r,o,i,m,u,f){let _={label:{}};return"line"!=i&&0==x&&(-1==m&&0==u.length?_.color=function(e){var t=g[e.dataIndex];let r=parseFloat(e.data),o=[];o.push(e.name),o.push(n[e.dataIndex]);let i=[];return i.push(...a),i.push(l),t=efeitoCondicoes(v,i,r,t,o,l,s[e.dataIndex],n)}:_.color=function(t){let a=g[t.dataIndex],r=[t.seriesName],o=parseFloat(t.data),i=t.name;return a=efeitoCondicoes(v,r,o,g[t.seriesIndex],i,l,s[t.dataIndex],n,t.dataIndex,e)}),_.barBorderColor="#333",_.barBorderWidth=1,_.label.formatter=function(t){let a,r=document.getElementById("atributos_"+c),n="S"==d[23]&&e.length>0&&Array.isArray(e[0]);if(B.length>1){a=B;for(var l=[],i=0;i<a.length;i++)um=a[i],l.push(labelTooltip(t.name,t,p,o,"N",0,"N",um,""));return labelTooltip(t.name,t,p,o,"N",0,"N",a[t.seriesIndex],"")}if(a=r.getAttribute("data-um"),n&&0==x){var s=[];d[3].includes("|")?s=d[3].split("|"):(s[0]=p,s[1]=p);for(let a=0;a<e.length;a++)for(let r=0;r<e[a].length;r++)if(parseInt(t.data.replace(",","")).toString().slice(0,-1)==parseInt(e[a][r].valor).toString().slice(0,-1)){var m=e[a][1].valor;break}var u={value:m},g=[];return a.includes("|")?g=a.split("|"):(g[0]=a,g[1]=a),null!=m?labelTooltip(t.name,t,s[0],o,"N",0,"N",g[0])+" / "+labelTooltip(m,u,s[1],o,"N",0,"N",g[1]):labelTooltip(t.name,t,p,o,"N",0,"N",a,"")}return labelTooltip(t.name,t,p,o,"N",0,"N",a)},_.label.show=t,_.label.position=r,_.label.textStyle={color:cor,fontWeight:"bold",fontSize:f},_},N=function(e,t){let a={label:{}};return a.label.show=e,a.label.position=t,a.label.textStyle={color:cor,fontWeight:"bold"},a};let C="S"==d[23]&&e.length>0&&Array.isArray(e[0]);if(x){var T=[],S=[];S=A;for(let a=0;a<Object.keys(S).length;a++){var w=new Object,k=e.flat(),R=[];const o=n;for(let e=0;e<o.length;e++)R.push(0);for(let e=0;e<k.length;e++)k[e].grupo==S[a].cd&&(index=o.findIndex(t=>t===k[e].cod),-1!==index&&(R[index]=parseFloat(k[e].valor).toFixed(p)));w.dataZoom={},w.cod=S[a].cd.replace("[","").replace("]",""),w.name=S[a].ds.replace("[","").replace("]","");let l=!1;u&&(l=-1==u.indexOf("|"+w.cod+"|")&&-1==u.indexOf("TODOS")),"bar"==r&&(w.barMinHeight="1"),"bar"==r||"column"==r?("column"==r?(E="top",w.type="bar"):w.type=d[2],"S"==m?(P!=w.type&&"first"!=P&&(F+=F),w.stack="GROUP_"+F):w.stack=S[a].cd.replace("[","").replace("]","")):w.type=d[2],P=w.type,w.data=R,"line"!=r?w.itemStyle={normal:L(l,E,h,r,t,f,I),emphasis:N(l,E)}:("S"==_&&(w.areaStyle={normal:{opacity:"0.2"}}),-1==t&&(w.lineStyle={normal:{color:y}}),w.itemStyle={normal:L(l,E,h,r,t,f,I),emphasis:N(l,E)}),w.animation=chartAnimation,T.push(w)}R=[];return T}if(-1==t&&0==f.length||C){T=[];(w=new Object).type=arr_serie_prop[0].type,k=C?e.map(e=>e[0].valor):e;for(let e=0;e<k.length;e++)k[e]=parseFloat(k[e]).toFixed(p);w.data=k,"S"==_&&(w.areaStyle="{}"),w.dataZoom={},w.dataZoom.type="slider";var O="";get("menup")&&(O=window.getComputedStyle(get("menup")).getPropertyValue("background-color"));var j=[],M={};"S"==markMax&&(M.type="max",M.label={formatter:"MAX",color:"#FFF"},j.push(M));var D={};"S"==markMin&&(D.type="min",D.label={formatter:"MIN",color:"#FFF"},j.push(D));var H={};"S"==markMedia&&(H.type="average",H.symbol="none",H.emphasis={label:{show:!0}},H.label={show:!1,position:"insideStartTop",formatter:function(e){return"MED: "+e.data.value}});let n=!1;return u&&(n=-1==u.indexOf(a+"|")&&-1==u.indexOf("TODOS")),w.markPoint={itemStyle:{color:O},data:j},"S"==markMedia&&(w.markLine={lineStyle:{type:"dashed"},itemStyle:{color:O},symbol:"none",data:[H]}),"line"!=r?w.itemStyle={normal:L(n,E,h,r,t,f,I),emphasis:N(n,E)}:(-1==t&&(w.lineStyle={normal:{color:y}}),"S"==_&&(w.areaStyle={normal:{color:y,opacity:"0.2"}}),w.itemStyle={normal:L(n,E,h,r,t,f,I),emphasis:N(n,E)}),w.animation=chartAnimation,T.push(w),T}var P="first",F=1;T=[];for(let n=0;n<a.length;n++){w=new Object,R=[],k=e.flat();for(let e=0;e<k.length;e++)k[e].grupo==a[n]&&R.push(parseFloat(k[e].valor).toFixed(p));w.dataZoom={},w.name=a[n].replace("[","").replace("]","");let o=!1;u&&(o=-1==u.indexOf("|"+w.name+"|")&&-1==u.indexOf("TODOS")),-1!=f.replace(/(\r\n|\n|\r)/g," ").split("|").indexOf(a[n].replace(/(\r\n|\n|\r)/g," "))?"bar"==r||"column"==r?(E="top",w.type="line"):w.type="bar":w.type=arr_serie_prop[n].type,n>0&&arr_serie_prop[n].AxisIndex&&("column"==r||"line"==r?w.yAxisIndex=arr_serie_prop[n].AxisIndex:"bar"==r&&(w.xAxisIndex=arr_serie_prop[n].AxisIndex)),arr_serie_prop[n].label&&arr_serie_prop[n].label.position&&0!=arr_serie_prop[n].label.position.length&&(E=arr_serie_prop[n].label.position),arr_serie_prop[n].label&&arr_serie_prop[n].label.fontSize&&0!=arr_serie_prop[n].label.fontSize.length&&(I=arr_serie_prop[n].label.fontSize),"bar"==r&&(w.barMinHeight="1"),"bar"!=r&&"column"!=r||("S"==m?(P!=w.type&&"first"!=P&&(F+=F),w.stack="GROUP_"+F):w.stack=a[n].replace("[","").replace("]","")),P=w.type,w.data=R,"line"!=r?w.itemStyle={normal:L(o,E,h,r,t,f,I),emphasis:N(o,E)}:("S"==_&&(w.areaStyle={normal:{opacity:"0.2"}}),-1==t&&(w.lineStyle={normal:{color:y}}),w.itemStyle={normal:L(o,E,h,r,t,f,I),emphasis:N(o,E)}),w.animation=chartAnimation,T.push(w)}return T}function labelTooltip(e,t,a,r,n,o,l,i,s){e=e.replace("&amp;","&");if(void 0!==s&&0!=s.toString().length||(s=a),t.value&&"NaN"!=t.value){let g=""+t.value;var d="";void 0!==i&&(d=i);var c=abreviacaoNumerica(t,r),m="";if("S"==l&&e.length>0&&(m=e.toUpperCase().indexOf("[QUEBRA_LINHA]")>=0?e.replace(/\[QUEBRA_LINHA\]/gi,"")+String.fromCharCode(10):e+": "),"A"==n)return 0==a?-1!=d.indexOf(">")?m+c+(d=d.replace(">",""))+" - "+parseFloat(Number(t.value/(o/100))).toFixed(s)+"%":m+(d=d.replace("<",""))+c+" - "+parseFloat(Number(t.value/(o/100))).toFixed(s)+"%":-1!=d.indexOf(">")?(d=d.replace(">",""),m+c+","+g.replace(/-/g,"").split(".")[1]+d+" - "+parseFloat(Number(t.value/(o/100))).toFixed(s)+"%"):m+(d=d.replace("<",""))+c+","+g.replace(/-/g,"").split(".")[1]+" - "+parseFloat(Number(t.value/(o/100))).toFixed(s)+"%";if("S"==n)return e?e+": "+parseFloat(Number(t.value/(o/100))).toFixed(a)+"%":parseFloat(Number(t.value/(o/100))).toFixed(a)+"%";var u="",p=parseInt(a);return g.replace(/-/g,"").split(".")[1]&&p>0&&(u=(u=","+g.replace(/-/g,"").split(".")[1]).substring(0,p+1)),-1!=d.indexOf(">")?m+c+u+(d=d.replace(">","")):m+(d=d.replace("<",""))+c+u}return 0===t.value?"":e}function abreviacaoNumerica(e,t){var a="";if(!e.value)return"";-1!=(r=e.value.toString()).indexOf("-")&&(a="-");var r,n=(r=Number(r).toLocaleString().replace(/-/g,"").split(",")[0]).replace(/\./g,"").length;return"S"==t&&(r=-1!=r.indexOf(".")?parseFloat(r.substr(0,r.indexOf(".")+2))+"":parseFloat(r)+"",n>12?r+="T":n>9?r+="B":n>6?r+="M":n>3&&(r+="K")),a+r}function chartSlice(e,t){var a=document.getElementById("gxml_"+e),r=document.getElementById("dados_"+e),n=document.getElementById("ctnr_"+e),o=n.closest("article");if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&null!=o){if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&o.clientHeight<500)var l=500;else l=o.clientHeight;n.style.height=l-40+"px"}"mobile"==mobilecheck()&&(n.style.width="100%");let i="";if(e.split("trl").length>1&&(i=e.split("trl")[1]),document.getElementById(e+"_ERR"))document.getElementById("ctnr_"+e).innerHTML=document.getElementById(e+"_ERR").innerHTML;else if(r&&document.getElementById("gxml_"+e)){var s=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer}),d=(a=document.getElementById("gxml_"+e),document.getElementById("atributos_"+e)),c=d.getAttribute("data-font_weigth"),m=d.getAttribute("data-font_family");if(a.children[0]){var u=JSON.parse("{"+a.children[1].innerHTML.replace(/(\r\n|\n|\r)/gm,"")+"}"),p=a.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," ");p=p.substr(0,p.trim().length-1);var g=JSON.parse("{"+p+"}"),f=[],_=[],v=[];for(let e in g)f.push(g[e].valores),_.push(g[e].colunas),v.push(g[e].cod);var y=r.getAttribute("data-coluna"),h=r.getAttribute("data-agrupadores"),b=document.getElementById("ctnr_"+e).clientWidth,E=document.getElementById("ctnr_"+e).clientHeight;d.getAttribute("data-cor-coluna").split("|");r.getAttribute("data-ccoluna-hex").split("|");d.getAttribute("data-nodesc");var I=d.getAttribute("data-abreviacao"),x=d.getAttribute("data-cor"),A=d.getAttribute("data-tipo"),B=r.getAttribute("data-funil-sort"),L=d.getAttribute("data-label_conteudo"),N="",C=d.getAttribute("data-um"),T=r.getAttribute("data-agrupadoresreal").replace("<BR>"," ").split("|"),S=d.getAttribute("data-label_size"),w=d.getAttribute("data-total_central"),k=d.getAttribute("data-total_central_texto");r.getAttribute("data-labelspace")&&(N=r.getAttribute("data-labelspace"));var R,O,j,M=d.getAttribute("data-decimal").split("|");R=M[0],O=M.length>1?M[1]:M[0],d.getAttribute("data-hidden")&&(j=-1==d.getAttribute("data-hidden").indexOf("S"));var D="N";d.getAttribute("data-fracao")&&(D=d.getAttribute("data-fracao"));var H,P=[],F=0;switch(H="donut"==A?"pie":A,A){case"funnel":for(let e=1;e<f.length+1;e++){var q=new Object;""==L||"D"==L||_[e-1]==v[e-1]?q.name=_[e-1]:q.name="C"==L?v[e-1]:v[e-1]+"-"+_[e-1],q.value=parseFloat(f[e-1]).toFixed(R),q.order=5*e,P.push(q),F=parseFloat(f[e-1])+parseFloat(F)}P.sort(function(e,t){return e.order>t.order?1:-1});break;default:for(let e=0;e<f.length;e++){let t=new Object;""==L||"D"==L||_[e]==v[e]?t.name=_[e]:t.name="C"==L?v[e]:v[e]+"-"+_[e],t.value=parseFloat(f[e]).toFixed(R),P.push(t),F=parseFloat(f[e])+parseFloat(F)}}var U,z=function(e){return labelTooltip(e.name,e,R,I,D,F,"S",C,O)},W=[30,80,50,80],Y=N.split("|");if(N.length>0&&Y.length<5)for(let e=0;e<Y.length;e++)W[e]=Y[e];U=d.getAttribute("data-cores").length<1?["#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8","#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8"]:d.getAttribute("data-cores").split("|");for(let e=0;U.length<500;e++)U.push(U[e]);var X=[],G=[],V=[];d.getAttribute("data-graf_series_label_pos_n")&&d.getAttribute("data-graf_series_label_pos")&&(X=d.getAttribute("data-graf_series_label_pos_n").split("|"),G=d.getAttribute("data-graf_series_label_pos").split("|")),V[0]="outside";for(let e=0;e<T.length;e++){var Z=X.findIndex(t=>t==T[e]);-1!=Z&&(V[e]=G[Z])}var K=[];for(let e=0;e<P.length;e++){let t=[];t.push(y),t.push(h);let a=efeitoCondicoes(u,t,P[e].value,U[e],P[e].name,v[e],v[e],y);K.push(a)}var $={itemStyle:{}};$.itemStyle.normal={},$.itemStyle.emphasis={},$.itemStyle.normal.borderWidth=2,$.itemStyle.normal.label={},$.itemStyle.normal.label.textStyle={},$.itemStyle.normal.label.textStyle.color="#333",$.itemStyle.normal.label.show=j,$.itemStyle.normal.label.formatter=z,$.itemStyle.normal.label.position=V[0],$.itemStyle.normal.labelLine={},$.itemStyle.normal.labelLine.show=j,$.itemStyle.emphasis.itemStyle={},$.itemStyle.emphasis.itemStyle.shadowBlur=5,$.itemStyle.emphasis.itemStyle.shadowOffsetX=0,$.itemStyle.emphasis.itemStyle.shadowColor="rgba(0, 0, 0, 0.5)",$.data=P,$.type=H,[].push($);var J={legendHoverLink:!0,grid:{y:W[0],x2:W[1],y2:W[2],x:W[3]},tooltip:{show:!0,confine:!0,trigger:"item",formatter:function(e){if(e)return labelTooltip(e.name,e,R,I,D,F,"S",C,O)}},noDataLoadingOption:{text:"inválido",effect:7},textStyle:{fontFamily:m,fontWeight:c},color:K,series:[{type:H,data:P,itemStyle:{normal:{label:{textStyle:{color:x},show:j,formatter:z,position:V[0],fontSize:S},labelLine:{show:j}},emphasis:{label:{textStyle:{borderColor:"#333"}}}}}]};switch(A){case"funnel":J.series[0].width="50%",J.series[0].left="25%",J.series[0].sort=B,J.series[0].itemStyle.fontSize=S;case"donut":if(J.series[0].radius=["30%",(b+E)/10.56+"px"],J.series[0].itemStyle.borderRadius=20,J.series[0].itemStyle.borderColor="#FFF",J.series[0].itemStyle.borderWidth=4,J.series[0].itemStyle.fontSize=S,"S"==w){let e={type:H,color:"transparent",data:[{name:k,value:parseFloat(F).toFixed(R)}],radius:["0","0"],itemStyle:{normal:{label:{textStyle:{color:x},show:j,formatter:function(e){return labelTooltip(e.name,e,R,I,"N",F,"S",C,"",O)},position:"inside",fontSize:S},labelLine:{show:j}}}};J.series.push(e)}break;default:J.series[0].radius=(b+E)/10.56+"px"}s.setOption(J),s.on("click",clicker),setTimeout(function(){if(document.getElementById(e+"more")){var t=document.createElement("a");t.classList.add("download_button"),t.setAttribute("download",document.getElementById(e+"_ds").innerText.replace(/ /g,"_").toLowerCase()),J.title={text:document.getElementById(e+"_ds").innerText,left:"center",top:0},J.grid.y=parseInt(W[0])+25,s.setOption(J,{notMerge:!0}),t.href=s.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#FFF"}),J.title={},J.grid.y=W[0],s.setOption(J,{notMerge:!0}),document.getElementById(e+"more")&&document.getElementById(e+"more").querySelector(".page_png").appendChild(t)}},1500)}}}function chartDonut(e){var t=document.getElementById("dados_"+e),a=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer}),r=document.getElementById("gxml_"+e),n=r.children[0].innerHTML.replace("|","").split("|"),o=r.children[1].innerHTML.replace("|","").split("|");parseInt(t.getAttribute("data-meta")),t.getAttribute("data-coluna");if(atributos.getAttribute("data-hidden"))if(-1!=atributos.getAttribute("data-hidden").indexOf("S"));else;var l=[];for(let e=0;e<n.length;e++){var i=new Object;i.name=o[e],i.value=parseFloat(n[e]).toFixed(2),l.push(i)}var s;s=atributos.getAttribute("data-cores").length<1?["#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8","#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8"]:atributos.getAttribute("data-cores").split("|");for(let e=0;s.length<500;e++)s.push(s[e]);var d={tooltip:{show:!0,confine:!0,trigger:"item"},noDataLoadingOption:{text:"inválido",effect:7},color:s,series:[{type:"pie",radius:["50%","70%"],data:l,itemStyle:{}}]};a.setOption(d),a.on("click",clicker)}function chartMap(e){var t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e);let r="";e.split("trl").length>1&&(r=e.split("trl")[1]),call("charout","prm_parametros="+t.getAttribute("data-parametros")+"&prm_micro_visao="+a.getAttribute("data-visao")+"&prm_objeto="+e+"&prm_screen="+tela+"&prm_usuario="+USUARIO+"&prm_cd_goto="+r).then(function(e){t.innerHTML=e}).then(function(){var r=document.getElementById("ctnr_"+e),n=r.closest("article");if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&null!=n){if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&n.clientHeight<500)var o=500;else o=n.clientHeight;r.style.height=o-40+"px"}if("mobile"==mobilecheck()&&(r.style.width="100%"),document.getElementById(e+"_ERR"))document.getElementById("ctnr_"+e).innerHTML=document.getElementById(e+"_ERR").innerHTML;else{var l=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer});if(t.children[0]&&!t.children[1].classList.contains("err")){var i=t.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," ");i=i.substr(0,i.trim().length-1);try{var s=JSON.parse("{"+i+"}")}catch(e){return void alerta("feed-fixo",TR_QR_IN)}var d=[],c=[],m=[],u=[];for(let e in s){if(Array.isArray(s[e].valores)){var p=[];for(let t in s[e].valores){var g=new Object;g.grupo=s[e].valores[t].grupo,g.value=parseFloat(s[e].valores[t].valor),p.push(g)}u.push(p),d.push(s[e].valores[0].valor)}else d.push(s[e].valores);c.push(s[e].colunas),m.push(s[e].cod)}var f=0,_=document.getElementById("atributos_"+e);if("S"==_.getAttribute("data-max"))var v=0;else v=parseInt(a.getAttribute("data-maximo"));var y,h,b,E=a.getAttribute("data-agrupadores"),I=(a.getAttribute("data-formato"),a.getAttribute("data-heatmap"),_.getAttribute("data-decimal")),x=[],A=[],B=!0,L=_.getAttribute("data-abreviacao"),N=_.getAttribute("data-font_weigth"),C=_.getAttribute("data-font_family");_.getAttribute("data-hidden")&&-1!=_.getAttribute("data-hidden").indexOf("S")&&(B=!1),get(e).querySelector(".lista_cidades")?(y=get(e).querySelector(".lista_cidades").children,h="cidade",b=!1):get(e).querySelector(".lista_regioes")?(y=get(e).querySelector(".lista_regioes").children,h="regioes",b=B):(y=get(e).querySelector(".lista_estados").children,h="estado",b=B);for(let e=0;e<y.length;e++){var T=new Object;isNaN(m[0])&&"cidade"==h?x.push(y[e].innerHTML.trim().replace("name","cod").replace("nome","name")):x.push(y[e].innerHTML.trim());var S=y[e].getAttribute("data-sigla"),w=y[e].getAttribute("data-sigla2"),k=y[e].getAttribute("data-nome");isNaN(m[0])&&"cidade"==h?(T.name=w,-1!=m.indexOf(w)&&(T.value=parseFloat(d[m.indexOf(w)]).toFixed(2),T.mais_valores=u[m.indexOf(w)]),T.sigla=w):(T.name=S,T.value=parseFloat(d[m.indexOf(S)]).toFixed(2),T.mais_valores=u[m.indexOf(S)],T.sigla=S),T.nome=k,isNaN(T.value)||("S"==_.getAttribute("data-max")&&parseInt(T.value)>v&&(v=parseInt(T.value)),parseInt(T.value)<f&&(f=parseInt(T.value))),A.push(T)}f>0&&(f=0);var R='{ "type": "FeatureCollection", "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } }, "features": ['+x.join(",").replace(/[\n\t]+/g,"")+'], "UTF8Encoding":false }';echarts.registerMap("mapa",R);var O=_.getAttribute("data-cores").split("|"),j=O.length;j<2&&(j=(O="#87CEFA|#B5C334|#FF6347|#C1232B".split("|")).length);var M={textStyle:{fontFamily:C,fontWeight:N},tooltip:{show:!0,trigger:"item",formatter:function(e){if(e){if(e.data.nome){if(e.data.mais_valores){var t='<p style="text-align: left;">';let r=I.split("|");var a=null;for(let n=0;n<e.data.mais_valores.length;n++)a=I.length>n?r[n]:r[0],t+=labelTooltip(e.data.mais_valores[n].grupo,e.data.mais_valores[n],parseFloat(a),L,"N",0,"S","",""),t+="<br>";return t+="</p>"}return labelTooltip(e.data.nome,e.data,I,L,"N",0,"S","","")}return labelTooltip(e.name,e,I,L,"N",0,"S","","")}}},noDataLoadingOption:{text:"inválido",effect:7},dataRange:{left:"left",top:"bottom",min:f,max:v,splitNumber:j,inRange:{color:O},text:[E.split("|")[0],""],calculable:!0},visualMap:{min:f,max:v,splitNumber:j,inRange:{color:O},text:[E,""],calculable:!0,formatter:function(e){return e.toLocaleString()}},series:[{name:"coluna",type:"map",map:"mapa",roam:!0,label:{normal:{show:b,formatter:function(e){return"regioes"==h?e.data.nome:e.data.sigla}},emphasis:{show:b,formatter:function(e){return"estado"==h?e.data.sigla?e.data.sigla:e.data.nome:"regioes"==h?e.data.nome:""}}},data:A}]};if(l.setOption(M),l.on("click",clicker),l.dispatchAction({type:"dataZoom"}),document.getElementById(e+"more")){var D=document.createElement("a");D.style.setProperty("width","18px"),D.style.setProperty("height","18px"),D.style.setProperty("float","left"),D.style.setProperty("margin","4px 0 0 4px"),D.setAttribute("download",document.getElementById(e+"_ds").innerText.replace(/ /g,"_").toLowerCase()),M.title={text:document.getElementById(e+"_ds").innerText,left:"center",top:0},l.setOption(M,{notMerge:!0}),D.href=l.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#fff"}),M.title={},l.setOption(M,{notMerge:!0}),document.getElementById(e+"more")&&document.getElementById(e+"more").querySelector(".page_png").appendChild(D)}}}})}function chartMapMultiplo(e){var t=document.getElementById("dados_"+e),a=echarts.init(document.getElementById("ctnr_"+e)),r=document.getElementById("gxml_"+e);if(r.children[1]){var n=r.children[0].innerHTML.replace("|",""),o=r.children[1].innerHTML.replace("|","").split("|"),l=parseInt(t.getAttribute("data-maximo")),i=t.getAttribute("data-json"),s=r.children[2].innerHTML.replace("|","").split("|"),d=t.getAttribute("data-agrupadores").replace("<BR>"," ").indexOf("|");if(atributos.getAttribute("data-hidden"))if(-1!=atributos.getAttribute("data-hidden").indexOf("S"));else;if(-1!=d){d=n.match(/\[[a-zA-Z0-9$_ ().\%\\\/\u00C0-\u017F]+\]/g);var c=[],m=0;for(let e=0;e<d.length;e++)-1==c.indexOf(d[e].replace("[","").replace("]",""))&&(c[m]=d[e].replace("[","").replace("]","").replace("(BR)"," ").replace("<BR>"," "),m+=1)}ajax("return","download","arquivo="+i+".json",!1),echarts.registerMap("mapa",respostaAjax);var u=[];for(let e=0;e<c.length;e++){var p=[];for(let t=0;t<n.length;t++){var g=new Object;g.agrupador=c[e],g.name=o[t],g.value=parseFloat(n[t]).toFixed(2),p.push(g)}u.push(p)}var f={tooltip:{show:!0,confine:!0,trigger:"item",formatter:function(e){if(e)return"NaN"!=Number(e.value).toLocaleString()?e.name+": "+Number(e.value).toLocaleString():e.name}},noDataLoadingOption:{text:"inválido",effect:7},dataRange:{left:"left",top:"bottom",min:0,max:l,calculable:!0},series:[{name:c,type:"map",map:"mapa",roam:!1,label:{normal:{show:!0,formatter:function(e){return s[e.dataIndex]?s[e.dataIndex]:" "}},emphasis:{show:!0}},data:p}]};a.setOption(f),a.on("click",clicker)}}function chartPercent(e){if(document.getElementById("valores_"+e).getAttribute("data-meta").length>0){var t=document.getElementById("valores_"+e),a=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer}),r=(document.getElementById(e+"_vl"),parseInt(t.getAttribute("data-meta").replace(/\'/g,"")));0==r&&(r=1);var n=t.getAttribute("data-color"),o=document.getElementById(e+"_mt").style.getPropertyValue("color"),l=parseInt(t.getAttribute("data-valor")),i=[];0==o.trim().length&&(o=n);var s={normal:{color:"#dedede",borderColor:"#777",borderWidth:1,label:{textStyle:{color:o,fontWeight:"bold",fontSize:1,baseline:"top"},show:!1,position:"top"},labelLine:{show:!1}},emphasis:{color:"#cdcdcd"}},d={normal:{color:o,borderColor:"#777",borderWidth:1,label:{show:!0,position:"center",formatter:"{c}%",textStyle:{color:o,fontWeight:"bold",fontSize:15,baseline:"top"}},labelLine:{show:!1}}},c={normal:{color:o,label:{formatter:function(e){return parseFloat(e.value).toFixed(2)+"%"},textStyle:{baseline:"top"}}}},m=new Object;m.name="outro",m.value=l<r?100-parseFloat(l/r*100).toFixed(2):0,m.itemStyle=s,i.push(m);var u=new Object;u.name="",u.value=parseFloat(l/r*100).toFixed(2),u.itemStyle=d,i.push(u);var p={noDataLoadingOption:{text:"inválido",effect:7},series:[{type:"pie",radius:["50%","70%"],data:i,itemStyle:c}]};a.setOption(p)}}function chartGauge(e){var t=document.getElementById("ctnr_"+e),a=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer,height:document.getElementById("ctnr_"+e).clientHeight,width:document.getElementById("ctnr_"+e).clientWidth}),r=document.getElementById("atributos_"+e),n=parseFloat(document.getElementById("valor_"+e).title),o=parseInt(r.getAttribute("data-raio")),l=parseFloat(r.getAttribute("data-min")),i=parseFloat(r.getAttribute("data-max")),s=r.getAttribute("data-valores").split("|"),d=r.getAttribute("data-cores").split("|"),c=["#87CEFA","#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0","#FF7F50","#00D878","#AAAAAA","#DDDD55","#065182","#DA70D6","#FF6347","#AA5511","#CCCC44","#DA7400","#6663BB","#FAE982","#F5C65D","#AAA43B","#6055DD"],m=r.getAttribute("data-hidden"),u=r.getAttribute("data-font_weigth"),p=r.getAttribute("data-font_family"),g=!0,f=r.getAttribute("data-um"),_=r.getAttribute("data-meta_cor"),v=parseFloat(r.getAttribute("data-meta_inicio")),y=parseFloat(r.getAttribute("data-meta_fim")),h=r.getAttribute("data-meta_nome"),b=r.getAttribute("data-meta_marcador"),E=r.getAttribute("data-alinhamento_raio"),I=document.getElementById("ctnr_"+e),x=I.closest("article");if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&null!=x){if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&x.clientHeight<500)var A=500;else A=x.clientHeight;I.style.height=A-40+"px"}"mobile"==mobilecheck()&&(I.style.width="100%"),"S"==m&&(g=!1);var B=5;s.length>0&&(B=s.length);var L,N,C,T=[],S=[];if(0==r.getAttribute("data-valores").length)S=[.25,c[0]],T.push(S),S=[.5,c[1]],T.push(S),S=[.75,c[2]],T.push(S),S=[1,c[3]],T.push(S);else{let e=100/(s[B-1]-l);var w=0;for(let t=0;t<B;t++)w+=L=0==t?parseFloat(s[t]-l)*e:parseFloat(s[t]-s[t-1])*e,S=d[t]?[w/100,d[t]]:[w/100,c[t]],T.push(S)}L<1&&(S=[1,"#999"],T.push(S));var k="N";o<190?(N=t.clientWidth/3,C="70%"):(N=t.clientWidth/4,C="50%"),l>i&&(k="S"),isNaN(v)&&(v=0),isNaN(y)&&(y=0),0==y&&0!=v&&(y=i),y<v&&(y=v),_&&0!=_.length||(_="#000000"),h&&h.length>0?h+="\n":h="";var R,O,j=0,M=i,D=0,H="",P="",F=0;"S"==k&&(M=l),"S"==E&&o>180&&o<=360?(R=180+(o-180)/2,O=0-(o-180)/2):(R=o,O=0),0!=v&&(j=(v-l)/(i-l),H=h+v.toString()+f),0!=y&&(M=(y-l)/(i-l),P=h+y.toString()+f,y==i&&(P="")),"S"==k&&(D=j,j=M,M=D);var q=(i-l)/10/10,U=0,z=0;if(0!=q){var W=Math.round((v-l)/q),Y=Math.round((y-l)/q);U=parseFloat((l+W*q).toFixed(10)),z=parseFloat((l+Y*q).toFixed(10))}var X=5;F=3;b||(b="NENHUM"),"PONTO"==b||"TRACO"==b?(X=2,P="","N"==k?M=j+.005:j=M-.005,"TRACO"==b&&(F+=50)):"NENHUM"==b&&(X=0,_="transparent");var G=0;G=h.length>0?-40:-30,"NENHUM"==b&&(G+=X),0==j&&(j=0,M=0,H="",P="",F=0,G=0);var V={textStyle:{fontFamily:p,fontWeight:u},series:[{splitNumber:B,type:"gauge",startAngle:R,endAngle:O,center:["50%",C],radius:N,min:l,max:i,axisLine:{lineStyle:{width:50,color:T}},axisTick:{distance:-30,length:8,lineStyle:{color:"#EEE",width:2,opacity:"0.5"},show:!1},splitLine:{distance:-30,length:40,lineStyle:{color:"#EEE",width:4,opacity:"0.2"},show:!1},axisLabel:{color:"auto",distance:46,fontSize:12,formatter:function(e){return Number(parseFloat(e)).toLocaleString()},show:g},pointer:{icon:"triangle",itemStyle:{color:"#333"},length:"80%",width:14,offsetCenter:[0,"0%"]},anchor:{show:!0,showAbove:!0,size:16,itemStyle:{borderWidth:7,color:"#333",borderColor:"#333"}},detail:{show:!1},data:[{value:n,name:""}]},{type:"gauge",startAngle:R,endAngle:O,center:["50%",C],radius:N+X,min:l,max:i,splitNumber:100,splitLine:{length:0},axisTick:{length:0},axisLine:{lineStyle:{width:F,color:[[j,"transparent"],[M,_],[1,"transparent"]]}},axisLabel:{distance:G,color:"#1C1C1C",fontSize:12,formatter:function(e){return e==U?H:e==z?P:""}}}]};a.setOption(V)}function chartSankey(e){var t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e),r=document.getElementById("atributos_"+e),n=document.getElementById("ctnr_"+e),o=n.closest("article");if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&null!=o){if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&o.clientHeight<500)var l=500;else l=o.clientHeight;n.style.height=l-40+"px"}"mobile"==mobilecheck()&&(n.style.width="100%");let i="";if(e.split("trl").length>1&&(i=e.split("trl")[1]),document.getElementById(e+"_ERR"))return document.getElementById("ctnr_"+e).innerHTML=document.getElementById(e+"_ERR").innerHTML,!1;if(!a||!t)return document.getElementById("ctnr_"+e).innerHTML="Erro buscando dados para geração do gráfico.",!1;if(eData=t.children[0],eLink=t.children[1],!eData||!eLink)return document.getElementById("ctnr_"+e).innerHTML="Erro buscando dados para geração do gráfico.",!1;try{var s=JSON.parse(eData.innerHTML.replace(/(\r\n|\n|\r)/g," "))}catch(t){return document.getElementById("ctnr_"+e).innerHTML="Erro no formado dos dados dos agrupadores gerados para o gr&aacute;fico.",!1}try{var d=JSON.parse(eLink.innerHTML.replace(/(\r\n|\n|\r)/g," "))}catch(t){return document.getElementById("ctnr_"+e).innerHTML="Erro no formado dos dados dos links gerados para o gr&aacute;fico.",!1}var c=["#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8","#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8"],m=r.getAttribute("data-orientacao"),u=r.getAttribute("data-linha_cor"),p=parseInt(r.getAttribute("data-linha_curvatura"))/100,g=r.getAttribute("data-linha_opacidade").replace(",","."),f=parseInt(r.getAttribute("data-espaco_dim")),_=r.getAttribute("data-alinhamento"),v=r.getAttribute("data-label_posicao"),y=r.getAttribute("data-label_conteudo"),h=r.getAttribute("data-label_valor"),b=r.getAttribute("data-label_rotacao"),E=r.getAttribute("data-label_fontSize"),I=r.getAttribute("data-label_fontFamily"),x=r.getAttribute("data-um"),A=r.getAttribute("data-decimal"),B=r.getAttribute("data-abreviacao"),L=r.getAttribute("data-cores");L.length>1&&(c=L.split("|"));var N=function(e,t,a){let r={formatter:function(r){let n="";return labelTooltip(n="C"==y||0==r.name.split("|")[2].trim().length?r.name.split("|")[1]:"D"==y?r.name.split("|")[2]:r.name.split("|")[1]+"-"+r.name.split("|")[2],r,t,a,"N",0,"S",e,"")}};return r},C=0;for(let e=0;e<s.length;e++)C>c.length?C=0:C+=1,s[e].itemStyle={color:c[C]},s[e].tooltip=N(x,A,B);var T=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer,height:document.getElementById("ctnr_"+e).clientHeight,width:document.getElementById("ctnr_"+e).clientWidth}),S={tooltip:{trigger:"item",triggerOn:"mousemove"},animation:!0,series:{type:"sankey",orient:m,nodeAlign:_,nodeGap:f,tooltip:{formatter:function(e,t,a){let r={};return r=function(r){let n=r.name.split(">")[0].trim(),o=r.name.split(">")[1].trim();return labelTooltip(n=(n="C"==y||0==n.split("|")[2].trim().length?n.split("|")[1]:"D"==y?n.split("|")[2]:n.split("|")[1]+"-"+n.split("|")[2])+" => "+(o="C"==y||0==o.split("|")[2].trim().length?o.split("|")[1]:"D"==y?o.split("|")[2]:o.split("|")[1]+"-"+o.split("|")[2]),r,t,a,"N",0,"S",e,"")}}(x,A,B)},label:{position:v,rotate:b,fontSize:E,fontFamily:I,backgroundColor:"transparent",formatter:function(e,t,a,r){let n={};return n=function(r){let n="";return n="C"==y||0==r.name.split("|")[2].trim().length?r.name.split("|")[1]:"D"==y?r.name.split("|")[2]:r.name.split("|")[1]+"-"+r.name.split("|")[2],"N"==h?n:labelTooltip(n,r,t,a,"N",0,"S",e,"")}}(x,A,B)},lineStyle:{color:u,curveness:p,opacity:g},emphasis:{focus:"adjacency"},data:s,links:d}};T.setOption(S),T.on("click",clicker),setTimeout(function(){if(document.getElementById(e+"more")){var t=document.createElement("a");t.classList.add("download_button"),t.setAttribute("download",document.getElementById(e+"_ds").innerText.replace(/ /g,"_").toLowerCase()),S.title={text:document.getElementById(e+"_ds").innerText,left:"center",top:0},T.setOption(S,{notMerge:!0}),t.href=T.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#FFF"}),S.title={},T.setOption(S,{notMerge:!0}),document.getElementById(e+"more")&&document.getElementById(e+"more").querySelector(".page_png").appendChild(t)}},1500)}function chartScatter(x){var gxml=document.getElementById("gxml_"+x),dados=document.getElementById("dados_"+x),atributos=document.getElementById("atributos_"+x),divObj=document.getElementById("ctnr_"+x),article=divObj.closest("article");if("AUTO"==document.getElementById("atributos_"+x).getAttribute("data-altura").toUpperCase()&&null!=article){if("AUTO"==document.getElementById("atributos_"+x).getAttribute("data-altura").toUpperCase()&&article.clientHeight<500)var alturaElemento=500;else var alturaElemento=article.clientHeight;divObj.style.height=alturaElemento-40+"px"}var checkMobile=mobilecheck();"mobile"==checkMobile&&(divObj.style.width="100%");let cd_goto="";x.split("trl").length>1&&(cd_goto=x.split("trl")[1]);var colunas=dados.getAttribute("data-coluna").replace("(BR)"," ").replace("<BR>"," ").split("|"),agrupadores=dados.getAttribute("data-agrupadores").replace("(BR)"," ").replace("<BR>"," ").split("|");if(document.getElementById(x+"_ERR"))return document.getElementById("ctnr_"+x).innerHTML=document.getElementById(x+"_ERR").innerHTML,!1;if(!dados||!gxml)return document.getElementById("ctnr_"+x).innerHTML="Erro buscando dados para geração do gráfico.",!1;if(!gxml.children[0]||!gxml.children[1])return document.getElementById("ctnr_"+x).innerHTML="Erro buscando dados para geração do gráfico.",!1;var jsonLista=gxml.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," "),jsonListaAux=gxml.children[1].innerHTML.replace(/(\r\n|\n|\r)/g," ");try{var jsonParsed=JSON.parse("{"+jsonLista+"}"),jsonAux=JSON.parse(jsonListaAux)}catch(e){return void alerta("",TR_QR_IN)}var maiorX=jsonAux.maior_x,menorX=jsonAux.menor_x,maiorY=jsonAux.maior_y,menorY=jsonAux.menor_y,maiorDim=jsonAux.maior_dim,cores_ponto=["#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8","#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8"],labelYpos=atributos.getAttribute("data-label_ypos"),labelXpos=atributos.getAttribute("data-label_xpos"),labelDisYpos=atributos.getAttribute("data-label_dis_ypos"),labelDisXpos=atributos.getAttribute("data-label_dis_xpos"),legendaExibir=atributos.getAttribute("data-legenda_exibir"),axisXmax=atributos.getAttribute("data-axis_x_max"),axisXmin=atributos.getAttribute("data-axis_x_min"),axisYmax=atributos.getAttribute("data-axis_y_max"),axisYmin=atributos.getAttribute("data-axis_y_min"),labelPosicao=atributos.getAttribute("data-label_posicao"),labelConteudo=atributos.getAttribute("data-label_conteudo"),pontoDimensao=parseInt(atributos.getAttribute("data-ponto_dimensao")),labelRotacao=atributos.getAttribute("data-label_rotacao"),labelFontSize=atributos.getAttribute("data-label_fontSize"),labelCor=atributos.getAttribute("data-label_cor"),labelFontFamily=atributos.getAttribute("data-label_fontFamily"),valorUM=atributos.getAttribute("data-um").split("|"),valorDecimal=atributos.getAttribute("data-decimal"),valorAbreviacao=atributos.getAttribute("data-abreviacao"),espacamento=atributos.getAttribute("data-espacamento").split("|"),grade=atributos.getAttribute("data-grade"),sombraPonto=atributos.getAttribute("data-sombra_ponto"),coresPonto=atributos.getAttribute("data-cores_ponto");coresPonto.length>1&&(cores_ponto=coresPonto.split("|"));var cores_degrade=[],cores_sombra=[],pl_sombra=.8,pl_degrade=1.3;for(let e in cores_ponto){var color=cores_ponto[e],R=parseInt(color.substring(1,3),16),G=parseInt(color.substring(3,5),16),B=parseInt(color.substring(5,7),16);RR=parseInt(R*pl_sombra),GG=parseInt(G*pl_sombra),BB=parseInt(B*pl_sombra),RR=Math.round(RR>0?RR:0),GG=Math.round(GG>0?GG:0),BB=Math.round(BB>0?BB:0),cores_sombra.push("rgba("+RR+","+GG+","+BB+",0.3)"),RR=parseInt(R*pl_degrade),GG=parseInt(G*pl_degrade),BB=parseInt(B*pl_degrade),RR=Math.round(RR<255?RR:255),GG=Math.round(GG<255?GG:255),BB=Math.round(BB<255?BB:255),cores_degrade.push("rgba("+RR+","+GG+","+BB+")")}let arrgrid=[];if(espacamento.length>0&&espacamento.length<5)for(let e=0;e<espacamento.length;e++)arrgrid[e]=espacamento[e];let axisX={splitLine:{show:!1}},axisY={splitLine:{show:!1}};if("N"!=grade&&("A"!=grade&&"V"!=grade||(axisX.splitLine={lineStyle:{type:"dashed"}}),"A"!=grade&&"H"!=grade||(axisY.splitLine={lineStyle:{type:"dashed"}})),axisXmax.length>0&&(axisX.max=Math.round(eval(axisXmax.toUpperCase().replace("[MAIORVALOR]",maiorX)))),axisYmax.length>0&&(axisY.max=Math.round(eval(axisYmax.toUpperCase().replace("[MAIORVALOR]",maiorY)))),axisXmin.length>0&&(axisX.min=Math.round(eval(axisXmin.toUpperCase().replace("[MENORVALOR]",menorX)))),axisYmin.length>0&&(axisY.min=Math.round(eval(axisYmin.toUpperCase().replace("[MENORVALOR]",menorY)))),"ocultar"!=labelYpos&&(axisY.name=agrupadores[0],axisY.nameLocation=labelYpos,labelDisYpos.length>0))try{axisY.nameGap=parseInt(labelDisYpos)}catch{}if("ocultar"!=labelXpos&&(axisX.name=agrupadores[1],axisX.nameLocation=labelXpos,labelDisXpos.length>0))try{axisX.nameGap=parseInt(labelDisXpos)}catch{}var labelFormatter=function(){let e={};return e=function(e){let t="";return t="C"==labelConteudo||0==e.data[6].length?e.data[5]:"D"==labelConteudo?e.data[6]:e.data[5]+"-"+e.data[6]}},TooltipFormatter=function(){let e={};return e=function(e){let t="",a={},r="",n=[],o=[];n=colunas.concat(agrupadores),t=e.data[3],e.data[4].length>0&&e.data[3]!=e.data[4]&&(t=t+" - "+e.data[4]),o.push(t),e.data[5].length>0&&(t=e.data[5],e.data[6].length>0&&e.data[5]!=e.data[6]&&(t=t+" - "+e.data[6]),o.push(t)),valorUM.length>=1?um=valorUM[0]:um="",a.value=e.data[0],r=labelTooltip("",a,valorDecimal,valorAbreviacao,"N",0,"S",um,""),o.push(r),valorUM.length>=2?um=valorUM[1]:um="",a.value=e.data[1],r=labelTooltip("",a,valorDecimal,valorAbreviacao,"N",0,"S",um,""),o.push(r),e.data[2].length>0&&(valorUM.length>=3?um=valorUM[2]:um="",a.value=e.data[2],r=labelTooltip("",a,valorDecimal,valorAbreviacao,"N",0,"S",um,""),o.push(r)),t='<table class="tooltip-grafico">',t+="<thead><tr>";for(let e=0;e<n.length;e++)t=t+"<th>"+n[e]+"</th>";t+="</tr></thead>",t+="<tbody><tr>";for(let e=0;e<n.length;e++)t=t+"<td>"+o[e]+"</td>";return t+="</tr></tbody>",t+="</table>"}},serieSymbolSize=function(){let e={};return e=function(e){let t=0;return pontoDimensao>0&&(t=maiorDim>0?pontoDimensao/maiorDim*parseFloat(e[2]):pontoDimensao),t}};let serie={},series=[],label_legend=[],name="";for(let e in jsonParsed)serie={},name="N"==labelConteudo||"C"==labelConteudo||0==jsonParsed[e].name.length?jsonParsed[e].cod:"D"==labelConteudo?jsonParsed[e].name:jsonParsed[e].cod+"-"+jsonParsed[e].name,label_legend.push(name),serie.name=name,serie.type="scatter",serie.data=jsonParsed[e].valores,serie.symbolSize=serieSymbolSize(),serie.itemStyle="S"==sombraPonto?{shadowBlur:8,shadowColor:cores_sombra[e],shadowOffsetY:5,color:new echarts.graphic.RadialGradient(.4,.3,1,[{offset:0,color:cores_ponto[e]},{offset:1,color:cores_ponto[e+1]}])}:{color:cores_ponto[e]},"N"!=labelConteudo&&(serie.label={show:!0,rotate:labelRotacao,color:labelCor,fontSize:labelFontSize,fontFamily:labelFontFamily,formatter:labelFormatter(labelConteudo),position:labelPosicao.toLowerCase().replace("margin",""),minMargin:2}),0==labelPosicao.toLowerCase().indexOf("margin")&&(serie.labelLine={show:!0,length2:5,lineStyle:{color:labelCor}},"margintop"==labelPosicao.toLowerCase()?(serie.labelLayout={y:30,align:"center",hideOverlap:!0,moveOverlap:"shiftX"},arrgrid[0]):serie.labelLayout=function(){return{x:myChart.getWidth()-100,moveOverlap:"shiftY"}}),series.push(serie);"N"==legendaExibir&&(label_legend=[]);var myChart=echarts.init(document.getElementById("ctnr_"+x),null,{renderer:chartRenderer,height:document.getElementById("ctnr_"+x).clientHeight,width:document.getElementById("ctnr_"+x).clientWidth}),option={xAxis:axisX,yAxis:axisY,grid:{y:arrgrid[0],x2:arrgrid[1],y2:arrgrid[2],x:arrgrid[3]},legend:{data:label_legend},tooltip:{showDelay:0,formatter:TooltipFormatter()},animation:!0,series:series};myChart.setOption(option),myChart.on("click",clicker),setTimeout(function(){if(document.getElementById(x+"more")){var e=document.createElement("a");e.classList.add("download_button"),e.setAttribute("download",document.getElementById(x+"_ds").innerText.replace(/ /g,"_").toLowerCase()),option.title={text:document.getElementById(x+"_ds").innerText,left:"center",top:0},option.legend.top=20,option.grid.y=50,myChart.setOption(option,{notMerge:!0}),e.href=myChart.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#FFF"}),option.title={},option.legend.top="",option.grid.y=arrgrid[0],myChart.setOption(option,{notMerge:!0}),document.getElementById(x+"more")&&document.getElementById(x+"more").querySelector(".page_png").appendChild(e)}},1500)}function chartRadar(e){var t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e),r=document.getElementById("atributos_"+e),n=document.getElementById("ctnr_"+e),o=n.closest("article");if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&null!=o){if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&o.clientHeight<500)var l=500;else l=o.clientHeight;n.style.height=l-40+"px"}"mobile"==mobilecheck()&&(n.style.width="100%");let i="";if(e.split("trl").length>1&&(i=e.split("trl")[1]),document.getElementById(e+"_ERR"))return n.innerHTML=document.getElementById(e+"_ERR").innerHTML,!1;if(!a||!t)return n.innerHTML="Erro buscando dados para geração do gráfico.",!1;if(!t.children[0])return n.innerHTML="Erro buscando dados para geração do gráfico.",!1;var s=t.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," "),d=t.children[1].innerHTML.replace(/(\r\n|\n|\r)/g," ");try{var c=JSON.parse(s),m=JSON.parse(d)}catch(e){return void(n.innerHTML="Erro carregando dados, sem dados ou formato de dados inconsistente.")}var u=["#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8","#67BAE9","#2F85C6","#D7BD75","#EE8D3D","#5A965A","#88C2C0","#205FAA","#3199B7","#EDC664","#F79C5E","#55AA55","#117A72","#CC5A0D","#F5A721","#45BCC1","#D2C6C9","#3199B7","#369867","#67BAE9","#045E9B","#DD722A","#8CD0E5","#9ACC99","#F4E626","#026536","#1FB5A3","#F6D136","#257E9E","#E87D34","#F6E537","#0A4680","#4F792F","#4A68D8","#45BCC1","#F98F38","#CCB636","#1686A8","#228B22","#1D5C96","#ED6000","#0C9696","#E8C73F","#507944","#3A7BD8","#C66620","#69AFF4","#63AF61","#CCD649","#D1A14B","#4D72CE","#00AFD8"],p=a.getAttribute("data-agrupadoresreal").split("|"),g=r.getAttribute("data-label_conteudo"),f=r.getAttribute("data-label_fontSize"),_=r.getAttribute("data-label_cor"),v=r.getAttribute("data-label_fontFamily"),y=r.getAttribute("data-um").split("|"),h=r.getAttribute("data-decimal"),b=r.getAttribute("data-abreviacao"),E=r.getAttribute("data-radar_forma"),I=r.getAttribute("data-radar_raio"),x=r.getAttribute("data-area_preencher"),A=r.getAttribute("data-mostrar_tooltip"),B=r.getAttribute("data-faixas_qtd"),L=r.getAttribute("data-cores"),N=r.getAttribute("data-faixas_cores"),C=r.getAttribute("data-linhas_cor"),T=r.getAttribute("data-max");I=0==I.length?"75":I.match(/[0-9]+/)[0],L.length>1&&(u=L.split("|"));var S=[];N.length>0&&(S=N.split("|"));var w=[];for(let e in u)w.push(hexToRgba(u[e],"0.7",0));let k={},R=[],O="";dataMaxima=0;for(let e in m){k={},O="",m[e].dados[0].length>0&&(O="N"==g||"C"==g||0==m[e].dados[1].length?m[e].dados[0]:"D"==g?m[e].dados[1]:m[e].dados[0]+"-"+m[e].dados[1]),k.cod=m[e].dados[0],k.col=m[e].dados[2],k.name=(O.length>0?O+"-":"")+m[e].name,k.value=m[e].valores,dataMaxima<Number(Math.max(...k.value).toFixed(2))?(k.max=Number(Math.max(...k.value).toFixed(2)),dataMaxima=Number(Math.max(...k.value).toFixed(2))):k.max=dataMaxima,"S"==x&&(k.areaStyle={color:w[e]}),k.um="";for(let t in p)p[t]==m[e].dados[3]&&t<y.length&&(k.um=y[t]);"AUTO"!==T.toUpperCase()&&(k.value=k.value.map(e=>e>T?null:e)),R.push(k)}try{"AUTO"!==T.toUpperCase()&&(k.max=T)}catch(e){console.log("Erro ao atribuir dataMax: "+e)}for(let e in c)"C"==g||0==c[e].name.length?c[e].name=c[e].cod:"A"==g&&(c[e].name=c[e].cod+"-"+c[e].name),c[e].max=k.max;var j=function(e){if("S"==A){let r="",o="",l={};r="<div>",r=(r+='<a class="fechar-tooltip"></a>')+'<span class="tooltip-radar-title">'+e.data.name+"</span>",r+="</div><br/>",r+='<table class="tooltip-radar">';for(let t in e.value)l.value=e.value[t],null!=(o=labelTooltip("",l,h,b,"N",0,"S",e.data.um,""))&&""!=o||(o="Excede o valor máximo"),r=r+"<tr><td align=left cellspacing=0>"+c[t].name+"</td><td align=right>"+o+"</td></tr>";r+="</table>";var t=document.createElement("div");if(t.classList.add("tooltip-radar"),t.innerHTML=r,n){var a=n.querySelector(".tooltip-radar");a&&n.removeChild(a),t.addEventListener("click",function(e){e.target.classList.contains("fechar-tooltip")&&n.removeChild(t)}),n.appendChild(t)}return r}},M=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer,height:document.getElementById("ctnr_"+e).clientHeight,width:document.getElementById("ctnr_"+e).clientWidth}),D={color:u,legend:{},tooltip:{show:"S"==A,trigger:"axis",position:"absolute",extraCssText:"max-height: 98%; overflow-y: auto; font:8px",formatter:j},radar:{radius:I+"%",shape:E,indicator:c,startAngle:90,splitNumber:B,splitArea:{areaStyle:{color:S,shadowColor:"rgba(0, 0, 0, 0.2)",shadowBlur:10}},axisName:{formatter:"{value}",color:_,fontFamily:v,fontSize:f},axisLine:{lineStyle:{color:C}},splitLine:{lineStyle:{color:C}}},series:[{type:"radar",emphasis:{lineStyle:{width:4},focus:"none"},data:R}]};M.setOption(D),M.on("click",function(e){"series"===e.componentType&&"radar"===e.seriesType&&M.setOption({tooltip:{formatter:j(e)}})}),setTimeout(function(){if(document.getElementById(e+"more")){var t=document.createElement("a");t.classList.add("download_button"),t.setAttribute("download",document.getElementById(e+"_ds").innerText.replace(/ /g,"_").toLowerCase()),t.href=M.getDataURL({type:"png",pixelRatio:1,backgroundColor:"#FFF"}),document.getElementById(e+"more")&&document.getElementById(e+"more").querySelector(".page_png").appendChild(t)}},1500)}function chartCalendario(e){var t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e),r=document.getElementById("atributos_"+e),n=document.getElementById("ctnr_"+e),o=n.closest("article");if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&null!=o){if("AUTO"==document.getElementById("atributos_"+e).getAttribute("data-altura").toUpperCase()&&o.clientHeight<500)var l=500;else l=o.clientHeight;n.style.height=l-40+"px"}"mobile"==mobilecheck()&&(n.style.width="100%");let i="";if(e.split("trl").length>1&&(i=e.split("trl")[1]),document.getElementById(e+"_ERR"))return n.innerHTML=document.getElementById(e+"_ERR").innerHTML,!1;if(!a||!t)return n.innerHTML="Erro buscando dados para geração do gráfico.",!1;if(!t.children[0])return n.innerHTML="Erro buscando dados para geração do gráfico.",!1;var s=t.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," "),d=t.children[1].innerHTML.replace(/(\r\n|\n|\r)/g," ");try{s=s.replace(",]","]");var c=JSON.parse(s)}catch(e){return void(n.innerHTML="Erro carregando dados, sem dados ou formato de dados inconsistente.")}var m=a.getAttribute("data-agrupadores").split("|"),u=r.getAttribute("data-orientacao_calendario"),p=r.getAttribute("data-valor_no_calendario"),g=r.getAttribute("data-mostrar_mes"),f=r.getAttribute("data-mostrar_semana"),_=r.getAttribute("data-mostrar_ano"),v=r.getAttribute("data-tam_fonte_mes"),y=r.getAttribute("data-tam_fonte_semana"),h=r.getAttribute("data-tam_fonte_ano"),b=r.getAttribute("data-tam_fonte_geral"),E=r.getAttribute("data-corfraca_calendario"),I=r.getAttribute("data-corforte_calendario"),x=r.getAttribute("data-decimal"),A=document.getElementById("ctnr_"+e).clientWidth,B=document.getElementById("ctnr_"+e).clientHeight;try{x=parseInt(x)}catch(e){}var L=echarts.init(document.getElementById("ctnr_"+e),null,{renderer:chartRenderer,height:document.getElementById("ctnr_"+e).clientHeight,width:document.getElementById("ctnr_"+e).clientWidth});let N=c.map(e=>isNaN(e.values[0].value)?0:e.values[0].value),C=Math.min(...N),T=Math.max(...N);const S=c,w=[];var k=[];for(let e=0;e<S.length;e++)isNaN(S[e].values[0].value)?w.push([S[e].date,0]):w.push([S[e].date,S[e].values[0].value]),k.push([S[e].date,S[e].values]);var R=JSON.parse(d);if(R[0]==R[1])var[O,j]=R[0].split("-").map(Number),M=new Date(O,j-1,1),D=new Date(O,j,0);else{var O,j,[O,j]=R[0].split("-").map(Number),[O,j]=(M=new Date(O,j-1,1),R[1].split("-").map(Number)),H=(O=(D=new Date(O,j,0)).getFullYear())+"-"+(j=String(D.getMonth()+1).padStart(2,"0"))+"-"+String(D.getDate()).padStart(2,"0");R[1]=H}const P=[];let F=new Date(M);for(;F<=D;)P.push(F.toISOString().slice(0,10)),F.setDate(F.getDate()+1);const q=P.map(e=>{const t=k.find(t=>t[0]===e);return t?[t[0],t[1]]:[e,[{value:""}]]});k=q,option={textStyle:{fontSize:b},tooltip:{formatter:function(e){const t=k.find(t=>t[0]===e.data[0]),a=t?t[1]:"";let r='<div style="text-align: left;">';for(let e=0;e<a.length;e++){if(""!=x&&Number.isInteger(x)&&"number"==typeof a[e].value&&!isNaN(a[e].value))try{a[e].value=parseFloat(a[e].value).toFixed(x)}catch(e){}r+=m[e]+" : "+a[e].value+"<br>"}return r+="</div>"}},visualMap:{show:!1,min:C,max:T,calculable:!0,seriesIndex:[1],orient:"horizontal",left:"center",bottom:20,inRange:{color:[E,I],opacity:.3},controller:{inRange:{opacity:.5}}},calendar:[{left:"center",top:"middle",height:B-200,width:A-200,yearLabel:{show:"N"!=_,fontSize:h},orient:u,dayLabel:{show:"N"!=f,fontSize:y,firstDay:1,nameMap:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},monthLabel:{show:"N"!=g,fontSize:v,nameMap:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},range:R[0]==R[1]?R[0]:R}],series:[{type:"scatter",coordinateSystem:"calendar",symbolSize:0,label:{show:!0,formatter:function(e){var t=echarts.number.parseDate(e.value[0]);if(""!==x&&Number.isInteger(x)&&""!==e.value[1][0].value)try{e.value[1][0].value=e.value[1][0].value.toFixed(x)}catch(e){}return"N"!=p?t.getDate()+"\n\n"+e.value[1][0].value:t.getDate()},color:"#000"},data:k,silent:!0},{name:"valor",type:"heatmap",coordinateSystem:"calendar",data:w}]},L.setOption(option),L.on("click",clicker)}var resizerDelay=0;function renderChart(e){if(document.getElementById(e)&&document.getElementById("dados_"+e))switch(document.getElementById("dados_"+e).getAttribute("data-tipo")){case"ORGANOGRAMA":chartGauge(e),activeorga(e,"","");break;case"PONTEIRO":chartGauge(e);break;case"BARRAS":case"COLUNAS":case"LINHAS":chart(e);break;case"PIZZA":chartSlice(e);break;case"ROSCA":chartDonut(e);break;case"VALOR":chartPercent(e);break;case"MAPA":chartMap(e);break;case"SANKEY":chartSankey(e);break;case"SCATTER":chartScatter(e);break;case"RADAR":chartRadar(e);break;case"CALENDARIO":chartCalendario(e)}}function renderChartDirect(e){if(document.getElementById(e)&&document.getElementById("dados_"+e)){var t,a,r=document.getElementById("dados_"+e).getAttribute("data-tipo"),n="";ordem="",document.getElementById("dados_"+e)&&(a=document.getElementById("dados_"+e)).getAttribute("data-agrupador_troca")&&0!=a.getAttribute("data-agrupador_troca").length&&"null"!=a.getAttribute("data-agrupador_troca")&&"N/A"!=a.getAttribute("data-agrupador_troca")&&(ordem=" 1 ASC",document.getElementById(e).querySelector(".ordem")&&"N/A"!=document.getElementById(e).querySelector(".ordem").value&&(ordem=document.getElementById(e).querySelector(".ordem").value),n="&prm_agrupador_troca="+a.getAttribute("data-agrupador_troca")+"&prm_ordem_troca="+ordem);let o="";switch(e.split("trl").length>1&&(o=e.split("trl")[1]),r){case"ORGANOGRAMA":chartGauge(e),activeorga(e,"","");break;case"PONTEIRO":chartGauge(e);break;case"BARRAS":case"COLUNAS":case"LINHAS":t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e),call("charout","prm_parametros="+t.getAttribute("data-parametros")+"&prm_micro_visao="+a.getAttribute("data-visao")+"&prm_objeto="+e+"&prm_screen="+tela+n+"&prm_cd_goto="+o).then(function(e){t.innerHTML=e}).then(function(){chart(e)});break;case"PIZZA":t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e),call("charout","prm_parametros="+t.getAttribute("data-parametros")+"&prm_micro_visao="+a.getAttribute("data-visao")+"&prm_objeto="+e+"&prm_screen="+tela+n+"&prm_cd_goto="+o).then(function(e){t.innerHTML=e}).then(function(){chartSlice(e)});break;case"ROSCA":t=document.getElementById("gxml_"+e),a=document.getElementById("dados_"+e),call("charout","prm_parametros="+t.getAttribute("data-parametros")+"&prm_micro_visao="+a.getAttribute("data-visao")+"&prm_objeto="+e+"&prm_screen="+tela+n+"&prm_cd_goto="+o).then(function(e){t.innerHTML=e}).then(function(){chartDonut(e)});break;case"VALOR":chartPercent(e);break;case"MAPA":chartMap(e);break;case"SANKEY":chartSankey(e);break;case"SCATTER":case"RADAR":chartScatter(e)}}}function heatmap(e){if(document.getElementById(e)){var t={};t.objeto=document.getElementById(e),t.valores=document.getElementById("gxml_"+e).children[0].innerHTML.replace("|","").split("|"),t.zoom=3,t.coluna=t.objeto.getAttribute("data-colunavalor"),t.colunadesc=t.objeto.getAttribute("data-colunadesc"),t.tipo="HEATMAP",t.centro="-28.680601666666668,-49.365805",t.coor=[],t.lastx="",t.lasty="";var a="",r="";if(-1==t.tipo.indexOf("MARCADOR")){for(let e=0;e<t.valores.length;e++)a=t.valores[e].split(",")[1],r=t.valores[e].split(",")[0],a.length>0&&r.length>0&&t.coor.push(new google.maps.LatLng(r,a)),t.lastx=parseFloat(a),t.lasty=parseFloat(r);t.coor}0==t.centro.length?t.centro=new google.maps.LatLng(t.lastx,t.lasty):t.centro=new google.maps.LatLng(t.centro.split(",")[0],t.centro.split(",")[1]),map=new google.maps.Map(t.objeto.children[t.objeto.children.length-1],{center:t.centro,zoom:t.zoom,mapTypeId:"terrain",panControl:!1,streetViewControl:!1,zoomControl:!1}),map.addListener("zoom_changed",function(){setTimeout(function(){t.zoom=map.getZoom(),t.objeto.setAttribute("data-zoom",t.zoom)},2e3)}),map.addListener("center_changed",function(){setTimeout(function(){t.centro=(""+map.getCenter()).replace(/[\)\(]/g,""),t.objeto.setAttribute("data-center",t.centro)},2e3)}),new google.maps.visualization.HeatmapLayer({data:t.coor}).setMap(map)}}function removeTrash(){var e=document.querySelectorAll("._SmartLabel_Container"),t=e.length;for(let a=0;a<t;a++)e[a].parentNode.removeChild(e[a])}function dashboard(e,t,a,r){switch(t){case"insert":call("inserir_objeto","prm_objeto=ARTICLE&prm_screen="+a+"&prm_screen_ant="+document.getElementById(a).getElementsByTagName("article").length).then(function(e){var t=document.createElement("div");t.innerHTML=e,document.getElementById(a).appendChild(t.children[0])}).then(function(){document.querySelector(".moving")&&(document.querySelector(".moving").className="")}).then(function(){dashAjuste(a)});break;case"insertnv1":var n=parseInt(document.querySelector(".movingarticle").style.getPropertyValue("order"))+1;call("inserir_objeto_ant","prm_article=ARTICLE&prm_section="+a+"&prm_pos_ant="+n+"&prm_pos_atual="+document.getElementById(a).getElementsByTagName("article").length).then(function(e){var t=document.createElement("div");t.innerHTML=e,document.getElementById(a).appendChild(t.children[0]),shscr(tela),document.querySelector(".moving")&&(document.querySelector(".moving").className="")}).then(function(){});break;case"insertnv2":ajax("main","inserir_objeto","prm_objeto=ARTICLENV2&prm_screen="+a+"&prm_screen_ant="+document.getElementById(a).getElementsByTagName("article").length,!1,a),shscr(tela),document.querySelector(".moving")&&(document.querySelector(".moving").className=""),setTimeout(function(){dashAjuste()},100);break;case"rowcolumn":ajax("fly","salva_posicao","prm_objeto="+a+"&prm_screen="+e+"&prm_posx=&prm_posy=&prm_zindex="+r,!1),document.getElementById(a).style.setProperty("-webkit-flex-direction",r),document.getElementById(a).style.setProperty("flex-direction",r),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"porcentagem":document.getElementById(a).style.setProperty("-webkit-flex-basis","calc("+r+" - 6px)"),document.getElementById(a).style.setProperty("flex-basis","calc("+r+" - 6px)"),ajax("fly","salva_posicao","prm_objeto="+a+"&prm_screen="+e+"&prm_posx=&prm_posy=&prm_zindex="+encodeURIComponent(r)+"&prm_tipo=porcentagem",!0),"false"==error&&alerta("feed-fixo",TR_AL),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"ordem":document.getElementById(a).style.setProperty("order",r),ajax("fly","salva_posicao","prm_objeto="+a+"&prm_screen="+e+"&prm_posx="+encodeURIComponent(r)+"&prm_posy=&prm_zindex=&prm_tipo=ordem",!0),"false"==error&&alerta("feed-fixo",TR_AL),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"newsection":call("inserir_objeto","prm_objeto=SECTION&prm_screen="+e+"&prm_screen_ant="+document.getElementsByTagName("section").length).then(function(e){var t=document.createElement("div");t.innerHTML=e,MAIN.appendChild(t.children[0])}).then(function(){dashAjuste(MAIN.lastElementChild.id)});break;case"align":ajax("fly","salva_posicao","prm_objeto="+a+"&prm_screen="+e+"&prm_posx=&prm_posy="+r+"&prm_zindex=",!1),document.getElementById(a).style.setProperty("justify-content",r),document.getElementById(a).style.setProperty("align-items",r),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"background_article":ajax("fly","alter_attrib","prm_objeto="+a+"&prm_prop=BGCOLOR_ARTICLE&prm_value="+r+"&prm_usuario=DWU",!0),"false"==error&&alerta("feed-fixo",TR_AL),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"background_section":ajax("fly","alter_attrib","prm_objeto="+a+"&prm_prop=BGCOLOR_SECTION&prm_value="+r+"&prm_usuario=DWU",!0),"false"==error&&alerta("feed-fixo",TR_AL),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle");break;case"posicao_section":ajax("fly","alter_attrib","prm_objeto="+a+"&prm_prop=POSICAO_SECTION&prm_value="+r+"&prm_usuario=DWU",!0),"false"==error&&alerta("feed-fixo",TR_AL);break;case"altura_section":ajax("fly","alter_attrib","prm_objeto="+a+"&prm_prop=ALTURA_SECTION&prm_value="+r+"&prm_usuario=DWU",!0),"false"==error&&alerta("feed-fixo",TR_AL);break;case"padding_section":ajax("fly","alter_attrib","prm_objeto="+a+"&prm_prop=PADDING_SECTION&prm_value="+r+"&prm_usuario=DWU",!0),"false"==error&&alerta("feed-fixo",TR_AL)}}function dashSectionDown(e){if(3!=e.which&&"noline"!=this.className)if("moving"!=this.className)if("hoverchange"==this.className){var t=this.style.getPropertyValue("order"),a=document.querySelector(".moving"),r=a.style.getPropertyValue("order");a.style.setProperty("order",t),a.style["-webkit-order"]=t,this.style.setProperty("order",r),this.style["-webkit-order"]=r,ajax("fly","dashboardmove","prm_objeto="+a.id+"&prm_target="+this.id+"&prm_last="+tela,!1),a.className="",this.className=""}else document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle"),this.className="moving";else this.className=""}function dashSectionEnter(){"moving"!=this.className&&"noline"!=this.className&&(document.querySelector(".selectedcolumn")&&(this.className="hover"),document.querySelector(".moving")&&(this.className="hoverchange"))}function dashSectionLeave(){"moving"!=this.className&&"noline"!=this.className&&(this.className="")}function dashArticleDown(e){if(e.stopPropagation(),3!=e.which&&"noline"!=this.parentNode.className)if("movingarticle"!=this.className){var t=e.target.closest("article").clientWidth;if(t<250){var a=e.target.closest("article"),r=document.getElementById(a.id+"fechar");t<250&&(r.classList.remove("fechardash"),r.classList.add("fechardddash"))}if(MAIN.querySelector(".selected")){var n,o=MAIN.querySelector(".selected");n="main"==o.parentNode.id?tela:o.parentNode.id;var l=o.id,i=o.parentNode,s=e.target;if(i.id==s.id){var d=s.children,c=1;for(let e=1;e<d.length;e++)parseInt(window.getComputedStyle(d[e]).getPropertyValue("order"))>c&&(c=parseInt(window.getComputedStyle(d[e]).getPropertyValue("order"))+1),d[e].style.getPropertyValue("order")&&(c=parseInt(d[e].style.getPropertyValue("order"))+1);o.style.setProperty("order",c+1),ajax("fly","salva_posicao","prm_objeto="+l+"&prm_screen="+s.id+"&prm_posx="+(c+1)+"&prm_posy=&prm_zindex=",!0),MAIN.querySelector(".selected").classList.remove("selected")}else o.remove(),ajax("fly","dashboardmove","prm_objeto="+l+"&prm_target="+s.id+"&prm_last="+n,!0),call("show_objeto","prm_objeto="+l+"&PRM_ZINDEX=&prm_posx=99&prm_posy=&prm_screen="+tela+"&prm_dashboard=true","obj").then(function(e){var t=document.createElement("div");t.innerHTML=e,s.appendChild(t.children[0]),"N"==sticky?document.getElementById("dados_"+l)?renderChart(l):ajustar(l):document.getElementById(l+"c").classList.add("sticky")}).then(function(){eventos(document.getElementById(l))}).then(function(){var e=s.children,t=1;for(let a=1;a<e.length;a++)e[a].id!=l?(parseInt(e[a].style.getPropertyValue("order"))<t&&(t=parseInt(e[a].style.getPropertyValue("order"))),ajax("fly","salva_posicao","prm_objeto="+e[a].id+"&prm_screen="+s.id+"&prm_posx="+t+"&prm_posy=&prm_zindex=",!0)):ajax("fly","salva_posicao","prm_objeto="+e[a].id+"&prm_screen="+s.id+"&prm_posx="+e.length+"1&prm_posy=&prm_zindex=",!0),t+=1})}else if("hoverchangearticle"==this.className){var m=this.style.getPropertyValue("order"),u=document.querySelector(".movingarticle"),p=document.querySelector(".movingarticle").style.getPropertyValue("order");document.querySelector(".movingarticle").style.setProperty("order",m),document.querySelector(".movingarticle").style["-webkit-order"]=m,document.getElementById(document.querySelector(".movingarticle").id+"ordem").value=m,this.style.setProperty("order",p),document.getElementById(this.id+"ordem").value=p,"mac"==PRINCP.className&&(this.style["-webkit-order"]=p),ajax("fly","dashboardmove","prm_objeto="+u.id+"&prm_target="+this.id+"&prm_last="+this.parentNode.id,!1),u.className="",this.className=""}else document.querySelector(".moving")&&document.querySelector(".moving").classList.remove("moving"),this.className="movingarticle"}else this.className=""}function dashArticleEnter(e){"movingarticle"!=this.className&&"noline"!=this.parentNode.className&&document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").parentNode.id==this.parentNode.id&&(this.className="hoverchangearticle"),e.stopPropagation(e)}function dashArticleLeave(e){"movingarticle"!=this.className&&"noline"!=this.parentNode.className&&(this.className=""),e.stopPropagation()}function debug(e){if("13"==e){var t=document.getElementById("debug").firstElementChild.value.toLowerCase();if(-1!=t.indexOf("query")){let e=document.getElementsByClassName("faketitle");if(e[0])if("inline"==e[0].style.display)for(let t=0;t<e.length;t++)e[t].style.display="none";else for(let t=0;t<e.length;t++)e[t].style.display="inline"}if(-1!=t.indexOf("json"))if(document.querySelector(".fakedados")){var a=document.querySelectorAll(".fakedados");for(let e=0;e<a.length;e++)a[e].remove()}else{let e=document.createElement("textarea");e.classList.add("fakedados");var r=document.querySelectorAll(".json");for(let t=0;t<r.length;t++){let a=e.cloneNode(!0),n=r[t].innerHTML.trim();a.value="{"+n.substring(0,n.length-1)+"}",r[t].parentNode.parentNode.appendChild(a)}}if(-1!=t.indexOf("rearrange")){var n=MAIN.children;for(let e=0;e<n.length;e++)"DIV"==n[e].tagName?(n[e].style.left="100px",n[e].style.top="100px"):"SPAN"==n[e].tagName&&(n[e].firstElementChild.style.left="100px",n[e].firstElementChild.style.top="100px")}if(-1!=t.indexOf("clearlog"))ajax("fly","clearlog","prm_programa="+t.split(".")[1],!1);if(-1!=t.indexOf("screen")&&("inline"==document.getElementById("screenres").style.display?document.getElementById("screenres").style.display="none":document.getElementById("screenres").style.display="inline"),-1!=t.indexOf("lang")&&(curtain("enabled"),carrega("lang_table"),document.getElementById("debug").setAttribute("class","")),-1!=t.indexOf("padrao")&&(call_save(""),document.getElementById("titulo").innerHTML="OBJECT PADRAO",curtain("enabled"),carregaPainel(""),carrega("object_padrao"),document.getElementById("debug").setAttribute("class","")),-1!=t.indexOf("upload")&&(document.getElementById("titulo").innerHTML="UPLOAD",call_save(""),curtain("enabled"),carregaPainel("upload"),carrega("uploaded"),document.getElementById("debug").setAttribute("class","")),-1!=t.indexOf("help")&&alert("[query]: mostra ou esconde a query de cada consulta \n[export]: exporta dados das tabelas do tables_to_export, (pipe) seguido da letra do tipo(U usuario, O objeto) para especificar a exportação  \n[rearrange]: realoca todos os objetos pra posição 100/100 \n[clearlog.X]: Limpa log_eventos de dados de X(JS para javascript, EL para error line e PAR para parametro de usu&aacute;rio) \n[screen]: mostra as resoluções de tela \n[rule]: mostra a posição do cursor com reguas \n[grid(px)]: tela dividida em pixels \n[lang]: lista as traduções \n[sandbox]: Libera uso da screen sandbox para testes \n[exec=]: executa comandos \n[dashboard]: Esconde/mostra as linhas do dashboard para o dwu \n[padrao]: Abre a tela de padroes do sistema \n[upload]: Abre a tela de upload "),-1!=t.indexOf("rule")){var o=document.getElementById("rule");"visible"==o.className?(o.className="invisible",document.removeEventListener("mousemove",rulemove,!1)):(o.className="visible",document.addEventListener("mousemove",rulemove,!1))}if(-1!=t.indexOf("find"))ajax("list","screen_list","prm_objeto="+t.replace("find(","").replace(")",""),!0,"floatops");if(-1!=t.indexOf("painel")&&(call_save(""),curtain("enabled"),carrega("painel")),-1!=t.indexOf("dashboard")){var l=document.getElementsByTagName("SECTION");if("noline"==l[0].className)for(let e=0;e<l.length;e++)l[e].className="";else for(let e=0;e<l.length;e++)l[e].className="noline"}if(-1!=t.indexOf("grid")){var i=document.querySelectorAll(".rlinha");for(let e=0;e<i.length;e++)i[e].parentNode.removeChild(i[e]);var s=t.replace("grid(","");if(s=s.replace(")",""),"number"==typeof(s=parseInt(s))&&0!=(s=Math.abs(parseInt(s)))){altura=document.getElementById("html").clientHeight,largura=document.getElementById("html").clientWidth,line=document.createElement("div");for(let e=s;e<largura;){let t=line.cloneNode("true");t.style.setProperty("left",e+"px"),t.className="rlinha horizontal",document.body.appendChild(t),e+=s}for(let e=s;e<altura;){let t=line.cloneNode("true");t.style.setProperty("top",e+"px"),t.className="rlinha vertical",document.body.appendChild(t),e+=s}}}if(-1!=t.indexOf("sandbox")){var d=document.getElementById("floatops").lastElementChild;"none"==d.style.getPropertyValue("display")?d.style.setProperty("display","inline"):d.style.setProperty("display","none")}if(-1!=t.indexOf("exec="))if(confirm(TR_CM))ajax("fly","executar","prm_acao="+t.replace("exec=",""),!1);-1!=t.indexOf("prefixo")&&(call_save(""),document.getElementById("titulo").innerHTML="PREFIXO DE COLUNA",curtain("enabled"),carregaPainel("prefixo"),carrega("prefixo_lista"),document.getElementById("debug").setAttribute("class","")),document.getElementById("debug").firstElementChild.value=""}}function fakeValue(e,t){document.getElementById(e).innerHTML=t.innerHTML;var a=t.getAttribute("title");document.getElementById(e).setAttribute("title",a)}function nova_customizada(e){ajax("quick_custom","quick_create","prm_nome=&prm_tipo=OBJETO&prm_parametros=&prm_visao=&prm_coluna=&prm_grupo=&prm_obj_ant=&prm_filtro=&prm_screen="+tela,!1)}function exclui_customizada(e){let t=document.getElementById("lista-custom-fav").getAttribute("title"),a=document.getElementById("lista-custom-fav").querySelector(".input").innerHTML.replace(/\r?\n|\r/g,"");a||(a=""),0==t.length?alerta("msg","Nenhuma consulta selecionada"):confirm("Confirma a exclusão da consulta: "+a+" ?")&&call("excluiCustomizado","prm_objeto="+t+"&prm_tela="+tela).then(function(e){-1==e.indexOf("OK")?alerta("msg",e):(document.getElementById("lista-custom-fav").setAttribute("title",""),document.getElementById("lista-custom-fav").children[0].innerHTML=document.getElementById("lista-custom-fav").children[0].getAttribute("data-placeholder"),document.getElementById("ARTICLE_CUSTOMIZACAO").innerHTML="",alerta("msg",TR_EX))})}function remover(e,t){var a,r=!1,n=!1;if(a=document.getElementById(e+"trl")?document.getElementById(e+"trl"):document.getElementById(e),"excluir"==t&&void 0!==t){r=!0;var o=a.parentNode.id;"main"!=a.parentNode.id&&"space-options"!=a.parentNode.id||(o=tela),call("dl_obj","prm_cod="+e+"&prm_tela="+o).then(function(e){-1!=e.indexOf("OK")?(n=!0,alerta("msg",TR_EX)):(n=!1,alerta("msg",e.split("|")[1],"",e.split("|")[0]))}).then(()=>{l()})}else l();function l(){a&&(!r||r&&n)&&(document.getElementById("filterlist").title==a.id+"-filterlist"&&(document.getElementById("filterlist").className="filtro hidden"),void 0===t||"excluir"==t?(a.style.setProperty("opacity","0"),setTimeout(function(){a.parentNode&&(a.style.setProperty("display","none"),a.remove())},200)):a.parentNode&&a.remove())}}function loading(e,t){var a=LAYER.children[1],r=LAYER.children[0];""==LAYER.className?(document.querySelector(".slide-N")&&MAIN.style.setProperty("filter","blur(14px)"),LAYER.classList.add("ativo"),setTimeout(function(){r.classList.add("open")},100),document.querySelector(".slide-S")||setTimeout(function(){LAYER.children[1].classList.add("visivel"),LAYER.children[2].classList.add("visivel"),LAYER.children[3].classList.add("visivel"),LAYER.children[4].classList.add("visivel"),LAYER.children[5].classList.add("visivel")},100),get("jumpdrill")&&get("jumpdrill").remove(),get("anotacao_show")&&get("anotacao_show").remove()):(a.classList.remove("open"),document.querySelector(".slide-N")&&MAIN.style.setProperty("filter","blur(14px)"),setTimeout(function(){MAIN.style.removeProperty("filter")},300),void 0!==e?setTimeout(function(){a.classList.remove("visivel"),r.classList.remove("open"),LAYER.classList.remove("ativo")},500):LAYER.classList.remove("ativo"),get("jumpdrill")&&get("jumpdrill").remove(),get("anotacao_show")&&get("anotacao_show").remove())}function loadAttrib(e,t,a){var r=a||"FCL";if(document.getElementById("attriblist").classList.remove("horizontal"),document.getElementById(e)&&document.getElementById("attriblist").classList.remove("open"),setTimeout(function(){document.getElementById("attriblist").innerHTML=""},200),-1!=t.indexOf("grafico")&&0==t.split("prm_tipo_graf=")[1].length)return loader("attriblist"),void ajax("list",e,t,!0,"attriblist","","",r);setTimeout(function(){document.getElementById(e)?(document.getElementById("attriblist").classList.toggle("open"),document.getElementById("attriblist").classList.toggle("vertical")):(document.getElementById("attriblist").classList.add("open"),document.getElementById("attriblist").classList.add("vertical")),loader("attriblist"),ajax("list",e,t,!0,"attriblist","","",r),document.querySelector(".destacada")&&document.querySelector(".destacada").classList.remove("destacada")},400)}window.addEventListener("resize",function(){if((resizerDelay+=1)>10){for(var e=document.querySelectorAll(".dragme"),t=e.length,a=0;a<t;a++)document.getElementById("dados_"+e[a].id)&&renderChart(e[a].id),document.getElementById(e[a].id).classList.contains("front")&&topDistance(e[a].id);resizerDelay=0}}),rulemove=function(e){rule.style.setProperty("left",cursorx-10+"px"),rule.style.setProperty("top",cursory-10+"px"),rule.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;X = "+cursorx+"px Y = "+cursory+"px"};var target=document.getElementById("fechar_sup");function alerta(e,t,a,r){var n,o,l,i,s=obterHoraAtualizada();if(t)if("granted"==notify.permission&&"out"==vision){n=t.split("!");for(let e=0;e<n.length;e++)callnotify("ATENÇÃO",n[e])}else if("alert"==e)alert(t);else{n=t.split("!");for(let e=0;e<n.length;e++)n[e].trim().length>0&&(i=document.getElementById("alerta-template").children[0].cloneNode(!0),-1!==n[e].indexOf("IMP")?(l=". Erro gerado às "+s,-1!==n[e].indexOf("sucesso")?i.children[0].innerHTML=n[e].replace("IMP","")+l.replace(". Erro gerado às",". Importação gerada as"):i.children[0].innerHTML=n[e].replace("IMP","")+l,o=!0):i.children[0].innerHTML=n[e]+"!",a&&(i.children[2].style.setProperty("display","initial"),i.children[3].innerHTML=a),r&&"ERRO"==r.toUpperCase()&&i.classList.add("erro"),document.getElementById("feed-fixo").appendChild(i),function(e){if(setTimeout(function(){e.classList.add("show")},100),o){var t=document.querySelectorAll(".show");for(let e=0;e<t.length;e++)t[e].classList.remove("show"),t[e].remove()}else setTimeout(function(){e&&e.classList.remove("show")},4700),setTimeout(function(){e&&e.parentNode&&e.remove()},5e3)}(i))}}function invisible_touch(e,t){var a,r,n=document.getElementById(e);if(0==MAIN.getElementsByTagName("section").length&&-1==n.className.indexOf("scaled"))if("start"==t)var o=setTimeout(function(){n.classList.add("dragging")},200);else{clearTimeout(o),setTimeout(function(){n.classList.remove("dragging")},200);var l=n.style.top,i=n.style.left;l==n.getAttribute("data-top")&&i==n.getAttribute("data-left")||(parseInt(i)%5!=0?(a=parseInt(i)/10,a=Math.round(a),a*=10):a=parseInt(i),parseInt(l)%5!=0?(r=parseInt(l)/10,r=Math.round(r),r*=10):r=parseInt(l),ajax("pos","salva_posicao","prm_objeto="+e+"&prm_screen="+tela+"&prm_posx="+a+"px&prm_posy="+r+"px&prm_zindex=",!0),n.setAttribute("data-top",l),n.setAttribute("data-left",i))}}function fakeClickScript(){document.querySelector(".fakelistbox.open")&&0==document.querySelector(".fakelistbox.open").previousElementSibling.contentEditable&&document.querySelector(".fakelistbox.open").click()}function logout(e){e?(ajax("fly","xlogout","prm_sessao="+e,!0),alerta("x",TR_SE)):(ajax("fly","xlogout","",!0),alerta("x",TR_SE),setTimeout(function(){window.location.reload(!0)},2e4))}target&&target.addEventListener("click",function(){var e=document.getElementById("feed-fixo");e&&e.querySelectorAll(".show").forEach(function(e){e.remove()})}),call("refresh_session","");var msgs=0;if(get("verify-post")){call("countCheckPost","").then(e=>{msgs=parseInt(e)});const e=setInterval(function(){checkTextPost()},15e3)}const LOGGED=setInterval(function(){if(!get("login-menu")){if(0==document.cookie.length&&"N"==get("xe").value)return logout(),!1;call("valida_session","").then(function(e){if(-1!=e.indexOf("0"))return logout(),!1;-1!=e.indexOf("1")&&window.location.reload(!0),-1!=e.indexOf("5")&&(window.location.href=window.location.href)})}},6e4);function checkTextPost(){get("login-menu")||get("verify-post")&&call("countCheckPost","").then(function(e){if(get("verify-post").setAttribute("data-ajax",e.trim()),parseInt(e)>0&&get("text-talk").classList.contains("open")&&parseInt(e)!=msgs){let e=get("text-talk").querySelector(".selected");call("listContainer","").then(function(e){document.querySelector(".list_container").innerHTML=e}).then(function(){e.click()})}})}function call(e,t,a,r){r=r||"POST";return fakeClickScript(),new Promise(function(n,o){var l=new XMLHttpRequest;if("PROCEDURE"==a)l.open(r,OWNER_BI+"."+e,!0);else{var i=a||"fcl";"POST"==r?l.open(r,OWNER_BI+"."+i+"."+e,!0):l.open(r,OWNER_BI+"."+i+"."+e+"?"+t,!0)}"POST"==r?l.send(t):l.send(null),l.onload=function(){200==l.status?(n(l.responseText.trim()),document.getElementById("content")&&document.getElementById("content").classList.remove("loading")):(document.getElementById("content").classList.remove("loading"),o(alerta("feed-fixo",TR_XC)))},l.onerror=function(){document.getElementById("content").classList.remove("loading"),0==navigator.onLine&&alerta("msg",TR_OFF)}})}function callExt(e){return new Promise(function(t,a){var r=new XMLHttpRequest;r.open("GET",e,!0),r.send(null),r.onload=function(){200==r.status?t(r.responseText.trim()):a("#ERRO#|"+r.responseText.trim())},r.onerror=function(){a("#ERRO#|Falha na chamada da requisicao externa")}})}var slice=[];function ajax(e,t,a,r,n,o,l,i){i=i||"fcl";var s=l,d=new XMLHttpRequest;d.onerror=ajaxError,d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status)switch(e){case"return":respostaAjax=d.responseText.trim();break;case"data-":"LOGOFF"!=d.responseText.trim()&&document.getElementById(n)&&document.getElementById(n).setAttribute("data-ajax",d.responseText.trim());break;case"append":if(-1==d.responseText.indexOf("#alert")){var t;t=document.createElement("div");var a=d.responseText;t.innerHTML=a,(E=t.children[0]).style.setProperty("order",document.getElementById(n).children.length+1),new Promise(function(e,t){e(a)}).then(function(){s&&("Y"==E.getAttribute("data-drill-relatorio")?E.style.setProperty("opacity","1"):E.style.setProperty("opacity","0"))}).then(function(){document.getElementById(n).appendChild(E)}).then(function(){eventos(E),setTimeout(function(){s&&document.getElementById(s)&&document.getElementById(s).style.setProperty("opacity",""),LAYER.classList.contains("ativo")&&loading(),topDistance(s),E.classList.contains("mapageoloc")&&mapaGeoLoc(E.id)},100),s&&(centerDrill(s),ajustar(s),renderChart(s))})}break;case"input":document.getElementById(n).className=d.responseText.trim();break;case"value":document.getElementById(n).value=d.responseText.trim();break;case"list":document.getElementById(n).innerHTML=d.responseText,lasturl.length<3&&b&&(lasturl=b);break;case"inject":if(d.responseText.length>0){var r=document.createElement("tbody");r.innerHTML=d.responseText;var i=r.children.length;for(let e=0;e<i;e++)document.getElementById(n).parentNode.insertBefore(r.lastElementChild,document.getElementById(n).nextElementSibling);ajustar(document.getElementById(n).parentNode.parentNode.parentNode.parentNode.parentNode.id)}else alerta("feed-fixo",TR_NR);loading();break;case"script":(dscript=document.createElement("script")).innerHTML=d.responseText,document.head.appendChild(dscript);break;case"lang":tr=d.responseText;break;case"time":countdown=d.responseText;break;case"double":document.getElementById(n+"2").innerHTML=d.responseText,document.getElementById(n).innerHTML=d.responseText,document.getElementById("count-result")&&(document.getElementById("count").innerHTML=document.getElementById("count-result").children[0].innerHTML);break;case"slice":d.responseText.length>1&&(slice[o]=d.responseText),20==o&&ace_editor.setValue(slice.join());break;case"order":if(null==(c=document.getElementById(n))){var c;document.getElementById(n+"trl").parentNode.setAttribute("name",""),(c=document.getElementById(n+"trl")).style.getPropertyValue("order")&&(dashorder="&prm_dashboard=true",dashlocation=c.parentNode.id);var m=c.offsetLeft,u=c.offsetTop;c.parentNode.removeChild(c),appendar("prm_drill=N&prm_objeto="+n+"&PRM_ZINDEX=&prm_posx="+m+"px&prm_posy="+u+"px&prm_parametros="+l+"&prm_zindex="+o+"&prm_screen="+tela+dashorder)}else c.style.getPropertyValue("order")&&(dashorder="&prm_dashboard=true",dashlocation=c.parentNode.id),c.parentNode.getAttribute("data-parent")?shscr(tela):(c.parentNode.setAttribute("name",""),m=c.getAttribute("data-left"),u=c.getAttribute("data-top"),c&&c.parentNode.removeChild(c),document.getElementById("drill_obj").setAttribute("value",n),appendar("prm_drill=N&prm_objeto="+n+"&PRM_ZINDEX=&prm_posx="+m+"&prm_posy="+u+"&prm_screen="+tela+dashorder),remover(n+"trl"));break;case"query":document.getElementById(n)?(document.getElementById(n).parentNode.innerHTML=d.responseText,ajustar(n)):(E=document.getElementById(n+"trl")).parentNode.removeChild(E),LAYER.setAttribute("class","");break;case"main":if(-1==d.responseText.indexOf("#alert")&&document.getElementById(n)){var p=document.getElementById(n);p.innerHTML=p.innerHTML+d.responseText}break;case"quick":if("NONE"!=(E=d.responseText.trim())){if(document.querySelector(".movingarticle")){var g=document.querySelector(".movingarticle").id,f=document.querySelector(".movingarticle").querySelectorAll(".dragme"),_=3;for(let e=0;e<f.length;e++)parseInt(f[e].style.getPropertyValue("ordem"))>=_&&(_=parseInt(f[e].style.getPropertyValue("ordem"))+1);var v="&prm_dashboard=true"}else g=tela,_=cursorx+"px",v="&prm_dashboard=false";if(ajax("fly","inserir_objeto","prm_objeto="+E+"&prm_screen="+g,!1),appendar("prm_objeto="+E+"&prm_zindex=999&prm_posx="+_+"&prm_posy="+cursory+"px&prm_screen="+tela+v,"",""),document.getElementById(E)&&-1!=document.getElementById(E).className.indexOf("texto")){var y=document.getElementById(E),h=window.innerWidth/2-y.clientWidth-60+"px",b=window.innerHeight/2-y.clientHeight-60+"px";y.style.setProperty("left",h),y.style.setProperty("top",b)}carrega("ajobjeto?prm_objeto="+E);document.getElementById(E+"_ds");get("jumpdrill")&&(get("jumpdrill").innerHTML="",get("jumpdrill").style.removeProperty("opacity"))}break;case"quick_custom":var E;ajax("fly","inserir_objeto","prm_objeto="+(E=d.responseText.trim())+"&prm_screen="+tela,!1),appendar("prm_drill=C&prm_objeto="+E+"&prm_zindex=999&prm_posx=&prm_posy=&prm_screen="+tela,"",""),document.getElementById("lista-custom-fav").setAttribute("title",E),document.getElementById("lista-custom-fav").children[0].innerHTML="NOVA CONSULTA",loadAttrib("ed_gadg","ws_par_sumary="+E+"&prm_tipo=consulta")}else telasup&&(0==navigator.onLine?alerta("msg",TR_OFF):0!=parseInt(telasup.style.getPropertyValue("height"))?(alerta("msg",TR_FC_NF),document.querySelector(".load")&&setTimeout(function(){document.querySelector(".load").innerHTML=TR_XC},500)):alerta("feed-fixo",TR_FC_NF))},d.open("POST",OWNER_BI+"."+i+"."+t,r),d.send(a);var c=d.responseText;"save_prop"==t&&(d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){var e=d.responseText;alerta("msg",e.substr(e.indexOf("#aviso_prop")+11,500))}}),-1!=c.indexOf("!alert")?(alerta("feed-fixo",c.substr(c.indexOf("!alert")+6,100)),error="true"):-1!=c.indexOf("#alert")?(alerta("msg",c.substr(c.indexOf("#alert")+6,100)),error="true"):error="false"}function ajaxExt(x){call("load_external","prm_screen="+x).then(function(url){var ajaxRequestExt;url.trim().length>0&&(ajaxRequestExt=new XMLHttpRequest,ajaxRequestExt.onreadystatechange=function(){4==ajaxRequestExt.readyState&&200==ajaxRequestExt.status&&(document.getElementById("main-ext").innerHTML=ajaxRequestExt.responseText,eval(document.getElementById("main-ext").getElementsByTagName("DIV")[0].getAttribute("data-scriptload")))},ajaxRequestExt.open("GET",OWNER_BI+"."+url,!1),ajaxRequestExt.send(null))})}function ajaxError(e){console.log("ERRO: "+e+"!!!")}function noerror(e,t,a){"false"==error&&(e&&(e.parentNode.parentNode.setAttribute("class","removing"),setTimeout(function(){e.parentNode.parentNode.style.display="none",e.parentNode.parentNode.id="",e.parentNode.id=""},200)),alerta(a,t))}async function agrupadorChange(e,t,a){if(remover("jumpmed"),"N/A"!=a){var r,n,o,l,i;let d,c;document.getElementById("drill_obj").value=e,r=document.getElementById(e).parentNode.id,n=document.getElementById("par_"+e).value,o=document.getElementById("agp_"+e).value,d=e,c="",document.getElementById(e).classList.contains("drill")?(i="Y",l="&prm_dashboard=false",vleft=document.getElementById(e).offsetLeft+"px",e.split("trl").length>1&&(d=e.split("trl")[0],c=e.split("trl")[1])):(i="N",l="&prm_dashboard=true",vleft=document.getElementById(e).style.getPropertyValue("order"));var s=o.replace(t,a);remover(e),appendar("prm_drill="+i+"&prm_objeto="+d+"&prm_zindex=&prm_parametros="+n+"&prm_posx="+vleft+"&prm_posy=&prm_screen="+tela+"&prm_track="+e+"&prm_objeton="+e+"&prm_alt_med="+s+l+"&prm_cd_goto="+c,!1,r),setTimeout(function(){centerDrill(e)},100),setTimeout(function(){ajustar(e)},1e3)}}function fixCol(e){if(document.getElementById(e+"fixed")&&document.getElementById(e+"c").children.length>1){document.getElementById(e+"fixed").innerHTML="";var t="",a=1,r=1,n=0,o=0,l=0,i=0,s=new Array,d="",c=0,m="";if(document.getElementById(e)){if(document.getElementById(e+"c").children[0])d=document.getElementById(e+"c").children[0];else{if("TBODY"!=document.getElementById(e+"c").children[1].tagName)return;d=document.getElementById(e+"c").children[1],c=1}var u=d.getElementsByTagName("th"),p=u.length;if(parseInt(document.getElementById(e+"fixed").getAttribute("data-number"))>0){n=parseInt(document.getElementById(e+"fixed").getAttribute("data-number"))<=document.getElementById(e+"c").children[0].children[0].childElementCount?parseInt(document.getElementById(e+"fixed").getAttribute("data-number")):document.getElementById(e+"c").children[1].children[0].childElementCount,1==c&&(n=2,minus=0);for(let t=0;t<n-1;t++)o+=1,m=document.getElementById(e+"c").children[0].children[0].children[t+1],r=parseInt(m.colSpan)+parseInt(r),s[t]=document.createElement("span"),s[t].className="fixed",s[t].innerHTML=m.innerHTML,s[t].style.color=m.parentNode.style.color,s[t].style.width=0==t?m.clientWidth+13+"px":m.clientWidth-5+"px",1==c?(s[t].style.padding="0 4px",s[t].style.lineHeight=m.clientHeight+"px",s[t].style.setProperty("min-height",m.clientHeight-8+"px"),s[t].style.textAlign="left"):(s[t].style.backgroundColor=m.parentNode.style.backgroundColor,s[t].style.height=m.clientHeight-8+"px",s[t].style.lineHeight=m.clientHeight-8+"px"),parseInt(m.clientWidth)+parseInt(l)<document.getElementById(e+"dv2").clientWidth&&(l=parseInt(m.clientWidth)+parseInt(l)),o=o+parseInt(m.colSpan)-1,document.getElementById(e+"fixed").innerHTML=document.getElementById(e+"fixed").innerHTML+s[t].outerHTML;-1==navigator.userAgent.indexOf("Trident")?document.getElementById(e+"fixed").setAttribute("data-width",l-1):document.getElementById(e+"fixed").setAttribute("data-width",l+1),document.getElementById(e+"fixed").style.setProperty("white-space","nowrap");for(var g=a;g<r;g++){for(var f=0;f<p;f++)if(i>1&&1==c||0==c){if(("total duplicado"!=u[f].className||"total geral"!=_.className)&&u[f].cellIndex==g){var _=document.createElement("li");_.innerHTML=u[f].outerHTML,u[f].parentNode.style.background.length>2?_.style.background=u[f].parentNode.style.background:document.getElementById(e+"fixed").style.background=document.getElementById(e+"dv2").style.background,"seta"!=u[f].className?_.className=u[f].parentNode.className:_.className=u[f].className+" "+u[f].parentNode.className,"total duplicado"!=_.className&&"total geral"!=_.className||(_.innerHTML=""),null!=u[f-1].getAttribute("data-valor")&&_.setAttribute("data-valor",u[f-1].getAttribute("data-valor")),null!=u[f-1].getAttribute("data-ordem")&&_.setAttribute("data-ordem",u[f-1].getAttribute("data-ordem")),_.style.backgroundImage=u[f].style.backgroundImage,_.style.paddingLeft=u[f].style.paddingLeft,g==a?13==parseInt(u[f].style.paddingLeft)?(_.style.width=u[g].clientWidth+2+"px",-1!=u[f-1].className.indexOf("nivel")&&_.style.setProperty("width",u[f].clientWidth+18+"px")):(_.style.width=u[g].clientWidth+10+"px",-1!=u[f-1].className.indexOf("nivel")&&_.style.setProperty("width",u[f].clientWidth+18+"px")):13==parseInt(u[f].style.paddingLeft)?(_.style.width=u[g].clientWidth-16+"px",-1!=u[f-1].className.indexOf("nivel")&&_.style.setProperty("width",u[f].clientWidth+"px")):(_.style.width=u[g].clientWidth-8+"px",-1!=u[f-1].className.indexOf("nivel")&&_.style.setProperty("width",u[f].clientWidth+"px")),u[f].parentNode.className,_.style.height=u[g].clientHeight-8+"px",_.style.paddingLeft=u[f].style.paddingLeft,null!=u[f].getAttribute("onclick")&&_.setAttribute("onclick",u[f].getAttribute("onclick")),_.setAttribute("data-linha",i),i+=1,t+=_.outerHTML}}else i+=1;var v=document.createElement("ul");v.className="fixed",v.setAttribute("data-i",g),v.style.setProperty("margin-top",0),v.innerHTML=t,document.getElementById(e+"fixed").innerHTML=document.getElementById(e+"fixed").innerHTML+v.outerHTML,t="",i=0}a=g,document.getElementById(e+"fixed").style.maxHeight=document.getElementById(e+"dv2").clientHeight+document.getElementById(e+"header").clientHeight-2+"px",document.getElementById(e+"fixed").clientWidth>document.getElementById(e+"dv2").clientWidth&&(alerta("feed-fixo",TR_LCF),document.getElementById(e+"fixed").innerHTML="")}}}}function popupmenu(e,t,a){if(document.getElementById("popupmenu")){var r=document.getElementById("popupmenu");if(document.getElementById("sub-screenlist")&&document.getElementById("sub-screenlist").remove(),r.classList.contains("visible")&&0==t.length)r.classList.remove("visible"),r.innerHTML="";else if("sub-screenlist"==e)call("popupMenu","prm_tipo="+e+"&prm_cond="+t).then(function(e){var t=document.createElement("ul");t.innerHTML=e,t.id="sub-screenlist",r.appendChild(t);var n=document.getElementById("screenlist").style.top,o=document.getElementById("screenlist").children[a-1].offsetTop-document.getElementById("screenlist").scrollTop;document.getElementById("sub-screenlist").style.setProperty("top",parseFloat(n)+o+"px"),t.classList.add("show")});else if(0==t.length){var n;if(r.classList.add("visible"),sessionStorage.getItem("popupMenu")&&"S"!=document.getElementById("id_atualizar_menu").value)(n=document.createElement("div")).innerHTML=sessionStorage.getItem("popupMenu"),r.innerHTML="",r.appendChild(n.children[0]),(n=document.createElement("ul")).id="screenlist",r.appendChild(n);else call("popupMenu","prm_tipo="+e+"&prm_cond="+t).then(function(e){var t;sessionStorage.setItem("popupMenu",e),(t=document.createElement("div")).innerHTML=e,r.innerHTML="",r.appendChild(t.children[0]),document.getElementById("id_atualizar_menu").value="N",(t=document.createElement("ul")).id="screenlist",r.appendChild(t)})}else{var o=document.getElementById("screengroup").children[a-1].offsetTop-document.getElementById("screengroup").scrollTop;document.getElementById("screenlist")?(document.getElementById("screenlist").classList.remove("show"),setTimeout(function(){if(sessionStorage.getItem(e+"-"+t)&&"###menu_grupo_favoritos###"!=t){document.getElementById("screenlist").remove();var a=document.createElement("div");a.innerHTML=sessionStorage.getItem(e+"-"+t),r.appendChild(a.children[0]),setTimeout(function(){document.getElementById("screenlist").style.setProperty("top",o+"px"),document.getElementById("screenlist").classList.add("show")},200)}else call("popupMenu","prm_tipo="+e+"&prm_cond="+t).then(function(a){sessionStorage.setItem(e+"-"+t,a),document.getElementById("screenlist").remove();var n=document.createElement("div");n.innerHTML=a,r.appendChild(n.children[0]),setTimeout(function(){document.getElementById("screenlist").style.setProperty("top",o+"px"),document.getElementById("screenlist").classList.add("show")},200)})},100)):sessionStorage.getItem(e+"-"+t)&&"###menu_grupo_favoritos###"!=t?(r.innerHTML=r.innerHTML+sessionStorage.getItem(e+"-"+t),setTimeout(function(){document.getElementById("screenlist").style.setProperty("top",o+"px"),document.getElementById("screenlist").classList.add("show")},200)):call("popupMenu","prm_tipo="+e+"&prm_cond="+t).then(function(a){sessionStorage.setItem(e+"-"+t,a),r.innerHTML=r.innerHTML+a,setTimeout(function(){document.getElementById("screenlist").style.setProperty("top",o+"px"),document.getElementById("screenlist").classList.add("show")},200)})}}}function fakeOption(e,t,a,r,n){var o=document.getElementById("fakelist");if(document.getElementById("attriblist").classList.contains("open")?(o.classList.remove("noattrib"),o.classList.add("attrib")):(o.classList.remove("attrib"),o.classList.add("noattrib")),document.getElementById("fakelist").classList.toggle("visible"),o.classList.contains("visible"))call("fakelist","prm_ident="+e+"&prm_titulo="+t+"&prm_campo="+a+"&prm_visao="+r+"&prm_ref="+n).then(function(e){var t=document.querySelector(".closer").cloneNode(!0);o.innerHTML=e,o.appendChild(t)}).then(function(){if(document.getElementById("filter-value")&&document.getElementById("filter-value").focus(),document.getElementById(e).parentNode.hasAttribute("data-v")){var t=document.getElementById(e).parentNode.getAttribute("data-v"),a=document.getElementById("fake_ajax");a.parentNode.parentNode.setAttribute("data-multi",t);var r=[];for(item of a.children)t.split("|").includes(item.title)&&(r.splice(t.split("|").indexOf(item.title),0,item.innerHTML.substr(0,5)+"..."),item.classList.add("selected"));a.parentNode.parentNode.setAttribute("data-multi-desc",r.join("|"))}});else if(o.hasAttribute("data-multi")){document.getElementById(e).parentNode.setAttribute("data-v",o.getAttribute("data-multi"));var l=o.getAttribute("data-multi-desc");l.length>=30&&(l=l.substring(0,30)+"[...]"),document.getElementById(e).innerHTML=l}}function fakeOptionChange(e){var t=e.getElementsByClassName("fakeoption")[0].getAttribute("title");e.setAttribute("data-v",t)}function selecionaFakeList(e,t){var a=document.getElementById("fakelist");if(document.getElementById(e).classList.contains("multi")){var r=a.getAttribute("data-multi"),n=a.getAttribute("data-multi-desc");if(null!==r&&r.trim().length>0){var o=r.split("|"),l=n.split("|");if(o.includes(t.title)){var i=o.indexOf(t.title);o.splice(i,1),l.splice(i,1),r=o.join("|"),n=l.join("|")}else r=r+"|"+t.title,n=n+"|"+t.innerHTML.trim().substr(0,5)+"..."}else r=t.title,n=t.innerHTML.trim().substr(0,5)+"...";t.classList.contains("selected")?t.classList.remove("selected"):t.classList.add("selected"),a.setAttribute("data-multi",r),a.setAttribute("data-multi-desc",n),n.length>=30&&(n=n.substring(0,30)+"[...]"),a.lastChild.setAttribute("onclick","document.getElementById('"+e+"').parentNode.setAttribute('data-v', '"+r+"');document.getElementById('"+e+"').innerHTML = '"+n+"';document.getElementById('fakelist').classList.toggle('visible');if (this.parentNode.firstChild.getAttribute('data-ref').indexOf('bEC') != -1) {document.getElementById('"+e+"').onblur();}")}else document.getElementById(e).parentNode.setAttribute("data-v",t.title),document.getElementById(e).innerHTML=t.innerHTML.trim(),document.getElementById("fakelist").classList.toggle("visible"),-1!=document.getElementById("fakelist").firstChild.getAttribute("data-ref").indexOf("bEC")&&document.getElementById(e).onblur()}sessionStorage.clear(),document.addEventListener("mousedown",function(e){mousedown=!0}),document.addEventListener("mouseup",function(e){if(mousedown=!1,e.target.parentNode&&!(e.target.classList.contains("opt")||e.target.classList.contains("group")||e.target.classList.contains("search")||e.target.parentNode.classList.contains("search")||e.target.parentNode.classList.contains("custom"))){var t=this.querySelectorAll(".fakelistbox.open");for(let a=0;a<t.length;a++){let r=t[a].parentNode;if(r.id!=e.target.id&&r.id!=e.target.parentNode.id&&r.parentNode.id!=e.target.parentNode.id&&!e.target.classList.contains("opt")){r.click(),t[a].classList.remove("open"),t[a].style.removeProperty("height");let e=t[a].previousElementSibling;0==e.innerHTML.length&&(e.innerHTML=e.getAttribute("data-placeholder"),e.setAttribute("data-custom","N"))}}}});var fake_conteudo="",ws_erro_selecao=!1;function fakeListBox(e,t,a,r,n,o,l,i,s){var d=document.getElementById(e),c=d.children[0].getAttribute("data-fixed").length,m=d.children[0].getAttribute("data-fixed"),u="N";if(d.querySelector(".fakelistbox").querySelector(".custom")&&(d.querySelector(".fakelistbox").querySelector(".custom").querySelector(".add")&&"S",d.querySelector(".fakelistbox").querySelector(".custom").querySelector(".search")&&(u="S")),d.querySelector(".fakelistbox").classList.contains("open")){if(ws_erro_selecao=!1,d.title!=d.getAttribute("data-default")&&(d.previousElementSibling&&"script"==d.previousElementSibling.className&&(d.title.split("|").length>1e3?(alerta("feed-fixo","N&atilde;o &eacute; poss&iacute;vel selecionar mais de 1000 itens, foram selecionados "+d.title.split("|").length.toString()+" itens"),ws_erro_selecao=!0):d.title.length>8e3&&(alerta("feed-fixo","N&uacute;mero de itens selecionados superior ao permitido"),ws_erro_selecao=!0)),0==ws_erro_selecao)){if(d.getAttribute("data-children")){var p=d.getAttribute("data-children");p.length>0&&fakeReset(p.split("|"))}d.setAttribute("data-default",d.title),d.previousElementSibling&&d.previousElementSibling.classList.contains("script")&&d.previousElementSibling.click()}if(0==ws_erro_selecao){if(d.classList.remove("open"),d.querySelector(".fakelistbox").querySelector(".selected"))var g=d.querySelector(".fakelistbox").querySelector(".selected").title,f=d.querySelector(".fakelistbox").querySelector(".selected").textContent;d.children[0].getAttribute("contentEditable")&&"mouseleave"!=i.type||(d.querySelector(".fakelistbox").style.removeProperty("height"),d.querySelector(".fakelistbox").classList.remove("open"),0==d.children[0].innerHTML.trim().length&&"N"==r&&(0==c&&(void 0===g?d.children[0].innerHTML=d.children[0].getAttribute("data-placeholder"):(d.children[0].innerHTML=f,d.children[0].title=g,d.title=g)),d.children[0].blur()));let e=d.querySelector(".fakelistbox").querySelectorAll(".selected, .reverse");if("S"==r&&"click"==i.type){var _=[],v=[],y="";if(e.length>0){var h=[],b={};for(let t=0;t<e.length;t++){h[t]=e[t],h[t].ordem=parseInt(h[t].getAttribute("data-ordem")),ordem=parseInt(h[t].getAttribute("data-ordem"));for(let e=t;e>0;e--)h[e].ordem<h[e-1].ordem&&(b=h[e-1],h[e-1]=h[e],h[e]=b)}e=h,y="",-1!=d.title.indexOf("$[NOT]")&&(y="$[NOT]");for(let t=0;t<e.length;t++)_.push(e[t].innerHTML),v.push(y+e[t].title)}0!=c&&(_.unshift(m),v.unshift(y+m)),0==v.length?(d.children[0].innerHTML="",d.title=""):(d.children[0].innerHTML=_.join(", "),"N"==u&&(d.title=v.join("|")))}else e.length>=1?e[0].title==d.title||e[0].innerHTML==d.title?d.children[0].innerHTML=e[0].innerHTML:d.children[0].innerHTML=d.children[0].getAttribute("data-fixed"):0!=c?d.children[0].innerHTML=d.children[0].getAttribute("data-fixed"):(d.children[0].innerHTML="",d.title="");d.children[0].setAttribute("data-fixed-ant",d.children[0].getAttribute("data-fixed")),d.setAttribute("data-ant",d.title),-1!=d.title.indexOf("$[NOT]")?d.classList.add("reverse"):d.classList.remove("reverse")}}else{d.classList.add("open");var E="";0!=c&&(E=d.children[0].getAttribute("data-fixed")),fakeboxevent(e,t,a,r,n,o,d,c,E,l,s)}}function fakeReset(e){for(let t=0;t<e.length;t++){let a=document.getElementById(e[t]),r=a.children[0];a.title="",a.setAttribute("data-default",""),a.setAttribute("data-ant",""),r.getAttribute("data-placeholder")?r.innerText=r.getAttribute("data-placeholder"):r.innerText=""}}function fakeboxReorder(e,t,a,r,n,o,l){var i="",s=-1==e.parentNode.parentNode.title.indexOf("$[NOT]")?"N":"S",d=parseInt(e.parentNode.parentNode.getAttribute("data-min")),c=0,m=0;if(0!=e.parentNode.parentNode.title.length&&(c=e.parentNode.parentNode.title.split("|").length),isNaN(d)&&(d=0),l)var u=e.parentNode.querySelectorAll(".opt");if(l){if(0==d&&0==c||d>0&&c<=1){var p=[];for(let e=0;e<u.length;e++)u[e].classList.contains("opt-unico")?(u[e].classList.remove("selected"),u[e].classList.remove("reverse")):(u[e].classList.add("selected"),p.push(u[e].title),m+=1);e.parentNode.parentNode.title=p.join("|")}else{for(let e=0;e<u.length;e++)u[e].classList.remove("selected"),u[e].classList.remove("reverse");m=0,e.parentNode.parentNode.title=""}return 0==m&&d>=1&&(e.classList.add("selected"),e.parentNode.parentNode.title=e.title),!1}var g=[];if(e.classList.contains("selected")||e.classList.contains("reverse"))if(e.classList.contains("reverse"))"S"==s&&1==c&&d>=1?(i="add",g=[],s="N",e.classList.remove("reverse"),e.classList.add("selected")):(i="remove",e.classList.remove("reverse"),e.classList.remove("selected"));else if(-1!=n.indexOf("true")&&1==c)i="add",g=[],s="S",e.classList.add("selected"),e.classList.add("reverse");else{if(1==c&&d>=1)return!1;i="remove",e.classList.remove("selected")}else i="add",g=e.parentNode.parentNode.title.split("|"),e.classList.add("selected"),"S"==s&&e.classList.add("reverse");if("add"==i)if(e.classList.contains("opt-unico")){let t=e.parentNode.querySelectorAll(".selected");for(let a=0;a<t.length;a++)e.title!=t[a].title&&(t[a].classList.remove("selected"),t[a].classList.remove("reverse"));e.parentNode.parentNode.title="",g=[]}else{let t=e.parentNode.querySelectorAll(".opt-unico.selected");for(let a=0;a<t.length;a++)t[a].classList.remove("selected"),t[a].classList.remove("reverse"),e.parentNode.parentNode.title="",g=[]}var f=e.parentNode.querySelectorAll(".selected"),_=!1;if(e.getAttribute("data-ordem"))if(e.classList.contains("selected"))switch(f.length){case 10:e.setAttribute("data-ordem","A");break;case 11:e.setAttribute("data-ordem","B");break;case 12:e.setAttribute("data-ordem","C");break;case 13:e.setAttribute("data-ordem","D");break;case 14:e.setAttribute("data-ordem","E");break;case 15:e.setAttribute("data-ordem","F");break;default:e.setAttribute("data-ordem",f.length)}else a=parseInt(e.getAttribute("data-ordem")),e.setAttribute("data-ordem",0),_=!0;var v,y="",h=[],b=[],E=e.parentNode.parentNode.title.split("|");if(v="S"==s||e.classList.contains("reverse")?"$[NOT]":"","remove"==i)for(let t=0;t<E.length;t++)E[t].replace("$[NOT]","")!=e.title&&g.push(E[t]);else e.classList.contains("selected")&&g.push(v+e.title);f=e.parentNode.querySelectorAll(".selected");for(let e=0;e<f.length;e++)1==_?f[e].getAttribute("data-ordem")>=a&&f[e].setAttribute("data-ordem",f[e].getAttribute("data-ordem")-1):f[e].getAttribute("data-ordem")&&(y=f[e].getAttribute("data-ordem")+"#"),h.push(y+f[e].textContent),b.push(y+v+f[e].title);if(h=h.sort(),b=b.sort(),0==r&&0==document.getElementById(t).children[0].innerHTML.length&&(document.getElementById(t).children[0].innerHTML=""),document.getElementById(t).classList.contains("multi")){let e=document.getElementById(t).children[0].getAttribute("data-fixed");0!=e.length&&(g=g.filter(t=>t!=e)).unshift(v+e)}document.getElementById(t).title=g.filter(e=>e).join("|").replace(/[0-9A-Z]+#/g,"")}function fakeboxAdd(e){let t=e.parentNode.parentNode.parentNode,a=e.previousElementSibling.value,r=t.children[0].getAttribute("data-fixed-ant");if(a!==r)if(t.classList.contains("multi")){let e=t.title.split("|"),n=-1!=t.title.indexOf("$[NOT]")?"$[NOT]":"";(e=e.filter(e=>e!=r)).unshift(n+a),t.title=e.filter(e=>e).join("|"),t.children[0].setAttribute("data-fixed",a)}else t.children[0].setAttribute("data-fixed",a),t.title=a}var holdoption="",reversingoption="";function fakeboxevent(e,t,a,r,n,o,l,i,s,d,c){l.classList.remove("errorinput"),l.classList.add("loading");var m="";n.length>0&&(m=document.getElementById(n)?document.getElementById(n).title:n),o.length>0&&document.getElementById(o)&&(document.getElementById(o).classList.contains("dragme")||(o=document.getElementById(o).title));if(t.split("$").length>1){l.querySelector(".fakelistbox").innerHTML="";var u=fakeListCustom[t.replace("$","")],p=JSON.parse(u);for(let e in p)l.querySelector(".fakelistbox").appendChild(fakeTag(p[e].value,p[e].text,p[e].type,a));fakeEvent(l,e,a,r,n,o,i,s,d),l.classList.remove("loading")}else{try{var g=document.getElementById("data_list").getAttribute("data-objeto")}catch(e){g=""}call("fakelistoptions","prm_ident="+e+"&prm_campo="+t+"&prm_visao="+m+"&prm_ref="+encodeURIComponent(a)+"&prm_adicional="+encodeURIComponent(o)+"&prm_search="+s+"&prm_obj="+g).then(function(e){l.querySelector(".fakelistbox").innerHTML=e}).then(function(){fakeEvent(l,e,a,r,n,o,i,s,d)}).then(function(){l.classList.remove("loading")})}}function fakeTag(e,t,a,r){var n=document.createElement("li");return n.className=a,r==e&&(n.className=a+" selected"),n.title=e,n.innerHTML=t||e,n}function fakeEvent(e,t,a,r,n,o,l,i,s){if(e.querySelector(".fakelistbox").children[0]){var d=e.querySelector(".fakelistbox").children.length;d>7&&(d=7),"fake-usuario-permissao"==e.id&&(d=3);var c=e.querySelector(".fakelistbox").children[0].clientHeight+2,m=d*c,u=e.getBoundingClientRect().top,p=e.clientHeight;if("painel"==e.parentNode.id)var g=e.parentNode.clientHeight;else g=PRINCP.clientHeight;var f=u-get("menup").clientHeight,_=g-u-c;if(m>_&&"fake-usuario-permissao"!=e.id?f>_?(e.querySelector(".fakelistbox").style.setProperty("bottom",p+"px"),m>f&&(m=f)):(e.querySelector(".fakelistbox").style.setProperty("top",p+"px"),m>_&&(m=_)):e.querySelector(".fakelistbox").style.setProperty("top",p+"px"),e.querySelector(".fakelistbox").style.setProperty("height",m+"px","important"),e.querySelector(".search")&&i.length>0&&(e.querySelector(".search").value=i,e.querySelector(".search").focus()),e.querySelector(".add")){let t=e.querySelector(".add").previousElementSibling.value;0!=t.length&&(e.children[0].setAttribute("data-fixed-ant",t),e.children[0].setAttribute("data-fixed",t))}e.classList.remove("loading"),e.querySelector(".fakelistbox").classList.add("open");var v=e.querySelector(".fakelistbox").querySelectorAll(".opt"),y=v.length;for(let e=0;e<y;e++){if(linhai=v[e],"S"!=r||document.querySelector(".mobile")||linhai.addEventListener("mouseover",function(e){1==mousedown&&fakeboxReorder(this,t,0,l,s,"mouseover",!1)}),document.getElementById(t).children[0].setAttribute("data-custom","N"),"S"==r){linhai.addEventListener("click",function(e){e.stopPropagation()});var h=down}else h=up;linhai.addEventListener(h,function(e){if(1==e.which&&(mousedown=!0),"S"==r){var a;if(PRINCP.classList.contains("mac"))try{a=e.metaKey}catch(t){a=e.ctrlKey}else a=e.ctrlKey;fakeboxReorder(this,t,0,l,s,h,a)}else this.parentNode.parentNode.getAttribute("data-min")>0?(this.parentNode.querySelector(".selected")&&this.parentNode.querySelector(".selected").classList.remove("selected"),this.classList.add("selected")):this.classList.contains("selected")?this.classList.remove("selected"):(this.parentNode.querySelector(".selected")&&this.parentNode.querySelector(".selected").classList.remove("selected"),this.classList.add("selected")),this.parentNode.querySelector(".selected")?(0==l&&(document.getElementById(t).children[0].innerHTML=this.parentNode.querySelector(".selected").innerHTML),document.getElementById(t).title=this.parentNode.querySelector(".selected").title):(0==l&&(document.getElementById(t).children[0].innerHTML=""),document.getElementById(t).title=""),document.getElementById(t).setAttribute("data-ant",document.getElementById(t).title),this.classList.contains("opt")&&(document.querySelector(".custom")&&(document.querySelector(".custom").children[0].value,document.querySelector(".custom").children[0].removeAttribute("value")),this.parentNode.parentNode.click())})}}else alerta("feed-fixo",TR_NR)}function loader(e){if(!document.getElementById(e).querySelector(".load")){var t=document.getElementById(e);if("TBODY"==t.tagName)(a=document.createElement("td")).setAttribute("colspan","99"),a.style.setProperty("text-align","center");else var a=document.createElement("div");t.innerHTML="",a.className="load",a.innerHTML=LAYER.children[1].innerHTML,document.getElementById(e).appendChild(a)}document.getElementById("content").classList.add("loading")}function ordem(e,t,a){t=document.getElementById("current_screen").value;document.getElementById(e)?(ajax("order","alterorder","prm_objeto="+e+"&prm_screen="+t+"&prm_valor="+a,!1,e),document.getElementById(e).style.zindex=""):(parametro=document.getElementById(e+"trl").value,ajax("order","alterorder","prm_objeto="+e+"&prm_screen="+t+"&prm_valor="+a,!1,e,document.getElementById(e+"trl").style.zIndex,parametro),document.getElementById(e+"trl").style.zindex="")}function menuLink(e,t){if("FILE"!=this.parentNode.className){e=this.parentNode.id.replace("menu","");t=this.innerHTML,remover(e+"trl"),-1==e.indexOf("ORG")?(document.getElementById(e)&&-1!=document.getElementById(e).className.indexOf("relatorio")&&document.getElementById(e).remove(),document.getElementById("drill_obj").value=e,cleardrill(),appendar("prm_drill=Y&prm_objeto="+e+"&PRM_POSX=200PX&PRM_POSY=100PX&PRM_ZINDEX=2&prm_screen="+tela+"&prm_track="+e+"&prm_objeton="+t+"&prm_cd_goto=13062309","",""),centerDrill(e),carrega("ajobjeto?prm_objeto="+e+"trl")):(appendar("prm_drill=Y&prm_objeto="+e+"&PRM_POSX="+cursorx+"PX&PRM_POSY="+cursory+"PX&PRM_ZINDEX=2&prm_screen="+tela+"&prm_track="+e+"&prm_objeton="+t+"&prm_cd_goto=13062309","",""),setTimeout(function(){carrega("ajobjeto?prm_objeto="+e)},6e3))}}function donut(e){if("slide-S"!=PRINCP.className&&"SCR_CUSTOMIZACAO"!=tela){e.stopPropagation();e.target;var t=document.getElementById("donut");t.classList.contains("open")?t.classList.remove("open"):(e.clientY+t.clientHeight>window.innerHeight?e.clientY<t.clientHeight?t.style.setProperty("top","1px"):t.style.setProperty("top",e.clientY-t.clientHeight+"px"):t.style.setProperty("top",e.clientY+"px"),t.style.setProperty("left",e.clientX+10+"px"),t.classList.add("open"))}}function cycle(e,t){var a=new Array,r=MAIN.querySelectorAll(".dragme.dados, .dragme.grafico, .dragme.medidor"),n=r.length;for(let e=0;e<n;e++)a[e]=r[e].id;scale(e,"indirect"),setTimeout(function(){var n=a.indexOf(e);n="next"==t?parseInt(n)+1<r.length?parseInt(n)+1:0:parseInt(n)-1>-1?parseInt(n)-1:r.length-1,scale(r[parseInt(n)].id,"indirect")},100)}function savepwd(){document.getElementById("salvar").setAttribute("class",""),document.getElementById("salvar").setAttribute("onclick","var senha1 = document.getElementById('senha1').value;  ajax('fly', 'save_pwd', 'prm_senha='+encodeURIComponent(senha1)+'&prm_email='+document.getElementById('email').value+'&prm_number='+document.getElementById('number').value+'&prm_nome='+document.getElementById('completo').value); curtain(); setTimeout(function(){ window.location.reload(true); },4000); ")}function send_textPost(e,t){var a="",r=get("campo");document.getElementById("par_"+e)&&(a=document.getElementById("par_"+e).value),document.getElementById("par_"+e+"trl")&&(a=document.getElementById("par_"+e+"trl").value);var n="";if(document.getElementById("mvs_"+e)&&(n=document.getElementById("mvs_"+e).value),document.getElementById("mvs_"+e+"trl")&&(n=document.getElementById("mvs_"+e+"trl").value),(o=document.getElementById("fieldmsg").value.replace(/<.*?>/g,"")).length>1){var o=encodeURIComponent(o);document.getElementById("sendmail").classList.contains("selected")?email="S":email="N",document.getElementById("sendsms").classList.contains("selected")?sms="S":sms="N";var l=document.querySelector(".list_container").querySelector(".selected").title;call("insert_post","prm_objeto="+e+"&prm_screen="+tela+"&prm_visao="+n+"&prm_usuario="+l+"&prm_msg="+o+"&prm_time="+document.getElementById("tempo-msg").title+"&prm_line="+t+"&prm_email="+email+"&prm_sms="+sms+"&prm_filtro="+a).then(function(e){-1==e.indexOf("FAIL")?call("text_post","prm_objeto=&prm_line=&prm_group="+l).then(function(e){r.innerHTML=e,r.scrollTop=r.scrollHeight}):alerta("msg",TR_ER_MS)}),document.getElementById("fieldmsg").value=""}}function selectTextPost(e){e.parentNode.querySelector(".selected")&&e.parentNode.querySelector(".selected").classList.remove("selected"),e.classList.add("selected"),e.classList.remove("msgs"),call("text_post","prm_objeto=&prm_line=&prm_group="+e.title).then(function(e){let t=get("campo");t.innerHTML=e,t.scrollTop=t.scrollHeight})}function fakeLang(e,t,a){var r=document.getElementById("fakelist");if(""==r.className){"open"==document.getElementById("attriblist").className&&r.style.setProperty("left","330px"),attReopen(function(){ajax("list","fakelist","prm_ident="+e+"&prm_titulo="+a+"&prm_campo=lang&prm_visao="+t,!1,"attriblist")},"attriblist")}r.classList.toggle("visible")}var fallback="";"undefined"!=typeof ADMIN&&("A"==ADMIN&&("undefined"==typeof ace&&(fallback=fallback+'<script src="'+OWNER_BI+'.fcl.download?arquivo=ace.js"><\/script>'),fallback=fallback+'<script src="'+OWNER_BI+'.fcl.download?arquivo=mode-sql.js"><\/script>'),document.write(fallback)),paste="";var clickGlobal=new Object;function start(){if(window.addEventListener("scroll",function(){get("jumpdrill")&&get("jumpdrill").remove(),get("jumpmed")&&get("jumpmed").remove(),get("anotacao_show")&&get("anotacao_show").remove(),get("selecteddata")&&(get("selecteddata").id=""),document.querySelector(".optionbox.obsbox.open")&&(document.querySelector(".optionbox").classList.remove("open"),setTimeout(function(){document.querySelector(".optionbox").remove()},200))}),document.addEventListener("mousedown",selectmouse),document.addEventListener("touchstart",selectmouse),document.addEventListener("mouseup",function(){isdrag=!1,xdrag=0,ydrag=0}),document.addEventListener("touchend",function(){isdrag=!1,xdrag=0,ydrag=0}),document.addEventListener("mousemove",movemouse),document.addEventListener("touchmove",movemouse),document.getElementById("show_comandos")&&(document.getElementById("show_comandos").addEventListener("click",function(e){if("backward"==e.target.className||"backward"==e.target.parentNode.className||"backward"==e.target.parentNode.parentNode.className){clearInterval(sobbar),clearTimeout(activeshow),document.getElementById("show_only_bar").style.setProperty("width",0);var t=document.getElementById("active-show").previousElementSibling;"show_only"==t.className?(document.getElementById("active-show").id="",t.id="active-show",removeTrash(),shscr(t.value)):(document.getElementById("active-show").id="",projecoes[projecoes.length-1].id="active-show",removeTrash(),shscr(projecoes[projecoes.length].value))}if("forward"==e.target.className||"forward"==e.target.parentNode.className||"forward"==e.target.parentNode.parentNode.className){clearInterval(sobbar),clearTimeout(activeshow),document.getElementById("show_only_bar").style.setProperty("width",0);var a=document.getElementById("active-show").nextElementSibling;"show_only"==a.className?(document.getElementById("active-show").id="",a.id="active-show",removeTrash(),shscr(a.value)):(document.getElementById("active-show").id="",projecoes[0].id="active-show",removeTrash(),shscr(projecoes[0].value))}e.target.className}),document.addEventListener("keyup",function(e){if(!LAYER.classList.contains("ativo")){var t,a=e.keyCode;if("39"==a)if(document.getElementById("show_only_bar"))clearInterval(sobbar),clearTimeout(activeshow),document.getElementById("show_only_bar").style.setProperty("width",0),"show_only"==(t=document.getElementById("active-show").nextElementSibling).className?(document.getElementById("active-show").id="",t.id="active-show",removeTrash(),shscr(t.value)):(document.getElementById("active-show").id="",projecoes[0].id="active-show",removeTrash(),shscr(projecoes[0].value));if("37"==a)if(document.getElementById("show_only_bar"))clearInterval(sobbar),clearTimeout(activeshow),document.getElementById("show_only_bar").style.setProperty("width",0),"show_only"==(t=document.getElementById("active-show").previousElementSibling).className?(document.getElementById("active-show").id="",t.id="active-show",removeTrash(),shscr(t.value)):(document.getElementById("active-show").id="",projecoes[projecoes.length].id="active-show",removeTrash(),shscr(projecoes[projecoes.length].value))}})),document.removeEventListener(up,clickGlobal),clickGlobal=function(e){var t=e.target;if(t.classList.contains("options")&&"touchend"==up&&(e.stopPropagation,t.classList.toggle("hover")),t.classList.contains("fechar")&&(t.parentNode.remove(),document.querySelector("."+t.parentNode.id+"_jump")&&document.querySelector("."+t.parentNode.id+"_jump").remove()),t.classList.contains("removeobj")&&confirm("Excluir objeto da tela?")&&remover(t.parentNode.parentNode.id,"excluir"),t.classList.contains("preferencias")&&(closeSideBar("saveap"),(t.parentNode.parentNode.classList.contains("front")||t.parentNode.parentNode.classList.contains("grafico")||t.parentNode.parentNode.classList.contains("dados")||t.parentNode.parentNode.classList.contains("marquee")||t.parentNode.parentNode.classList.contains("texto")||t.parentNode.parentNode.classList.contains("medidor")||t.parentNode.parentNode.classList.contains("file")||t.parentNode.parentNode.classList.contains("relatorio")||t.parentNode.parentNode.classList.contains("generico")||t.parentNode.parentNode.classList.contains("mapageoloc"))&&loadAttrib("ed_gadg","ws_par_sumary="+t.parentNode.parentNode.id.split("trl")[0]),t.parentNode.parentNode.parentNode.classList.contains("icone")&&loadAttrib("ed_gadg","ws_par_sumary="+t.parentNode.parentNode.parentNode.id.split("trl")[0]),t.parentNode.parentNode.classList.contains("pro6")&&loadAttrib("ed_call","prm_object="+t.parentNode.parentNode.id.split("trl")[0]+"&prm_screen="+tela)),t.classList.contains("filtros")&&(closeSideBar("saveap"),openFilter(t.parentNode.parentNode.id+"-filterlist")),t.classList.contains("destaques")&&(closeSideBar("saveap"),openDestaque(t.parentNode.parentNode.id+"-destaquelist")),t.classList.contains("talk")){var a=document.getElementById("text-talk");if(a.classList.contains("open"))a.classList.remove("open");else{var r=document.getElementById("drill_go").value;a.classList.remove("open"),a.setAttribute("data-line",r),a.setAttribute("data-objeto",t.parentNode.parentNode.id),ajax("list","text_post","prm_objeto="+t.parentNode.parentNode.id+"&prm_line="+r,!1,"campo"),a.classList.add("open"),document.getElementById("campo").scrollTo(0,1e5),textTalkint=setInterval(function(){document.getElementById("campo")?ajax("list","text_post","prm_objeto="+t.parentNode.parentNode.id.split("trl")[0]+"&prm_line="+r,!0,"campo"):clearInterval(textTalkint),document.getElementById("campo").scrollTo(0,1e5)},5e3),get("jumpdrill")&&(get("jumpdrill").style.setProperty("opacity","0"),setTimeout(function(){get("jumpdrill").innerHTML=""},100))}}if(t.classList.contains("excel")&&toexcel(t.parentNode.parentNode.id),t.classList.contains("data_table")&&"A"==ADMIN){let e=t.parentNode.id.replace("more",""),a=get("dados_"+e).getAttribute("data-visao");document.getElementById("titulo").innerHTML=t.title,call_save("consulta"),carregaPainel("data_table",a+"|"+e.split("trl")[0]),carrega("consulta?prm_objeto="+e.split("trl")[0]+"&prm_visao="+a),curtain("enabled")}if(t.classList.contains("lightbulb")){closeSideBar("saveap");let e=t.parentNode.id.replace("more","");t.parentNode.parentNode.classList.contains("pro6")?(telaSup("objeto",e.split("trl")[0]),titulo(t,"c"),curtain("enabled"),carregaPainel("list_call",t.parentNode.parentNode.id),"A"==ADMIN?carrega("list_call?prm_objeto="+e.split("trl")[0]+"&prm_screen="+tela):carrega("list_call_end?prm_objeto="+e.split("trl")[0]+"&prm_screen="+tela),get("attriblist").querySelector(".closer")&&get("attriblist").querySelector(".closer").click(),call_save("")):(titulo(t,"c"),call_save(""),telaSup("objeto",e.split("trl")[0]),carregaPainel("list_go",e.split("trl")[0]),carrega("list_go?prm_objeto="+e.split("trl")[0]),curtain("enabled"))}if(t.classList.contains("filter")){closeSideBar("saveap");let e=t.parentNode.id.replace("more",""),a=get("dados_"+e).getAttribute("data-visao");titulo(t,"c"),call_save(""),telaSup("objeto",e.split("trl")[0]),telaSup("visao",a),carregaPainel("list_ofiltro",e.split("trl")[0]+"|"+a),carrega("list_ofiltro?ws_par_sumary="+e.split("trl")[0]+"&prm_visao="+a),curtain("enabled")}if(t.classList.contains("sigma")){closeSideBar("saveap");let e=t.parentNode.id.replace("more",""),a=get("dados_"+e).getAttribute("data-visao");carregaPainel("calculada",e.split("trl")[0]),document.getElementById("titulo").innerHTML=t.title,call_save(""),carrega("list_calculada?prm_objeto="+e.split("trl")[0]+"&prm_visao="+a),curtain("enabled")}if(t.classList.contains("star")){closeSideBar("saveap");let e=t.parentNode.id.replace("more",""),a=get("dados_"+e).getAttribute("data-visao");titulo(t,"c"),call_save(""),telaSup("visao",a),telaSup("objeto",e.split("trl")[0]),carregaPainel("blink",e.split("trl")[0]+"|"+a),carrega("blink?prm_objeto="+e.split("trl")[0]+"&prm_visao="+a),curtain("enabled")}if(t.classList.contains("conf")){loading();let e=t.parentNode.parentNode.id;ajax("fly","favoritar","prm_objeto="+e+"&prm_nome="+document.getElementById(e+"_ds").innerHTML+"&prm_url=&prm_screen="+tela+"&prm_parametros="+encodeURIComponent(document.getElementById("par_"+e).value)+"&prm_dimensao="+encodeURIComponent(document.getElementById("col_"+e).value)+"&prm_medida="+encodeURIComponent(document.getElementById("agp_"+e).value)+"&prm_pivot="+encodeURIComponent(document.getElementById("cup_"+e).value)+"&prm_acao=incluir",!1),loading()}if(t.classList.contains("arrowturn")){loading();var n=t.parentNode.parentNode.id,o=n;if(cd_goto="",n.split("trl").length>1&&(o=n.split("trl")[0],cd_goto=n.split("trl")[1]),t.parentNode.parentNode.classList.contains("cross"))var l="N";else l="S";if(document.getElementById("par_"+t.parentNode.parentNode.id))var i=document.getElementById("par_"+t.parentNode.parentNode.id).value;else i="";if("mac"==PRINCP.className||"mobile"==PRINCP.className)var s="-webkit-order";else s="order";if(t.parentNode.parentNode.parentNode.style.getPropertyValue(s)&&!t.parentNode.parentNode.parentNode.classList.contains("drill")){var d=t.parentNode.parentNode.parentNode.style.getPropertyValue(s),c="&prm_dashboard=true";dashlocation=t.parentNode.parentNode.parentNode.id}else{d=t.parentNode.parentNode.offsetLeft;var m=t.parentNode.parentNode.offsetTop;c="&prm_dashboard=false"}document.getElementById("drill_obj").value=n,document.getElementById(n)&&document.getElementById(n).remove();let e="N";t.parentNode.parentNode.classList.contains("drill")&&(e="Y"),appendar("prm_drill="+e+"&prm_objeto="+o+"&prm_parametros="+i+"&PRM_POSX="+d+"&PRM_POSY="+m+"&PRM_ZINDEX=2&prm_screen="+tela+"&prm_track="+o+"&prm_objeton=&prm_cross="+l+c+"&prm_cd_goto="+cd_goto,dashlocation,!1)}if(t.classList.contains("size")){closeSideBar("saveap"),attReopen(function(){t.parentNode.parentNode.parentNode.id;call("av_prop","ws_par_sumary="+t.parentNode.id.replace("more","").split("trl")[0]+"&prm_screen="+tela).then(function(e){document.getElementById("attriblist").innerHTML=e}).then(function(){t.parentNode.classList.remove("hover")})},"attriblist")}if(t.classList.contains("aduser")){document.querySelector(".optionbox")&&document.querySelector(".optionbox").remove();let e=t.title;attReopen(function(){call("advancedUsers","prm_user="+e).then(function(e){get("attriblist").innerHTML=e})},"attriblist")}if(t.classList.contains("grupo_screen")){var u=t.parentNode.parentNode.id;call("grupo_screen","prm_grupo="+u).then(function(e){document.getElementById("content").innerHTML=e}),carregaPainel("menu_grupo_screen",u)}"custom"==t.id&&lmenuLink(t)},document.addEventListener(up,clickGlobal),document.getElementById("call-menu")){var e=document.getElementById("call-menu");call("obj_screen_count","prm_screen=DEFAULT&prm_tipo=CALL_LIST").then(function(t){parseInt(t)>0?e.classList.remove("invisible"):e.classList.add("invisible")})}if(document.getElementById("show_only_screen")&&document.getElementById("float-filter")){var t=document.getElementById("float-filter");call("obj_screen_count","prm_screen=DEFAULT&prm_tipo=FLOAT").then(function(e){parseInt(e)>0?t.classList.remove("invisible"):t.classList.add("invisible")})}if(document.getElementById("fechar_sup").addEventListener("click",fecharSup),document.getElementById("refresh_sup").addEventListener("click",refreshSup),document.getElementById("back_sup").addEventListener("click",backSup),document.getElementById("prefdrop")){var a=document.getElementById("prefdrop").querySelectorAll("ul > li");for(o=0;o<a.length;o++)"noscript"==a[o].className||a[o].classList.contains("aba")||(a[o].firstElementChild.addEventListener("mousedown",function(){document.getElementById("prefdrop").clientWidth>60&&lmenuLink(this)}),a[o].firstElementChild.addEventListener("touchend",function(e){e.cancelBubble(),e.preventDefault(),document.getElementById("prefdrop").clientWidth>60&&lmenuLink(this)}))}"A"==ADMIN&&(document.addEventListener("keypress",function(e){var t=e.which,a=document.getElementById("debug-key");switch(t){case 100:case 68:startTimer=setTimeout(function(){a.value=0},1e4),a.value=e.which;break;case 101:case 69:"100"==a.value||"68"==a.value?a.value=e.which:a.value=0;break;case 98:case 66:"101"==a.value||"69"==a.value?a.value=e.which:a.value=0;break;case 117:case 85:"98"==a.value||"66"==a.value?a.value=e.which:a.value=0;break;case 103:case 71:"117"==a.value||"85"==a.value?(a.value=0,""==document.getElementById("debug").className?(document.getElementById("debug").setAttribute("class","active"),setTimeout(function(){document.getElementById("debug").firstElementChild.focus()},100)):document.getElementById("debug").setAttribute("class","")):a.value=0;break;default:a.value=0}}),document.addEventListener("keydown",function(e){e.ctrlKey&&"Enter"==e.key&&(e.preventDefault(),document.getElementById("data_list_menu")&&document.getElementById("data_list_menu").classList.contains("open")&&(document.getElementById("data-valor").focus(),document.getElementById("data-valor").blur(),document.querySelector(".link.ac1").click()))})),document.addEventListener("mousemove",function(e){cursorx=e.pageX-12,cursory=e.pageY-12}),document.addEventListener("touchstart",function(e){cursorx=e.touches[0].pageX-12,cursory=e.touches[0].pageY-12}),document.getElementById("princp").addEventListener("touchstart",function(e){"princp"==e.target.id&&"open"==document.getElementById("attriblist").className&&(document.getElementById("attriblist").className="")}),window.addEventListener("orientationchange",function(){0==window.orientation?(PRINCP.classList.add("retrato"),PRINCP.classList.remove("paisagem")):(PRINCP.classList.remove("retrato"),PRINCP.classList.add("paisagem"))}),window.addEventListener("touchstart",function(e){var t=e.touches;if(t.length>1){var a=document.getElementById("donut");a.style.left=t[1].clientX+15+"px",a.style.top=t[1].clientY+45+"px",a.classList.toggle("open")}}),window.addEventListener("touchmove",function(e){clearTimeout(time)}),window.addEventListener("touchend",function(){clearTimeout(time)}),apscreen(OWNER_BI+".fcl.show_screen?prm_screen=DEFAULT","DEFAULT");var r=document.getElementById("loading-bar").children[0].children[0],n="";if(setTimeout(function(){n=setInterval(function(){r.style.setProperty("width",parseInt(r.style.getPropertyValue("width"))+1+"%")},40)},200),setTimeout(function(){clearInterval(n),r.style.setProperty("width","60%")},300),setTimeout(function(){r.style.setProperty("width","100%")},1e3),setTimeout(function(){remover("starting"),mac(),donutEvent(),telasup=document.getElementById("telasup"),telacustom=document.getElementById("telacustom")},1300),(projecoes=document.querySelectorAll(".show_only")).length>0){var o=0;projecoes[0].id="active-show",setTimeout(function(){shscr(projecoes[0].value)},3100)}if("DEFAULT"==document.getElementById("current_screen").value)var l=0,i=setInterval(function(){if(null==document.getElementById("loading-bar")||0==l){clearInterval(i),l=1;var e=document.querySelectorAll(".dragme"),t=e.length;for(let a=0;a<t;a++){if(document.getElementById(e[a].id+"more"))document.getElementById(e[a].id+"more").addEventListener("touchend",function(){this.classList.add("hover");setTimeout(function(e){e.classList.remove("hover")},5e3)})}}},2e3);fakeListCustom.tpGroup='{ "1": { "value": "", "text": "'+TR_TP_MT+'", "type": "group" }, "2": { "value": "ROLL", "text": "'+TR_TP_SI+'", "type": "opt" }, "3": { "value": "GROUP", "text": "'+TR_TP_NA+'", "type": "opt" } }',fakeListCustom.amostra='{ "1": { "value": "", "text": "'+TR_AM_LL+'", "type": "group" }, "2": { "value": "50", "text": "50", "type": "opt" }, "3": { "value": "100", "text": "100", "type": "opt" }, "4": { "value": "200", "text": "200", "type": "opt" } }',fakeListCustom.condicoesSimples='{ "1": { "value": "", "text": "'+TR_CS_CD+'", "type": "group" }, "2": { "value": "IGUAL", "text": "'+TR_CS_IA+'", "type": "opt" }, "3": { "value": "DIFERENTE", "text": "'+TR_CS_DD+'", "type": "opt" }, "4": { "value": "MAIOR", "text": "'+TR_CS_MA+'", "type": "opt" }, "5": { "value": "MENOR", "text": "'+TR_CS_ME+'", "type": "opt" }, "6": { "value": "MAIOROUIGUAL", "text": "'+TR_CS_AI+'", "type": "opt" }, "7": { "value": "MENOROUIGUAL", "text": "'+TR_CS_EI+'", "type": "opt" }, "8": { "value": "LIKE", "text": "'+TR_CS_SE+'", "type": "opt" }, "9": { "value": "NOTLIKE", "text": "'+TR_CS_NS+'", "type": "opt" } }',fakeListCustom.tpRegra='{ "1": { "value": "", "text": "Tipo de Regra", "type": "group" }, "2": { "value": "I", "text": "BLOQUEADO", "type": "opt" }, "3": { "value": "S", "text": "LIBERADO", "type": "opt" } }',fakeListCustom.agrupado='{ "1": { "value": "", "text": "Agrupado", "type": "group" }, "2": { "value": "S", "text": "Sim", "type": "opt" }, "3": { "value": "N", "text": "Não", "type": "opt" } }'}function openFilter(e){if(document.getElementById(e)){var t=document.getElementById("filterlist");t.className="filtro hidden",t.getAttribute("data-desc")!=e&&setTimeout(function(){t.innerHTML=document.getElementById(e).innerHTML,t.className="filtro show",t.setAttribute("data-desc",e)},400),t.setAttribute("data-desc","")}}function openDestaque(e){if(document.getElementById(e)){var t=document.getElementById("destaquelist");t.className="filtro hidden",t.getAttribute("data-desc")!=e&&setTimeout(function(){t.innerHTML=document.getElementById(e).innerHTML,t.className="filtro show",t.setAttribute("data-desc",e)},400),t.setAttribute("data-desc","")}}function blurView(e,t){e.value!=e.getAttribute("data-default")&&call("save_view","prm_view="+t+"&prm_valor="+encodeURIComponent(e.value)+"&prm_tipo=desc").then(function(t){-1==t.indexOf("#alert")&&(e.setAttribute("data-default",e.value),alerta("msg",TR_AL))})}function viewDetalhes(e){document.getElementById("content").innerHTML="",carregaPainel("list_crocks",e),call("load_crocks","prm_visao="+e).then(function(e){document.getElementById("painel-colunas").innerHTML=e}),telaSup("visao",e)}function saveView(e,t,a){call("save_view","prm_view="+t+"&prm_valor="+(e.nextElementSibling?e.nextElementSibling.title:e.value)+"&prm_tipo="+a).then(function(e){-1==e.indexOf("FAIL")?alerta("feed-fixo",TR_AL):alerta("feed-fixo",TR_ER)})}function telaSup(e,t,a){if(void 0!==a)return telasup.getAttribute("data-"+e);telasup.setAttribute("data-"+e,t)}var ie=document.all,nn6=document.getElementById&&!document.all,isdrag=!1,xdrag,ydrag,dobj;function movemouse(e){if(isdrag){if(e)var t=e.type;else t="nomove";if("touchmove"==t){var a=nn6?e.touches.item(0):event.touches.item(0);if((o=parseInt(tx+a.clientX-xdrag))%5!=0)var r=10*Math.round(o/10);else r=o;if((l=parseInt(ty+a.clientY-ydrag))%5!=0)var n=10*Math.round(l/10);else n=l;return dobj.style.setProperty("left",r+"px"),dobj.style.setProperty("top",n+"px"),!1}var o,l;if((o=parseInt(tx+e.clientX-xdrag))%5!=0)r=10*Math.round(o/10);else r=o;if((l=parseInt(ty+e.clientY-ydrag))%5!=0)n=10*Math.round(l/10);else n=l;return dobj.style.setProperty("left",r+"px"),dobj.style.setProperty("top",n+"px"),!1}}function selectmouse(e){var t=nn6?e.target:event.srcElement,a=nn6?"HTML":"BODY";if(t.classList.contains("wd_move"))for(;t.tagName!=a&&"dragme"!=t.className&&"dragme front top"!=t.className&&"dragme front"!=t.className&&"dragme front cross"!=t.className&&"dragme dados"!=t.className&&"dragme medidor"!=t.className&&"dragme medidor drill"!=t.className&&"dragme grafico"!=t.className&&"dragme float-par"!=t.className&&"dragme file"!=t.className&&"dragme file drill"!=t.className&&"dragme texto"!=t.className&&"dragme grid"!=t.className&&"dragme img"!=t.className&&"dragme icone"!=t.className&&"dragme ponteiro drill"!=t.className&&"dragme grafico drill"!=t.className&&"dragme front drill"!=t.className&&"dragme front drill cross"!=t.className&&"dragme marquee"!=t.className&&"dragme relatorio"!=t.className&&"dragme heatmap"!=t.className&&"dragme grafico mapa"!=t.className&&"dragme grafico drill mapa"!=t.className&&"dragme generico"!=t.className&&"dragme mapageoloc drill"!=t.className;)t=nn6?t.parentNode:t.parentElement;if(t.classList.contains("dragme")&&("main"==t.parentNode.parentNode.parentNode.id||"main"==t.parentNode.parentNode.id||"main"==t.parentNode.parentNode.parentNode.parentNode.id||"main"==t.parentNode.id)&&"yes"==document.getElementById("movimento").value){if(e.preventDefault(),isdrag=!0,dobj=t,tx=parseInt(window.getComputedStyle(dobj).getPropertyValue("left")),ty=parseInt(window.getComputedStyle(dobj).getPropertyValue("top")),e)var r=e.type;else r="nomove";if("touchstart"==r){var n=nn6?e.touches.item(0):event.touches.item(0);xdrag=n.clientX,ydrag=n.clientY}else xdrag=nn6?e.clientX:event.clientX,ydrag=nn6?e.clientY:event.clientY;return!1}}function syncForm(e,t,a){var r=new Blob([document.getElementById(e).innerHTML],{type:a}),n=new FormData;n.set("arquivo",r,t),ajax("fly","upload",n,!1,"","","","upload")}var dataid="";function drillfix(e,t,a){var r=get(t),n=get("dados_"+t).getAttribute("data-track"),o="consulta";if(r.classList.contains("grafico")&&(o="grafico",get("dados_"+t).getAttribute("data-tipo")),(r.classList.contains("medidor")||r.classList.contains("dados"))&&(o="valor"),r.classList.contains("mapageoloc")&&(o="mapageoloc"),"consulta"!=o&&0==parseInt(get("dados_"+t).getAttribute("data-drill")))return!1;get("anotacao_show")&&get("anotacao_show").remove(),get("jumpdrill")&&get("jumpdrill").remove();var l=320;1==mobile_portrait_layout()&&(l=90);var i=get("dados_"+t).getAttribute("data-visao"),s="";get("dados_"+t).getAttribute("data-cd_goto")&&(s=get("dados_"+t).getAttribute("data-cd_goto"));var d,c,m,u="normal",p="complete";if("grafico"==o||"mapageoloc"==o)l=200,d=a.split("|").filter((e,t)=>t%2).join("|"),c=cursorx-l/2+5,m="top: "+(cursory-get("html").scrollTop+40)+"px",p="short";else if("consulta"==o){var g=get("selecteddata");get("selectedline").children[0].getAttribute("data-valor"),d=get("col_"+t).value;var f=g.getBoundingClientRect();m="top: "+(f.top+(g.clientHeight+4))+"px;",c=f.left+g.clientWidth/2-l/2;var _=0;f.top+(g.clientHeight+8)+l/2>PRINCP.clientHeight&&(m="bottom: "+(PRINCP.getBoundingClientRect().height-get("selecteddata").getBoundingClientRect().top+4)+"px;",u="reverse"),get(t+"c").children[0].children.length>1&&(_=get(t+"c").children[0].children[0].querySelectorAll(".colagr").length);var v,y=g.cellIndex-_,h="";if(get(t+"c").children[0].lastElementChild.querySelectorAll("th")[y]){var b=get(t+"c").children[0].lastElementChild.querySelectorAll("th")[y];v=b.getAttribute("data-valor"),b.classList.contains("ASC")?h="ASC":b.classList.contains("DESC")&&(h="DESC")}}else{l=200,get("gxml_"+t)&&(d=get("gxml_"+t).getAttribute("data-parametros")),get("valores_"+t)&&(d=get("valores_"+t).getAttribute("data-colunareal")),y=get("valor_"+t)?get("valor_"+t).getBoundingClientRect():get(t+"_vl").getBoundingClientRect(),c=y.x+y.width/2-l/2,m="top: "+(y.y+y.height+10)+"px",p="short"}let E=[];E.push(get("par_"+t).value),E.push(get("drill_go").value);let I=[...new Set(E.sort())].filter(e=>e).join("|");I=I.replace("||","|");let x="";void 0!==v&&"undefined"!=v&&null!=v&&(x=v),call("jumpdrill","prm_objeto="+t+"&prm_screen="+tela+"&prm_colunas="+d+"&prm_visao="+i+"&prm_objeto_ant="+n+"&prm_coluna="+x+"&prm_condicao="+encodeURIComponent(I)+"&prm_cd_goto="+s).then(function(e){let t=document.createElement("div");t.innerHTML=e;let a=0;if("consulta"==o){let e=148;t.querySelector("#id_atalho_anotar")&&(e=248),1==mobile_portrait_layout()&&(e=230,t.querySelector("#id_atalho_anotar")&&(e=320));let r=0,n=6;1==mobile_portrait_layout()?r=150:t.querySelector("#id_atalho_anotar")&&(r=355),0!=r&&(l=r,c=f.left+g.clientWidth/2-l/2),c+l>MAIN.clientWidth&&(c=MAIN.clientWidth-5-l),(a=l-5-(g.clientWidth/2-n)-(MAIN.clientWidth-f.right))<l/2-n&&(a=0),a>=l-35&&(a=l-35),c<=0&&(c=2,a=f.left+g.clientWidth/2-n),f.top+(g.clientHeight+8)+e>PRINCP.clientHeight&&(m="bottom: "+(PRINCP.getBoundingClientRect().height-get("selecteddata").getBoundingClientRect().top+4)+"px;",u="reverse")}c<0&&(c=2),t.children[0].setAttribute("style","left: "+c+"px; "+m),a>0&&t.children[0].style.setProperty("--left",a.toString()+"px"),t.children[0].title=I,MAIN.appendChild(t.children[0])}).then(function(){var e=get("jumpdrill");e.classList.add(u),e.classList.add(p),e.classList.add(t+"_jump"),setTimeout(function(){e.querySelector(".fechartab").addEventListener("click",function(){this.parentNode.remove(),get("selecteddata")&&(get("selecteddata").id="")}),e.classList.add("open");let a=e.querySelectorAll(".icons");for(let e=0;e<a.length;e++)a[e].addEventListener("click",function(){quickPa(this)});get(t+"dv2")&&(get(t+"dv2").removeEventListener("scroll",noScroll),get(t+"dv2").addEventListener("scroll",noScroll))},10),get("confirm-tag").addEventListener("click",function(){let a=e.querySelector(".ch").getAttribute("data-tipo");var r;if("string"==typeof v)if("VALOR"!=a&&get("quick-coluna").value.length>1||"VALOR"==a){"A"==ADMIN?r=(r=(r=v)+"@"+e.title).replace("|||","|").replace("||","|"):(document.getElementById(USUARIO.replace(".","_")+"_temp")&&remover(USUARIO.replace(".","_")+"_temp","excluir"),ajax("fly","ex_obj","prm_objeto="+USUARIO.replace(".","_")+"_temp",!1),r=(r=(r=v)+"@"+e.title).replace("|||","|").replace("||","|"));var n="";let o=get("quick-obj"),l=o.children[0].value,i=o.children[1].value;if(l.trim().length>1)"A"!=ADMIN&&(l+="_temp"),call("quick_create","prm_nome="+encodeURIComponent(l)+"&prm_tipo="+a+"&prm_parametros="+r+"&prm_visao="+e.getAttribute("data-visao")+"&prm_coluna="+i+"&prm_grupo=&prm_obj_ant="+t+"&prm_filtro="+encodeURIComponent(e.getAttribute("data-filtro"))+"&prm_screen="+tela+"&prm_ordem_vlr="+h).then(function(e){-1==(n=e).indexOf("duplicado")?("A"==ADMIN&&ajax("fly","inserir_objeto","prm_objeto="+n+"&prm_screen="+tela,!1),appendar("prm_objeto="+n+"&PRM_ZINDEX=2&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_screen="+tela,!1,"")):alerta("feed-fixo","Objeto duplicado!")}).then(function(){-1==n.indexOf("duplicado")&&(get("dados_"+n)?renderChart(n):ajustar(n),centerDrill(n),get("selecteddata").id="",loading())});else alerta("feed-fixo",TR_NM_LE)}else alerta("feed-fixo",TR_CO_SL);else alerta("feed-fixo",TR_VL_NL)});let a=get("confirm-tag-anot-add"),r=get("confirm-tag-anot-del");a.addEventListener("click",function(){let a=get("quick-anotacao"),r=encodeURIComponent(a.querySelector("#nm_usuario").value),n=encodeURIComponent(a.querySelector("#quick-anotacao-texto").value),o=encodeURIComponent(a.querySelector("#fake-usuario-permissao").title),l=v,i=e.title.replace("|||","|").replace("||","|");0!=n.replace("%0A","").length?call("anotacao_grava","prm_objeto="+t+"&prm_screen="+tela+"&prm_usuario="+r+"&prm_coluna="+l+"&prm_condicao="+i+"&prm_usuario_permissao="+o+"&prm_anotacao="+n).then(function(e){if(alerta("feed-fixo",e.split("|")[1]),"OK"==e.split("|")[0]&&get("selecteddata")&&(get("selecteddata").classList.add("anotacao"),!get("selecteddata").querySelector("svg"))){let e='<span><svg version="1.1" id="Camada_1" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="15" height="15" viewBox="4 0 8 8" style="enable-background:new 0 0 10 10; fill:#BF0000;" xml:space="preserve"> <polygon points="10,1.9 10,5 12.1,7 12,-0.1 4.6,-0.1 6.7,1.9 "/> </svg></span>';get("selecteddata").innerHTML=e+get("selecteddata").innerHTML}}):alerta("feed-fixo","Texto da anota&ccedil;&atilde;o &eacute; obrigat&oacute;rio, para limpar o texto, exclua a anota&ccedil;&atilde;o")}),r.addEventListener("click",function(){let a=get("quick-anotacao"),r=encodeURIComponent(a.children[0].value),n=v,o=e.title.replace("|||","|").replace("||","|");call("anotacao_exclui","prm_objeto="+t+"&prm_screen="+tela+"&prm_usuario="+r+"&prm_coluna="+n+"&prm_condicao="+o).then(function(e){alerta("feed-fixo",e.split("|")[1]),"OK"==e.split("|")[0]&&(a.querySelector("#quick-anotacao-texto").value="",a.querySelector("#fake-usuario-permissao").title="",a.querySelector("#fake-usuario-permissao").children[0].innerHTML="TODOS",get("selecteddata")&&(get("selecteddata").title=e.split("|")[2],0==e.split("|")[2].length&&(get("selecteddata").classList.remove("anotacao"),get("selecteddata").querySelector("svg")&&get("selecteddata").querySelector("svg").remove())))})})})}function noScroll(){get("jumpdrill")&&get("jumpdrill").remove(),get("jumpmed")&&get("jumpmed").remove(),get("anotacao_show")&&get("anotacao_show").remove()}function cleardrill(){var e=document.querySelectorAll(".drill");for(let t=0;t<e.length;t++)e[t].remove()}function maxCall(){var e=document.getElementById("space").children,t=0;for(let a=0;a<e.length;a++)e[a].clientWidth>t&&(t=e[a].clientWidth+25);if(0!=t)return t+"px";alerta("feed-fixo",TR_OB_NO)}function ctnrs(){var e=document.getElementsByTagName("*"),t=e.length,a=0;for(let r=0;r<t;r++)e[r]&&"ctnr"==e[r].id.substring(0,4)&&(a=e[r].id);return a}function quickPa(e){document.querySelector(".ch")&&document.querySelector(".ch").classList.remove("ch"),e.classList.add("ch");var t=e.getAttribute("data-tipo"),a=get("quick-obj"),r=get("quick-anotacao"),n=get("quick-atalhos");1==mobile_portrait_layout()&&n.style.setProperty("display","none"),"ANOTACAO"==t?(a.classList.remove("open"),r.classList.add("open")):(document.getElementById("quick-coluna").disabled="VALOR"==t&&"true",r.classList.remove("open"),a.classList.add("open"))}function quickerPa(e,t,a,r,n,o){if(loading(),document.getElementById(e+"_temp")&&remover(e+"_temp","excluir"),ajax("fly","ex_obj","prm_objeto="+e+"_temp",!1),document.getElementById("drill_go").value.replace("|","").length>0)var l=document.getElementById("drill_go").value;else l="";setTimeout(function(){ajax("fly","quick_create","prm_nome="+e+"_temp&prm_tipo="+n+"&prm_parametros="+document.getElementById("jumpdrill").className+"@"+l+"&prm_visao="+a+"&prm_coluna="+o+"&prm_grupo="+r+"&prm_obj_ant="+t+"&prm_filtro=&prm_screen="+tela,!1),noerror("",TR_CR,"feed-fixo"),appendar("prm_objeto="+e+"_temp&PRM_ZINDEX=&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_screen="+tela,"false"),carrega("ajobjeto?prm_objeto="+e+"_temp"),centerDrill(e+"_temp")},1e3)}function drillChange(e,t,a,r){var n,o=get("drill_go").value,l=[],i=t.getAttribute("data-parametros");i=i.substring(0,i.length-1),l.push(i),l.push(t.title),0==o.slice(-1).indexOf("|")&&(o=o.substring(0,o.length-1)),o=encodeURIComponent(o);var s=e.split("###");document.getElementById("drill_x").value,document.getElementById("drill_y").value;get("selecteddata")&&(get("selecteddata").id="");var d="",c="";if(-1!=e.indexOf("SCR")||-1!=e.indexOf("SRC"))-1!=s[0].indexOf("-")?shscr(s[0].split("-")[0],tela,o):shscr(s[0],tela,o);else{e.split("-").length>1?(d=e.split("-")[0],c=e.split("-")[1]):d=e,remover(d+"trl"+c,!1),loading("x");var m="";if(m=l.filter(e=>e).join("|"),o.trim().length>0){let e=[];e.push(o),e.push(encodeURIComponent(m)),n=[...new Set(e.sort())].filter(e=>e).join("##")}else n=encodeURIComponent(m.replace("||","|"));ajax("append","show_objeto","prm_drill=Y&prm_objeto="+d+"&prm_posx="+cursorx+"px&prm_zindex="+zindex_abs+"&prm_posy="+cursory+"px&prm_parametros="+n+"&prm_screen="+tela+"&prm_cd_goto="+c+"&prm_track="+a+"|"+d+"&prm_objeton="+r+"  >  ",!0,"main","",d+"trl"+c,"obj"),setTimeout(function(){remover("script-load")},1e4)}}function centerDrill(e){var t,a="";a=setInterval(function(){if(document.getElementById(e)||document.getElementById(e+"trl")){t=document.getElementById(e+"trl")?document.getElementById(e+"trl"):document.getElementById(e);var r=window.innerWidth/2,n=window.innerHeight/2,o=t.clientWidth/2,l=t.clientHeight/2;if(parseInt(l)>parseInt(n)&&(l=parseInt(n)/2),void 0!==window.scrollX)var i=window.scrollX+r-o+"px",s=window.scrollY+n-l+"px";else i=r-o+"px",s=n-l+"px";t.style.setProperty("left",i),parseInt(s)<10&&(s="40px"),t.style.setProperty("top",s),clearInterval(a)}},100)}function fitScreen(e){document.getElementById(e+"fixed")&&(document.getElementById(e+"fixed").innerHTML="",document.getElementById(e+"fixed").style.setProperty("width","0"),document.getElementById(e+"fixed").style.setProperty("max-height","auto")),toggleClass(e,"front","front expand","r"),setTimeout(function(){fixCol(e),smartScroll(e)},500)}function lmenuLink(e){if(closeSideBar("prefdrop"),clicked=e,clearInterval(refresh_timer),"no-menu"!=e.getAttribute("data-menu")&&curtain("enabled"),e.getAttribute("data-carrega").length>0){titulo(e,"c"),loader("content");var t="";e.getAttribute("data-package")&&(t=e.getAttribute("data-package")),"_"!=e.getAttribute("data-carrega")?call(e.getAttribute("data-carrega"),e.getAttribute("data-url"),t).then(function(e){document.getElementById("content").innerHTML=e}).then(function(){if(e.getAttribute("data-ace")&&e.getAttribute("data-ace").length>1){var t=e.getAttribute("data-ace");(ace_editor=ace.edit(t)).session.setMode("ace/mode/sql")}telasup_ant=[],document.getElementById("back_sup").style.display="none"}):document.getElementById("content").innerHTML=""}e.getAttribute("data-attrib").length>1&&(document.getElementById("attriblist").classList.toggle("open"),ajax("list",e.getAttribute("data-attrib"),"",!1,"attriblist")),call_save(""),"no-menu"!=e.getAttribute("data-menu")&&(e.getAttribute("data-menu").length>1?(document.getElementById("painel").innerHTML="",call("menu","prm_menu="+e.getAttribute("data-menu")+"&prm_default=","","GET").then(function(e){document.getElementById("painel").innerHTML=e;var t=document.getElementById("prm_usuario_origem");t&&t.style.setProperty("display","none")})):carregaPainel("")),refreshSupBtn("O"),clicked.getAttribute("data-refresh").length>1&&(refreshSupBtn("V"),refresh_param[0]=clicked.getAttribute("data-refresh"),refresh_param[1]="",refresh_param[2]="",clicked.getAttribute("data-refresh-pkg")&&(refresh_param[2]=clicked.getAttribute("data-refresh-pkg")),clicked.getAttribute("data-refresh-ativo")&&"S"==clicked.getAttribute("data-refresh-ativo")&&refreshSupStart()),document.getElementById("prefdrop")&&document.getElementById("prefdrop").classList.remove("hover"),document.getElementById("popupmenu").innerHTML=""}function mostrak(e){document.getElementById("sandbox").contentWindow.document.getElementById("parsecheck").setAttribute("value",e),"NOVAVIEW"==document.getElementById("view_list").value&&document.getElementById("sandbox").contentWindow.document.getElementById("nome").setAttribute("value",document.getElementById("new_query").value),"NOVAVIEW"==document.getElementById("view_list").value&&document.getElementById("new_query").value.length<1?alerta("",TR_TC):(loading("x"),setTimeout(function(){var e=ace_editor.getValue();if(0==e.trim().length)alerta("",TR_QN),loading("x");else{var t=Math.ceil(e.length/3e4);for(let r=0;r<t;r++){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name","PICADO"),a.setAttribute("value",e.substr(3e4*[r],3e4)),document.getElementById("sandbox").contentWindow.document.forms[0].appendChild(a)}document.getElementById("sandbox").contentWindow.document.zebra.submit(),setTimeout(function(){var e=document.getElementById("sandbox").contentWindow.document.body.innerHTML;-1==e.indexOf("#alert")?"NOVAVIEW"==document.getElementById("view_list").value?(alerta("msg",TR_CR),document.getElementById("new_query").value=""):alerta("msg",TR_AL):alerta("msg",e),loading("x"),sandbox(),edit_view()},1500)}},100))}function sandbox(){var e=document.getElementById("view_list").title;document.getElementById("sandbox").contentWindow.document.body.innerHTML='<form id="zebra" name="zebra" method="post" action="'+OWNER_BI+'.fcl.passagem_test"><input id="nome" type="hidden" name="nome" value="'+e+'" /><input id="parsecheck" name="parseonly" type="hidden" value="N"/></form>'}function reload(e){e?document.getElementById("fechar_sup").setAttribute("data-reloado",e):document.getElementById("fechar_sup").setAttribute("data-reloads","true")}function execute_sql(e,t){document.getElementById("sqloutput").children[0].innerHTML="",document.getElementById("sqloutput").children[1].innerHTML="",document.getElementById("sqloutput").children[2].innerHTML="",loader("queryresult"),setTimeout(function(){var a,r=ace_editor.getValue();r.trim().length>1&&(a=ace_editor.getSelectedText().length>1?ace_editor.getSelectedText():r,ajax("S"==e?"list":"double","exec_query","11"==t?"p_query="+encodeURIComponent(a)+"&p_parse="+e:"p_query="+encodeURIComponent(a)+"&p_parse="+e+"&p_linhas="+t,!0,"queryresult"))},20)}function arrow(e,t,a){if("click"!=a){var r=e.value.trim();r!=e.getAttribute("data-default").trim()&&(document.getElementById("user-language").value==document.getElementById("sys-language").value&&document.getElementById(t+"_rotulo").setAttribute("title",r.toUpperCase()),ajax("fly","save_column","prm_visao="+document.getElementById("telasup").getAttribute("data-visao")+"&prm_name="+t+"&prm_campo="+a+"&prm_valor="+encodeURIComponent(r),!1),noerror("",TR_AL,"msg"),e.setAttribute("data-default",r),"NM_ROTULO"==a&&(document.getElementById(t+"id").children[1].innerHTML=r.toUpperCase()))}else ajax("list","load_column","prm_visao="+document.getElementById("telasup").getAttribute("data-visao")+"&prm_name="+t+"&prm_screen="+tela,!1,"content")}function userEvent(e,t,a,r){switch(a){case"blur":e.getAttribute("data-default")!=e.value&&(ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+encodeURIComponent(e.value.replace(/<[/a-zA-Z0-9 ="-]+>/g,""))+"&prm_tipo=nome"),noerror("",TR_AL,"msg"),e.setAttribute("data-default",e.value));break;case"email":e.getAttribute("data-default")!=e.value&&(ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.value.replace(/<[/a-zA-Z0-9 ="-]+>/g,"")+"&prm_tipo=email"),noerror("",TR_AL,"msg"),e.setAttribute("data-default",e.value));break;case"grupo":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=grupo"),noerror("",TR_AL,"msg");break;case"status":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=status"),"true"==error?e.classList.contains("checked")?(e.classList.remove("checked"),e.title=e.getAttribute("data-negative")):(e.classList.add("checked"),e.title=e.getAttribute("data-positive")):ajax("list","list_users","",!1,"content"),noerror("",TR_AL,"msg");break;case"id_expira_senha":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=id_expira_senha"),noerror("",TR_AL,"msg");break;case"expirar_senha":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=expirar_senha"),noerror("",TR_AL,"msg"),document.getElementById("usuarios_dt_validacao_senha")&&(document.getElementById("usuarios_dt_validacao_senha").value="");break;case"cd_tela_inicial":ajax("return","alter_user","prm_nome="+t+"&prm_valor="+e+"&prm_tipo=cd_tela_inicial"),"ERRO"==respostaAjax.split("|")[0]?alerta("msg",respostaAjax.split("|")[1]):(document.getElementById("cd_tela_inicial_usuario")&&(document.getElementById("cd_tela_inicial_usuario").title=respostaAjax.split("|")[2],document.getElementById("cd_tela_inicial_usuario").children[0].innerHTML=respostaAjax.split("|")[3]),alerta("msg",respostaAjax.split("|")[1]));break;case"dba":"dot"==e.className?(ajax("fly","alter_user","prm_nome="+t+"&prm_valor=unlock&prm_tipo=dba"),e.className="dot active"):(ajax("fly","alter_user","prm_nome="+t+"&prm_valor=lock&prm_tipo=dba"),e.className="dot"),noerror("",TR_AL,"msg");break;case"upload":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=upload"),noerror("",TR_AL,"msg");break;case"excel":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=excel_out"),noerror("",TR_AL,"msg");break;case"app":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.title+"&prm_tipo=app"),noerror("",TR_AL,"msg");break;case"permissao":get("attriblist").querySelector(".closer").click(),"n/a"!=e.value&&("custom"==e.value?(call("menu","prm_menu=add_custom&prm_default="+t).then(function(e){document.getElementById("painel").innerHTML=e}),call("listaCustomizado","prm_usuario="+t).then(function(e){document.getElementById("content").innerHTML=e})):"permissao"==e.value?(call("menu","prm_menu=user_permissao_list&prm_default="+t).then(function(e){document.getElementById("painel").innerHTML=e}),call("user_permissao_list","prm_usuario="+t).then(function(e){document.getElementById("content").innerHTML=e})):(document.getElementById("titulo").innerHTML=e.options[e.selectedIndex].innerHTML,document.getElementById("painel").innerHTML="",call("menu_"+e.value+"_access","prm_usuario="+t).then(function(e){document.getElementById("painel").innerHTML=e}),loader("content"),call(e.value+"_access","prm_usuario="+t+"&prm_conteudo=FULL").then(function(e){document.getElementById("content").innerHTML=e})));break;case"permissao-fake":document.getElementById("ajax").innerHTML="",call("screen_access","prm_usuario="+t+"&prm_conteudo=N&prm_grupo="+e.title).then(function(e){document.getElementById("ajax").innerHTML=e});break;case"remove":if(confirm(TR_US_EX)){var n=document.getElementById(t+"linha");n.classList.add("removing"),call("delete_user","usu_nome_d="+t).then(function(e){-1==e.indexOf("ERRO")?-1==e.indexOf("#alert")?(n.remove(),alerta("feed-fixo",TR_EX)):(n.classList.remove("removing"),alerta("feed-fixo",TR_ER)):(n.classList.remove("removing"),alerta("feed-fixo",TR_ER_EX))})}break;case"show":carregaPainel("add_show&prm_default="+t),carrega("show_only?prm_usuario="+t),document.getElementById("titulo").innerHTML=r;break;case"tp_ordem_coluna":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.value+"&prm_tipo=tp_ordem_coluna"),noerror("",TR_AL,"msg");break;case"id_aviso_mostrar":ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.value+"&prm_tipo=id_aviso_mostrar"),noerror("",TR_AL,"msg");break;default:e.getAttribute("data-default")!=e.value&&(ajax("fly","alter_user","prm_nome="+t+"&prm_valor="+e.value+"&prm_tipo="+a),"false"==error?e.setAttribute("data-default",e.value):e.value=e.getAttribute("data-default"),noerror("",TR_AL,"msg"))}}function newLine(e){var t=document.getElementById(e);if("new"!=t.nextElementSibling.className){var a=document.createElement("tr");a.className="new";for(let e=0;e<t.children.length;e++){var r=document.createElement("td");a.appendChild(r)}t.parentNode.insertBefore(a,t.nextElementSibling)}}function objAction(e,t,a,r){"inserir"==r?(loading(),document.getElementById(e)?alerta("msg",TR_OB_DP):(ajax("fly","inserir_objeto","prm_objeto="+e+"&prm_screen="+tela+"&prm_screen_ant="+a),"CALL_LIST"!=document.getElementById("lisobj").value?appendar("prm_objeto="+e+"&PRM_ZINDEX=&prm_posx=150px&prm_posy=150px&prm_screen="+tela):shscr(tela),curtain(),document.getElementById(e+"dv2")?ajustar(e):carrega("ajobjeto?prm_objeto="+e))):confirm(TR_OB_EX)&&(ajax("fly","dl_object","prm_object="+e,!1),noerror(t,TR_EX,"msg"),document.getElementById(e)&&(document.getElementById(e).style.display="none"))}function checkFix(e,t,a,r,n,o,l){if("check"==e){if(1==t.checked)var i="S";else i="N";ajax("fly","linguagem_padrao","prm_update=S&prm_tabela="+a+"&prm_coluna="+r+"&prm_linguagem="+n+"&prm_default="+o+"&prm_fixa="+i,!1)}else t.previousElementSibling.value.trim().length>0?(ajax("fly","update_language","prm_valor="+t.previousElementSibling.value+"&prm_tabela="+a+"&prm_coluna="+r+"&prm_linguagem="+n+"&prm_default="+o+"&prm_tipo="+l,!1),noerror("",TR_AL,"msg"),noerror("",TR_AL,"msg")):alerta("msg",TR_BL)}function auto(e,t,a){var r=e.selectionEnd-1,n=e.selectionEnd-2,o=e.value.split(""),l=document.getElementById("auto-complete-formula");"8"==t.which&&r<e.getAttribute("data-lastkey")&&(l.classList.add("off"),e.setAttribute("data-search","N")),"["==o[r]&&"$"==o[n]&&(l.classList.remove("off"),e.setAttribute("data-search","S"),e.setAttribute("data-lastkey",r+1)),"]"==o[r]&&(l.classList.add("off"),e.setAttribute("data-search","N")),"S"==e.getAttribute("data-search")&&ajax("list","auto_complete","prm_visao="+a+"&prm_letters="+o.slice(e.getAttribute("data-lastkey")).join(""),!0,"auto-complete-formula")}function autoClick(e){e.parentNode.classList.add("off");var t=document.getElementById("formula-coluna"),a=e.innerHTML;t.value=t.value.split("").slice(0,t.getAttribute("data-lastkey")).join("")+a+"]",t.setAttribute("data-search","N"),t.setAttribute("data-lastkey",""),call("save_column","prm_visao="+document.getElementById("micro-visao").title+"&prm_name="+document.getElementById("ajax-lista").querySelector(".selected").title+"&prm_campo=FORMULA&prm_valor="+encodeURIComponent(t.value)+"&prm_screen="+tela).then(function(e){alerta("feed-fixo",e.split("|")[1]),"ERRO"!=e.split("|")[1]&&t.setAttribute("data-default",t.value),e.split("|")[2].length>0?(t.style.setProperty("color","var(--vermelho-secundario)"),document.getElementById("erro_coluna_formula").innerHTML=e.split("|")[2]+"."):(t.style.setProperty("color","initial"),document.getElementById("erro_coluna_formula").innerHTML=""),t.focus()})}function swapColumn(e){var t=e.parentNode.getAttribute("data-tipo");if(e.lastElementChild.classList.contains("edit-prop-col")?(eEdit=e.lastElementChild,eEdit.removeEventListener("click",editColumn),eEdit.addEventListener("click",editColumn),eDelete=eEdit.previousElementSibling):eDelete=e.lastElementChild,eDelete.removeEventListener("click",removeColumn),eDelete.addEventListener("click",removeColumn),e.id=="selected"+t)e.classList.contains("template")&&null!=document.getElementById("prm_objeto")&&fakeOption(e.title,document.getElementById("prm_objeto").value,"template",document.getElementById("prm_visao").value),e.id="";else if(document.getElementById("selected"+t)){var a=document.getElementById("selected"+t).outerHTML,r=e.outerHTML;document.getElementById("selected"+t).outerHTML=r,e.outerHTML=a,document.getElementById("selected"+t).id="",save("consulta")}else e.id="selected"+t}function removeColumn(e,t){if(e.stopPropagation(),t)var a=t.parentNode;else a=this.parentNode;var r=a.nextElementSibling;r.parentNode.removeChild(r),a.parentNode.removeChild(a),save("consulta")}function editColumn(e){e.stopPropagation();var t,a="",r="";document.getElementById("prm_visao")&&(a=document.getElementById("prm_visao").value),document.getElementById("prm_objeto")&&(r=document.getElementById("prm_objeto").value),t=this.parentNode.title,""!=a&&""!==r&&""!==t&&(curtain("enabled"),carregaPainel("list_crocks",r,t),telaSup("visao",a))}function swapSquare(e){var t=e.parentNode.getAttribute("data-tipo");if(document.getElementById("selected"+t)){var a=document.getElementById("selected"+t),r=a.nextElementSibling;e.previousElementSibling.id!="selected"+t&&e.nextElementSibling.id!="selected"+t&&(r.parentNode.removeChild(r),a.id="",e.outerHTML='<li onclick="swapSquare(this);" class="square"></li>'+a.outerHTML+'<li onclick="swapSquare(this);" class="square"></li>',a.parentNode.removeChild(a)),save("consulta")}}function saveTpt(e,t,a){var r=e.querySelectorAll(".linha"),n="";for(let e=0;e<r.length;e++)r[e].title.length>0&&(n=0==e?r[e].title:n+"|"+r[e].title);n!=e.getAttribute("data-default")&&(ajax("fly","save_column","prm_visao="+t+"&prm_name="+a+"&prm_campo=FORMULA&prm_valor="+n),e.setAttribute("data-default",n))}function fastInclude(e,t){if(document.getElementById(e))alerta("feed-fixo",TR_OB_DP);else{if(document.querySelector(".movingarticle"))var a=document.querySelector(".movingarticle"),r=a.id;if(a?ajax("fly","inserir_objeto","CALL_LIST"!=t&&"FLOAT_PAR"!=t&&"FLOAT_FILTER"!=t&&"BROWSER"!=t?"prm_objeto="+e+"&prm_screen="+r:"prm_objeto="+e+"&prm_screen="+tela):call("inserir_objeto","prm_objeto="+e+"&prm_screen="+tela).then(function(){"FLOAT_PAR"!=t&&"FLOAT_FILTER"==t||(document.getElementById("float-filter").className="visible"),"CALL_LIST"==t&&(document.getElementById("call-menu").className="visible")}),"CALL_LIST"!=t&&"FLOAT_PAR"!=t&&"FLOAT_FILTER"!=t&&"BROWSER"!=t){loading();new Promise(function(t,n){t(a?ajax("append","show_objeto","prm_objeto="+e+"&PRM_ZINDEX=99&prm_posx=300px&prm_posy="+(a.children.length+1)+"px&prm_screen="+tela+"&prm_dashboard=true",!0,r,"",e,"obj"):ajax("append","show_objeto","prm_objeto="+e+"&PRM_ZINDEX=&prm_posx=300px&prm_posy=200px&prm_screen="+tela,!0,"main","",e,"obj"))})}else"CALL_LIST"==t||"BROWSER"==t?shscr(tela):("FLOAT_PAR"!=t&&"FLOAT_FILTER"!=t||alerta("feed-fixo",TR_AD),LAYER.classList.contains("ativo")&&loading())}}function getlist(e){if(0==document.getElementById("painel").querySelectorAll(".error").length){var t=document.getElementById("consulta_visao").title,a=encodeURIComponent(document.getElementById("consulta_nome").value.replace(/\./g,"_").replace(/\#/g,"")),r=encodeURIComponent(document.getElementById("consulta_desc").value),n=document.getElementById("consulta_grupo").title,o=document.getElementById("consulta_prm").value;t.trim().length>0?a.trim().length>1?r.trim().length>1?0!=n.trim().length?"false"==error&&(carrega("consulta?prm_obj="+a+"&prm_visao="+t+"&prm_nome="+r+"&prm_grupo="+n+"&prm_agrupamento="+o),call_save("consulta")):alerta("msg",TR_ES_GR):alerta("msg",TR_DS_LE):alerta("msg",TR_NM_LE):alerta("msg",TR_ES_VW)}else alerta("msg",TR_ID)}function filter(e,t,a,r,n){var o=document.getElementById("filtro-coluna-"+a).getAttribute("data-default"),l=document.getElementById("filtro-condicao-"+a).getAttribute("data-default");if("fakeoption"!=document.getElementById("filtro-conteudo-"+a).className)var i=encodeURIComponent(document.getElementById("filtro-conteudo-"+a).getAttribute("data-default")),s=document.getElementById(n),d=encodeURIComponent(s.value);else d=i=encodeURIComponent(document.getElementById("filtro-conteudo-"+a).children[0].title);var c=document.getElementById("filtro-ligacao-"+a).getAttribute("data-default");if(document.getElementById("filtro-agrupado-"+a))var m=document.getElementById("filtro-agrupado-"+a).getAttribute("data-default");else m="N";if("fakeoption"!=document.getElementById("filtro-conteudo-"+a).className&&(s.setAttribute("data-default",s.value),"SELECT"==s.tagName))for(let e=0;e<s.children.length;e++)s.children[e].value==s.value?s.children[e].setAttribute("selected","selected"):s.children[e].removeAttribute("selected");ajax("fly","edit_filtro","prm_objeto="+e+"&prm_visao="+t+"&prm_coluna="+o+"&prm_condicao="+l+"&prm_conteudo="+i+"&prm_valor="+d+"&prm_tipo="+r+"&prm_agrupado="+m+"&prm_ligacao="+c,!0),noerror("",TR_AL,"msg"),reload(e)}function list_obj(){var e=document.getElementById("obj_serch_tp").value,t=document.getElementById("obj_serch_vw").value,a=document.getElementById("obj_serch_gp").value,r=document.getElementById("obj_serch_in").value;r.length<1&&(r="N/A"),document.getElementById("ajax_obj").innerHTML="",loader("ajax_obj"),ajax("list","list_obj","prm_tipo="+e+"&prm_view="+t+"&prm_grupo="+a+"&prm_desc="+r,!0,"ajax_obj")}function order(e,t){var a=document.getElementById(t).getAttribute("data-dir");return"notsame"==e?(document.getElementById(t).innerHTML="",loader(t),"1"==a?document.getElementById(t).setAttribute("data-dir","2"):document.getElementById(t).setAttribute("data-dir","1")):(document.getElementById("content").innerHTML="",loader("content")),a}function checkError(){if(0!=document.getElementById("painel").querySelectorAll(".error").length)throw alerta("feed-fixo",TR_II),new Error(TR_II)}function dashSpace(e){document.getElementById("id_DASH_MARGIN"+e).value=document.getElementById("DASH_MARGIN"+e+"_input1").value.replace("px","")+"px "+document.getElementById("DASH_MARGIN"+e+"_input2").value.replace("px","")+"px "+document.getElementById("DASH_MARGIN"+e+"_input3").value.replace("px","")+"px "+document.getElementById("DASH_MARGIN"+e+"_input4").value.replace("px","")+"px"}function checkPar(e,t){var a=document.getElementById(e).value;a.match(/\$\[[a-zA-Z0-9_]*\]/g)&&ajax("input","checkpar","prm_variavel="+a.match(/\$\[[a-zA-Z0-9_]*\]/g).join("|")+"&prm_visao="+t,!0,e)}var perline=18,divSet=!1,tmpf,curId,curTp,curMd,colorLevels=Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"),colorArray=Array(),ie=!1,nocolor="none";function getObj(e){return ie?document.all[e]:document.getElementById(e)}function addColor(e,t,a){addColorValue(colorLevels[e],colorLevels[t],colorLevels[a])}function addColorValue(e,t,a){colorArray[colorArray.length]="#"+e+e+t+t+a+a}function setColor(color){var link=getObj(curId),field=getObj(curId+"field"),picker=getObj("colorpicker"),modelo=getObj(curMd);field.value=color,"nomode"==curMd?field.value=color:"color"==curTp?parent.document.getElementById(curMd)&&(parent.document.getElementById(curMd).style.color=color):parent.document.getElementById(curMd)&&(parent.document.getElementById(curMd).style.backgroundColor=color),""==color?(link.style.background=nocolor,link.style.color=nocolor,color=nocolor,tmpf.value="#000000"):(link.style.background=color,link.style.color=color,tmpf.value=color),picker.style.display="none",eval(getObj(curId+"field").title),"cor_fundo"==curId&&(PRINCP.style.backgroundColor=color);var total="";if(-1!=curId.indexOf("field")){var valores=document.getElementById("fakelist").getElementsByTagName("input");for(let e=0;e<valores.length;e++)"#065182"!=valores[e].value&&(total=total+valores[e].parentNode.title+valores[e].value+"|");ajax("fly","alter_attrib","prm_objeto="+document.getElementById(curId).getAttribute("data-visao")+"&prm_prop=SUBQUERY-COR&prm_value="+total,!1)}if(link.previousElementSibling){var inputblink=link.previousElementSibling;inputblink.id&&-1!=inputblink.id.indexOf("destaque-")&&destaque(inputblink.getAttribute("data-counter"),inputblink.getAttribute("data-tipo"),inputblink.id)}}function setDiv(){if(document.createElement){var e=document.createElement("div");"string"==typeof e.innerHTML&&(genColors(),e.id="colorpicker",e.style.display="none",e.innerHTML='<span style="font-family:Verdana; font-size:11px;"> '+getColorTable()+"</span>","open"==document.getElementById("attriblist").className?(document.getElementById("fakelist").appendChild(e),document.getElementById("fakelist").className="visible",document.getElementById("fakelist").style.setProperty("left","300px")):document.body.appendChild(e),divSet=!0)}}function pickColor(e,t,a,r,n){divSet||setDiv();var o=getObj("colorpicker");if(e!=curId||"block"!=o.style.display){tmpf=getObj(r),curId=e,curTp=a,curMd=t;getObj(e);o.style.top=cursory+"px",o.style.left=cursorx+"px",o.style.setProperty("opacity","0"),o.style.setProperty("transition","all 0.1s linear"),o.style.setProperty("-webkit-transition","all 0.2s linear"),setTimeout(function(){o.style.setProperty("opacity","1")},100),o.setAttribute("class","font"),o.style.display="block"}else o.style.display="none"}function genColors(){addColorValue("0","0","0"),addColorValue("3","3","3"),addColorValue("6","6","6"),addColorValue("9","9","9"),addColorValue("C","C","C"),addColorValue("F","F","F");for(let e=1;e<colorLevels.length;e++)addColor(0,0,e);for(let e=1;e<colorLevels.length-1;e++)addColor(e,e,5);for(let e=1;e<colorLevels.length;e++)addColor(0,e,0);for(let e=1;e<colorLevels.length-1;e++)addColor(e,5,e);for(let e=1;e<colorLevels.length;e++)addColor(e,0,0);for(let e=1;e<colorLevels.length-1;e++)addColor(5,e,e);for(let e=1;e<colorLevels.length;e++)addColor(e,e,0);for(let e=1;e<colorLevels.length-1;e++)addColor(5,5,e);for(let e=1;e<colorLevels.length;e++)addColor(0,e,e);for(let e=1;e<colorLevels.length-1;e++)addColor(e,5,5);for(let e=1;e<colorLevels.length;e++)addColor(e,0,e);for(let e=1;e<colorLevels.length-1;e++)addColor(5,e,5);return colorArray}function getColorTable(){colorArray[colorArray.length]="#8DB6CD",colorArray[colorArray.length]="#B0E2FF",colorArray[colorArray.length]="#6495ED";var e=colorArray,t="";t+='<table border="0" cellspacing="1" cellpadding="1">';for(let a=0;a<e.length;a++)a%perline==0&&(t+="<tr>"),t+='<td bgcolor="#000000"><a style="outline: 1px solid #000000; color: '+e[a]+"; background: "+e[a]+';font-size: 10px;" title="'+e[a]+'" href="javascript:setColor(\''+e[a]+"');\">&nbsp;&nbsp;&nbsp;</a></td>",a%perline==perline-1&&(t+="</tr>");return t+='<td bgcolor="#000"><a href="javascript:setColor(\'transparent\');" title="" style="padding: 0 2px; text-decoration: none; font-weight: bold; outline: 1px solid #000000; color: #CC0000; background: #FFF; font-size: 10px;">X</a></td>',i%perline!=0&&(t+="</tr>"),t+="</table>"}function relateColor(id,color){var link=getObj(id);""==color?(link.style.background=nocolor,link.style.color=nocolor,color=nocolor):(link.style.background=color,link.style.color=color),eval(getObj(id+"field").title)}function getAbsoluteOffsetTop(e){for(var t=e.offsetTop,a=e.offsetParent;a!=document.body;)t+=a.offsetTop,a=a.offsetParent;return t}function getAbsoluteOffsetLeft(e){for(var t=e.offsetLeft,a=e.offsetParent;a!=document.body;)t+=a.offsetLeft,a=a.offsetParent;return t}document.all&&(ie=!0,nocolor="");var checkscreen="",loopscreen="";function fullscreen(){var e=document.querySelector(".full").id;clearInterval(checkscreen),clearInterval(loopscreen);var t=document.getElementById("dados_"+e).getAttribute("data-full");if(parseInt(t)>0&&document.getElementById(e+"c")){var a=document.getElementById(e+"m").getElementsByTagName("tbody")[0],r=a.scrollHeight,n=0,o=document.getElementById(e+"m").clientHeight,l=document.getElementById(e+"m").clientHeight/12;if(!document.getElementById(e+"-estilo-full")){var i="";i="div#"+e+" tbody tr { "+(i=" height: "+l+"px;")+" }";var s=document.getElementById("active-show").getAttribute("data-time");i="div#"+e+" div#"+e+"m tbody { transition: transform "+s+"s linear; } "+i;var d=document.createElement("style");d.id=e+"-estilo-full",d.innerHTML=i,document.head.appendChild(d)}a.style.setProperty("transform","translateY(-"+(r-(document.getElementById(e+"dv2").clientHeight-2*l))+"px)");var c=(r-(document.getElementById(e+"dv2").clientHeight-2*l))/parseInt(s);o<r?checkscreen=setInterval(function(){"ativo"!=document.getElementById("layer").className&&document.getElementById(e+"m")&&(clearInterval(checkscreen),loopscreen=setInterval(function(){if(n+o<r+40)n+=parseInt(c);else{clearInterval(loopscreen);var e=document.getElementById("active-show").nextElementSibling;"show_only"==e.className?setTimeout(function(){document.getElementById("active-show").id="",e.id="active-show",removeTrash(),shscr(e.value)},5e3):setTimeout(function(){document.getElementById("active-show").id="",document.querySelector(".show_only").id="active-show",removeTrash(),shscr(document.querySelector(".show_only").value)},5e3)}},1e3))},10):setTimeout(function(){clearInterval(loopscreen);var e=document.getElementById("active-show").nextElementSibling;"show_only"==e.className?setTimeout(function(){document.getElementById("active-show").id="",e.id="active-show",removeTrash(),shscr(e.value)},1e3):setTimeout(function(){document.getElementById("active-show").id="",document.querySelector(".show_only").id="active-show",removeTrash(),shscr(document.querySelector(".show_only").value)},1e3)},4e3)}}function sucesso(e){ajax("fly","gps","prm_posicao="+(e.coords.latitude+" "+e.coords.longitude)+"|"+mobilecheck())}function erro(){return!1}function mobilecheck(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t?"mobile":"desktop"}navigator.geolocation&&navigator.geolocation.getCurrentPosition(sucesso,erro);var dbltouch=0,dbltouchX=0,dbltouchY=0;function dblTouch(e){var t=document.getElementById(e+"_ds");"1"==t.getAttribute("data-touch")?(t.setAttribute("data-touch","0"),touch&&clearTimeout(touch),curtain(""),scale(e)):(t.setAttribute("data-touch","1"),touch=setTimeout(function(){t.setAttribute("data-touch","0")},1e3))}function swipeStart(e,t){-1!=document.getElementById(e).className.indexOf("scaled")&&(document.getElementById(e).setAttribute("data-swipe",t.touches[0].pageX),t.stopPropagation())}function swipe(e,t){var a=document.getElementById(e);-1!=a.className.indexOf("scaled")&&(parseInt(a.getAttribute("data-swipe"))>t.touches[0].pageX+50?cycle(e,"next"):parseInt(a.getAttribute("data-swipe"))<t.touches[0].pageX-50&&cycle(e,"prev"),t.stopPropagation())}function smoothScroll2(e,t){var a=document.getElementById(e),r=document.getElementById(t).offsetTop-a.offsetTop-188,n=0,o=setInterval(function(){n>r&&clearInterval(o),n+=47,a.scrollTo(0,n)},5)}function smoothScroll(e){e=e||window.innerHeight;var t=window.scrollY,a=setInterval(function(){t>e&&clearInterval(a),t+=20,window.scrollTo(0,t)},10)}function donutEvent(){var e=document.getElementById("donut");e.addEventListener("mouseleave",function(){this.classList.remove("open")}),e.addEventListener("click",function(e){this.classList.remove("open")})}function over_evento(e){this.id;var t=e.target;if("TABLE"!=t.tagName&&"TBODY"!=t.tagName&&"TR"!=t.tagName&&"SVG"!=t.tagName&&"TH"!=t.tagName&&t.classList&&t.classList.contains("imgurl")){document.getElementById("img_content")&&(document.getElementById("img_content").classList.contains("scaled")||document.getElementById("img_content").remove());var a=document.createElement("div");a.id="img_content";var r=document.createElement("img");r.src=t.getAttribute("data-url");var n=document.createElement("img");n.src=OWNER_BI+".fcl.download?arquivo=img_error.jpg",n.className="img_error";var o=t.getBoundingClientRect().left+36,l=t.getBoundingClientRect().top;r.addEventListener("error",function(){r.style.setProperty("display","none"),a.appendChild(n)}),a.appendChild(r),a.style.setProperty("left",o+"px"),a.style.setProperty("top",l+"px"),document.getElementById("main").appendChild(a)}}function out_evento(e){document.getElementById("img_content")&&(document.getElementById("img_content").classList.contains("scaled")||document.getElementById("img_content").remove())}function click_evento(e){var t=this.id,a=e.target,r=document.getElementById(t).parentNode.parentNode.parentNode.className,n=document.getElementById("current_screen").value;if("path"!=a.tagName&&"circle"!=a.tagName&&"polygon"!=a.tagName&&"svg"!=a.tagName||("svg"==a.tagName?a=e.target.parentNode.parentNode:"circle"==a.tagName||"polygon"==a.tagName?a=e.target.parentNode.parentNode.parentNode:"path"==a.tagName&&(a=e.target.parentNode.parentNode.parentNode.parentNode)),"TABLE"!=a.tagName&&"TBODY"!=a.tagName&&a.getAttribute("colspan")<2&&!a.parentNode.classList.contains("lc")){if(t=t.substring(0,t.length-1),-1!=a.className.indexOf("seta"))var o=0;else o=parseInt(a.cellIndex);if(a.classList.contains("callmed")){var l=get("dados_"+t).getAttribute("data-visao");medDrill(a,t,l)}else if("TH"==a.tagName&&-1==r.indexOf("cross")){var i,s=a.cellIndex,d=0;i=a.parentNode.parentNode.querySelectorAll("th");var c=a.parentNode.querySelectorAll(".colagr").length;a.parentNode.querySelector(".colagr")||(d=a.parentNode.parentNode.querySelectorAll(".colagr").length);var m=a;if(!a.className&&a.parentNode.parentNode.children.length>1&&(m=a.parentNode.parentNode.lastElementChild.children[s-c]),s+d>0)if(e.ctrlKey){var u="",p="";document.getElementById("dados_"+t)&&(u=document.getElementById("dados_"+t).getAttribute("data-visao")),m.getAttribute("data-agrupador")&&(p=m.getAttribute("data-agrupador")),m.getAttribute("data-valor")&&(p=m.getAttribute("data-valor")),""!=u&&""!==p&&(curtain("enabled"),carregaPainel("list_crocks",t.split("trl")[0],p),telaSup("visao",u))}else if(a.parentNode.parentNode.children.length<5){let e=document.getElementById(t).getAttribute("data-reorder-msg");if(e&&e.length>0)return void alerta("feed-fixo",e);var g,f=0;a.getAttribute("data-inv-antes")&&(f=parseInt(a.getAttribute("data-inv-antes"))),g=-1==m.className.indexOf("DESC")&&-1==m.className.indexOf("ASC")?s+f+d+" ASC":-1!=m.className.indexOf("ASC")?s+f+d+" DESC":(m.previousElementSibling,""),m.className=g;var _=[];if(document.getElementById("usu-tp_ordem_coluna")&&"U"==document.getElementById("usu-tp_ordem_coluna").value)_[0]=g;else for(let e=1;e<i.length;e++)i[e]&&(_[e-1]=i[e].className.replace(" fix","").replace(" inv","").replace("cen","").replace("dir","").replace("bld","").replace("callmed","").replace("colagr","").trim());var v=encodeURIComponent(document.getElementById("par_"+t).value),y=document.getElementById(t).parentNode.id,h=document.getElementById(t).offsetTop+"px",b=document.getElementById(t).offsetLeft+"px",E="N",I=t,x="",A="",B=window.getComputedStyle(document.getElementById(t)).getPropertyValue("order");A="main"==y?"&prm_dashboard=false":"&prm_dashboard=true";var L="";document.getElementById(t).classList.contains("drill")?(E="Y",t.split("trl").length>1&&(I=t.split("trl")[0],x=t.split("trl")[1]),L="&prm_track="+document.getElementById("dados_"+t).getAttribute("data-track")):b=B;let r="";call("alterorder","prm_objeto="+t+"&prm_screen="+n+"&prm_valor="+_.filter(e=>e).join(",")).then(function(e){-1!=e.indexOf("#alert")&&(r=e.split("#alert")[1]),r.length>0?alerta("feed-fixo",r):document.getElementById(t)&&(document.getElementById(t).remove(),loading())}).then(function(){0==r.length&&(document.getElementById(t+"sync")?document.getElementById(t+"sync").click():appendar("prm_drill="+E+"&prm_objeto="+I+"&prm_posx="+b+"&prm_zindex=5&prm_posy="+h+"&prm_parametros="+v+"&prm_screen="+tela+A+L+"&prm_cd_goto="+x,!1,y))}).then(function(){})}else{l=get("dados_"+t).getAttribute("data-visao");medDrill(a,t,l),a.classList.toggle("tdselected")}}if(0!=o){if(a.classList.contains("imgurl")){document.getElementById("img_content")&&document.getElementById("img_content").remove();var N=document.createElement("div");N.id="img_content",N.className="scaled";var C=document.createElement("img");C.addEventListener("click",removeImage),document.getElementById("layer2").addEventListener("click",removeImage),C.style.setProperty("opacity","0"),C.src=a.getAttribute("data-url"),C.addEventListener("error",function(){C.style.setProperty("display","none")}),N.appendChild(C),document.getElementById("main").appendChild(N),setTimeout(function(){N.style.setProperty("left","calc(50% - "+C.clientWidth/2+"px)"),N.style.setProperty("top","60px"),N.style.setProperty("z-index","900")},10),setTimeout(function(){C.style.setProperty("opacity","1"),curtain("only")},50)}else if("TH"!=a.tagName){document.getElementById("selecteddata")&&(document.getElementById("selecteddata").id=""),a.id="selecteddata",document.getElementById("selectedline")&&(document.getElementById("selectedline").id=""),a.parentNode.id="selectedline",document.getElementById("drill_obj").value=t.split("trl")[0];var T=a.parentNode.firstElementChild.getAttribute("data-valor"),S=a.parentNode.parentNode.firstElementChild.children[a.cellIndex],w=0;a.parentNode.parentNode.parentNode.firstElementChild.children.length>1&&!a.classList.contains("colagr")&&(w=a.parentNode.parentNode.parentNode.firstElementChild.firstElementChild.querySelectorAll(".colagr").length);var k=a.parentNode.parentNode.parentNode.firstElementChild.lastElementChild.children[a.cellIndex-w];if(S){let r,n,o;a.classList.contains("colagr")||(o=get(t+"c").children[0].lastElementChild.children[a.cellIndex-w].getAttribute("data-pivot")),"string"==typeof S.getAttribute("data-p")?(r=k.getAttribute("data-valor"),n=T):a.parentNode.firstElementChild.getAttribute("data-valor")&&(k?k.getAttribute("data-valor")?(r=k.getAttribute("data-valor"),n=T):n=T:n="-1"!=document.getElementById(t).className.indexOf("cross")?T+"|"+S.innerHTML.trim():T),check_tag(e,t,r,n,o,a)}}}else-1!=a.className.indexOf("seta")&&changearrow(a)}}function removeImage(){document.getElementById("img_content").remove(),curtain(""),document.getElementById("layer2").removeEventListener("click",removeImage)}function dbl_click_evento(e){var t=this.id;t=t.substring(0,t.length-1);var a=e.target;if("td"==a.tagName&&-1!=a.className.indexOf("flag")){var r=document.getElementById("text-talk");r.classList.remove("open"),r.classList.add("open"),ajax("list","text_post","prm_objeto="+t.split("trl")[0]+"&prm_line="+a.getAttribute("data-valor"),!1,"campo")}}function changearrow(e){var t=e.parentNode.parentNode.parentNode.id;t=-1!=t.indexOf("trlc")?t.replace("trlc","trl"):t.slice(0,-1);var a=e,r=a;if(null!=r.parentNode.nextElementSibling){if(r.parentNode.nextElementSibling)var n=r.parentNode.nextElementSibling.tagName;else n="LAST";if("STYLE"==n){var o=r.parentNode.className.replace(/[a-zA-Z ]/g,"");o=0==o.length?0:parseInt(o);try{for(;-1!=r.parentNode.nextElementSibling.className.indexOf("nivel")&&parseInt(r.parentNode.nextElementSibling.className.replace(/[a-zA-Z ]/g,""))>o||"STYLE"==r.parentNode.nextElementSibling.tagName;){var l=r.parentNode.nextElementSibling;if(l.className)l.className;l.remove()}}catch(e){console.log("ultima linha")}document.getElementById("selectedline")&&(document.getElementById("selectedline").id=""),topDistance(t),setTimeout(function(){fixCol(t)},200)}else if(-1==r.className.indexOf("down")&&-1==r.className.indexOf("checked")){if(r.getAttribute("data-subquery").length>0){document.getElementById(t+"dv2").scrollLeft=0;var i=[];document.getElementById("par_"+t).value.length>0&&i.push(encodeURIComponent(document.getElementById("par_"+t).value)),i.push(encodeURIComponent(r.getAttribute("data-valor")));var s="";r.getAttribute("data-self")&&(s=r.getAttribute("data-self")),loading(),document.getElementById("selectedline")&&(document.getElementById("selectedline").id=""),r.parentNode.id="selectedline",setTimeout(function(){var e="";t.split("trl")[1]&&(e="&prm_cd_goto="+t.split("trl")[1]);var a="";t.includes("trl")&&(a="13062309"===t.split("trl")[1]||0===document.getElementById("par_"+t).value.length&&""===t.split("trl")[1]?"&prm_popup_drill=false":document.getElementById("par_"+t).value.length>0?"&prm_popup_drill="+document.getElementById("par_"+t).value:"&prm_popup_drill="+t.includes("trl")),ajax("inject","show_objeto","prm_objeto="+t.split("trl")[0]+e+"&prm_posx=&prm_posy=&prm_parametros="+i.join("|")+"&prm_drill="+r.getAttribute("data-subquery")+"&prm_out=&prm_zindex=&prm_screen="+tela+"&prm_forcet="+r.nextElementSibling.innerHTML.trim()+"&prm_track=INSIDE&prm_objeton="+r.getAttribute("data-ordem")+"&prm_alt_med=&prm_cross=&prm_self="+s+a,!1,"selectedline",t,t,"obj");var n=document.getElementById(t+"c");if(-1==r.parentNode.className.indexOf("nivel"))n.removeEventListener("click",click_evento),n.addEventListener("click",click_evento),n.removeEventListener("dblclick",dbl_click_evento),n.addEventListener("dblclick",dbl_click_evento);else{parseInt(r.parentNode.className.replace("es nivel","").replace("cl nivel",""));n.removeEventListener("click",click_evento),n.addEventListener("click",click_evento),n.removeEventListener("dblclick",dbl_click_evento),n.addEventListener("dblclick",dbl_click_evento)}topDistance(t),setTimeout(function(){fixCol(t)},200)},100)}}else a.classList.toggle("checked")}else if(-1==r.className.indexOf("down")&&-1==r.className.indexOf("checked")){if(r.getAttribute("data-subquery").length>0){document.getElementById(t+"dv2").scrollLeft=0,loading(),document.getElementById("selectedline")&&(document.getElementById("selectedline").id=""),r.parentNode.id="selectedline";i=[];document.getElementById("par_"+t).value.length>0&&i.push(encodeURIComponent(document.getElementById("par_"+t).value)),i.push(encodeURIComponent(r.getAttribute("data-valor"))),setTimeout(function(){ajax("inject","show_objeto","prm_objeto="+t.split("trl")[0]+"&prm_posx=&prm_posy=&prm_parametros="+i.join("|")+"&prm_drill="+r.getAttribute("data-subquery")+"&prm_out=&prm_zindex=&prm_screen="+tela+"&prm_forcet="+r.nextElementSibling.innerHTML.trim()+"&prm_track=INSIDE&prm_objeton="+r.getAttribute("data-ordem")+"&prm_alt_med=&prm_cross=&prm_self="+s,!1,"selectedline",t,t,"obj");var e=document.getElementById(t+"c");if(-1==r.parentNode.className.indexOf("nivel"))e.removeEventListener("click",click_evento),e.addEventListener("click",click_evento),e.removeEventListener("dblclick",dbl_click_evento),e.addEventListener("dblclick",dbl_click_evento);else{parseInt(r.parentNode.className.replace("es nivel","").replace("cl nivel",""));e.removeEventListener("click",click_evento),e.addEventListener("click",click_evento),e.removeEventListener("dblclick",dbl_click_evento),e.addEventListener("dblclick",dbl_click_evento)}topDistance(t),setTimeout(function(){fixCol(t)},200)},100)}}else document.getElementById(t).getElementsByClassName("checked").length<17?a.classList.toggle("checked"):e.className="setadown"}var mapa={},geoarray=new Array;function mapaGeoLoc(e,t){var a=document.getElementById("atributos_"+e),r=document.getElementById("dados_"+e),n=document.getElementById("gxml_"+e),o=document.getElementById(e+"_ERR"),l="|"+a.getAttribute("data-marker_hide")+"|",i=a.getAttribute("data-marker_anime"),s=r.getAttribute("data-drill");if(null==o||"N"!=a.getAttribute("data-show_nomarker")){var d={center:{lat:parseFloat(a.getAttribute("data-center_lat"))||0,lng:parseFloat(a.getAttribute("data-center_lng"))||0},zoom:parseFloat(a.getAttribute("data-zoom"))||8,minZoom:parseFloat(a.getAttribute("data-minzoom"))||3,maxZoom:parseFloat(a.getAttribute("data-maxzoom"))||3,zoomControl:"S"==a.getAttribute("data-zoomcontrol"),mapTypeControl:"S"==a.getAttribute("data-mapTypecontrol"),streetViewControl:"S"==a.getAttribute("data-streetviewcontrol"),fullscreenControl:"S"==a.getAttribute("data-fullscreenControl"),scaleControl:!0,disableDefaultUI:!1,mapTypeControlOptions:{mapTypeIds:["roadmap","satellite","hybrid","terrain"]}},c=new google.maps.StyledMapType([{featureType:"administrative",elementType:"geometry.fill"}],{name:"myCustomMap"});if((mapa=new google.maps.Map(document.getElementById("ctnr_"+e),d)).mapTypes.set("myCustomMap",c),mapa.setMapTypeId(a.getAttribute("data-maptypeid")),null==o){try{var m=JSON.parse("{"+n.children[0].innerHTML.replace(/(\r\n|\n|\r)/g," ")+"}")}catch(e){return void alerta("feed-fixo","Erro interpretando os dados dos marcadores do mapa")}var u={},p={};for(let t in m){0,u={text:m[t].label_text,fontFamily:m[t].label_fontFamily,fontWeight:m[t].label_fontWeight,color:m[t].label_color,fontSize:m[t].label_fontSize,className:m[t].cod},vlabelNone={text:" ",className:m[t].cod},p="",null!=m[t].icon_url?(p={url:m[t].icon_url},0!=Number(m[t].icon_height)&&0!=Number(m[t].icon_width)&&(p.size=new google.maps.Size(Number(m[t].icon_height),Number(m[t].icon_width)),p.scaledSize=new google.maps.Size(Number(m[t].icon_height),Number(m[t].icon_width)))):""!=m[t].icon_path&&(p={path:m[t].icon_path,fillColor:m[t].icon_fillColor,strokeColor:m[t].icon_fillColor,fillOpacity:parseFloat(m[t].icon_fillOpacity),strokeOpacity:parseFloat(m[t].icon_strokeOpacity),rotation:parseFloat(m[t].icon_rotation),scale:parseFloat(m[t].icon_scale)});var g=new google.maps.Marker({map:mapa,draggable:!1,position:{lat:parseFloat(m[t].lat),lng:parseFloat(m[t].lng)},icon:p});-1==l.indexOf("|NOME|")?g.setLabel(u):g.setLabel(vlabelNone),-1==l.indexOf("|DESCRICAO|")&&g.setTitle(m[t].title.trim()),"S"==i&&g.setAnimation(google.maps.Animation.DROP),g.addListener("click",function(){if(s>0){var t=r.getAttribute("data-colunareal").split("|")[0]+"|"+this.getLabel().className+"|";get("drill_go").value=t,drillfix(this,e,t)}else"S"==i&&(null!==this.getAnimation()?this.setAnimation(null):this.setAnimation(google.maps.Animation.BOUNCE))})}}}else document.getElementById("ctnr_"+e).innerHTML=o.innerHTML}function callHints(){var e=document.getElementsByClassName("gmnoprint");for(let a=0;a<e.length;a++)if(e[a].children[1]){e[a].children[1].children[0]&&(e[a].setAttribute("data-text",e[a].children[1].children[0].title.replace(/<BR>/g,", \n ")),e[a].style.setProperty("opacity","1"));var t=document.createElement("span");t.className="texto",t.innerHTML=e[a].children[1].children[0].title,e[a].appendChild(t)}}function lock(e,t){if("lockin"==t){if("locked"==e.className)throw"stop execution";e.setAttribute("class","locked")}else e.setAttribute("class","")}function call_save(e){document.getElementById("salvar").setAttribute("onclick",""),e.length>1?(document.getElementById("salvar").setAttribute("class",""),document.getElementById("salvar").setAttribute("onclick",'save("'+e+'")')):document.getElementById("salvar").setAttribute("class","disabled")}function save(e){switch(e){case"pontoav":document.getElementById("savepa").submit();break;case"browseredit":var t=(m=document.getElementById("browseredit").children).length,a="",r="",n="",o="",l=[],i=[],s=!1;for(let e=0;e<t;e++)if("0"==m[e].getAttribute("data-chave")){if(m[e].getAttribute("data-obrigatorio")&&!(m[e].getAttribute("data-obrigatorio")&&m[e].getAttribute("data-v").length>0))return document.getElementById("data_list_menu").classList.add("shake"),m[e].classList.add("error"),alerta("feed-fixo",TR_AO),void setTimeout(function(){document.getElementById("data_list_menu").classList.remove("shake")},300);if("data"==m[e].getAttribute("data-tipo")&&m[e].getAttribute("data-v").length<10&&0!=m[e].getAttribute("data-v").length||"datatime"==m[e].getAttribute("data-tipo")&&m[e].getAttribute("data-v").length<16&&0!=m[e].getAttribute("data-v").length)return document.getElementById("data_list_menu").classList.add("shake"),m[e].classList.add("error"),alerta("feed-fixo",TR_TD_IN,TR_FL_DC),void setTimeout(function(){document.getElementById("data_list_menu").classList.remove("shake")},300);r=r+"&prm_conteudo="+encodeURIComponent(m[e].getAttribute("data-v").trim()),a=a+"&prm_nome="+m[e].getAttribute("data-c"),n=n+"&prm_ant="+encodeURIComponent(m[e].getAttribute("data-d")),o=o+"&prm_tipo="+m[e].getAttribute("data-tipo")}else"data"==m[e].getAttribute("data-tipo")?l.push("to_char("+m[e].getAttribute("data-c")+", 'DD/MM/YYYY')"):l.push(m[e].getAttribute("data-c")),i.push(m[e].getAttribute("data-v")),encodeURIComponent(m[e].getAttribute("data-v")).includes("%7C")&&(s=!0);curtain(),loading();document.getElementById("browser-tabela").value,m[0].getAttribute("data-c"),m[0].getAttribute("data-v");s?(i=i.join("*|*")).includes("*|*")||(i=i.replace(/\|/g,"******")):i=i.join("|"),ajax("fly","browserEditLine","prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela")+"&prm_chave="+encodeURIComponent(i)+"&prm_campo="+encodeURIComponent(l.join("|"))+a+r+n+o+"&prm_obj="+document.getElementById("data_list").className,!1,"","","","bro"),"false"==error?(document.getElementById("data_list_menu").classList.remove("open"),alerta("feed-fixo",TR_AL),browserSearch("save")):(document.getElementById("data_list_menu").classList.remove("open"),loading());break;case"browsereditclob":var d,c;c="textarea"==document.getElementById("modal-output1").tagName.toLowerCase()?document.getElementById("modal-output1").value:document.getElementById("modal-output1").innerHTML,d=(d=(d=(d=(d=(d=(d=(d="prm_obj="+document.getElementById("data_list").getAttribute("data-objeto"))+"&prm_screen="+tela)+"&prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela"))+"&prm_campo_chave="+document.getElementById("browser-edit-campo").value)+"&prm_chave="+encodeURIComponent(document.getElementById("browser-edit-chave").value))+"&prm_tipo="+document.getElementById("browser-edit-tipo").value)+"&prm_campo="+document.getElementById("browser-edit-coluna").value)+"&prm_conteudo="+encodeURIComponent(c),curtain(),loading(),call("browserEditColumn",d,"bro").then(function(e){document.getElementById("data_list_menu").classList.remove("open"),alerta("",e.split("|")[1]),"ERRO"!=e.split("|")[1]?browserSearch("save"):loading()});break;case"browseradd":t=(m=document.getElementById("browseredit").children).length,a="",o="",document.getElementById("browser-campos").value.split("|"),i=[];var m,u=!1;r="",l=[];for(let e=0;e<t;e++){if("sequence"==m[e].getAttribute("data-tipo")&&(u=!0),"1"==m[e].getAttribute("data-chave")){if(0==m[e].getAttribute("data-v").trim().length)return document.getElementById("data_list_menu").classList.add("shake"),m[e].classList.add("error"),alerta("feed-fixo",TR_AO),void setTimeout(function(){document.getElementById("data_list_menu").classList.remove("shake")},300);i.push(m[e].getAttribute("data-v")),"data"==m[e].getAttribute("data-tipo")?l.push(encodeURIComponent("to_char("+m[e].getAttribute("data-c")+", 'DD/MM/YYYY')")):l.push(m[e].getAttribute("data-c"))}if(m[e].getAttribute("data-obrigatorio")&&!(m[e].getAttribute("data-obrigatorio")&&m[e].getAttribute("data-v").length>0))return document.getElementById("data_list_menu").classList.add("shake"),m[e].classList.add("error"),alerta("feed-fixo",TR_AO),void setTimeout(function(){document.getElementById("data_list_menu").classList.remove("shake")},300);a=a+"&prm_nome="+encodeURIComponent(m[e].getAttribute("data-c")),o=o+"&prm_tipo="+m[e].getAttribute("data-tipo"),r=r+"&prm_conteudo="+encodeURIComponent(m[e].getAttribute("data-v"))}loading();document.getElementById("browser-tabela").value;call("browserNewLine","prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela")+"&prm_chave="+document.getElementById("browser-chave-valores").value+"&prm_coluna="+l.join("|")+a+r+o+"&prm_ident="+encodeURIComponent(i.join("|"))+"&prm_sequence="+u+"&prm_obj="+document.getElementById("data_list").className,"bro").then(function(e){-1==e.indexOf("#alert")?(alerta("feed-fixo",TR_AD),browserSearch("BUSCA"),browserMenu(document.getElementById("data_list_menu"),""),curtain()):(loading(),curtain(),alerta("feed-fixo",e.replace("#alert ","").replace("undefined","")))});break;case"coluna":document.getElementById("saveap").submit();break;case"saveprop":var p=document.getElementById("attriblist").getElementsByTagName("LI"),g="",f="",_=[],v=document.getElementById("obj").value,y=0;for(let e=0;e<p.length;e++)if(p[e].parentNode.classList.contains("form")&&p[e].children[1].children[0]&&"A"!=p[e].children[1].children[0].tagName&&!p[e].children[1].querySelector(".script")&&!p[e].children[2]){if(p[e].children[2]){if(-1!=p[e].children[2].className.indexOf("inc")){f=p[e].children[1].children;for(let e=0;e<f.length;e++)-1==f[e].value.indexOf("ffffff")&&-1==f[e].value.indexOf("FFFFFF")&&-1==f[e].value.indexOf("000000")&&_.push(f[e].value);g=encodeURIComponent(_.join("|"))}}else g=p[e].children[1].children[0].classList.contains("checkbox")?p[e].children[1].children[0].title:"ESPACAMENTO"==p[e].getAttribute("data-prop")||"DASH_MARGIN"==p[e].getAttribute("data-prop")?encodeURIComponent(p[e].children[1].children[0].value+"|"+p[e].children[1].children[1].value+"|"+p[e].children[1].children[2].value+"|"+p[e].children[1].children[3].value):"color"==p[e].children[1].children[0].getAttribute("type")?encodeURIComponent(p[e].children[1].children[1].value):encodeURIComponent(p[e].children[1].children[0].value);"on"==g&&(g=0==(g=p[e].children[1].children[0].checked)?"N":"S"),"off"==g&&(g="S"),g!=encodeURIComponent(p[e].getAttribute("data-default"))&&(y+=1,ajax("fly","save_prop","prm_prop="+p[e].getAttribute("data-prop")+"&prm_valor="+g+"&prm_objeto="+draft+v+"&prm_url_default=&prm_screen="+tela,"true"),p[e].setAttribute("data-default",g))}y>0&&alerta("feed-fixo",TR_AL);break;case"saveprop_chart":var h=document.getElementsByClassName("array_transf"),b=document.getElementsByClassName("array_nomes");e="";for(let t=0;t<h.length;t++)e=e+"x="+h[t].value+"&";var E="";for(let e=0;e<b.length;e++)E=E+"y="+b[e].value+"&";ajax("fly","save_prop",(E=E.slice(0,-1))+"&"+(e=e.slice(0,-1))+"&prm_objeto="+(v=document.getElementById("obj").getAttribute("value"))+"&prm_url_default=&prm_screen="+tela,"true"),curtain(),shscr(tela),alerta("feed-fixo",TR_AL);break;case"savepa":if(!document.getElementById("fakelist").classList.contains("visible")){E=new Array;var I=0,x=document.getElementById("savepa").elements;for(let e=0;e<x.length;e++)x[e].getAttribute("class")&&("on"==x[e].value&&!1===x[e].checked&&(x[e].value="off"),"off"==x[e].value&&"true"==x[e].checked&&(x[e].value="off"),E[I]=x[e],I++);for(let e=0;e<E.length;e++)if(0==e)var A=E[e].getAttribute("class")+"="+E[e].value;else A="p_nm_ponto"==E[e].className?A+"&"+E[e].getAttribute("class")+"="+encodeURIComponent(E[e].value):A+"&"+E[e].getAttribute("class")+"="+E[e].value;document.getElementsByClassName("p_cd_ponto")[0].value.length>1?document.getElementsByClassName("p_nm_ponto")[0].value.length>0?(ajax("fly","savepa",A+"&fakeoption="+document.getElementById("fake_grupo").title,!1),"false"==error&&(v=document.getElementsByClassName("p_cd_ponto")[0].getAttribute("value"),"Ponto de avaliação"==document.getElementById("titulo").innerHTML?alerta("feed-fixo",TR_CR):alerta("feed-fixo",TR_AL))):alerta("msg",TR_DS_IN):alerta("msg",TR_NM_LE)}break;case"saveap":E=new Array;var B=0;x=document.getElementById("saveap").elements;for(let e=0;e<x.length;e++)x[e].getAttribute("class")&&("on"==x[e].value&&!1===x[e].checked&&(x[e].value="off"),"off"==x[e].value&&"true"==x[e].checked&&(x[e].value="off"),E[B]=x[e],B++);for(let e=0;e<E.length;e++)A=0==e?E[e].getAttribute("class")+"="+E[e].value:"p_nm_objeto"==E[e].className||"p_atributos"==E[e].className||"p_sub_objeto"==E[e].className?A+"&"+E[e].getAttribute("class")+"="+encodeURIComponent(E[e].value):A+"&"+E[e].getAttribute("class")+"="+E[e].value;v=document.getElementsByClassName("p_cd_objeto")[0].value,a=document.getElementsByClassName("p_nm_objeto")[0].value;document.getElementById(v)&&(obj=document.getElementById(v),topo=obj.offsetTop,left=obj.offsetLeft),v.trim().length>1&&a.trim().length>1?(document.getElementById("fake_atributo")?ajax("fly","savegd",A+"&p_atributos="+document.getElementById("fake_atributo").title+"&fakeoption="+document.getElementById("fake_grupo").title,"true"):ajax("fly","savegd",A+"&fakeoption="+document.getElementById("fake_grupo").title,"true"),alerta("feed-fixo",TR_AL)):alerta("msg",TR_NM_LE);break;case"savecd":E=new Array,I=0,x=document.getElementById("savemvi").elements;for(let e=0;e<x.length;e++)x[e].getAttribute("class")&&(E[I]=x[e],I++);for(let e=0;e<E.length;e++)A=0==e?E[e].getAttribute("class")+"="+E[e].value:A+"&"+E[e].getAttribute("class")+"="+E[e].value;E[1].value.trim().length<4?alerta("msg",TR_NM_LE):(ajax("fly","savecd",A),alerta("msg",TR_AD));break;case"savecall":document.getElementById("fechar_sup").setAttribute("data-reloado","false");E=new Array,B=0,x=document.getElementById("saveap").elements;for(let e=0;e<x.length;e++)x[e].getAttribute("class")&&("on"==x[e].value&&!1===x[e].checked&&(x[e].value="off"),"off"==x[e].value&&"true"==x[e].checked&&(x[e].value="off"),E[B]=x[e],B++);for(let e=0;e<E.length;e++)A=0==e?E[e].getAttribute("class")+"="+E[e].value:"p_nm_objeto"==E[e].className?A+"&"+E[e].getAttribute("class")+"="+encodeURIComponent(E[e].value):A+"&"+E[e].getAttribute("class")+"="+E[e].value;v=document.getElementsByClassName("p_cd_objeto")[0].value,a=document.getElementsByClassName("p_nm_objeto")[0].value,v.trim().length>1&&a.trim().length>1?document.getElementById("fake_grupo")&&(ajax("fly","savecallist",A+"&fakeoption="+document.getElementById("fake_grupo").title),alerta("feed-fixo",TR_AL)):alerta("msg",TR_NM_LE);break;case"savesin":if(document.getElementById("savemvi")){E=new Array,I=0,x=document.getElementById("savemvi").elements;for(let e=0;e<x.length;e++)x[e].getAttribute("class")&&(E[I]=x[e],I++);for(let e=0;e<E.length;e++)A=0==e?E[e].getAttribute("class")+"="+E[e].value:A+"&"+E[e].getAttribute("class")+"="+E[e].value;E[1].value.trim().length<4?alerta("msg",TR_NM_LE):E[2].value.trim().length<4?alerta("msg",TR_DS_LE):(ajax("fly","savesign",A),"false"==error&&alerta("msg",TR_AL))}else alerta("msg",TR_ES);break;case"savevp":if(document.getElementById("savevp")){E=new Array,I=0,x=document.getElementById("savevp").elements;for(let e=0;e<x.length;e++)x[e].getAttribute("class")&&(E[I]=x[e],I++);for(let e=0;e<E.length;e++)A=0==e?E[e].getAttribute("class")+"="+E[e].value:A+"&"+E[e].getAttribute("class")+"="+E[e].value;E[1].value.trim().length<4?alerta("msg",TR_NM_LE):(ajax("fly","savevp",A),alerta("msg",TR_AD))}else alerta("msg",TR_ES);break;case"savescr":E=new Array,I=0,x=document.getElementById("saveap").elements;for(let e=0;e<x.length;e++)x[e].getAttribute("class")&&(E[I]=x[e],I++);for(let e=0;e<E.length;e++)0==e?A=E[e].getAttribute("class")+"="+E[e].value:E[e].classList.contains("REPEAT")||E[e].classList.contains("IMG_POS")||E[e].classList.contains("IMG_SIZE")?ajax("fly","alter_attrib","prm_objeto="+tela+"&prm_prop="+E[e].getAttribute("class")+"&prm_value="+encodeURIComponent(E[e].value),!0):A=A+"&"+E[e].className+"="+encodeURIComponent(E[e].value);PRINCP.parentNode.style.setProperty("background-color",E[6].value),PRINCP.style.setProperty("background-image","url("+E[7].value+")"),PRINCP.style.setProperty("background-position",E[8].value),PRINCP.style.setProperty("background-size",E[9].value),PRINCP.style.setProperty("background-repeat",E[10].value),E[1].value.trim().length<4?alerta("msg",TR_NM_LE):E[3].value.trim().length<4?alerta("msg",TR_DS_LE):document.getElementById("fake_grupo").title.trim().length<1?alerta("msg",TR_ES_gr):(ajax("fly","savescr",A+"&p_grupof="+document.getElementById("fake_grupo").title),"false"==error&&(curtain(),alerta("feed-fixo",TR_AL),ajax("list","screen_list","",!0,"floatops"),document.getElementById("floatops").selectedIndex=-1));break;case"savepar":h=document.getElementsByClassName("array_transf"),b=document.getElementsByClassName("array_nomes"),e="";for(let t=0;t<h.length;t++)e=e+"x="+encodeURIComponent(h[t].value)+"&";E="";for(let e=0;e<b.length;e++)E=E+"y="+b[e].value+"&";ajax("fly","save_par",(E=E.slice(0,-1))+"&"+(e=e.slice(0,-1)),"","false"),curtain(),carrega("ajscreen?prm_screen="+tela),alerta("feed-fixo",TR_AL);break;case"consulta":if(0==document.getElementById("painel").querySelectorAll(".error").length){var L=document.getElementById("prm_visao").value;a=document.getElementById("prm_objeto").value;if(document.getElementById("nome_consulta"))var N=document.getElementById("nome_consulta").value;else N="";if(document.getElementById("agrupamento_consulta"))var C=document.getElementById("agrupamento_consulta").value;else C="";if(document.getElementById("grupo_consulta"))var T=document.getElementById("grupo_consulta").value;else T="";var S="";for(let e=(colunas=document.getElementById("coluna").querySelectorAll(".linha")).length-1;e>-1;e--)S=colunas[e].title+"|"+S;var w="",k=document.getElementById("colunas").querySelectorAll(".linha");for(let e=k.length-1;e>-1;e--)w=k[e].title+"|"+w;var R="",O=document.getElementById("colunac").querySelectorAll(".linha");for(let e=O.length-1;e>-1;e--)R=O[e].title+"|"+R;S=S.substr(0,S.length-1),w=w.substr(0,w.length-1),R=R.substr(0,R.length-1),ajax("fly","save_consulta","prm_visao="+L+"&prm_nome="+encodeURIComponent(a)+"&prm_desc="+encodeURIComponent(N)+"&prm_coluna="+S+"&prm_colup="+w+"&prm_agrupador="+R+"&prm_grupo="+T+"&prm_rp="+C,!1),ajax("fly","alter_ordem_geral","prm_valor=1&prm_objeto="+a),document.getElementById("fake_grupo")?noerror("",TR_CR,"msg"):noerror("",TR_AL,"msg"),document.getElementById(a+"trl")?(remover(a+"trl"),reload(a+"trl")):reload(a)}else alerta("msg",TR_ID);break;case"browser":E=new Array,I=0,x=document.getElementById("browseredit").children;for(let e=0;e<x.length;e++)x[e].getAttribute("class")&&(E[I]=x[e],I++);for(let e=0;e<E.length;e++)A=0==e?E[e].getAttribute("class")+"="+E[e].value:A+"&"+E[e].getAttribute("class")+"="+E[e].value;E[1].value.trim().length<3?alerta("msg",TR_NM_LE):(ajax("fly","browserEditLine",A),alerta("msg",TR_AD));break;default:document.getElementById("fakelist").setAttribute("class","")}}function blocoConsulta(e,t){e.style.setProperty("display","none");t=document.getElementById(t);var a=document.createElement("li"),r=document.createElement("span");r.innerHTML="X",a.className="linha",a.title=e.title,a.innerHTML=e.innerHTML,a.appendChild(r),a.setAttribute("onclick","swapColumn(this)"),t.appendChild(a);var n=document.createElement("li");n.className="square",n.setAttribute("onclick","swapSquare(this)"),t.appendChild(n)}function resizeBrowser(e,t){var a=e.parentNode;a.clientHeight!=a.getAttribute("data-height")&&ajax("fly","alter_attrib","prm_objeto="+t+"&prm_prop=ALTURA&prm_value="+a.clientHeight+"&prm_usuario="+USUARIO,!0),a.clientWidth!=a.getAttribute("data-width")&&ajax("fly","alter_attrib","prm_objeto="+t+"&prm_prop=LARGURA&prm_value="+a.clientWidth+"&prm_usuario="+USUARIO,!0)}function showtag(e,t,a,r,n,o,l){var i;document.getElementById(t)&&(i=document.getElementById(t)).parentNode.removeChild(i);document.getElementById("jumpdrill")&&(i=document.getElementById("jumpdrill")).parentNode.removeChild(i);var s=document.createElement("div");s.setAttribute("id","jumpdrill"),s.setAttribute("name",a),s.setAttribute("class",r),s.setAttribute("data-multi",n),s.setAttribute("data-linha",o),-1!=document.querySelector(".info").innerHTML.indexOf("DWU")&&s.setAttribute("title",document.getElementById("drill_go").value);var d="";document.getElementById("par_"+t.replace("sdrill_",""))&&(d=document.getElementById("par_"+t.replace("sdrill_","")).value),s.setAttribute("data-pivot",l),s.setAttribute("data-filtro",d),MAIN.appendChild(s)}function showview(e){e=e.split("|");var t="";for(let a=0;a<e.length-6;a++)e[a+6]&&(0==a?t=check_value(e[a+6]):t+=check_value(e[a+6]));if(t=encodeURIComponent(t).replace(/\'/g,"%27"),removeTrash(),document.getElementById(e[0]+"trl"))"dragme grafico scaled"!=document.getElementById(e[3]).className&&(loading(),LAYER.className="ativo",remover(e[0]+"trl"),document.getElementById("drill_obj").value=e[0],appendar("prm_drill=Y&prm_objeto="+e[0]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros="+check_value(e[1])+check_value(e[2])+check_value(e[5])+t+"&prm_screen="+e[4]+"&prm_track="+e[0]+"&prm_objeton="+e[0],"in"),setTimeout(function(){centerDrill(e[0]);var t=setInterval(function(){document.getElementById(e[0])&&(carrega("ajobjeto?prm_objeto="+e[0]),clearInterval(t)),document.getElementById(e[0]+"trl")&&clearInterval(t)},100)},500));else{if("dragme grafico scaled"==document.getElementById(e[3]).className)return!1;loading(),document.getElementById("drill_obj").value=e[0],appendar("prm_drill=Y&prm_objeto="+e[0]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros="+e[1]+check_value(e[2])+check_value(e[5])+t+"&prm_screen="+e[4]+"&prm_track="+e[0]+"&prm_objeton="+e[0],"in"),setTimeout(function(){centerDrill(e[0]),ciclo=setInterval(function(){document.getElementById(e[0])&&(carrega("ajobjeto?prm_objeto="+e[0]),clearInterval(ciclo)),document.getElementById(e[0]+"trl")&&clearInterval(ciclo)},100)},500)}}function showview2(e){var t=(e=document.getElementById(e).getAttribute("data-valor")).split("|"),a="";for(let e=0;e<t.length-1;e++)t[e+1]&&(0==e?a=t[e+1]:a+=check_value(t[e+1]));if("|"===(a=encodeURIComponent(a).replace(/\'/g,"%27")).charAt(0)&&(a=a.substr(1)),"dragme grafico scaled"!=document.getElementById(t[0]).className){if(removeTrash(),remover(t[0]+"trl"),document.getElementById("jumpdrill")){var r=document.getElementById("jumpdrill");r.parentNode.removeChild(r)}showtag("drill_show","sdrill_"+t[0],"",a,a,a,""),ajax("list","load_drill","prm_objeto="+t[0]+"trl&prm_parametros="+encodeURIComponent(a)+"&prm_track="+a+"&prm_objeton="+a,!1,"jumpdrill"),jumpdrill.setAttribute("style","top:"+(cursory+3)+"px; left:"+cursorx+"px;"),setTimeout(function(){jumpdrill.style.setProperty("opacity","1"),jumpdrill.style.setProperty("margin-top","0")},100)}}function showview3(e){loading();var t=e.split("||")[0].split("|"),a=e.split("||")[1];t[2]?(remover(t[1]+"trl"),call("show_objeto","prm_drill=Y&prm_objeto="+t[1]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros="+encodeURIComponent(a)+"&prm_screen="+tela+"&prm_track="+t[0]+"&prm_objeton="+t[0],"obj").then(function(e){var t=document.createElement("div");t.innerHTML=e,t.children[0].style.setProperty("opacity","0"),MAIN.appendChild(t.children[0])}).then(function(){document.getElementById(t[1])&&(carrega("ajobjeto?prm_objeto="+t[1]),centerDrill(t[1]),eventos(document.getElementById(t[1])),ajustar(t[1]),setTimeout(function(){document.getElementById(t[1]).style.setProperty("opacity","1")},100)),document.getElementById(t[1]+"trl")&&(carrega("ajobjeto?prm_objeto="+t[1]+"trl"),centerDrill(t[1]+"trl"),eventos(document.getElementById(t[1]+"trl")),ajustar(t[1]+"trl"),setTimeout(function(){document.getElementById(t[1]+"trl").style.setProperty("opacity","1")},100))})):t[3]||(remover(t[1]+"trl"),call("show_objeto","prm_drill=Y&prm_objeto="+t[1]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros="+encodeURIComponent(a)+"&prm_screen="+tela+"&prm_track="+t[0]+"&prm_objeton="+t[0],"obj").then(function(e){var t=document.createElement("div");t.innerHTML=e,t.children[0].style.setProperty("opacity","0"),MAIN.appendChild(t.children[0])}).then(function(){document.getElementById(t[1])&&(carrega("ajobjeto?prm_objeto="+t[1]),centerDrill(t[1]),eventos(document.getElementById(t[1])),ajustar(t[1]),setTimeout(function(){document.getElementById(t[1]).style.setProperty("opacity","1")},100)),document.getElementById(t[1]+"trl")&&(carrega("ajobjeto?prm_objeto="+t[1]+"trl"),centerDrill(t[1]+"trl"),eventos(document.getElementById(t[1]+"trl")),ajustar(t[1]+"trl"),setTimeout(function(){document.getElementById(t[1]+"trl").style.setProperty("opacity","1")},100))})),setTimeout(function(){loading()},100)}function showview4(e){if(e.split("|").length>2){if(-1!=e.indexOf("||"))var t=e.split("||")[1],a=e.split("||")[0].split("|");else t="",a=e.split("|");if("|"===t.charAt(0)&&(t=t.substr(1)),removeTrash(),remover(a[0]+"trl"),document.getElementById("jumpdrill")){var r=document.getElementById("jumpdrill");r.parentNode.removeChild(r)}showtag("drill_show","sdrill_"+a[0],"",t,t,t,""),ajax("list","load_drill","prm_objeto="+a[0]+"trl&prm_parametros="+encodeURIComponent(t)+"&prm_track="+t+"&prm_objeton="+t,!1,"jumpdrill"),jumpdrill.setAttribute("style","top:"+(cursory+3)+"px; left:"+cursorx+"px;"),setTimeout(function(){jumpdrill.style.setProperty("opacity","1"),jumpdrill.style.setProperty("margin-top","0")},100)}}function showview_org(e){var t=e[0];if(t.getAttribute("data-goto").length>1){loading();var a=t.getAttribute("data-goto").split("|");removeTrash(),remover(a[0]+"trl"),remover(a[0]);var r="";for(let e=0;e<a.length-1;e++)a[e+1]&&(r=0==e?a[e+1]:r+"|"+a[e+1]);appendar("prm_drill=Y&prm_objeto="+a[0]+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=&prm_parametros=1|1|qb_depto|"+t.id+"|"+r+"&prm_screen="+tela+"&prm_track=qb_depto&prm_objeton=departamento","in"),ajustaIframe(a[0]+"trl"),centerDrill(a[0]),carrega("ajobjeto?prm_objeto="+a[0])}}function check_tag(e,t,a,r,n,o){if(-1==get(t).className.indexOf("scaled")){n=n||"";var l=r,i=get(t),s=[],d=i.querySelectorAll(".tdselected"),c=d.length,m=i.querySelectorAll(".checked"),u=m.length;"fixed"==o.parentNode.className?o.parentNode.getAttribute("data-i"):o.getAttribute("data-i");for(let e=0;e<c;e++)s.push(d[e].getAttribute("data-valor"));s.filter(e=>e).join("|"),s=[];for(let e=0;e<u;e++)s.push(m[e].getAttribute("data-valor"));s.length>0&&(l=s.filter(e=>e).join("|"));let a=[];a.push(l),a.push(n),document.getElementById("drill_go").value=a.filter(e=>e).join("|");var p=!0;o.parentNode.getAttribute("data-drill")&&"S"!=o.parentNode.getAttribute("data-drill")&&(p=!1),o.parentNode.classList.contains("duplicado")&&(p=!1);var g=document.getElementById("dados_"+t);if(g){let e=g.getAttribute("data-drill");e&&"C"==e&&(p=!1)}var f=e.target;"path"==f.tagName||"circle"==f.tagName||"polygon"==f.tagName||"svg"==f.tagName?anotacao_show(e,t):p&&drillfix(e,t)}}function check_value(e){return void 0!==e?0==e.trim.length?"":("|"+e).replace("||","|"):""}var sobbar="",checklayer="",activeshow="",conteudo="";function shscr(e,t,a,r){var n=document.querySelectorAll(".filtro.show");for(let e=0;e<n.length;e++)n[e].classList.remove("show"),n[e].classList.add("hidden"),n[e].setAttribute("data-desc","");document.getElementById("popupmenu")&&((i=document.getElementById("popupmenu")).classList.contains("visible")&&(i.classList.remove("visible"),i.innerHTML=""));if(document.getElementById("search-mobile")){var o=document.getElementById("search-mobile");"DEFAULT"!=e?o.classList.remove("invisible"):o.classList.add("invisible")}get("screen-props")&&(get("screen-props").innerHTML="");var l=document.createElement("style");if(parseInt(document.getElementById("layer3").style.getPropertyValue("height"))>0&&(PRINCP.style.setProperty("overflow","visible"),PRINCP.style.removeProperty("height"),document.getElementById("html").style.setProperty("overflow","visible"),document.getElementById("layer3").style.setProperty("height","0"),document.getElementById("prev").style.setProperty("display","none"),document.getElementById("next").style.setProperty("display","none")),clearInterval(checklayer),loaded(),!LAYER.classList.contains("ativo")){var i,s=r||"UPQUERY";if(document.getElementById("atu_view"))(i=document.getElementById("atu_view")).classList.contains("invisible")&&i.classList.remove("invisible");if("UPQUERY"!=s?(document.getElementById("menup").classList.add("invisible"),MAIN.style.setProperty("padding-top","0"),LAYER.style.setProperty("top","0"),LAYER.style.setProperty("height","100%")):document.getElementById("menup")&&(document.getElementById("menup").classList.remove("invisible"),MAIN.style.setProperty("padding-top",""),LAYER.style.setProperty("top","35"),LAYER.style.setProperty("height","calc(100% - 35px)")),document.getElementById("attriblist").classList.remove("open"),document.getElementById("floatlist").classList.remove("open"),document.getElementById("donut").classList.remove("open"),curtain("x"),clearInterval(refresh_timer),document.getElementById("fakelist").classList.remove("visible"),zindex_abs=5,clearInterval(textTalk),document.getElementById("show_only_screen")&&MAIN.style.setProperty("padding-top","6px"),document.getElementById("call-menu"))(i=document.getElementById("call-menu")).classList.add("invisible"),call("obj_screen_count","prm_screen="+e+"&prm_tipo=CALL_LIST").then(function(e){parseInt(e)>0?i.classList.remove("invisible"):i.classList.add("invisible")});if(document.getElementById("float-filter")){var d=document.getElementById("float-filter");d.classList.add("invisible"),document.getElementById("show_only_screen")||call("obj_screen_count","prm_screen="+e+"&prm_tipo=FLOAT").then(function(e){parseInt(e)>0?d.classList.remove("invisible"):d.classList.add("invisible")})}clearInterval(checkscreen),clearInterval(loopscreen),document.getElementById("show_only_bar")&&(clearInterval(sobbar),document.getElementById("show_only_bar").style.setProperty("width",0)),document.getElementById("filterlist").className="filtro hidden";var c=document.getElementById("current_screen");loading("x"),document.getElementById("text-talk").className="";var m,u=PRINCP.children[0];if("calendar-box"==u.className&&u.style.setProperty("display","none"),document.getElementById("timer")){var p=document.getElementById("timer");p.parentNode.removeChild(p)}for(removeTrash(),document.getElementById("main-ext").innerHTML="";MAIN.firstChild;)MAIN.removeChild(MAIN.firstChild);if(tela=e.replace(" ","_").trim(),void 0!==t?call("show_screen","prm_screen="+e+"&prm_screen_ant="+t+"&prm_parametro="+a).then(function(e){-1==e.indexOf("LOGOUT")?(MAIN.innerHTML=e,icarrega(),MAIN.children[0]&&"data_list"==MAIN.children[0].id&&ajustar(MAIN.children[0].className)):logout()}):call("show_screen","prm_screen="+e+"&prm_screen_ant=&prm_parametro=").then(function(e){-1!=e.indexOf("Usu&aacute;rio sem permiss&atilde;o de acesso a tela!")&&(tela="DEFAULT",call("alter_user","prm_nome="+USUARIO+"&prm_valor="+tela+"&prm_tipo=cd_tela_inicial").then(function(e){"OK"==e.split("|")[0]&&setTimeout(function(){window.location.reload(!0)},200)})),main.innerHTML=e,icarrega(),main.children[0]&&"data_list"==main.children[0].id&&ajustar(main.children[0].className)}),ajaxExt(e),c.value=tela,clearInterval(timeout),"DEFAULT"!=c.value&&"SANDBOX"!=c.value)call("countdown","prm_screen="+c.value).then(function(e){if(0!=(m=e)){var t=parseInt(m);timeout=setInterval(refreshTela,t)}});var g=0;checklayer=setInterval(function(){"ativo"!=layer.className&&(clearInterval(checklayer),loaded()),(g+=1)>=500&&clearInterval(checklayer)},200),document.getElementById("tela-atual")&&(document.getElementById("tela-atual").innerHTML="",call("title_screen","prm_screen="+e).then(function(t){call("title_screen","prm_screen="+e).then(function(e){if(e.trim().length>0){document.getElementById("tela-atual").innerHTML=e.split("<titulo_aba_navagedor>")[0].trim();var t="UpQuery - "+e.split("<titulo_aba_navagedor>")[1].trim();document.title=t}})})),setTimeout(function(){-1!=MAIN.className.indexOf("usuario")?ajax("input","check_data","prm_valor="+e+"&prm_tabela=main&prm_true=usuario&prm_false=usuario row",!0,"main"):ajax("input","check_data","prm_valor="+e+"&prm_tabela=main&prm_true=&prm_false=row",!0,"main")},5);var f=document.getElementById("back");void 0!==t&&t.length>0?(f.className="visible",f.setAttribute("data-screen",t),ajax("list","screen_list","prm_objeto=",!0,"floatops")):f.className="invisible"}c&&("DEFAULT"!=c.value?call("background_attrib","prm_screen="+e).then(function(e){let t=e,a=t.split("|")[0],r=t.split("|")[1];l.innerHTML="div#main { "+a+" } div#main:before { "+r+" }"}):setTimeout(function(){l.innerHTML="div#main:before { url("+OWNER_BI+".fcl.download?arquivo=bg.png); }"},1e3)),get("screen-props")&&get("screen-props").appendChild(l)}function refreshTela(){0==document.querySelectorAll(".drill").length&&(shscr(tela),curtain())}function loaded(){clearTimeout(activeshow);var e=document.querySelectorAll(".dragme"),t=e.length;for(let i=0;i<t;i++){if(document.getElementById(e[i].id+"min")){var a=document.getElementById(e[i].id+"min");a.addEventListener("mouseup",function(){this.parentNode.querySelector(".espaco").classList.toggle("min")}),a.addEventListener("touchend",function(){this.parentNode.querySelector(".espaco").classList.toggle("min")})}var r,n;if("A"==ADMIN){if(document.getElementById(e[i].id+"_ds")&&-1==document.getElementById(e[i].id).className.indexOf("float")){var o=e[i].id,l=document.getElementById(o+"_ds");"mobile"==PRINCP.className?(r="touchstart",n="touchend"):(r="mousedown",n="mouseup"),l.addEventListener(r,function(){invisible_touch(this.parentNode.id,"start")}),l.addEventListener(n,function(){invisible_touch(this.parentNode.id,"stop"),"touchend"==n&&dblTouch(this.parentNode.id)}),l.addEventListener("dblclick",function(){get("jumpdrill")&&get("jumpdrill").remove(),curtain(""),scale(this.id.replace("_ds",""),"direct")})}}else if(document.getElementById(e[i].id+"_ds")&&-1==document.getElementById(e[i].id).className.indexOf("float")){o=e[i].id;(l=document.getElementById(o+"_ds")).addEventListener("dblclick",function(){get("jumpdrill")&&get("jumpdrill").remove(),curtain(""),scale(this.id.replace("_ds",""),"direct")})}}if(projecoes.length>0&&parseInt(document.getElementById("active-show").getAttribute("data-time"))>0){var i=document.getElementById("active-show").nextElementSibling;activeshow="show_only"==i.className?setTimeout(function(){document.getElementById("active-show").id="",i.id="active-show",removeTrash(),shscr(i.value)},parseInt(document.getElementById("active-show").getAttribute("data-time")+"000")+1e3):setTimeout(function(){document.getElementById("active-show").id="",projecoes[0].id="active-show",removeTrash(),shscr(projecoes[0].value)},parseInt(document.getElementById("active-show").getAttribute("data-time")+"000")+1e3)}}function addLink(){if(document.getElementById("attriblist")){var e=document.getElementById("attriblist").getElementsByTagName("LI"),t=e.length;for(let a=0;a<t;a++)"SCRIPT"!=e[a].className&&(e[a].firstElementChild.removeEventListener("click",menuLink),e[a].firstElementChild.addEventListener("click",menuLink))}}function changeScreen(){document.getElementById("floatops").blur(),document.getElementById("donut").setAttribute("class","");var e=document.getElementById("html"),t=document.getElementById("floatops").getElementsByTagName("option")[document.getElementById("floatops").selectedIndex];document.getElementById("prefdrop")&&(document.getElementById("prefdrop").className="hidden"),"X"!=t.value?(shscr(t.value),-1==t.getAttribute("data-url").indexOf("EXT=")?setTimeout(function(){e.style.setProperty("background-color",t.getAttribute("data-bg")),MAIN.style.setProperty("background-repeat",t.getAttribute("data-repeat")),MAIN.style.setProperty("background-position",t.getAttribute("data-pos")),MAIN.style.setProperty("background-size",t.getAttribute("data-size")),MAIN.style.setProperty("background-image","url("+t.getAttribute("data-url")+")")},1e3):setTimeout(function(){e.style.setProperty("background-color",t.getAttribute("data-bg")),MAIN.style.setProperty("background-repeat",t.getAttribute("data-repeat")),MAIN.style.setProperty("background-position",t.getAttribute("data-pos")),MAIN.style.setProperty("background-size",t.getAttribute("data-size")),MAIN.style.setProperty("background-image","")},1e3)):document.getElementById("opcoes").className="closed"}function fecharSup(){var e=this;clearInterval(refresh_timer),document.getElementById("fakelist").setAttribute("data-campo",""),document.getElementById("fakelist").setAttribute("class",""),alerta("msg",""),curtain(),setTimeout(function(){var t=e.getAttribute("data-reloado");if("false"!=t){if(get(t)){var a=document.getElementById(t),r=a.offsetLeft+"px",n=a.offsetTop,o=tela;window.getComputedStyle(a).getPropertyValue("order")&&(dashorder="&prm_dashboard=true",dashlocation=a.parentNode.id,r=window.getComputedStyle(a).getPropertyValue("order"),o=a.parentNode.id),a.remove(),loading(""),appendar("prm_objeto="+t+"&PRM_ZINDEX=2&prm_posx="+r+"&prm_posy="+n+"px&prm_screen="+tela+dashorder,dashlocation,o),setTimeout(function(){carrega("ajobjeto?prm_objeto="+t)},100)}e.setAttribute("data-reloado","false")}"false"!=e.getAttribute("data-reloads")&&(shscr(tela),e.setAttribute("data-reloads","false"))},200)}function refreshSup(){"S"==refresh_param[3]?refreshSupStop():refreshSupStart()}function refreshSupStop(){refreshSupBtn("V"),clearInterval(refresh_timer)}function refreshSupStart(){refreshSupBtn("A"),clearInterval(refresh_timer),ajax("list",refresh_param[0],refresh_param[1],!0,"content","","",refresh_param[2]),refresh_timer=setInterval(function(){ajax("list",refresh_param[0],refresh_param[1],!0,"content","","",refresh_param[2])},5e3)}function refreshSupBtn(e){document.getElementById("refresh_sup")&&(document.getElementById("refresh_sup").style.display="none",document.getElementById("refresh_sup").classList.remove("ativo"),refresh_param[3]="N","V"!=e&&"A"!=e||(document.getElementById("refresh_sup").style.display="block","A"==e&&(document.getElementById("refresh_sup").classList.add("ativo"),refresh_param[3]="S")))}function backSup(){if(0!=telasup_ant.length){let e=telasup_ant[telasup_ant.length-1].split("|"),t=e[0],a=e[1],r=e[2],n=e[3];telasup_ant.pop(),carregaTelasup(t,a,r,n,"","","")}}function fecharCustom(){alerta("msg",""),curtain_custom()}function activemap(e,t,a){try{var r=new FusionCharts("Brazil","mapid",a,t)}catch(e){picx=0}document.getElementById("gxml_"+e).children[0]?r.setXMLData(document.getElementById("gxml_"+e).innerHTML):r.setXMLData(document.getElementById("gxml_"+e).value);try{r.render("ctmr_"+e)}catch(e){picx=0}r.setChartAttribute("stroke",null)}function browserMenu(e,t){e.classList.remove("open"),document.getElementById("editb").innerHTML="";parseInt(window.getComputedStyle(document.getElementById("data_list_menu")).height);t&&setTimeout(function(){e.classList.add("open")},100)}function browserOrder(e){e.target.getAttribute("data-coluna")&&(e.target.classList.contains("selectedbheader")?e.target.classList.contains("desc")?(e.target.classList.remove("desc"),e.target.classList.remove("selectedbheader")):e.target.classList.add("desc"):e.target.classList.add("selectedbheader"),browserSearch("BUSCA"))}var beta={};function browserSearch(e,t){if(document.querySelector(".selectedbheader")){var a,r=document.querySelectorAll(".selectedbheader"),n=[];for(let e=0;e<r.length;e++)r[e].classList.contains("desc")?n.push(r[e].getAttribute("data-ordem")+" DESC"):n.push(r[e].getAttribute("data-ordem"));a=n.join(",")}else a=1;e=e||"BUSCA",t=t||"";if(LAYER.classList.contains("ativo")||loading(),0==t.length&&ajax("fly","alter_attrib","prm_objeto="+document.getElementById("data_list").className+"&prm_prop=DIRECTION&prm_value="+a+"&prm_usuario="+USUARIO,!0),document.getElementById("browser-condicao").parentNode.classList.contains("ligacao")||document.getElementById("browser-condicao").parentNode.classList.contains("ligacaoc")||document.getElementById("browser-condicao").parentNode.classList.contains("listboxp")||document.getElementById("browser-condicao").parentNode.classList.contains("listboxt")||document.getElementById("browser-condicao").parentNode.classList.contains("listboxtd")||document.getElementById("browser-condicao").parentNode.classList.contains("listboxtcd"))o=document.getElementById("browser-condicao").nextElementSibling.title;else var o=document.getElementById("data-valor").value;var l=document.getElementById("data_list").getAttribute("data-tabela"),i=document.getElementById("browser-coluna").value,s=document.getElementById("data_list").className,d=document.getElementById("data-coluna").value,c=document.getElementById("browser-condicao").value,m=document.getElementById("linhas").value,u=document.getElementById("data-coluna").options[document.getElementById("data-coluna").selectedIndex].innerHTML;setTimeout(function(){if("semelhante"==c)var r="like";else r=c;var n="",p=0;if(document.getElementById("multi-search")){var g="$["+r.toUpperCase()+"]",f=d+"|"+g+o,_=!1;{let e=document.createElement("span");-1!=c.indexOf("nulo")?-1!=c.indexOf("nnulo")?e.innerHTML=u+" não nulo":e.innerHTML=u+" "+c.toLowerCase():(0==o.trim().length&&(_=!0),-1!=c.indexOf("diferente")?e.innerHTML=u+" "+c.toLowerCase()+" de "+o:-1!=c.indexOf("maior")?e.innerHTML=u+" "+c.toLowerCase()+" que "+o:e.innerHTML=u+" "+c.toLowerCase()+" a "+o),e.addEventListener("click",()=>{event.stopPropagation(),confirm(TR_CE)&&(e.remove(),setTimeout(function(){browserSearch("")},100))}),document.getElementById("data-valor").value="",document.getElementById("data-valor").previousElementSibling.title="",document.getElementById("data-valor").previousElementSibling.children[0].innerText="",_||(e.title=f,e.classList.add("acumulado"),document.getElementById("filtros-acumulados").appendChild(e))}let e=[];document.querySelectorAll(".acumulado").forEach(t=>{e.push(t.title)}),n=e.join("|")}p=122,n.length>0&&(p=p+document.getElementById("filtros-acumulados").clientHeight+12),document.getElementById(s+"dv2").style.setProperty("--foot-height",p.toString()+"px"),"save"==e&&(e=">",t=document.getElementById("ajax").firstElementChild?parseInt(document.getElementById("ajax").firstElementChild.className)-1:0),ajax("list","dt_pagination","prm_micro_data="+l+"&prm_coluna="+i+"&prm_objid="+s+"&prm_chave="+d+"&prm_ordem="+a+"&prm_screen="+tela+"&prm_limite="+m+"&prm_origem="+t+"&prm_direcao="+e+"&prm_busca="+o+"&prm_condicao="+c+"&prm_acumulado="+n,!1,"ajax","","","bro"),loading(),document.getElementById("browser-page").innerHTML="",call("get_total","prm_microdata="+l+"&prm_objid="+s+"&prm_screen="+tela+"&prm_condicao="+c+"&prm_coluna="+i+"&prm_chave="+d+"&prm_ordem="+a+"&prm_busca="+o,"bro").then(function(e){document.getElementById("browser-page").outerHTML=e}).then(function(){var e=document.getElementById("linhas").value;if(document.getElementById("ajax").lastElementChild){var t=Math.ceil(parseInt(document.getElementById("ajax").lastElementChild.className)/e),a=Math.ceil(document.getElementById("browser-page").getAttribute("data-total")/e);document.getElementById("browser-page").setAttribute("data-pagina",t),document.getElementById("browser-page").innerHTML=t+"/"+a}})},10)}function browserPage(){var e=document.getElementById("browser-page"),t=document.getElementById("linhas").value,a=Math.ceil(parseInt(document.getElementById("ajax").lastElementChild.className)/t),r=Math.ceil(e.getAttribute("data-total")/t);a<1&&(a=1),r<1&&(r=1),e.innerHTML=a+"/"+r,e.setAttribute("data-pagina",a),e.className=r}function toggleAba(e){document.querySelector(".abas").querySelector(".green")&&document.querySelector(".abas").querySelector(".green").classList.remove("green"),e.classList.add("green");var t=e.parentNode.parentNode.querySelectorAll(".form, .form-config");for(let a=0;a<t.length;a++)t[a].id==e.getAttribute("data-for")?t[a].classList.remove("closed"):t[a].classList.add("closed")}function saveFloats(){var e=document.querySelector(".itens").getElementsByTagName("ul");for(let n=0;n<e.length;n++){var t=e[n].children;for(let e=0;e<t.length;e++)if(-1!=t[e].children[2].className.indexOf("float")){var a=t[e].children[2].children[0].children,r="";for(let e=0;e<a.length;e++)1==a[e].selected&&(r=r+"|"+a[e].value);ajax("fly","save_float","ws_conteudo="+encodeURIComponent(r)+"&ws_padrao="+t[e].children[1].title)}else t[e].children[2]&&ajax("fly","save_float","ws_conteudo="+encodeURIComponent(t[e].children[2].value)+"&ws_padrao="+t[e].children[1].title)}}function sos(e){var t=document.getElementById(e);t.getAttribute("data-script").length>0&&confirm(TR_CM)&&call("programa_execucao","prm_objeto="+e+"&prm_parametros="+encodeURIComponent(t.getAttribute("data-parametros"))+"&prm_screen="+tela).then(function(e){-1!=e.indexOf("WS_EXECUTANDO")?alerta("feed-fixo",TR_PR):-1!=e.indexOf("WS_NOEXEC")?alerta("feed-fixo",TR_XC):-1!=e.indexOf("OTHERS")?alerta("feed-fixo",TR_XC):alerta("feed-fixo",e.trim())});var a=t.getAttribute("data-chamada");a.length>0&&(-1!=a.indexOf("SRC_")?shscr(a):(cleardrill(),document.getElementById("drill_obj").value=a+"trl",appendar("prm_drill=Y&prm_objeto="+a+"&prm_zindex=2&prm_posx="+(cursorx-20)+"px&prm_posy="+(cursory-20)+"px&prm_screen="+tela,"",""),carrega("ajobjeto?prm_objeto="+a+"trl"),centerDrill(a)))}beta.browser={acumulado:!1};var v_button_column_running="N";function browserEvent(e,t,a,r){if("edit"!=a||"edit"==a&&"calendario"!=e.target.getAttribute("data-t")){let e=document.getElementsByClassName("calendar-box");e.length>0&&e[0].id.startsWith("calender_div")&&e[0].remove()}var n=document.getElementById("data_list_menu");if("button-column"==a&&r.length>0&&"N"==v_button_column_running){var o=[],l=(u=e.target).parentNode.parentNode.querySelectorAll(".chave");for(let e=0;e<l.length;e++)o.push(encodeURIComponent(l[e].getAttribute("data-d")));var i="prm_objeto="+t+"&prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela")+"&prm_campo_chave="+document.getElementById("browser-chave").value+"&prm_chave="+o.join("|")+"&prm_campo="+u.getAttribute("data-c")+"&prm_acao="+r;v_button_column_running="S",u.classList.toggle("loading"),call("exec_button_column",i,"bro").then(function(e){if(alerta("",e.split("|")[1]),e.split("|")[2].length>0)if("RECARREGAR_BROWSER"==e.split("|")[2])browserSearch("");else if(u.innerHTML=e.split("|")[2],0==e.split("|")[3].length)u.style.backgroundColor="",u.style.color="";else{var t=e.split("|")[3].toLowerCase().split(";");u.style.backgroundColor=t[0].replace("background-color:","").replace("!important","").trim(),u.style.color=t[1].replace("color:","").replace("!important","").trim()}v_button_column_running="N",u.classList.toggle("loading")})}if("edit"==a){var s=e.target.parentNode;if(document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),selectedb!=s.id||s.classList.contains("attach")){selectedb=s.id,s.classList.add("selectedbline");o=[],l=[];if(e.target.classList.contains("attach-div"))var d=s.parentNode;else d=s;if("TR"==d.tagName){l=d.querySelectorAll(".chave");var c=!1,m="|";for(let e=0;e<l.length;e++)encodeURIComponent(l[e].getAttribute("data-d")).includes("%7C")&&(c=!0),o.push(encodeURIComponent(l[e].getAttribute("data-d")));c?(1==o.length&&o[0].includes("%7C")&&(o[0]=o[0].replace(/%7C/g,"******")),o=o.join("*|*"),m="*|*"):o=o.join("|")}s.classList.contains("attach")?(curtain("only"),browserMenu(n,e),ajax("list","anexo","prm_chave="+t+m+o,!1,"editb","","","bro"),ajax("list","browserButtons","prm_tipo=&prm_visao=&prm_chave=",!1,"browserbuttons","","","bro")):o.length>0&&(curtain("only"),ajax("list","browserButtons","prm_tipo=update&prm_visao="+t+"&prm_chave=",!1,"browserbuttons","","","bro"),call("browserEdit","prm_obj="+t+"&prm_chave="+o+"&prm_campo="+document.getElementById("browser-chave").value+"&prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela"),"bro").then(function(t){browserMenu(n,e),document.getElementById("editb").innerHTML=t}).then(function(){browserHint();var e=document.getElementById("browseredit").querySelectorAll("[data-evento]"),t=e.length;for(let a=0;a<t;a++)e[a].getAttribute("data-evento").split("|").forEach(function(t){e[a].addEventListener(t,browser_tipo_valor)})}))}else s.classList.remove("selectedbline"),n.classList.remove("open"),selectedb=""}if("new"==a&&(document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),curtain("only"),ajax("list","browserButtons","prm_tipo=insert&prm_visao="+t+"&prm_chave="+document.getElementById("browser-chave").value,!1,"browserbuttons","","","bro"),call("browserEdit","prm_obj="+t+"&prm_chave=&prm_campo="+document.getElementById("browser-chave").value+"&prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela"),"bro").then(function(t){browserMenu(n,e),document.getElementById("editb").innerHTML=t}).then(function(){browserHint();var e=document.getElementById("browseredit").querySelectorAll("[data-evento]"),t=e.length;for(let a=0;a<t;a++)e[a].getAttribute("data-evento").split("|").forEach(function(t){e[a].addEventListener(t,browser_tipo_valor)})})),"colunas"==a&&(selectedb="",browserMenu(n,""),document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),document.getElementById("titulo").innerHTML=a,call_save(""),curtain("enabled"),call("browserConfig","prm_microdata="+t,"BRO").then(function(e){document.getElementById("content").innerHTML=e;var a=document.getElementById("data_list").getAttribute("data-tabela");carregaPainel("browser",t+"|"+a)})),"filtros"==a&&(selectedb="",browserMenu(n,""),document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),document.getElementById("titulo").innerHTML=a,call_save(""),curtain("enabled"),call("list_ofiltro","ws_par_sumary="+t+"&prm_visao="+r).then(function(e){document.getElementById("content").innerHTML=e,carregaPainel("browserfiltro",t)})),"destaques"==a&&(selectedb="",browserMenu(n,""),document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),document.getElementById("titulo").innerHTML=a,call_save(""),curtain("enabled"),call("blink","prm_objeto="+t+"&prm_visao="+r).then(function(e){document.getElementById("content").innerHTML=e,carregaPainel("blinkbrowser",t)})),"edit_txtclob"==a||"edit_htmlclob"==a){var u;let a=(u=e.target).getAttribute("data-coluna"),r=u.parentNode;document.querySelector(".selectedbline")&&document.querySelector(".selectedbline").classList.remove("selectedbline"),r.classList.add("selectedbline");o=[],l=[];if(e.target.classList.contains("attach-div"))d=r.parentNode;else d=r;if("TR"==d.tagName){l=d.querySelectorAll(".chave");for(let e=0;e<l.length;e++)o.push(encodeURIComponent(l[e].getAttribute("data-d")))}o.length>0&&(curtain("only"),ajax("list","browserButtons","prm_tipo=update&prm_visao="+t+"&prm_chave=&prm_coluna="+a,!1,"browserbuttons","","","bro"),call("browserEditCLOB","prm_obj="+t+"&prm_chave="+o.join("|")+"&prm_campo="+document.getElementById("browser-chave").value+"&prm_coluna="+a,"bro").then(function(t){browserMenu(n,e),document.getElementById("editb").innerHTML=t,document.getElementById("editb").querySelectorAll(".pell-bar").length>0&&pellLaunch("1","browser")}),e.stopPropagation())}}function browserHint(){var e=document.getElementById("editb").parentNode,t=document.createElement("div");t.textContent='"CTRL + ALT + D" para voltar a tela ao tamanho default.',t.style.position="fixed",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.color="#fff",t.style.padding="5px",t.style.borderRadius="5px",t.style.zIndex="9999",t.style.left=cursorx+10+"px",t.style.top=cursory+10+"px",e.addEventListener("mousemove",function(a){var r=e.getBoundingClientRect(),n=a.clientX-r.left,o=a.clientY-r.top;n>r.width-30&&o>r.height-30?(document.body.appendChild(t),t.style.display="block",t.style.left=a.pageX-t.offsetWidth-10+"px",t.style.top=a.pageY+10+"px"):t.style.display="none"}),e.addEventListener("mouseout",function(){t.style.display="none"}),document.body.addEventListener("keydown",function t(a){e.classList.contains("open")||document.body.removeEventListener("keydown",t),a.ctrlKey&&a.altKey&&"d"===a.key&&call("update_prop","prm_id="+document.getElementById("browser-tabela").value+"&prm_prop=TAMANHO_DEFAULT_BRO").then(function(t){var a=JSON.parse(t);e.style.width=a[0]+"px",e.style.height=a[1]+"px"})})}function browser_salva_alteracao(e,t){e.parentNode.parentNode;var a=t.split("&")[0].split("=")[1];ajax("return","browserConfig_alter",t||"&prm_acao=update",!1,"","","","bro");var r=respostaAjax.split("|");"OK"==r[0]?(call("menu","prm_objeto="+a,"bro").then(function(e){document.getElementById("bro-menu").innerHTML=e}),alerta("msg",r[1])):alerta("msg",r[1])}function browser_tipo_valor(){if(-1==this.parentNode.getAttribute("data-tipo").indexOf("number"))this.parentNode.setAttribute("data-v",this.value.replace(/\>/g,"").replace(/\</g,""));else{var e=this.value;(e=e.split("."))[e.length-1]=e[e.length-1].replace(",","."),e=e.join(","),this.parentNode.setAttribute("data-v",e)}}function callDrill(e,t){var a=e.value;document.getElementById("drill_obj").setAttribute("value",a+"trl"),remover("jumpdrill"),remover(a+"trl"),appendar("prm_drill=Y&prm_objeto="+a+"&prm_posx="+cursorx+"px&prm_posy="+cursory+"px&prm_zindex=2&prm_parametros="+encodeURIComponent(t)+"&prm_screen="+tela),setTimeout(function(){ajustar(a+"trl"),carrega("ajobjeto?prm_objeto="+a+"trl"),centerDrill(a)},10)}function colunasCalculo(e,t){var a=[],r=document.getElementById("fakelist").querySelectorAll(".calculos_n");for(let e=0;e<r.length;e++)a.push(encodeURIComponent(r[e].value));ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop=CALCULADA_N&prm_value="+a.join("|")+"&prm_usuario="+t,!1);a=[],r=document.getElementById("fakelist").querySelectorAll(".calculos");for(let e=0;e<r.length;e++)a.push(encodeURIComponent(r[e].value));ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop=CALCULADA&prm_value="+a.join("|")+"&prm_usuario="+t,!1);a=[],r=document.getElementById("fakelist").querySelectorAll(".calculos_m");for(let e=0;e<r.length;e++)a.push(encodeURIComponent(r[e].value));ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop=CALCULADA_M&prm_value="+a.join("|")+"&prm_usuario="+t,!1),alerta("feed-fixo",TR_AL)}function colunasPropriedades(e,t,a){var r=[],n=[],o=document.getElementById("fakelist").querySelectorAll(".prop_col_n"),l=document.getElementById("fakelist").querySelectorAll(".prop_col");for(let e=0;e<o.length;e++)""!=encodeURIComponent(o[e].value)&&"."!=encodeURIComponent(o[e].value)&&(r.find(t=>t==encodeURIComponent(o[e].value))||""!=encodeURIComponent(l[e].value)&&(r.push(encodeURIComponent(o[e].value)),n.push(encodeURIComponent(l[e].value))));ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop="+t+"_N&prm_value="+r.join("|")+"&prm_usuario="+a,!1),ajax("fly","alter_attrib","prm_objeto="+e+"&prm_prop="+t+"&prm_value="+n.join("|")+"&prm_usuario="+a,!1)}function savePrefixo(e,t){if("add"==t)var a=(s=document.getElementById("painel")).children[0],r=s.children[1],n=s.children[2],o=s.children[3],l=s.children[4],i=s.children[5];else{var s;a=(s=e.parentNode.parentNode).children[0].children[0],r=s.children[1].children[0],n=s.children[2].children[0],o=s.children[3].children[0],l=s.children[4].children[0],i=s.children[5].children[0]}call("prefixo_alter","prm_prefixo="+a.value+"&prm_lov="+r.value+"&prm_lovp="+n.value+"&prm_agrupador="+o.value+"&prm_mascara="+l.value+"&prm_alinhamento="+i.value+"&prm_prefixo_ant="+a.getAttribute("data-ant")+"&prm_lov_ant="+r.getAttribute("data-ant")+"&prm_lovp_ant="+n.getAttribute("data-ant")+"&prm_agrupador_ant="+o.getAttribute("data-ant")+"&prm_mascara_ant="+l.getAttribute("data-ant")+"&prm_alinhamento_ant="+i.getAttribute("data-ant")+"&prm_evento="+t).then(function(e){-1!=e.indexOf("ok")&&(a.setAttribute("data-ant",a.value),r.setAttribute("data-ant",r.value),n.setAttribute("data-ant",n.value),o.setAttribute("data-ant",o.value),l.setAttribute("data-ant",l.value),i.setAttribute("data-ant",i.value))}).then(function(){"add"==t&&(carrega("prefixo_lista"),alerta("feed-fixo",TR_AD)),"remove"==t&&alerta("feed-fixo",TR_EX),"edit"==t&&alerta("feed-fixo",TR_AL)})}function medDrill(e,t,a){remover("sdrill_"+t),remover("jumpmed"),setTimeout(()=>{let r=document.createElement("div");r.id="jumpmed";var n=e.getBoundingClientRect();r.style.setProperty("left",n.left-104+n.width/2+"px"),r.style.setProperty("top",n.top+n.height+"px"),document.createElement("span").classList.add("inv"),document.createElement("p").innerHTML=e.innerText;let o=document.createElement("a");o.classList.add("script"),o.addEventListener("click",()=>{agrupadorChange(t,e.getAttribute("data-valor"),o.nextElementSibling.title)});var l=document.createElement("span");call("jumpmed","prm_coluna="+e.getAttribute("data-valor")+"&prm_visao="+a+"&prm_objeto="+t.split("trl")[0]).then(function(e){l.outerHTML=e});let i=document.createElement("a");i.innerHTML="x",i.addEventListener("click",function(){remover("jumpmed")}),r.appendChild(o),r.appendChild(l),r.appendChild(i),MAIN.appendChild(r),setTimeout(function(){r.classList.add("open")},100)},100)}function converteDecimal(e){var t=e,a=t.split();for(let e=0;e<a.length;e++)"."==a[e]?a[e]=",":","==a[e]&&(a[e]=".");return t=a.join()}function stripTags(e){return e.split(/\<[a-zA-Z0-9/]+\>/g).join("")}function update_prop(e,t,a){var r=a;"nome"!=t&&"subtitulo"!=t&&"descritivo"!=t&&"tamanho_tela"!=t&&"descritivo_tela"!=t||(r=encodeURIComponent(r)),call("update_prop","prm_id="+e+"&prm_prop="+t+"&prm_valor="+r+"&prm_screen="+tela).then(function(r){if(-1==r.indexOf("fail"))switch(alerta("feed-fixo",TR_AL),t){case"nome":document.getElementById(e+"_ds")&&(document.getElementById(e+"_ds").parentNode.classList.contains("texto")||(document.getElementById(e+"_ds").innerHTML=r)),e.startsWith("COBJ_")&&document.getElementById("lista-custom-fav")&&(document.getElementById("lista-custom-fav").children[0].innerHTML=r);break;case"ID":var n=document.getElementById("ident").getAttribute("data-default");if("main"==document.getElementById(n).parentNode.parentNode.id)var o="&prm_dashboard=false",l="";else{dashlocation=document.getElementById(n).parentNode.parentNode.id;o="&prm_dashboard=true",l=document.getElementById(n).parentNode.style.getPropertyValue("order")}document.getElementById(n).remove(),appendar("prm_objeto="+a+"&PRM_ZINDEX=&prm_posx="+l+"&prm_posy=&prm_screen="+tela+o,!1);break;case"subtitulo":document.getElementById(e+"_sub")&&(document.getElementById(e+"_sub").innerHTML=r);case"descritivo_tela":e==tela&&(document.getElementById("tela-atual").innerHTML=r);break;case"cor_tela":e==tela&&MAIN.style.setProperty("background-color",r)}else alerta("feed-fixo",TR_ER)})}function updatePermissao(e,t){if(!document.querySelector(".fakelistbox.open").parentNode.classList.contains("searchbar")){var a=e.className,r=e.title;"over"==t?1==mousedown&&(-1==a.indexOf("selected")?update_prop(tela,"usuarios-tela-add",r):update_prop(tela,"usuarios-tela-del",r)):-1==a.indexOf("selected")?update_prop(tela,"usuarios-tela-add",r):update_prop(tela,"usuarios-tela-del",r)}}function limpaTimer(){clearInterval(timer_rel)}function gerar_relatorio(e,t,a){e.includes("trl")&&(e=e.replace("trl","")),document.getElementById(e+"_button").classList.contains("loading")||(document.getElementById(e+"_lista").children[0]&&document.getElementById(e+"_lista").children[0].classList.add("LOCKED"),call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=false","up_rel").then(function(r){-1!=r.indexOf("SEM CONSULTA")?alerta("feed-fixo",r):-1!=r.indexOf("gerado")?(alerta("feed-fixo",r),call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=check","up_rel").then(function(t){document.getElementById(e+"_button").innerHTML=t,-1==t.indexOf("EXEC")&&clearInterval(timer_rel)}).then(function(){timer_rel=setInterval(function(){call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=check","up_rel").then(function(r){document.getElementById(e+"_button").innerHTML=r,-1==r.indexOf("EXEC")&&(clearInterval(timer_rel),document.getElementById(e+"_button").classList.remove("loading"),alerta("feed-fixo","RELAT&Oacute;RIO GERADO"),document.getElementById(e+"_lista").children[0].classList.remove("LOCKED"),call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=file","up_rel").then(function(t){document.getElementById(e+"_lista").innerHTML=t}))})},5e3)})):r.length>10?-1!=r.indexOf("existe")?alerta("feed-fixo",TR_RG):(document.getElementById(e+"_lista").innerHTML="",document.getElementById(e+"_lista").innerHTML=r):(call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=check","up_rel"),alerta("feed-fixo",TR_GR),document.getElementById(e+"_button").classList.add("loading"),document.getElementById(e+"_button").children[0].innerHTML="EXECUTANDO",timer_rel=setInterval(function(){call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=check","up_rel").then(function(r){document.getElementById(e+"_button").innerHTML=r,-1==r.indexOf("EXEC")&&(clearInterval(timer_rel),setTimeout(function(){document.getElementById(e+"_button").classList.remove("loading"),alerta("feed-fixo","RELAT&Oacute;RIO GERADO COM SUCESSO"),-1==r.indexOf("EXCEDEU")&&call("lista_rel","prm_objeto="+e+"&prm_screen="+t+"&prm_cod="+a+"&prm_lista=file","up_rel").then(function(t){document.getElementById(e+"_lista").innerHTML=t})},1e3))})},5e3))}))}function createView(){var e=new RegExp("^[a-zA-Z0-9_]+$"),t=document.getElementById("visao_nome").value,a=document.getElementById("visao_tabela").title,r=document.getElementById("visao_desc").value,n=document.getElementById("fake_grupo").title;t.length>1?a.length>1?r.length>1?n.length>1?e.test(t)?call("new_view","prm_nome="+t+"&prm_tabela="+a+"&prm_desc="+encodeURIComponent(r)+"&prm_grupo="+n).then(function(e){-1!=e.indexOf("FAIL")?alerta("feed-fixo",e.replace("FAIL","")):(alerta("feed-fixo","View criada com sucesso!"),call("load_tables","").then(function(e){document.getElementById("content").innerHTML=e,carregaPainel("visoes")}))}):alerta("msg",TR_VI):alerta("msg",TR_ES_gr):alerta("msg",TR_DS_LE):alerta("msg",TR_ES_TB):alerta("msg",TR_NM_LE)}function topDistance(e){if(document.getElementById(e)&&document.getElementById(e+"dv2")){var t=document.getElementById(e);if(t.getElementsByTagName("thead")[0]){var a=t.getElementsByTagName("thead")[0].getElementsByTagName("tr"),r=a.length;if(r>1)for(let e=1;e<r;e++){var n=a[e].offsetTop;if(n>0){var o=a[e].getElementsByTagName("th"),l=o.length;for(let e=0;e<l;e++)o[e].style.setProperty("top",n+"px")}}if(!document.getElementById("show_only_screen")){for(var i=t.querySelectorAll(".fix"),s=i.length,d=0,c=0;i[c];){d+=i[c].clientWidth;try{if(!i[c].nextElementSibling.classList.contains("fix"))break}catch(e){break}c++}var m=[];"STYLE"==document.getElementById(e).lastElementChild.tagName&&document.getElementById(e).lastElementChild.remove();var u=[];for(let e=1;e<s;e++)"none"!=window.getComputedStyle(i[e],null).display&&u.push(i[e]);if(d<t.clientWidth-180){m.push("table#"+e+"c tr td:nth-child(1), table#"+e+"c tr:nth-child(1) th:nth-child(1){ left: 1px; }");for(let t=0;t<u.length+1;t++)u[t]?(m.push("table#"+e+"c tr td:nth-child("+(u[t].cellIndex+1)+"), table#"+e+"c tr:nth-child(1) th:nth-child("+(u[t].cellIndex+1)+"){ left: "+(u[t].offsetLeft-6)+"px; }"),u[t].nextElementSibling&&(u[t].nextElementSibling.classList.contains("fix")||(t=9999999))):t=9999999}var p=document.createElement("style"),g=[...new Set(m)];p.innerHTML=g.join(" "),document.getElementById(e).appendChild(p)}}}}function calcBasis(e){var t=document.getElementById(e),a=t.children.length,r=t.children[0].children.length,n=[];for(let e=0;e<r;e++)n.push(0);var o=0;for(let e=0;e<a;e++)for(let a=0;a<r;a++)(o=t.children[e].children[a].clientWidth)>n[a]&&(n[a]=o);var l=document.createElement("style"),i="";for(let t=1;t<n.length;t++)i=i+" div#"+e+" ul li:nth-child("+(parseInt(t)+1)+"){ flex-basis: "+n[t]+"px; }";l.innerHTML=i,t.appendChild(l)}function carregaObjeto(){var e=document.querySelectorAll(".loader"),t=e.length;for(let r=0;r<t;r++){var a=e[r];call("carrega_objeto","prm_tipo="+a.getAttribute("data-tipo")+"&prm_posicao="+a.getAttribute("data-posicao")+"&prm_parametro="+a.getAttribute("data-parametro")+"&prm_visao="+a.getAttribute("data-visao")+"&prm_coluna="+a.getAttribute("data-coluna")+"&prm_agrupador="+a.getAttribute("data-agrupador")+"&prm_tip="+a.getAttribute("data-tip")+"&prm_obj="+a.getAttribute("data-objeto")+"&prm_screen="+a.getAttribute("data-screen")+"&prm_colup="+a.getAttribute("data-colup")).then(function(e){document.getElementById(a.parentNode.id).innerHTML=e})}}function carregaTela(e,t,a){shscr(e),setTimeout(function(){MAIN.style.setProperty("background-color",t),-1==a.indexOf("EXT=")&&-1==a.indexOf("N/A")?MAIN.style.setProperty("background-image","url("+a+")"):MAIN.style.setProperty("background-image","none")},500)}function addLov(){checkError();var e=document.getElementById("nome_lov").value,t=document.getElementById("lista-tabelas").title,a=document.getElementById("lista-codigo").title,r=document.getElementById("lista-descricao").title,n=document.getElementById("tipos").title;"LISTA"==n&&(t=document.getElementById("lista_lov").value),e.length<2?alerta("msg",TR_TC):t.length>1&&a.length>1&&r.length>1||"LISTA"==n?call("savecd","p_funcao=G&p_nds_tabela="+e+"&p_nds_owner=DWU&p_nds_tfisica="+t+"&p_nds_cd_empresa=&p_nds_cd_codigo="+a+"&p_nds_cd_descricao="+r+"&p_tipo="+n).then(function(e){-1!=e.indexOf("ok")?(alerta("feed-fixo",TR_CR),ajax("list","list_cdesc","prm_order=1&prm_dir=",!1,"content"),carregaPainel("lov")):alerta("feed-fixo",e)}):alerta("feed-fixo",TR_TC)}function addDestaque(){var e=document.getElementById("destaque-usuario").title,t=document.getElementById("destaque-objeto").title,a=document.getElementById("destaque-coluna").title,r=document.getElementById("destaque-condicao").title,n=document.getElementById("destaque-valores").title,o=document.getElementById("destaque-corfundo").value,l=document.getElementById("destaque-corfonte").value,i=document.getElementById("destaque-tipo").value,s=document.getElementById("destaque-prioridade").value;""!=e&&""!=n&&""!=o&&""!=l&&""!=s&&""!=t?call("setdestaque","prm_usuario="+e+"&prm_objeto="+t+"&prm_coluna="+a+"&prm_condicao="+r+"&prm_conteudo="+encodeURIComponent(n)+"&prm_fundo="+o+"&prm_fonte="+l+"&prm_tipo="+i+"&prm_prioridade="+s).then(function(a){-1==a.indexOf("FAIL")?(alerta("feed-fixo",TR_AD),document.getElementById("destaque-objeto").getAttribute("data-default")?ajax("list","list_mblink","prm_objeto=&prm_usuario="+e+"&prm_order=1&prm_dir=",!0,"ajax"):carrega("blink?prm_objeto="+t+"&prm_visao="+document.getElementById("destaque-visao").title+"&prm_order=1&prm_dir=")):alerta("feed-fixo",TR_ER)}):alerta("feed-fixo",TR_TC)}function clickStart(e){var t=e.target;if(call("refresh_session",""),"sizeUp"!=t.id){if("call-menu"==t.id){document.getElementById("attriblist").innerHTML="",attReopen(function(){call("show_screen","prm_screen="+tela+"&prm_tipo=MENU").then(function(e){let t=document.createElement("div");t.classList.add("itens"),t.innerHTML=e,document.getElementById("attriblist").appendChild(t)}).then(function(){addLink(),call("closer_menu").then(function(e){let t=document.createElement("div");t.innerHTML=e,document.getElementById("attriblist").appendChild(t.children[0])})})},"attriblist")}if("favoritos"==t.id){attReopen(function(){ajax("list","favoritos","prm_screen="+tela,"false","attriblist")},"attriblist")}if("atu_view"==t.id){attReopen(function(){ajax("list","atu_view","prm_screen=","false","attriblist")},"attriblist")}if("config"==t.id){attReopen(function(){ajax("list","list_vconteudo","prm_usuario=",!1,"attriblist")},"attriblist")}if("float-filter"==t.id){if(closeSideBar("get_float"),"mac"==PRINCP.className||"mobile"==PRINCP.className)var a="floatlist";else{a="floatlist";if(document.getElementById(a).classList.contains("open"))return void document.getElementById(a).querySelector(".closer").click()}attReopen(function(){ajax("list","get_float","prm_screen="+tela,!1,a)},a)}if(t.classList.contains("closer"))if(document.querySelector(".optionbox")&&document.querySelector(".optionbox").remove(),document.querySelector(".destacada")&&document.querySelector(".destacada").classList.remove("destacada"),"attriblist"==(c=t.parentNode).id&&document.getElementById("fakelist").classList.contains("visible")?(document.getElementById("fakelist").classList.remove("visible"),setTimeout(function(){document.getElementById("fakelist").innerHTML="",c.classList.remove("open")},400),setTimeout(function(){c.innerHTML=""},600)):(c.classList.remove("open"),document.getElementById("fakelist").classList.remove("visible"),setTimeout(function(){var e=c.querySelector(".closer").cloneNode(!0);c.innerHTML="",c.appendChild(e)},210)),document.querySelector(".itens")&&"T"==document.querySelector(".itens").getAttribute("data-alterado"))if(document.querySelector(".itens").getAttribute("data-obj")){var r=document.querySelector(".itens").getAttribute("data-obj");document.getElementById(r)&&(document.getElementById(r+"sync")?document.getElementById(r+"sync").click():shscr(tela))}else shscr(tela);if(t.classList.contains("reorder")){r=t.parentNode.parentNode.id.replace("sdrill_","").split("trl")[0];var n=document.getElementById("selecteddata").getAttribute("data-i");document.getElementById(r+n+"h").click()}if(t.classList.contains("f_addcoluna")&&add_coluna(t.getAttribute("data-template")),!t.classList.contains("arrowline")||t.classList.contains("firstline")||t.parentNode.classList.contains("firstline")||(document.querySelector(".arrowline.selected")&&document.querySelector(".arrowline.selected").classList.remove("selected"),t.classList.add("selected")),t.parentNode.classList.contains("custom")&&t.classList.contains("search")){var o=t.parentNode.parentNode.parentNode;r=t.parentNode.parentNode.parentNode;if(o.previousElementSibling&&o.title!=o.getAttribute("data-default")&&o.previousElementSibling.classList.contains("script")&&!t.classList.contains("noscript")&&o.previousElementSibling.click(),r.classList.contains("multi"))var l="S";else l="N";fakeboxevent(r.id,r.getAttribute("data-opcao"),r.title,l,t.parentNode.parentNode.parentNode.getAttribute("data-visao"),r.getAttribute("data-adicional"),r,r.children[0].getAttribute("data-fixed").length,t.previousElementSibling.value,r.getAttribute("data-reverse"))}if(t.classList.contains("add")&&fakeboxAdd(t),t.parentNode.classList.contains("custom"))if(t.previousElementSibling)(o=t.parentNode.parentNode.parentNode).click();if((t.classList.contains("fakeoption")||t.parentNode.classList.contains("fakeoption"))&&!t.classList.contains("fakelistbox")){t.parentNode.classList.contains("fakeoption")&&(t=e.target.parentNode);l="N";if(t.classList.contains("multi")&&(l="S"),!e.target.classList.contains("noprop")&&t.children[0]){if(t.children[0].setAttribute("data-custom","N"),(i=t.getAttribute("data-adicional")).length>0&&document.getElementById(i)&&!document.getElementById(i).classList.contains("dragme")&&!document.getElementById(i).classList.contains("fakeoption"))var i=document.getElementById(i).title;fakeListBox(t.id,t.getAttribute("data-opcao"),t.title,l,t.getAttribute("data-visao"),i,t.getAttribute("data-reverse"),e,t.getAttribute("data-custom"))}}if(t.classList.contains("checkbox")){var s=t.parentNode.parentNode.parentNode.parentNode.getAttribute("data-obj");document.getElementById(s)||document.getElementById(s+"trl")&&(s+="trl"),t.classList.contains("checked")?(t.classList.remove("checked"),t.title=t.getAttribute("data-negative")):(t.classList.add("checked"),t.title=t.getAttribute("data-positive")),t.previousElementSibling&&t.previousElementSibling.classList.contains("script")&&t.previousElementSibling.click()}if(t.classList.contains("sync")){var d=t.parentNode.id,c=t.parentNode.parentNode.id,m="",u="",p="";if(alerta("feed-fixo","Carregando Objeto"),"main"==c)m="&prm_dashboard=false",u=t.parentNode.getBoundingClientRect().x-28+"px",p=t.parentNode.getBoundingClientRect().y+"px","null"==u&&(u="");else{dashlocation=c,u=window.getComputedStyle(t.parentNode).getPropertyValue("order");let e=document.getElementById(dashlocation).getBoundingClientRect();m="&prm_dashboard=true&prm_dash_altura="+e.height.toString()+"&prm_dash_largura="+e.width.toString()}var g="N";"article_customizacao"==c.toLowerCase()&&(g="C",m="&prm_dashboard=true",u="1"),t.parentNode.remove(),appendar("prm_drill="+g+"&prm_objeto="+d+"&PRM_ZINDEX=&prm_posx="+u+"&prm_posy="+p+"&prm_screen="+tela+m,!1,c)}if(t.classList.contains("addpurple")&&t.getAttribute("data-req")){var f=t.getAttribute("data-req"),_=t.getAttribute("data-par").split("|"),v=t.getAttribute("data-res"),y="",h=t.getAttribute("data-sup"),b="content",E=t.getAttribute("data-load"),I=t.getAttribute("data-msg")||TR_AD,x=t.getAttribute("data-pkg")||"FCL",A=t.getAttribute("data-par-agrupa")||"N",B="",L=[],N=[],C=0,T="",S="prm_parametros=",w="prm_conteudos=";for(let e=0;e<_.length;e++){let t=document.getElementById(_[e]),a="";a="SPAN"==t.tagName?t.title:t.value,t.getAttribute("data-min")&&a.length<parseFloat(t.getAttribute("data-min"))&&(t.classList.add("errorinput"),C+=1),T=a,"S"==t.getAttribute("data-encode")&&(T=encodeURIComponent(a)),"S"==A?(S=S+_[e].replace("prm_","")+"|",w=w+T+"|"):L.push(_[e]+"="+T),"prm_report"==_[e]&&(B="prm_default=ID|"+a)}if("S"==A&&((L=[]).push(S),L.push(w)),t.getAttribute("data-res-par")){y=t.getAttribute("data-res-par").split("|");for(let e=0;e<y.length;e++){let t=document.getElementById(y[e]),a="";a="SPAN"==t.tagName?t.title.split("|")[0]:t.value.split("|")[0],N.push(y[e]+"="+a)}}t.getAttribute("data-res-tar")&&(b=t.getAttribute("data-res-tar")),t.getAttribute("data-save")&&-1==window[t.getAttribute("data-save")].indexOf(L.join("&"))&&window[t.getAttribute("data-save")].push(L.join("&")),0==C?(E&&document.getElementById(E).classList.add("loading"),call(f,L.join("&"),x).then(function(e){if(-1==e.indexOf("FAIL")&&-1==e.indexOf("ERRO|")){if(alerta("feed-fixo",I),v?ajax("list",v,N.join("&"),!1,b,"","",x):document.getElementById(b).innerHTML=e,t.getAttribute("data-children")){var a=t.getAttribute("data-children");a.length>0&&fakeReset(a.split("|"))}h&&call("menu",B="filtror"==h?"prm_menu="+h+"&"+B:"prm_menu="+h).then(function(e){document.getElementById("painel").innerHTML=e;var t=document.getElementById("prm_usuario_origem");t&&t.style.setProperty("display","none")})}else-1!=e.indexOf("FAIL DUPLICADO")?alerta("feed-fixo",e.replace("FAIL DUPLICADO","")):-1!=e.indexOf("FAIL FLOAT")?alerta("feed-fixo",e.replace("FAIL FLOAT","")):-1!=e.indexOf("FAIL FILTRO")?alerta("feed-fixo",e.replace("FAIL FILTRO","")):e.indexOf("ERRO|")>=0&&e.split("|")[1].length>0?alerta("",e.split("|")[1],"","ERRO"):alerta("feed-fixo",TR_ER,e.replace("FAIL",""));E&&document.getElementById(E).classList.remove("loading")})):alerta("feed-fixo",TR_TC)}if(t.getAttribute("data-reload")&&reload(t.getAttribute("data-reload")),t.classList.contains("etl_modal_comando")||t.classList.contains("etl_modal_comando_limpar")){let e=t.parentNode.id,a="",r="N";a=t.classList.contains("etl_modal_comando_limpar")?"COMANDO_LIMPAR":"COMANDO",call("etl_step_comando","prm_step_id="+e+"&prm_coluna="+a,"etl").then(function(e){document.getElementById("modal-box").innerHTML=e,"ERRO"==e.split("|")[0]&&(alerta("",e.split("|")[1]),r="S")}).then(function(){if("N"==r){setTimeout(function(){document.getElementById("modal"+e).classList.add("expanded")},200);let t="modal-input-text";(ace_editor=ace.edit(t)).session.setMode("ace/mode/sql")}})}}else document.getElementById("sizeUp").remove()}function add_coluna(e){var t=document.getElementById("add_coluna").value;if(new RegExp("^[a-zA-Z0-9_]+$").test(t))if(t.trim().length>1){var a=document.getElementById("micro-visao").title;0!=a.trim().length?call("savecolumn","p_cd_coluna="+t+"&p_visao="+a+"&prm_template="+e).then(function(e){if(-1==e.indexOf("existe")&&-1==e.indexOf("Erro")){alerta("feed-fixo",TR_AD),document.getElementById("content").value="";let e=get("painel-colunas").getAttribute("data-colunas");setTimeout(function(){call("load_crocks","prm_visao="+document.getElementById("telasup").getAttribute("data-visao")+"&prm_valores="+e).then(function(e){document.getElementById("painel-colunas").innerHTML=e}).then(function(){smoothScroll2("container-colunas",t.toUpperCase()+"id"),document.getElementById(t.toUpperCase()+"id").click(),document.getElementById("add_coluna").value=""})},500)}else alerta("feed-fixo",e)}):alerta("msg",TR_ES_VW)}else alerta("msg",TR_NM_LE);else alerta("msg",TR_VI)}function edit_view(){ace_editor.setValue("");var e=document.getElementById("painel").querySelector(".fakelistbox").querySelectorAll(".opt"),t=[];for(let a=0;a<e.length;a++)t.push(e[a].title);var a,r=document.getElementById("view_list").title;if(a=-1==t.indexOf(r),document.getElementById("sandbox").contentWindow.document.body.innerHTML='<form id="zebra" name="zebra" method="post" action="'+OWNER_BI+'.fcl.passagem_test"><input id="nome" type="hidden" name="nome" value="'+r+'" /><input id="parsecheck" name="parseonly" type="hidden" value="N"/></form>',!a){document.getElementById("sandbox").contentWindow.document.getElementById("nome").value=document.getElementById("view_list").title;for(let e=0;e<21;e++)ajax("slice","load_dado","prm_nome="+r+"&prm_tipo=view&prm_time="+e,"false","slice",e)}}function openText(){document.getElementById("text-talk").setAttribute("data-objeto",""),document.getElementById("text-talk").setAttribute("data-line",""),"open"==document.getElementById("text-talk").className&&clearInterval(textTalk),document.getElementById("text-talk").classList.toggle("open"),get("campo").innerHTML="",call("listContainer","").then(function(e){document.querySelector(".list_container").innerHTML=e})}function closeSideBar(e){document.getElementById("text-talk")&&"text-talk"!=e&&document.getElementById("text-talk").classList.remove("open"),document.getElementById("get_float")&&"get_float"!=e&&document.getElementById("get_float").classList.remove("open"),document.getElementById("obs-field")&&"obs-field"!=e&&document.getElementById("obs-field").classList.remove("open"),document.getElementById("perfil")&&"perfil"!=e&&document.getElementById("perfil").classList.remove("open"),document.getElementById("popupmenu")&&"popupmenu"!=e&&(document.getElementById("popupmenu").classList.remove("visible"),document.getElementById("popupmenu").innerHTML=""),document.getElementById("prefdrop")&&"prefdrop"!=e&&document.getElementById("prefdrop").classList.remove("hover"),document.getElementById("attriblist")&&"attriblist"!=e&&(document.getElementById("attriblist").classList.remove("open"),document.getElementById("attriblist").innerHTML=""),document.getElementById("floatlist")&&"floatlist"!=e&&(document.getElementById("floatlist").classList.remove("open"),document.getElementById("floatlist").innerHTML="")}function excluirModelo(){call("excluir_modelo","prm_modelo="+document.getElementById("import-tabela-ut").value,"imp").then(function(e){-1==e.indexOf("FAIL")?(alerta("mensagem",TR_EX),call("main","prm_modelo=","imp").then(function(e){document.getElementById("content").innerHTML=e})):alerta("mensagem",e.replace("FAIL",""))})}function addVarconteudo(){var e=document.getElementById("valor").value,t=document.getElementById("filtro-usuario").title;e.trim().length<1?alerta("msg",TR_NM_LE1):t.length<3?alerta("msg",TR_EU):call("add_vconteudo","prm_variavel="+e+"&prm_usuario="+t+"&prm_lock="+document.getElementById("locked").value).then(function(e){-1!=e.indexOf("OK")?(alerta("feed-fixo",TR_AD),document.getElementById("valor").value="",call("list_vconteudo","prm_usuario="+t+"&prm_todo=N").then(function(e){document.getElementById("conf_ajax").innerHTML=e})):alerta("feed-fixo",TR_ER)})}function addObjeto(){checkError();var e=document.getElementById("nome").value.trim();if(e.length<4)alerta("msg",TR_NM_LE);else if(""!=document.getElementById("fake_grupo").title){var t=document.getElementById("tipo").title;if(t.length>0){var a="";"BROWSER"!=t&&"CONSULTA"!=t||(a=document.getElementById("lista-tabelas").title),("BROWSER"==t&&a.length>0||"BROWSER"!=t)&&call("save_obj","prm_nome="+encodeURIComponent(e)+"&prm_atributo="+OWNER_BI+".fcl.download?arquivo="+document.getElementById("fake_img_new").title+"&prm_grupo="+document.getElementById("fake_grupo").title+"&prm_tipo="+t+"&prm_visao="+a).then(function(e){-1!=e.indexOf("FAIL")?alerta("feed-fixo",TR_ER):-1!=e.indexOf("ERROCOLUNA")?alerta("feed-fixo",TR_ER):alerta("feed-fixo",TR_AD),ajax("list","list_objetos","prm_tipo="+t+"&prm_screen="+tela,!1,"ajax"),document.getElementById("tipo-objeto").value=t,carregaPainel("objetos")}),"SCREEN"==t&&ajax("list","screen_list","",!0,"floatops")}}else alerta("msg",TR_ES_GR)}function enviodecampos(e){var t=encodeURIComponent(document.getElementById("boxnome").value.trim()),a=document.getElementById("boxemail").value.trim(),r=document.getElementById("boxcelular").value.trim(),n=encodeURIComponent(document.getElementById("boxsenha").value.trim()),o=[];if(o.push("celular"),o.push("email"),o=o.join("|"),"enviar"==e){if(0==t.length||0==a.length||0==r.length||0==n.length)return void alerta("feed-fixo",TR_TC);if(t.length<=3&&0!=t.length)return void alerta("feed-fixo",TR_NM_LE);if(a.length<=5&&0!=a.length)return void alerta("feed-fixo",TR_EI);if(n.length<6||!n.match(/[0-9]+/g)||!n.match(/[a-zA-Z]+/g))return void alerta("feed-fixo",TR_SE_LE);if(r.length<8&&0!=r.length)return void alerta("feed-fixo","Número de celular deve conter 8 ou mais caracteres.");call("userinfo","prm_nome="+t+"&prm_email="+a+"&prm_cell="+r+"&prm_notificacao="+o+"&prm_senha="+n).then(function(e){"OK"===e.split("|")[0]?-1==e.indexOf("#alert")?(curtain(),alerta("feed-fixo",TR_CA),setTimeout(function(){window.location.reload(!0)},500)):alerta("feed-fixo",e.replace("#alert ","")):alerta("feed-fixo",e.split("|")[1])})}}function setMicroAgrupador(){document.getElementById("micro-agrupador")&&(document.getElementById("micro-agrupador").title="",document.getElementById("micro-agrupador").children[0].innerHTML=document.getElementById("micro-agrupador").children[0].getAttribute("data-placeholder"))}function ver_logs(){document.getElementById("logs_recentes");call("exec_query","p_query="+encodeURIComponent("select dt_log as DATA, vl_query as QUERY, ds_log as STATUS from BI_LOG_QUERY")+"&p_parse=N&p_linhas=9999999").then(function(e){document.getElementById("queryresult").innerHTML=e,document.getElementById("queryresult2").innerHTML=e})}function save_usuario(){var e=encodeURIComponent(document.getElementById("senha1").value),t=document.getElementById("email").value,a=document.getElementById("number").value,r=encodeURIComponent(document.getElementById("completo").value),n=document.getElementById("cd_tela_inicial_usuario").title.trim();call("save_pwd","prm_user="+USUARIO+"&prm_senha="+e+"&prm_email="+t+"&prm_number="+a+"&prm_nome="+r+"&prm_tela_inicial="+n).then(function(e){-1==e.indexOf("#alert")?(curtain(),alerta("feed-fixo",TR_AL),setTimeout(function(){window.location.reload(!0)},1500)):alerta("feed-fixo",e.replace("#alert ",""))})}function attReopen(e,t){let a=document.getElementById(t);a.classList.contains("open")?(a.classList.remove("open"),setTimeout(function(){closeSideBar(t),a.innerHTML="",loader(t),setTimeout(function(){a.classList.add("open")},100),setTimeout(e,50)},100)):(loader(t),setTimeout(e,50),setTimeout(function(){a.classList.add("open")},100))}function templateMarcado(e,t,a){"green"==e.className?e.className="":e.className="green";var r=e.parentNode.querySelectorAll(".green"),n="";for(let e=0;e<r.length;e++)n=n+"|"+r[e].title;ajax("fly","template","prm_objeto="+t+"&prm_valor="+n+"&prm_view="+a,!1)}function movingArticle(e){e.stopPropagation(),document.querySelector(".movingarticle")&&document.querySelector(".movingarticle").classList.remove("movingarticle"),document.querySelector(".hoverchangearticle")&&document.querySelector(".hoverchangearticle").classList.remove("hoverchangearticle")}function getvalue(e){return e.classList.contains("fakeoption")?e.title:e.value}function getFileName(e){e.innerHTML="CARREGANDO ARQUIVO";var t=document.getElementById("painel").querySelector("iframe").contentWindow.document.body.children[0].children[0];t.setAttribute("data-arquivo",""),t.click(),uploadFile=setInterval(function(){if(t.getAttribute("data-arquivo").length>0){e.classList.add("loading");let a=t.getAttribute("data-arquivo").split("|");e.innerHTML=a[a.length-1].toUpperCase(),t.setAttribute("data-arquivo",""),e.classList.remove("loading"),clearInterval(uploadFile)}},100)}function passChange(e,t){e.getAttribute("data-changed")||(e.value.trim().length>6&&e.value.match(/[0-9]+/g)&&e.value.match(/[a-zA-Z]+/g)?confirm(TR_CM)&&call("save_pwd","prm_senha="+encodeURIComponent(e.value)+"&prm_email=&prm_number=&prm_user="+t+"&prm_nome=").then(function(t){e.value="",t.indexOf(!1)?alerta("msg",TR_SA):alerta("msg",TR_ER_SE)}):alerta("msg",TR_SE_LE)),"S"==e.getAttribute("data-changed")&&(e.value.trim().length>6&&e.value.match(/[0-9]+/g)&&e.value.match(/[a-zA-Z]+/g)?confirm(TR_CM)&&call("save_pwd","prm_senha="+encodeURIComponent(e.value)+"&prm_email=&prm_number=&prm_user="+t+"&prm_nome=").then(function(t){e.value="",e.setAttribute("data-changed","N"),t.indexOf(!1)?alerta("msg",TR_SA):alerta("msg",TR_ER_SE)}):alerta("msg",TR_SE_LE))}function montaCustom(){var e=[],t=document.getElementById("filtropipe"),a=document.getElementById("filtroc-coluna").title,r=document.getElementById("filtroc-condicao").title,n=document.getElementById("filtroc-valores").title;if(n.length>0&&a.length>0&&r.length>0){e.push(t.title),e.push(a+"|$["+r+"]"+n);var o=e.filter(e=>e).join("||");-1==t.title.indexOf(a+"|$["+r+"]"+n)?(t.title=o,fakeReset(["filtroc-valores"]),document.getElementById("gerar-custom").click()):alerta("fix","Filtro ja existe!")}}function removeCustomFiltro(e){if(confirm(TR_CE)){var t=document.getElementById("filtropipe");t.title=t.title.split("||").filter(function(t){if(t!=e.title)return t}).join("||"),document.getElementById("gerar-custom").click()}}function requestDefault(e,t,a,r,n,o,l){return(!a.hasAttribute("data-default")||r!=a.getAttribute("data-default"))&&((!a.previousElementSibling||!a.previousElementSibling.classList.contains("default")||a.previousElementSibling.innerHTML!=r)&&(a.getAttribute("data-min")&&r.length<parseFloat(a.getAttribute("data-min"))?(alerta("","Campo deve ser preenchido","","ERRO"),!1):void call(e,t,o||"COM").then(function(e){if("OK"==e.split("|")[0]){if(e.split("|")[1]?alerta("",e.split("|")[1]):alerta("",TR_AL),a.hasAttribute("data-default")&&(a.setAttribute("data-default",r),n&&(n.innerHTML=r)),a.previousElementSibling&&a.previousElementSibling.classList.contains("default")&&(a.previousElementSibling.innerHTML=r,n&&(n.innerHTML=r)),a.nextElementSibling){var t=a.nextElementSibling.getAttribute("data-adicional");if(e.split("|")[2]&&t&&-1!=a.nextElementSibling.id.indexOf("prm_objeto")){var n=document.getElementById("prm_ds_tp_objeto_"+t);n&&(n.value=e.split("|")[2])}}}else e.split("|")[1].length>0?alerta("",e.split("|")[1],"","ERRO"):alerta("",TR_ER,"","ERRO"),"function"==typeof l&&l()})))}function pellLaunch(e,t){action=[{name:"bold",icon:"<b>N</b>",title:"Negrito (Bold)"},{name:"italic",title:"Itálico",result:()=>pell.exec("italic")},{name:"underline",icon:"<u>S</u>",title:"Sublinhado"},{name:"center",icon:"centeralign",title:"Centralizar",result:()=>pell.exec("justifyCenter")},{name:"left",icon:"leftalign",title:"Alinhar à Esquerda",result:()=>pell.exec("justifyLeft")},{name:"right",icon:"rightalign",title:"Alinhar à Direira",result:()=>pell.exec("justifyRight")},{name:"full",icon:"fullalign",title:"Justificar",result:()=>pell.exec("justifyFull")},{name:"size",icon:"fontsize",title:"Tamanho Texto/Título",result:()=>{const e=window.prompt("Digite o tamanho do texto entre 1 e 7");e&&pell.exec("fontSize",e)}},{name:"link",title:"Adicionar um link ao texto",result:()=>{const e=window.prompt("Informe a URL do link");e&&pell.exec("createLink",e)}},{name:"image",title:"Adicionar um imagem",result:()=>{const e=window.prompt("Informe a URL da imagem");e&&pell.exec("insertImage",e)}},{name:"line",title:"Linha Horizontal"}],document.getElementById("pell-editor"+e).children[0]||pell.init({element:document.getElementById("pell-editor"+e),onChange:t=>{document.getElementById("modal-output"+e).textContent=t},styleWithCSS:!0,actions:action,classes:{size:"size"}})}function autoUpdateTodos(e){var t=document.getElementById("tbody_lista_autoupdate"),a=0;(async()=>{for(etr of t.querySelectorAll("tr"))for(etd of etr.querySelectorAll("td"))if(("BAIXA"==e&&etd.classList.contains("td-baixa")||"ATUALIZA"==e&&etd.classList.contains("td-atualiza"))&&etd.querySelector("a").classList.contains("upd")&&!etd.querySelector("a").classList.contains("blocked")){a+=1;const t=await autoUpdate(etd.querySelector("a"),e,"TODOS");if("ok"!=t)return alerta("feed-fixo",t),!1}alerta("feed-fixo",0==a?"Nenhum objeto pendente":"BAIXA"==e?a+" objetos baixados com sucesso":a+" objetos atualizados com sucesso")})()}function autoUpdate(e,t,a){var r,n,o,l,i=e.parentNode.parentNode,s=i.getAttribute("data-sistema"),d=i.getAttribute("data-versao"),c=i.getAttribute("data-usuario"),m=i.getAttribute("data-tipo"),u=i.getAttribute("data-nome");return e.classList.toggle("loading"),"BAIXA"==t?(e.innerText="Baixando ...",o="upd",r="AutoUpdate_baixa_conteudo",n="prm_sistema="+s+"&prm_versao="+d+"&prm_usuario="+c+"&prm_tipo="+m+"&prm_nome="+u+"&prm_chamada=NAVEGADOR",l=6):(e.innerText="Atualizando ...","UPD"==u?(o="sch",r="autoUpdate_atu_PACKAGE",n="prm_usuario="+c+"&prm_tipo="+m+"&prm_nome="+u+"&prm_chamada=NAVEGADOR"):"ESTADOS"==m||"CIDADES"==m?(o="upd",r="autoUpdate_CIDADES_ESTADOS",n="prm_usuario="+c+"&prm_tipo="+m+"&prm_chamada=NAVEGADOR"):(o="upd",r="AutoUpdate_atu_sistema",n="prm_usuario="+c+"&prm_tipo="+m+"&prm_nome="+u+"&prm_chamada=NAVEGADOR"),l=7),new Promise((i,s)=>{call(r,n,o).then(function(r){if(e.classList.toggle("loading"),r.indexOf("OK|")>=0){if(e.className="green ok",e.setAttribute("onclick",""),e.parentNode.parentNode.children[l].innerHTML=r.split("|")[1],e.innerText=r.split("|")[2],"TODOS"!=a&&alerta("feed-fixo",r.split("|")[3]),"BAIXA"==t){let t=e.parentNode.nextElementSibling.querySelector("a");"AVISO"==m?(t.innerHTML="Atualizado",t.className="green ok",t.setAttribute("onclick","")):(t.innerHTML="Atualiza&ccedil;&atilde;o dispon&iacute;vel",t.className="upd",t.setAttribute("onclick","autoUpdate(this, 'ATUALIZA');"))}i("ok")}else e.className="upd error",e.innerText=r.split("|")[2],"TODOS"!=a&&alerta("feed-fixo",r.split("|")[3]),i(r.split("|")[3])})})}function saveFloat(e,t){document.getElementById("get_float").setAttribute("data-alterado","T"),call("save_float","prm_conteudo="+encodeURIComponent(e)+"&prm_padrao="+t+"&prm_screen="+tela).then(function(e){-1==e.indexOf("FAIL")?alerta("feed-fixo",TR_AL):alerta("feed-fixo",e.split("|")[1])})}function login(e){var t=document.getElementById("login-menu"),a=t.querySelectorAll(".login-session")[0],r=t.querySelectorAll(".login-session")[1],n="";t.className="loading";document.getElementById("sis-netwall-externo")&&"S"==document.getElementById("sis-netwall-externo").value?0==a.value.trim().length||0==r.value.trim().length?(t.className="shake",alerta("x",TR_TC),r.value="",setTimeout(function(){t.className=""},300)):(async()=>{"#ERRO"==(n=await callExt("https://api.ipify.org/")).split("")[0]?(t.className="shake",alerta("x","Erro na chamada de requisicao externa"),setTimeout(function(){t.className=""},300)):loginExec(n)})():loginExec()}function loginExec(e){var t=document.getElementById("login-menu"),a=t.querySelectorAll(".login-session")[0],r=t.querySelectorAll(".login-session")[1];t.className="loading";var n,o,l,i=window.document.location.pathname.split("/"),s=i.slice(0,i.length-1).join("/")+"/",d=window.location.protocol+"//"+(window.document.location.host+"/"+s).replace("//","/");call("login","prm_user="+encodeURIComponent(a.value)+"&prm_password="+encodeURIComponent(r.value)+"&prm_session=&prm_prazo=0.5&prm_url="+d+"&prm_ip="+e).then(function(e){"ERRO"==e.split("|")[0]||"LOGINVALIDA"==e.split("|")[0]||"LOGINEXPIRA"==e.split("|")[0]?(t.className="shake",r.value="",setTimeout(function(){t.className=""},300),"LOGINEXPIRA"==e.split("|")[0]?(o=e.split("|")[1],n=e.split("|")[2],l=e.split("|")[3],"OK"==o?alerta("alert",l=TR_LO_ES.replace(":001",n)):alerta("x",l)):"LOGINVALIDA"==e.split("|")[0]?(o=e.split("|")[1],n=e.split("|")[2],l=e.split("|")[3],"OK"==o?alerta("alert",l=TR_LO_VA.replace(":001",n)):alerta("x",l)):alerta("x",e.split("|")[2])):(-1!==e.indexOf("LOGINSENHANOVA")?alerta("alert",TR_LO_ET):alerta("x",TR_LE),t.className="logged",setTimeout(function(){window.location.reload(!0)},500))})}function recoverPassword(e){var t=document.getElementById("login-menu"),a=t.querySelectorAll(".login-session")[0],r=(t.querySelectorAll(".login-session")[1],window.document.location.pathname.split("/")),n=r.slice(0,r.length-1).join("/")+"/",o=window.location.protocol+"//"+(window.document.location.host+"/"+n).replace("//","/");a.value.length>0?call("newPassword","prm_usuario="+a.value+"&prm_url="+o).then(function(e){-1!=e.indexOf("ACL")?alerta("x","Problema no envio do email(ACL), favor contactar o administrador!"):alerta("x",e)}):alerta("x",TR_IU)}function restoreCustom(e){if(e.nextElementSibling.title.length>0){document.getElementById("SECTION_CUSTOMIZACAO").classList.add("loading"),appendar("prm_drill=C&prm_objeto="+e.nextElementSibling.title.split("||")[0]+"&prm_zindex=1&prm_posx=&prm_posy=&prm_screen="+tela+"&prm_dashboard=true","","")}}function eraseCustom(){get("custom-conteudo").innerHTML=""}function deleteCustom(){var e=get("lista-custom-fav","custom");call("deleteCustom","prm_custom="+e[0].split("||")[0]).then(function(t){-1!=t.indexOf("EXCLUIDO")?(alerta("feed","TR_EX"),e[1].click()):alerta("feed","TR_ER")})}function copyListBtn(e){document.querySelector(".optionbox")?document.querySelector(".optionbox").remove():call("copiarPermissaoBox","prm_usuario="+e).then(function(e){let t=document.createElement("div");t.classList.add("optionbox"),t.classList.add("reverse"),t.innerHTML=e,t.style.setProperty("left",cursorx+20+"px"),t.style.setProperty("top",cursory+10+"px"),MAIN.appendChild(t),setTimeout(function(){t.classList.add("open")},100)})}function copyUserBtn(e){var t=document.getElementById("regras").value;if(get("fake-copiar-permissao").title.length>0&&("manter"==t||"deletar"==t)){if("manter"==t)var a=TR_CA_US;"deletar"==t&&(a=TR_LR_US),confirm(a)&&call("copiarPermissao","prm_usuario="+e+"&prm_usuario_cop="+get("fake-copiar-permissao").title+"&prm_status="+t).then(function(e){-1==e.indexOf("ok")?alerta("feed-fixo",TR_ER):alerta("feed-fixo",TR_AL),document.querySelector(".optionbox").remove()})}else alerta("feed-fixo",TR_TC)}function blockOptions(e){update_prop(get("ident").value,"tipo",e.value),get("attriblist").children[0].setAttribute("data-alterado","T"),get("coluna-sec").parentNode.parentNode.classList.remove("invisible"),get("micro-coluna").parentNode.parentNode.classList.remove("invisible"),"PIZZA"==e.value||"MAPA"==e.value||"MAPAGEOLOC"==e.value?get("coluna-sec").parentNode.parentNode.classList.add("invisible"):"PONTEIRO"==e.value&&(get("micro-coluna").parentNode.parentNode.classList.add("invisible"),get("coluna-sec").parentNode.parentNode.classList.add("invisible")),get("micro-coluna").classList.add("multi"),"PIZZA"!=e.value&&"MAPA"!=e.value&&"PONTEIRO"!=e.value||get("micro-coluna").classList.remove("multi")}function attribList(e){var t=get("attriblist");(event.offsetX<367&&event.offsetX>339||window.innerWidth<500&&window.matchMedia("(orientation: portrait)").matches&&event.offsetX<221&&event.offsetX>193)&&"visible"!=document.getElementById("fakelist").className&&(parseInt(get("fakelist").style.getPropertyValue("left"))>0&&(get("fakelist").style.setProperty("left","0"),document.querySelector(".itens").innerHTML=""),t.children[0].children[0]&&"T"==t.children[0].getAttribute("data-alterado")&&(t.classList.remove("open"),get(e)&&get(e+"sync")?get(e+"sync").click():shscr(tela),t.children[0].setAttribute("data-alterado","F")),t.className="",setTimeout(function(){t.innerHTML=""},500))}function createUser(){var e=encodeURIComponent(get("nome").value),t=get("login").value,a=encodeURIComponent(get("senha").value),r=get("email").value,n=get("email_usuario").value,o=get("usuario-grupo").title,l=get("fake-permissao").title;e.length<1?alerta("msg",TR_NM_LE1):t.trim().length<3?alerta("msg",TR_LO_LE):a.trim().length<6||!a.match(/[0-9]+/g)||!a.match(/[a-zA-Z]+/g)?alerta("msg",TR_SE_LE):(get("scroll").classList.add("saving"),new RegExp("^[a-zA-Z0-9.]+$").test(t)?r.length>0?call("save_user","prm_nome="+t+"&prm_completo="+e+"&prm_status=&prm_email="+n+"&prm_senha="+a+"&prm_permissao="+l+"&prm_grupo="+o).then(function(e){-1==e.indexOf("FAIL")?(alerta("feed-fixo",TR_CR),get("scroll").classList.remove("saving"),ajax("list","list_users","",!1,"content"),carregaPainel("usuarios")):(get("scroll").classList.remove("saving"),alerta("feed-fixo",e.replace("FAIL ","")))}):noerror("",TR_EI,"msg"):alerta("msg",TR_LO_LI))}function screenObs(){document.getElementById("obs-field").innerHTML=get("tela-atual").children[1].getAttribute("data-obs"),document.getElementById("obs-field").classList.toggle("open")}function objObs(e){if(document.querySelector(".optionbox"))document.querySelector(".optionbox").remove();else{let r=document.createElement("div");r.classList.add("optionbox"),r.classList.add("obsbox"),r.innerHTML=e;var t=cursorx+16;t+360>document.body.clientWidth&&(t=document.body.clientWidth-242);var a=parseInt(event.clientY);r.style.setProperty("left",t+"px"),r.style.setProperty("top",12+a+"px"),MAIN.appendChild(r),setTimeout(function(){r.classList.add("open"),r.addEventListener("mouseleave",function(){document.querySelector(".optionbox.obsbox.open").classList.remove("open"),setTimeout(function(){document.querySelector(".optionbox.obsbox").remove()},200)})},100)}}function importEditColumn(e,t){if(e.value!=e.getAttribute("data-default")||"INPUT"==e.tagName&&"checkbox"==e.type){var a=e.parentNode.parentNode.querySelectorAll("input, select"),r=a[1].value,n=a[2].value,o=a[3].value,l=a[4].value,i=a[5].value,s=a[6].value,d=a[7].value,c="UPDATE";"INPUT"==e.tagName&&"checkbox"==e.type&&0==e.checked&&(c="DELETE"),e.setAttribute("data-default",e.value),call("import_change","prm_modelo="+t+"&prm_numero="+n+"&prm_nome="+r+"&prm_destino=&prm_tipo="+o+"&prm_trfs="+l+"&prm_replacein="+i+"&prm_replaceout="+s+"&prm_mascara="+d+"&prm_op="+c,"imp").then(function(e){-1==e.indexOf("FAIL")&&(alerta("feed-fixo",TR_AL),call("main","prm_modelo="+t,"imp").then(function(e){document.getElementById("content").innerHTML=e}))})}}function importGenerateData(e){e.classList.add("loading"),e.innerHTML="IMPORTANDO DADOS",call("import_test","prm_arquivo="+document.getElementById("import-arquivo-ut").title.replace(OWNER_BI+".fcl.download?arquivo=","").replace(".xlsx","")+"&prm_tabela="+document.getElementById("import-tabela-ut").value+"&prm_cabecalho="+document.getElementById("import-cabecalho-ut").value+"&prm_acao="+document.getElementById("import-acao-ut").value,"imp").then(function(t){e.classList.remove("loading"),e.innerHTML="IMPORTAR DADOS",-1==t.indexOf("FAIL")?alerta("feed-fixo",t):alerta("feed-fixo",t.replace("FAIL","IMP"))})}function importAddModel(){call("import_cabecalho","prm_modelo="+get("import-modelo").value+"&prm_arquivo="+get("import-arquivo").title.replace(OWNER_BI+".fcl.download?arquivo=","").replace(".xlsx","")+"&prm_tabela="+get("visao_tabela").title+"&prm_cabecalho=0&prm_acao="+get("import-acao").value+"&prm_rotina="+get("import-pos-rotina").title,"imp").then(function(e){-1==e.indexOf("FAIL")?(alerta("feed-fixo",TR_AD),document.getElementById("import-tabela-ut").value=get("import-modelo").value,call("main","prm_modelo="+get("import-modelo").value,"imp").then(function(e){get("content").innerHTML=e,carregaPainel("import&prm_default=")})):alerta("feed-fixo",TR_ER)})}function snackObject(e,t,a,r){loadAttrib("ed_gadg","ws_par_sumary="+t+"&prm_tipo="+a+"&prm_tipo_graf="+r);var n=e.parentNode.children;for(let t=0;t<n.length;t++)n[t]!=e&&n[t].classList.add("removed");"grafico"==a?setTimeout(function(){document.getElementById(t+"sync").click()},100):e.classList.add("single")}function ClickIconGrap(e){for(icone of(seleIcon=e.querySelector("svg"),grupo=e.closest(".queryadd-graph-group"),arIcones=grupo.querySelectorAll(".icones-graficos"),arIcones))icone==seleIcon?icone.classList.add("selecionado"):icone.classList.remove("selecionado")}function get(...e){var t=[];for(let a in e)t.push(document.getElementById(e[a]));return 0!=(t=t.filter(e=>e)).length&&(t.length>1?t:t[0])}function getAttributes(e,t,a){var r=document.querySelectorAll(e),n=[];for(let e=0;e<r.length;e++)r[e].getAttribute(t)&&n.push(r[e].getAttribute(t));return a?n.join(a):n}function resizeObj(e,t,a){if("height"==a)var r=20;else r=0;var n=parseInt(e.value.replace("px",""))+r,o=document.getElementById("ctnr_"+t)||document.getElementById(t+"dv2")||document.getElementById(t+"_gr");"height"==a&&(o.parentNode.style.setProperty(a,n+"px"),o.style.setProperty(a,n+"px")),"height"==a&&o.style.setProperty("max-height",n+"px"),"width"==a&&o.style.setProperty(a,n+"px"),renderChart(t)}function copyToClipBoard(e){e.previousElementSibling.firstElementChild.select(),document.execCommand("copy"),alerta("feed-fixo","Token copiado")}function browserQuickEdit(e,t,a,r,n){if(e.value!=e.getAttribute("data-d")){e.nextElementSibling.classList.add("loading"),e.classList.add("readonly");var o=document.getElementById("data_list").className,l=e.value,i=e.getAttribute("data-d");switch(n){case"number":l=l.replace(/\./g,"").replace(",","."),i=i.replace(/./g,"").replace(",",".")}call("browserEditLine","prm_tabela="+a+"&prm_chave="+getAttributes("#"+t+" .chave","data-d","|")+"&prm_campo="+getAttributes("#"+t+" .chave","data-n","|")+"&prm_nome="+r+"&prm_conteudo="+l+"&prm_ant="+i+"&prm_tipo="+n+"&prm_obj="+o,"bro").then(function(t){e.nextElementSibling.classList.remove("loading"),e.nextElementSibling.classList.add("ok"),alerta("feed-fixo",TR_AL),e.setAttribute("data-default",e.value),setTimeout(function(){e.classList.remove("readonly"),e.nextElementSibling.classList.remove("ok")},2e3)})}}function browserEditColumn(e){var t=e.parentNode,a=e.parentNode.parentNode,r=document.getElementById("B"+e.getAttribute("data-c")).getAttribute("data-recarrega");if(e.classList.contains("fakeoption"))var n=e.parentNode.getAttribute("data-v").trim();else{e.hasAttribute("data-t")&&"checkbox"==e.getAttribute("data-t")&&(e.value=e.checked?e.getAttribute("data-valor1"):e.getAttribute("data-valor2"));n=e.value.trim()}var o=!1;if(n!==e.getAttribute("data-a").trim()){var l=[],i=e.parentNode.parentNode.querySelectorAll(".chave");for(let e=0;e<i.length;e++)l.push(encodeURIComponent(i[e].getAttribute("data-d"))),encodeURIComponent(i[e].getAttribute("data-d")).includes("%7C")&&(o=!0);o?(l=l.join("*|*")).includes("*|*")||(l=(l=l.replace(/\|/g,"******")).replace(/\%7C/g,"******")):l=l.join("|"),v_param="prm_obj="+document.getElementById("data_list").getAttribute("data-objeto"),v_param=v_param+"&prm_screen="+tela,v_param=v_param+"&prm_tabela="+document.getElementById("data_list").getAttribute("data-tabela"),v_param=v_param+"&prm_campo_chave="+document.getElementById("browser-chave").value,v_param=v_param+"&prm_chave="+l,v_param=v_param+"&prm_tipo="+e.getAttribute("data-t"),v_param=v_param+"&prm_campo="+e.getAttribute("data-c"),v_param=v_param+"&prm_conteudo="+encodeURIComponent(n),e.classList.toggle("loading"),call("browserEditColumn",v_param,"bro").then(function(o){if(alerta("",o.split("|")[1]),"ERRO"==o.split("|")[0])e.classList.contains("fakeoption")?(e.setAttribute("data-v",e.getAttribute("data-a")),e.innerHTML=e.getAttribute("data-a")):e.value=e.getAttribute("data-a");else{if(e.setAttribute("data-a",n),t.setAttribute("data-d",n),"CAMPO SEM DESTAQUE"!=o.split("|")[2]&&(o.split("|")[2].length>0?t.style.cssText=o.split("|")[2]:(t.style.backgroundColor=null,t.style.color=null),e.style.cssText=t.style.cssText),"CAMPO SEM DESTAQUE"!=o.split("|")[3]){var l=a.querySelectorAll("style");for(s of l)-1==s.innerText.toLowerCase().indexOf("td input")&&-1==s.innerText.toLowerCase().indexOf("destaqueicon")||a.removeChild(s);var i=o.split("|")[3].replace(/#@ID@#/g,a.id);if(i.length>0)for(txt of i.split("<style>"))if(txt.trim().length>0){var s=document.createElement("style");s.innerText=txt.replace("</style>",""),a.appendChild(s)}}"S"===r&&browserSearch("BUSCA",document.getElementById("ajax").lastElementChild.className||"")}e.classList.toggle("loading")})}}function browserInputMask(e,t,a){var r=e.selectionStart;if("data"==t||"datatime"==t){var n=a.toUpperCase().replace("DD","99").replace("MM","99").replace("YYYY","9999").replace("YY","99").replace("HH24","99").replace("HH","99").replace("MI","99").replace("SS","99");e.value=VMasker.toPattern(e.value,n),"/"!=e.value[r-1]&&":"!=e.value[r-1]||(r+=1),e.setSelectionRange(r,r)}if("number"==t){var o=a.toUpperCase().replace("G",".").replace("D",",");o=o.split(",")[1]?o.split(",")[1].length:0,VMasker(e).maskMoney({precision:parseInt(o),separator:",",delimiter:".",showSignal:!0}),e.addEventListener("keydown",function(t){if("Backspace"===t.key){var a=e.selectionStart;e.value="",e.setSelectionRange(a-1,a-1)}})}}document.addEventListener("keyup",function(e){var t=e.target;if(t.parentNode.classList.contains("search")){var a=t.parentNode.parentNode.parentNode;fakeboxevent(a.id,a.getAttribute("data-opcao"),a.title,"N",a.getAttribute("data-visao"),a.getAttribute("data-reverse"),a,a.children[0].getAttribute("data-fixed").length,t.value,"")}t.parentNode.classList.contains("custom")&&13==e.which&&t.nextElementSibling.click(),t.classList.contains("errorinput")&&(t.getAttribute("data-min")?t.value.length>=parseFloat(t.getAttribute("data-min"))&&t.classList.remove("errorinput"):t.classList.remove("errorinput"))}),document.addEventListener("change",function(e){var t=e.target;if(t.parentNode.classList.contains("columnline")&&t.classList.contains("listener")&&t.value!=t.getAttribute("data-default")){var a=document.getElementById("micro-visao").title,r=document.getElementById("ajax-lista").querySelector(".selected").title,n=t.parentNode,o=encodeURIComponent(t.value);if("S"!=t.getAttribute("data-search")){let e=n.getAttribute("data-campo");call("save_column","prm_visao="+a+"&prm_name="+r+"&prm_campo="+e+"&prm_valor="+o+"&prm_screen="+tela).then(function(a){"FORMULA"==e?(alerta("feed-fixo",a.split("|")[1]),"ERRO"!=a.split("|")[1]&&t.setAttribute("data-default",t.value),a.split("|")[2].length>0?(t.style.setProperty("color","var(--vermelho-secundario)"),document.getElementById("erro_coluna_formula").innerHTML=a.split("|")[2]+"."):(t.style.setProperty("color","initial"),document.getElementById("erro_coluna_formula").innerHTML="")):-1==a.indexOf("#alert")?(alerta("feed-fixo",a),t.setAttribute("data-default",t.value)):alerta("feed-fixo",TR_ER)})}}if(t.classList.contains("user-password")){var l=t.parentNode.parentNode.id.replace("linha","");t.value.trim().length>3?confirm(TR_CM)&&(ajax("fly","save_pwd","prm_senha="+encodeURIComponent(t.value)+"&prm_senha2="+encodeURIComponent(t.value)+"&prm_email=&prm_number=&prm_user="+l+"&prm_nome="),t.value=""):alerta("msg",TR_SE_LE)}if(t.classList.contains("vsis-input")){var i=(l=t.parentNode.parentNode).getAttribute("data-default"),s=l.getAttribute("data-usuario");t.value!=i&&call("edit_vconteudo","prm_variavel="+encodeURIComponent(l.title)+"&prm_conteudo="+encodeURIComponent(t.value)+"&prm_usuario="+s).then(function(e){-1==e.indexOf("#alert")?(alerta("","Valor alterado com sucesso!"),l.setAttribute("data-default",t.value)):alerta("",e.replace("#alert ",""))})}if(t.classList.contains("ordem")&&t.parentNode.classList.contains("grafico")){let e=t.parentNode.id,a=(document.getElementById("dados_"+e),document.getElementById(e).querySelector(".agrupador_troca"));a&&"null"!=a.value&&"N/A"!=a.value?renderChartDirect(e):call("alter_attrib","prm_objeto="+e+"&prm_prop=ORDEM&prm_value="+t.value+"&prm_usuario="+USUARIO+"&prm_screen="+tela.trim()).then(function(t){-1==t.indexOf("alert")&&renderChartDirect(e)})}if(t.classList.contains("agrupador_troca")&&t.parentNode.classList.contains("grafico")){let e=t.parentNode.id,a=document.getElementById("dados_"+e),r=a.getAttribute("data-agrupadoresreal"),n=document.getElementById(e).querySelector(".ordem");for(let e=0;e<n.length;e++){let t=n.options[e].value.substring(2,200);" "!=t.indexOf(" ")&&(t=t.substring(0,t.indexOf(" "))),-1!=r.indexOf(t)&&"N/A"!=n.options[e].value&&(n.remove(e),e-=1)}var d=document.createElement("option");d.value="r_"+t.value+" ASC",d.innerHTML=t.options[t.selectedIndex].text+" crescente",n.appendChild(d),(d=document.createElement("option")).value="r_"+t.value+" DESC",d.innerHTML=t.options[t.selectedIndex].text+" decrescente",n.appendChild(d),a.setAttribute("data-agrupador_troca",t.value),a.setAttribute("data-agrupadoresreal",t.value),a.setAttribute("data-agrupadores",t.options[t.selectedIndex].text),renderChartDirect(e)}}),document.addEventListener("change",function(e){if("data-coluna"==e.target.id){let t=e.target.options[e.target.selectedIndex].getAttribute("data-tipo");"ligacao"==t||"ligacaoc"==t||"listboxp"==t||"listboxt"==t||"listboxtd"==t||"listboxtcd"==t?(document.getElementById("data_list").children[1].classList.add("ligacao"),document.getElementById("browser-condicao").nextElementSibling.id=e.target.value,document.getElementById("browser-condicao").nextElementSibling.title="",document.getElementById("browser-condicao").nextElementSibling.children[0].innerHTML=""):("nulo"!=document.getElementById("browser-condicao").value&&"nnulo"!=document.getElementById("browser-condicao").value&&document.getElementById("data_list").children[1].classList.add("ligacao"),document.getElementById("data_list").children[1].classList.remove("ligacao"))}}),document.addEventListener("keypress",function(e){var t=e.which,a=e.target;return"boxemail"==a.id?-1!="abcdefghijklmnopqrstuvwxyzçABCDEFGHIJKLMNOPQRSTUVWXYZÇ@._1234567890".indexOf(String.fromCharCode(t))||(e.preventDefault(),!1):"boxcelular"==a.id?(VMasker(document.getElementById("boxcelular")).maskPattern("(99) 999999999999"),a.value.length>17?(e.preventDefault(),!1):-1!="1234567890".indexOf(String.fromCharCode(t))||(e.preventDefault(),!1)):void 0}),document.addEventListener("click",function(e){var t=e.target;if(t.parentNode&&t.parentNode.parentNode){var a=t.parentNode.parentNode,r="";if(t.classList.contains("remove")&&a){var n=t.getAttribute("data-require"),o=t.getAttribute("data-param"),l=t.getAttribute("data-valor"),i=t.getAttribute("data-decode"),s=t.getAttribute("data-objeto"),d=t.getAttribute("data-pkg")||"FCL";if(!n)return!1;if(get("attriblist").classList.contains("open")&&get("attriblist").classList.remove("open"),document.getElementById(s)){if("ARTICLE"==document.getElementById(s).parentNode.tagName)var c=document.getElementById(s).parentNode.id;else c=tela;r="prm_cod="+s+"&prm_tela="+c}else{if("remove_image"===n&&l.includes("|")&&l.indexOf("|")!==l.lastIndexOf("|")){var m=l.split("|");if(m.length>1){var u=m.shift();u.endsWith("*")&&(u=u.slice(0,-1));var p=m.join("|");p.startsWith("*")&&(p=p.slice(1));var g=[u,p]}}else if(l.includes("*|*"))g=l.split("*|*");else g=l.split("|");var f=o.split("|"),_=[];for(let e=0;e<f.length;e++)i==e?_.push(f[e]+"="+encodeURIComponent(g[e])):_.push(f[e]+"="+g[e]),r=_.join("&")}confirm(TR_CE)&&(a.classList.add("removing"),call(n,r,d).then(function(e){if(-1==e.indexOf("FAIL")&&e.indexOf("ERRO|"))if(alerta("feed-fixo",TR_EX),"favoritar"==n.toLowerCase()&&(document.getElementById("id_atualizar_menu").value="S"),"LI"==t.parentNode.tagName)t.parentNode.remove();else if("DIV"==t.parentNode.tagName&&"content"==t.parentNode.id){var r=document.getElementById("micro-visao").title;document.getElementById("content").innerHTML="",ajax("list","load_crocks","prm_visao="+r+"&prm_completo=N","true","ajax-lista")}else if(document.getElementById("custom-conteudo")){let e=document.getElementById("lista-custom-fav");e.title="",e.children[0].innerHTML="CONSULTA ATUAL";e.previousElementSibling;restoreCustom(e.previousElementSibling)}else a.remove(),document.getElementById(s)&&document.getElementById(s).remove();else a.classList.remove("removing"),document.getElementById(s)&&document.getElementById(s).classList.remove("removing"),-1!=e.indexOf("ERRO|")?alerta("",e.split("|")[1],"","ERRO"):alerta("",TR_ER,"","ERRO")}))}}}),document.addEventListener("click",function(e){var t=e.target;if(t.parentNode&&t.parentNode.id){var a=t.parentNode.id;if(t.classList.contains("com_modal")&&call("modal","prm_id="+a,"com").then(function(e){document.getElementById("modal-box").innerHTML=e}).then(function(){setTimeout(function(){document.getElementById("modal"+a).classList.add("expanded")},200),pellLaunch(a)}),t.classList.contains("com_enviar")){if("ENVIAR"==t.title.toUpperCase()){var r=t.children[0];r.classList.add("readonly"),call("sendReport","prm_chamada=BI&prm_id_report="+a,"COM").then(function(e){alerta("feed-fixo",e.split("|")[1]),r.classList.remove("readonly"),t.parentNode.querySelector("#td_report_status").querySelector("#span_report_status").className="com_status com_status_aguardando"})}"FILTROS"==t.title.toUpperCase()&&carregaTelasup("reportFilter","prm_report="+a,"COM","filtror","ID|"+a,"",""),"AGENDAMENTO"==t.title.toUpperCase()&&carregaTelasup("reportSchedule","prm_id="+a,"COM","report_schedule","","",""),"LOG"==t.title.toUpperCase()&&carregaTelasup("reportLog","prm_id="+a,"COM","","","","")}}});var fakescrollm=0;function proxCampo(e,t){"Enter"==e.code&&t.parentNode.nextElementSibling.children[0].focus()}function createFakescroll(e){var t;e.querySelector(".fakescroll")?t=e.querySelector(".fakescroll"):((t=document.createElement("span")).className="fakescroll",e.appendChild(t));var a=100*e.clientHeight/e.scrollHeight;e.parentNode.clientHeight,e.clientHeight,e.clientHeight,e.parentNode.clientHeight,e.parentNode.querySelector(".fakescroll").style,e.children[0].style;t.style.setProperty("height","calc("+a+"% - 5px)"),e.addEventListener("scroll",function(){var t=e.clientHeight/e.scrollHeight+1,a=e.clientHeight/document.body.clientHeight;document.querySelector(".fakescroll").style.setProperty("margin-top",this.scrollTop*t/a+"px")}),t.addEventListener("touchstart",function(e){e.stopPropagation(),fakescrollm=1}),t.addEventListener("mousedown",function(e){e.stopPropagation(),fakescrollm=1}),t.addEventListener("mouseup",function(e){e.stopPropagation(),fakescrollm=0}),t.addEventListener("mouseleave",function(e){e.stopPropagation(),fakescrollm=0}),t.addEventListener("mousemove",function(a){1==fakescrollm&&a.clientY<=e.scrollHeight-e.parentNode.offsetHeight+20&&(a.style.setProperty("margin-top","-"+2*a.layerY+"px"),t.style.setProperty("margin-top",2*a.layerY+"px"))})}barheight="";var fakeListCustom={},menu={};function marcadorEvent(e,t,a){switch(e){case"onblur":if(t.classList.contains("script")&&t.nextElementSibling.classList.contains("fakeoption")&&(t=t.nextElementSibling),t.classList.contains("fakeoption"))var r=t.title,n="",o=t.getAttribute("data-adicional");else r=t.value,n=t.getAttribute("data-ant"),o=t.getAttribute("data-coluna");if("INPUT"==t.tagName&&"checkbox"==t.type&&(r=1==t.checked?"bold":""),n!=r)call("update_mapa_marcador","prm_chave="+encodeURIComponent(a)+"&prm_campo="+o+"&prm_conteudo="+encodeURIComponent(r),"fcl").then(function(e){if(alerta("",e.split("|")[1]),"ERRO"!=e.split("|")[0]){t.setAttribute("data-ant",r);var a=t.parentNode.parentNode.children[7].children[0];if("INPUT"==t.tagName&&("color"==t.type?(t.nextElementSibling.value=r,t.nextElementSibling.setAttribute("data-ant",r),a.style.setProperty("fill",r)):t.previousElementSibling&&"color"==t.previousElementSibling.type&&(t.previousElementSibling.value=r,t.previousElementSibling.setAttribute("data-ant",r),a.style.setProperty("fill",r)),"svg_fillopacity"==o.toLowerCase()&&a.style.setProperty("fill-opacity",r.replace(",",".")),"svg_path"==o.toLowerCase()&&a.children[0].setAttribute("d",r)),"img_url"==o.toLowerCase()){var n=(a=t.parentNode.parentNode.children[7].children[0]).getAttribute("src").toLowerCase();n=-1!=n.indexOf("fcl.download")?n.substring(0,n.indexOf("=")+1)+r:r,a.setAttribute("src",n)}}});break;case"remove":if(confirm("Confirma a exclusão do marcador?")){var l=t.parentNode.parentNode;l.classList.add("removing"),call("delete_mapa_marcador","prm_chave="+encodeURIComponent(a)).then(function(e){alerta("",e.split("|")[1]),"ERRO"!=e.split("|")[0]?l.remove():l.classList.remove("removing")})}}}function notice_popup_open(e,t){"INICIO"==t||"MENU"==t?call("notice_popup_mount","prm_tipo="+t).then(function(e){if("ERRO"==e.split("|")[0])alerta("feed-fixo",e.split("|")[1]);else{var t=document.getElementById("extra"),a=document.createElement("div");a.innerHTML=e,t.querySelector("#blockpage")&&t.querySelector("#blockpage").remove(),t.appendChild(a.children[0])}}):call("notice_popup_mount","prm_aviso="+e+"&prm_tipo="+t).then(function(e){"ERRO"==e.split("|")[0]?alerta("feed-fixo",e.split("|")[1]):document.getElementById("blockpage").innerHTML=e})}function notice_refresh_count(){document.getElementById("notice-menup-count")&&call("notice_ret_count").then(function(e){"ERRO"==e.split("|")[0]?alerta("feed-fixo",e.split("|")[1]):(document.getElementById("notice-menup-count").innerHTML=e,"0"==e?(document.getElementById("notice-menup-circle").style.visibility="hidden",document.getElementById("notice-menup-count").style.visibility="hidden"):"slide-A"==document.getElementById("princp").className||document.querySelector('a[title="Configurações"]')?(document.getElementById("notice-menup-circle").style.visibility="visible",document.getElementById("notice-menup-count").style.visibility="visible"):(document.getElementById("notice-menup-circle").style.visibility="visible",document.getElementById("notice-menup-count").style.visibility="visible",document.getElementById("notice-menup-circle").style.setProperty("right","37px"),document.getElementById("notice-menup-count").style.setProperty("right","41px")))})}function ampliar_img(e,t){if(document.getElementById("sizeUp"))document.getElementById("sizeUp").remove();else{if(zoomImg=document.createElement("img"),zoomImg.id="sizeUp",zoomImg.src=t,zoomImg.naturalWidth<window.outerWidth||zoomImg.naturalHeight<window.outerHeight){var a=window.innerWidth/2,r=window.innerHeight/2,n=a-zoomImg.naturalWidth/2+"px",o=r-zoomImg.naturalHeight/2+"px";zoomImg.style.setProperty("left",n),zoomImg.style.setProperty("top",o)}else zoomImg.style.setProperty("inset","50px"),zoomImg.style.setProperty("width","calc(100% - 100px)"),zoomImg.style.setProperty("height","calc(100% - 100px)");document.body.appendChild(zoomImg)}}function limpar_filter(e,t,a){var r=document.getElementById("padrao_"+e),n="";r?n="padrao":(r=document.getElementById("data_id_"+e))&&(n="input"),""!=n&&("padrao"==n&&"fakeoption multi open"==r.className&&r.click(),setTimeout(()=>{call("limpar_float_filter","prm_filtro="+e+"&prm_usuario="+a+"&prm_screen="+t).then(function(e){-1==e.indexOf("Erro")?(alerta("feed-fixo","Alterado com sucesso"),document.getElementById("get_float").setAttribute("data-alterado","T"),"padrao"==n?(r.setAttribute("data-default",""),r.setAttribute("title",""),r.firstElementChild.innerHTML="  -",r.classList.remove("reverse")):r.value=""):alerta("feed-fixo","Sem opções selecionadas")})},300))}function anotacao_show(e,t){if(get("jumpdrill")&&get("jumpdrill").remove(),get("anotacao_show"))return get("anotacao_show").remove(),void(get("selecteddata")&&(get("selecteddata").id=""));var a,r,n="normal",o=get("selecteddata"),l=o.getBoundingClientRect();(a=l.left+5+o.clientWidth/2-160)+320>MAIN.clientWidth&&(a=MAIN.clientWidth-320-5),r="top: "+(l.top+(o.clientHeight+4))+"px;",l.top+(o.clientHeight+12)+111>PRINCP.clientHeight&&(r="bottom: "+(PRINCP.getBoundingClientRect().height-get("selecteddata").getBoundingClientRect().top+4)+"px;",n="reverse");let i=0;get(t+"c").children[0].children.length>1&&(i=get(t+"c").children[0].children[0].querySelectorAll(".colagr").length);var s=o.cellIndex-i,d="";get(t+"c").children[0].lastElementChild.querySelectorAll("th")[s]&&(d=get(t+"c").children[0].lastElementChild.querySelectorAll("th")[s].getAttribute("data-valor"));let c=315-(o.clientWidth/2-6)-(MAIN.clientWidth-l.right);c<154&&(c=0),c>=285&&(c=285),a<=0&&(a=2,c=l.left+o.clientWidth/2-6);let m=[];m.push(get("par_"+t).value),m.push(get("drill_go").value);let u=[...new Set(m.sort())].filter(e=>e).join("|");u=u.replace("||","|");let p="";void 0!==d&&"undefined"!=d&&(p=d),call("anotacao_show","prm_objeto="+t+"&prm_screen="+tela+"&prm_coluna="+p+"&prm_condicao="+u).then(function(e){let t=document.createElement("div");t.innerHTML=e,t.children[0].setAttribute("style","left: "+a+"px; "+r),c>0&&t.children[0].style.setProperty("--left",c.toString()+"px"),MAIN.appendChild(t.children[0])}).then(function(){var e=get("anotacao_show");e.classList.add(n),setTimeout(function(){e.querySelector(".fechartab").addEventListener("click",function(){this.parentNode.remove(),get("selecteddata")&&(get("selecteddata").id="")}),get("selecteddata")&&(get("selecteddata").id=""),e.classList.add("open")},10)})}function valida_formula(e,t,a){var r=document.getElementById("micro-visao").title,n=document.getElementById("ajax-lista").querySelector(".selected").title,o=document.getElementById("formula-coluna");call("valida_formula_navegador","prm_tipo=COLUNA&prm_formula="+encodeURIComponent(o.value)+"&prm_screen="+tela+"&prm_visao="+r+"&prm_coluna="+n).then(function(e){"ERRO"==e.split("|")[0]?(o.style.setProperty("color","var(--vermelho-secundario)"),document.getElementById("erro_coluna_formula").innerHTML=e.split("|")[1]+".",alerta("feed-fixo","F&oacute;rmula com erro")):(o.style.setProperty("color","initial"),document.getElementById("erro_coluna_formula").innerHTML="",alerta("feed-fixo","F&oacute;rmula OK"))})}function mobile_portrait_layout(){return!!(window.innerWidth<=500&&window.matchMedia("(orientation: portrait)").matches)}function clone_object(e){confirm(TR_CL_OB)&&call("clone_object_navegador","prm_objeto="+e.split("trl")[0]).then(function(e){if(alerta("feed-fixo",e.split("|")[1]),"OK"==e.split("|")[0]){fastInclude(e.split("|")[2],e.split("|")[3])}})}function clone_screen(e){confirm(TR_CL_SC)&&call("clone_screen","prm_screen="+e).then(function(e){if(alerta("feed-fixo",e.split("|")[1]),"OK"==e.split("|")[0]&&confirm(TR_CL_SC2)){shscr(e.split("|")[2])}})}function copfilter(e){var t=document.getElementById("prm_visao"),a=document.getElementById("prm_conteudo"),r=document.getElementById("prm_condicao"),n=document.getElementById("prm_coluna"),o=document.getElementById("prm_usuario_origem"),l=document.getElementById("filtrou");"CopiarUsuario"==e?(l.setAttribute("data-req","copfiltro"),l.setAttribute("data-par","prm_usuario|prm_usuario_origem"),l.textContent="COPIAR FILTRO",l.title="Copiar filtro",t.style.setProperty("display","none"),a.style.setProperty("display","none"),r.style.setProperty("display","none"),n.style.setProperty("display","none"),o.style.setProperty("display","block")):(t.style.setProperty("display","block"),a.style.setProperty("display","block"),r.style.setProperty("display","block"),n.style.setProperty("display","block"),o.style.setProperty("display","none"),l.setAttribute("data-req","setfiltro"),l.setAttribute("data-par","prm_usuario|prm_visao|prm_coluna|prm_condicao|prm_conteudo"),l.textContent="ADICIONAR FILTRO",l.title="Adicionar")}function obterHoraAtualizada(){var e=new Date,t=e.getHours(),a=e.getMinutes();return t.toString().padStart(2,"0")+"h"+a.toString().padStart(2,"0")}function hexToRgba(e,t,a){var r=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16);return a>0&&(r=parseInt(r*a),n=parseInt(n*a),o=parseInt(o*a),r=Math.round(r>0?r:0),n=Math.round(n>0?n:0),o=Math.round(o>0?o:0),r=Math.round(r<255?r:255),n=Math.round(n<255?n:255),o=Math.round(o<255?o:255)),"rgba("+r+","+n+","+o+","+t+")"}function uploadevoltarbotoes(e,t){switch(e){case"upload":var a=document.getElementById("import-tabela-ut").value;document.getElementById("titulo").innerHTML="UPLOAD",call_save(""),curtain("enabled"),carregaPainel("upload","VOLTAR"+a),carrega("uploaded");break;case"voltar":var r=document.getElementById("painel");call("main","prm_modelo="+t,"imp").then(function(e){document.getElementById("content").innerHTML=e}),call("menu","prm_menu=import").then(function(e){r.innerHTML=e})}}function obterHoraAtualizada(){var e=new Date,t=e.getHours(),a=e.getMinutes();return t.toString().padStart(2,"0")+"h"+a.toString().padStart(2,"0")}function modal_txt_sup(e,t,a){if(0==t.length)return;let r="N";call("modal_txt_sup","prm_txt="+encodeURIComponent(t),"fun").then(function(e){document.getElementById("modal-txt").innerHTML=e,"ERRO"==e.split("|")[0]&&(alerta("",e.split("|")[1]),r="S")}).then(function(){"N"==r&&setTimeout(function(){let r=document.getElementById("modal-txt-content"),n=document.getElementById("telasup");a||(a="mouse"),t.length<200&&t.length>70&&(document.getElementById("modal-txt-input").style.width="500px"),r.clientWidth>1200&&(r.style.width="1200px"),r.clientWidth>n.clientWidth-100&&(r.style.width=(n.clientWidth-100).toString()+"px"),r.clientHeight>500&&(r.style.height="500px"),r.clientHeight>n.clientHeight-100&&(r.style.height=(n.clientHeight-50).toString()+"px"),posiciona_modal(r,n,e.clientX,e.clientY,a),r.classList.add("expanded")},200)})}function posiciona_modal(e,t,a,r,n){let o=e.clientHeight,l=e.clientWidth,i=1,s=1,d=0,c=0;t&&""!=t?(d=t.clientWidth,tela_altura=t.clientHeight,c=getComputedStyle(t).marginLeft.replace("px","")):(d=PRINCP.clientWidth,tela_altura=PRINCP.clientHeight,c=0),"mouse"==n?((i=r-o-60)<=0&&(i=1),(s=a-c-l/2)<=0&&(s=1),s+l>d&&(s=d-l-5)):(((i=(tela_altura-o)/2)<=0||"top-center"==n)&&(i=1),s=(d-l)/2),e.style.setProperty("top",i+"px"),e.style.setProperty("left",s+"px")}function etl_conexoes_teste(e,t){e.classList.add("executando"),call("etl_conexoes_teste","prm_id_conexao="+encodeURIComponent(t),"etl").then(function(t){e.classList.remove("executando"),alerta("",t.split("|")[1],"",t.split("|")[0])})}function obterHoraAtualizada(){var e=new Date,t=e.getHours(),a=e.getMinutes();return t.toString().padStart(2,"0")+"h"+a.toString().padStart(2,"0")}function modal_txt_sup(e,t,a){if(0==t.length)return;let r="N";call("modal_txt_sup","prm_txt="+encodeURIComponent(t),"fun").then(function(e){document.getElementById("modal-txt").innerHTML=e,"ERRO"==e.split("|")[0]&&(alerta("",e.split("|")[1]),r="S")}).then(function(){"N"==r&&setTimeout(function(){let r=document.getElementById("modal-txt-content"),n=document.getElementById("telasup");a||(a="mouse"),t.length<200&&t.length>70&&(document.getElementById("modal-txt-input").style.width="500px"),r.clientWidth>1200&&(r.style.width="1200px"),r.clientWidth>n.clientWidth-100&&(r.style.width=(n.clientWidth-100).toString()+"px"),r.clientHeight>500&&(r.style.height="500px"),r.clientHeight>n.clientHeight-100&&(r.style.height=(n.clientHeight-50).toString()+"px"),posiciona_modal(r,n,e.clientX,e.clientY,a),r.classList.add("expanded")},200)})}function posiciona_modal(e,t,a,r,n){let o=e.clientHeight,l=e.clientWidth,i=1,s=1,d=0,c=0;t&&""!=t?(d=t.clientWidth,tela_altura=t.clientHeight,c=getComputedStyle(t).marginLeft.replace("px","")):(d=PRINCP.clientWidth,tela_altura=PRINCP.clientHeight,c=0),"mouse"==n?((i=r-o-60)<=0&&(i=1),(s=a-c-l/2)<=0&&(s=1),s+l>d&&(s=d-l-5)):(((i=(tela_altura-o)/2)<=0||"top-center"==n)&&(i=1),s=(d-l)/2),e.style.setProperty("top",i+"px"),e.style.setProperty("left",s+"px")}function etl_conexoes_teste(e,t){e.classList.add("executando"),call("etl_conexoes_teste","prm_id_conexao="+encodeURIComponent(t),"etl").then(function(t){e.classList.remove("executando"),alerta("",t.split("|")[1],"",t.split("|")[0])})}function imprimir_pagina(e){var t=muda_regra_iframe(),a=move_dashboards_fixos();if(null==e&&document.getElementById("main")&&document.getElementById("main").children.length>0){for(c in document.getElementById("main").children)if(document.getElementById("main").children[c].id){if(document.getElementById("main").children[c].id.startsWith("SECTION")){e="main";break}if(document.getElementById("main").children[c].id.endsWith("data_list")){e=document.getElementById("main").children[c].id;break}}null==e&&(e="main")}var r=document.getElementById(e),n=r.currentStyle||window.getComputedStyle(r),o=r.offsetWidth+parseFloat(n.marginLeft)+parseFloat(n.marginRight)+2,l=r.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom)+2,i={margin:1,filename:"data_list"===e?"browser.pdf":"dashboard.pdf",image:{type:"png"},enableLinks:!1,pagebreak:{mode:["avoid-all"]},html2canvas:{allowTaint:!0,useCORS:!0,scrollY:0,scrollX:0,removeContainer:!1,logging:!0,ignoreElements:e=>!(!e.classList.contains("font-size")||"INPUT"!=e.tagName)||!(!e.classList.contains("frame")||"IFRAME"!=e.tagName),onclone:(t,a)=>{if(t.getElementById("main").querySelector("div:not([class],[id])")){let e=t.getElementById("main").querySelector("div:not([class],[id])");""===e.innerHTML&&"main"===e.parentNode.id&&t.getElementById("main").querySelector("div:not([class],[id])").remove()}"data_list"!==e&&onclone_arrumar_outline(t)}},jsPDF:{orientation:"landscape",unit:"px",hotfixes:["px_scaling"],format:[o,l]}};alerta("msg","Iniciando exporta&ccedil;&atilde;o");var s=html2pdf();return(s=s.set(i).then(loading()).from(r)).save().then(()=>{muda_regra_iframe(t),move_dashboards_fixos(a),loading(),alerta("msg","PDF gerado com sucesso!")},e=>{muda_regra_iframe(t),move_dashboards_fixos(a),loading(),alerta("msg","Erro gerando PDF!","","ERRO"),console.log(e)})}function move_dashboards_fixos(e){if(null==e){let e=[],t=document.getElementById("main").children;for(let a of t)a.style.top&&(e.push({id:a.id,propName:"top",prop:a.style.top}),a.style.removeProperty("top")),a.style.bottom&&(e.push({id:a.id,propName:"bottom",prop:a.style.bottom}),a.style.removeProperty("bottom")),a.style.position&&(e.push({id:a.id,propName:"position",prop:a.style.position}),a.style.position="relative");return e}for(let t of e)document.getElementById(t.id).style.setProperty(t.propName,t.prop)}function onclone_arrumar_outline(e){var t;e.getElementById("main").style.paddingTop="0px";let a=e.getElementsByTagName("table");for(let e of a){let a=e.getElementsByTagName("tr");for(let e of a){let a=e.getElementsByTagName("th"),r=e.getElementsByTagName("td"),n=window.getComputedStyle(e).backgroundColor;for(let e of a)t=window.getComputedStyle(e).outlineColor,e.style.outline="none",e.style.outlineOffset="none",e.style.borderColor=t,e.style.borderTopWidth="1px",e.style.borderTopStyle="solid",e.style.top="0px",e.style.backgroundColor=window.getComputedStyle(e).backgroundColor;for(let a of r)t=window.getComputedStyle(a).outlineColor,a.style.outline="none",a.style.outlineOffset="none",""!==a.style.backgroundColor||e.classList.contains("total")?a.style.backgroundColor=window.getComputedStyle(a).backgroundColor:a.style.backgroundColor=n;e.style.setProperty("background-color","transparent")}e.setAttribute("border","0"),e.setAttribute("borderspacing","1"),e.setAttribute("cellpadding","1"),e.parentElement.style.backgroundColor=t}return e}function muda_regra_iframe(e){if(null==e){e=[];for(let t of document.styleSheets)try{for(let a=0;a<t.cssRules.length;a++){let r=t.cssRules[a];r instanceof CSSStyleRule&&(-1!=r.selectorText.indexOf("iframe")&&"none"==r.style.display&&(e.push(r),t.cssRules[a].style.removeProperty("display")))}}catch(e){continue}}else for(let t of e)t.style.display="none";return e}function aviso_mostrar_novamente(e){call("aviso_mostrar_novamente","prm_id_aviso="+e.getAttribute("data-valor"),"cfg").then(function(e){alerta("",e.split("|")[1],"",e.split("|")[0]),-1!=e.indexOf("OK")&&call("avisos","","cfg").then(e=>{document.getElementById("content").innerHTML=e})})}function atualizar_aviso(e,t,a){var r=a.value||a.title;"A"==a.tagName&&(r=document.getElementById(t+"_"+e).title),call("atualizar_aviso","prm_id_aviso="+e+"&prm_cd_coluna="+t+"&prm_conteudo="+r,"cfg").then(function(e){alerta("",e.split("|")[1],"",e.split("|")[0]),("OK"!==e.split("|")[0]||"OK"===e.split("|")[0]&&-1!==t.indexOf("prm_tp_conteudo"))&&call("avisos","","cfg").then(e=>{document.getElementById("content").innerHTML=e})})}function notice_popup_go_to(e){call("ir_para_tela_aviso","prm_cd_tela="+e,"cfg").then(function(t){alerta("",t.split("|")[1],"",t.split("|")[0]),"OK"===t.split("|")[0]&&(shscr(e),document.getElementsByClassName("notice-close-popup")[0].click())})}async function uploadArquivos(e,t){var a=document.getElementById(t||"arquivos").files,r=a.length,n=0,o=OWNER_BI+".upload.upload";if(document.getElementById("btnUploadArquivos")){var l=document.getElementById("btnUploadArquivos");r>0&&(l.style.display="none")}for(var i=0;i<r;i++){var s=a[i],d=r-n;d>0&&alerta("msg","Enviando arquivo: "+s.name+", "+d+"/"+r+" arquivos.."),null==e&&(e="A"==ADMIN?"DWU":USUARIO),await enviarArquivo(s,o,e),n++}}function mostrarArquivosSelecionados(e,t){var a=document.getElementById(t||"arquivos").files,r=a.length,n=document.getElementById(e||"escolherArquivoButton");if(r>1){for(var o="",l=0;l<r;l++)o+=a[l].name+"\n";n.title=o,n.innerHTML=r+" ARQUIVOS"}else n.title=a[0].name,n.innerHTML=a[0].name}function enviarArquivo(e,t,a){return new Promise(function(r,n){var o=new XMLHttpRequest;o.open("POST",t,!0),o.onload=function(){var e=document.createElement("script");e.innerHTML=o.responseText,document.body.appendChild(e),r()},o.onerror=function(){n(o.statusText)};var l=new FormData;l.append("arquivo",e),l.append("prm_usuario",a),o.send(l)})}menu.usuarios=function(){let e=document.getElementById("painel"),t=document.createElement("h4");t.innerHTML="USUÁRIOS";let a=document.createElement("input");a.id="login",a.setAttribute("maxlength","40"),a.setAttribute("placeholder","login"),a.style.setProperty("text-transform","uppercase"),a.setAttribute("onkeypress","return input(event, 'login')");let r=document.createElement("input");r.id="nome",r.setAttribute("maxlength","60"),r.setAttribute("placeholder","NOME");let n=document.createElement("input");n.id="email_usuario",n.type="email",n.setAttribute("maxlength","60"),n.setAttribute("placeholder","E-MAIL"),n.setAttribute("onkeypress","return input(event, 'email')");let o=document.createElement("input");o.id="senha",o.type="password",o.setAttribute("placeholder","PASSWORD");let l=document.createElement("a");l.classList.add("addpurple"),l.title="Novo usuário",l.innerHTML=TR_AU,l.setAttribute("onclick","var nome = document.getElementById('nome').value; var login = document.getElementById('login').value; var senha = document.getElementById('senha').value; var permissao = document.getElementById('fake-permissao').title; if(nome.length < 1){ alerta('msg', 'Campo nome de usuário em branco!'); } else { if(login.trim().length < 3){ alerta('msg', 'Campo login precisa ter mais de 3 caracteres!'); } else { if(senha.trim().length < 3){ alerta('msg', 'Campo senha precisa ter mais de 3 caracteres!'); } else { var regex = new RegExp('^[a-zA-Z0-9.]+$'); if(regex.test(login)){ if(document.getElementById('email_usuario').value.length > 0){ call('save_user', 'prm_nome='+login+'&prm_completo='+nome+'&prm_status=&prm_email='+document.getElementById('email_usuario').value+'&prm_senha='+senha+'&prm_permissao='+permissao).then(function(resposta){ if(resposta.indexOf('FAIL') == -1){ alerta('feed-fixo', TR_CR); ajax('list', 'list_users', '', false, 'content'); carregaPainel('usuarios'); } else { alerta('feed-fixo', resposta.replace('FAIL ', '')); } }); } else { noerror('', TR_EI, 'msg'); } } else { alerta('msg', TR_LO_LI); } }}} "),e.appendChild(t),e.appendChild(a),e.appendChild(r),e.appendChild(n),e.appendChild(o),e.appendChild(l)},document.onkeydown=function(e){e=e||window.event;document.getElementById("sizeUp")&&("key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&document.getElementById("sizeUp").remove()},document.addEventListener("mouseup",function(e){var t=document.getElementById("sizeUp");t&&(t.contains(e.target)||document.getElementById("sizeUp").remove())}),document.addEventListener("click",function(e){if("search-mobile"==e.target.id){var t=document.getElementById("panel-default"),a=0;if(t.classList.contains("mostrar")){t.classList.remove("mostrar");for(var r=document.getElementsByTagName("mark"),n=0;n<r.length;n++){var o=r[n],l=o.textContent||o.innerText;o.outerHTML=l}}else{t.classList.add("mostrar");var i=document.querySelector(".form-control.input-sm");i.value="",setTimeout(function(){i.focus()},200);var s=document.querySelector("input[name='keyword']"),d=document.querySelectorAll("input[name='opt[]']");c(),s.addEventListener("input",c);for(n=0;n<d.length;n++)d[n].addEventListener("change",c)}function c(){var e=s.value.trim(),r=new Mark(document.getElementById("main"));r.unmark({done:function(){r.mark(e,{separateWordSearch:!1,done:function(){var r=0,n=l(document.querySelectorAll("#main mark"));function o(){var t=document.getElementById("searchCount");t.textContent=e?0!=a?r+1+"/"+a:"0/0":""}function l(e){return Array.from(e).filter(function(e){return null!==e.offsetParent})}function i(){var e=l(document.querySelectorAll("#main mark"));e.length&&(n.forEach(function(e){e.classList.remove("current")}),++r>e.length-1&&(r=0),o(),e[r].classList.add("current"),e[r].scrollIntoView({block:"center"}))}function d(){t.classList.remove("mostrar");for(var e=document.getElementsByTagName("mark"),a=0;a<e.length;a++){var r=e[a],n=r.textContent||r.innerText;r.outerHTML=n}}a=n.length,o(),i(),document.querySelector("#nextSearch").addEventListener("click",i),s.addEventListener("keydown",function(e){"Enter"!==e.key&&13!==e.keyCode||e.target!==s||i()}),document.querySelector("#backSearch").addEventListener("click",function(){var e=l(document.querySelectorAll("#main mark"));e.length&&(n.forEach(function(e){e.classList.remove("current")}),--r<0&&(r=e.length-1),o(),e[r].classList.add("current"),e[r].scrollIntoView({block:"center"}))}),document.querySelector("#closeSearch").addEventListener("click",d),document.addEventListener("keydown",function(e){"Escape"!==e.key&&27!==e.keyCode||d()})}})}})}}});